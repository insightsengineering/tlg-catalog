[
  {
    "objectID": "listings/other/index.html",
    "href": "listings/other/index.html",
    "title": "Other Listings",
    "section": "",
    "text": "Thank you for your patience. Other listings are coming soon!"
  },
  {
    "objectID": "listings/index.html",
    "href": "listings/index.html",
    "title": "Listings",
    "section": "",
    "text": "Thank you for your patience. Listings are coming soon!"
  },
  {
    "objectID": "listings/pharmacokinetic/index.html",
    "href": "listings/pharmacokinetic/index.html",
    "title": "Pharmacokinetic Listings",
    "section": "",
    "text": "Thank you for your patience. Pharmacokinetic listings are coming soon!"
  },
  {
    "objectID": "graphs/other/mmrmg02.html",
    "href": "graphs/other/mmrmg02.html",
    "title": "MMRMG02",
    "section": "",
    "text": "Data Setup\nComparing Multiple Populations\nSession Info\n\n\n\n\nCodelibrary(scda)\nlibrary(dplyr)\nlibrary(tern.mmrm)\nlibrary(nestcolor)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadqs <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adqs\")\n\nadqs_f <- adqs %>%\n  dplyr::filter(PARAMCD == \"FKSI-FWB\" & !AVISIT %in% c(\"BASELINE\")) %>%\n  droplevels() %>%\n  dplyr::mutate(ARMCD = factor(ARMCD, levels = c(\"ARM B\", \"ARM A\", \"ARM C\"))) %>%\n  dplyr::mutate(\n    AVISITN = rank(AVISITN) %>%\n      as.factor() %>%\n      as.numeric() %>%\n      as.factor()\n  )\n\n# Simulation of groups.\nset.seed(2)\nadqs_f_with_groups <- rbind(\n  within(\n    adqs_f[sample(1:nrow(adqs_f), size = 1 / 2 * nrow(adqs_f)), ],\n    group <- \"subpopulation 1\"\n  ),\n  within(\n    adqs_f,\n    {\n      group <- \"subpopulation 2\"\n      AVAL <- AVAL + rnorm(length(AVAL), mean = 10, sd = 2)\n      USUBJID <- paste0(USUBJID, \"-S2\")\n    }\n  )\n)\nadqs_f_with_groups$group <- factor(adqs_f_with_groups$group)\n\n\n\n\nFor the following part, an MMRM model is fitted for the dataset and from this result forest plots are constructed for each set of subgroups, treatment arm, and visit that is of interest.\nFirst an MMRM model is fitted for the whole dataset.\n\nCodemmrm_results <- fit_mmrm(\n  data = adqs_f_with_groups,\n  vars = list(\n    response = \"AVAL\",\n    covariates = c(),\n    id = \"USUBJID\",\n    arm = \"ARMCD\",\n    visit = \"AVISIT\"\n  ),\n  cor_struct = \"unstructured\",\n  weights_emmeans = \"equal\",\n  parallel = TRUE\n)\n\n\nApplying the tern.mmrm::extract_mmrm_subgroups function prepares the obtained mmrm_results for a specific visit - in this case we use the SCREENING visit - and treatment arm relative to the reference arm. From these results a table is obtained using the tern.mmrm::tabulate_mmrm_subgroups function from which the graphic can be directly obtained with tern::g_forest.\nHere we compare ARM A with the reference arm, ARM B.\n\nCodedf_a <- extract_mmrm_subgroups(\n  fit = mmrm_results,\n  visit = \"SCREENING\",\n  subgroups = c(\"group\", \"SEX\"),\n  treatment_arm = \"ARM A\"\n)\n\ntab_a <- basic_table() %>%\n  tabulate_mmrm_subgroups(\n    df = df_a,\n    vars = c(\"n_tot\", \"diff\", \"ci\", \"pval\")\n  )\n\ng_forest(\n  tab_a,\n  logx = FALSE,\n  xlim = c(-5, 2.5),\n  x_at = c(-5, -2.5, 0, 2.5),\n  vline = 0\n)\n\n\n\n\nThen we compare ARM C with ARM B.\n\nCodedf_c <- extract_mmrm_subgroups(\n  fit = mmrm_results,\n  visit = \"SCREENING\",\n  subgroups = c(\"group\", \"SEX\"),\n  treatment_arm = \"ARM C\"\n)\n\ntab_c <- basic_table() %>%\n  tabulate_mmrm_subgroups(\n    df = df_c,\n    vars = c(\"n_tot\", \"diff\", \"ci\", \"pval\")\n  )\n\ng_forest(\n  tab_c,\n  logx = FALSE,\n  xlim = c(-5, 2.5),\n  x_at = c(-5, -2.5, 0, 2.5),\n  vline = 0\n)\n\n\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n[1] nestcolor_0.1.0.9005 tern.mmrm_0.2.2.9002 tern_0.7.10.9056    \n[4] rtables_0.6.0.1      formatters_0.4.0     magrittr_2.0.3      \n[7] dplyr_1.1.0          scda_0.1.5.9009     \n\nloaded via a namespace (and not attached):\n [1] TMB_1.9.2           tidyselect_1.2.0    xfun_0.37          \n [4] purrr_1.0.1         splines_4.2.2       lattice_0.20-45    \n [7] colorspace_2.1-0    vctrs_0.5.2         generics_0.1.3     \n[10] htmltools_0.5.4     mmrm_0.2.2          yaml_2.3.7         \n[13] utf8_1.2.3          survival_3.5-3      rlang_1.0.6        \n[16] pillar_1.8.1        withr_2.5.0         glue_1.6.2         \n[19] emmeans_1.8.4-1     lifecycle_1.0.3     stringr_1.5.0      \n[22] munsell_0.5.0       gtable_0.3.1        mvtnorm_1.1-3      \n[25] htmlwidgets_1.6.1   codetools_0.2-19    coda_0.19-4        \n[28] evaluate_0.20       knitr_1.42          fastmap_1.1.1      \n[31] parallel_4.2.2      fansi_1.0.4         broom_1.0.3        \n[34] Rcpp_1.0.10         xtable_1.8-4        scales_1.2.1       \n[37] backports_1.4.1     checkmate_2.1.0     jsonlite_1.8.4     \n[40] parallelly_1.34.0   ggplot2_3.4.1       digest_0.6.31      \n[43] stringi_1.7.12      numDeriv_2016.8-1.1 rbibutils_2.2.13   \n[46] grid_4.2.2          cowplot_1.1.1       Rdpack_2.4         \n[49] cli_3.6.0           tools_4.2.2         tibble_3.1.8       \n[52] tidyr_1.3.0         pkgconfig_2.0.3     Matrix_1.5-3       \n[55] estimability_1.4.1  rmarkdown_2.20      R6_2.5.1           \n[58] nlme_3.1-162        compiler_4.2.2     \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R              [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/graphs/other/mmrmg02.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "graphs/other/brg01.html",
    "href": "graphs/other/brg01.html",
    "title": "BRG01",
    "section": "",
    "text": "Data Setup\nPlot of Frequency\nPlot of Percentage\nPlot of Frequency with  Total Number of Subjects\nPlot of Frequency  with Horizontal Bars\nPlot of Percentage  and Confidence Intervals\nPlot of Percentage by  Treatment and Covariate\nPlot of Percentage by  Covariate and Treatment\nPlot of Percentage  with Mean and Median\nPlot of Categorical  Variable\nTeal\nSession Info\n\n\n\n\nCodelibrary(binom)\nlibrary(dplyr)\nlibrary(ggplot2)\nlibrary(scda)\nlibrary(tidyr)\nlibrary(tern)\nlibrary(nestcolor)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\n\n# filtered population\npatpop_df <- adsl %>%\n  group_by(STUDYID) %>%\n  summarise(patpop = n())\npatpop <- setNames(patpop_df$patpop, patpop_df$STUDYID)\ndenom <- patpop_df$patpop\n\nadae <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adae\") %>%\n  mutate(AETOXGRC = as.character(AETOXGR))\nattributes(adae$AETOXGRC)$label <- \"Analysis Toxicity Grade (C)\"\nvl_ae <- var_labels(adae)\n\nadlb <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adlb\")\nvl_lb <- var_labels(adlb)\n\n\n\n\n\nCodeanl <- adae %>%\n  filter(AESER == \"Y\")\nanl <- anl[!duplicated(anl$USUBJID), ]\n\nggplot(anl, aes(x = .data[[\"ACTARM\"]])) +\n  geom_bar(fill = getOption(\"ggplot2.discrete.fill\")[1]) +\n  geom_text(stat = \"count\", aes(label = after_stat(count)), vjust = -.5) +\n  theme(plot.title = element_text(hjust = 0.5)) +\n  ggtitle(\"Frequency of Subjects With Serious AEs: Safety-Evaluable Subjects\") +\n  xlab(paste0(getElement(vl_ae, \"ACTARM\"), \" (N = \", denom, \")\")) +\n  ylab(\"Frequency\")\n\n\n\n\n\n\n\nCodeanl <- adae %>%\n  filter(AESOC == \"cl A\")\n\nanl <- anl[!duplicated(anl$USUBJID), ] %>%\n  group_by(ACTARM) %>%\n  summarise(n = n()) %>%\n  mutate(N = patpop) %>%\n  mutate(N = as.numeric(N)) %>%\n  mutate(pct = round((n / N) * 100, 2))\n\nggplot(anl, aes(x = .data[[\"ACTARM\"]])) +\n  geom_col(aes(x = ACTARM, y = pct), fill = getOption(\"ggplot2.discrete.fill\")[1]) +\n  scale_y_continuous(labels = scales::comma) +\n  geom_text(aes(y = pct, label = pct), stat = \"identity\", vjust = -0.5) +\n  theme(plot.title = element_text(hjust = 0.5)) +\n  ggtitle(\"Percent of Subjects With cl A Disorders: Safety-Evaluable Subjects\") +\n  xlab(paste0(getElement(vl_ae, \"ACTARM\"), \" (N = \", denom, \")\")) +\n  ylab(\"Percent\")\n\n\n\n\n\n\n\nCodeanl <- adae %>%\n  filter(AESOC == \"cl A\")\nanl <- anl[!duplicated(anl$USUBJID), ]\n\nanl <- anl %>%\n  group_by(ACTARM) %>%\n  mutate(n = n()) %>%\n  mutate(xvarlabel = paste0(ACTARM, \"\\n\\nN = \", n))\n\nggplot(anl, aes(x = .data[[\"xvarlabel\"]])) +\n  geom_bar(fill = getOption(\"ggplot2.discrete.fill\")[1]) +\n  theme(plot.title = element_text(hjust = 0.5)) +\n  ggtitle(\"Frequency of Subjects With Serious AEs: Safety-Evaluable Subjects\") +\n  xlab(paste0(getElement(vl_ae, \"ACTARM\"), \" (N = \", denom, \")\")) +\n  ylab(\"Frequency\")\n\n\n\n\n\n\n\nCodeanl <- adae %>%\n  filter(AESER == \"Y\")\nanl <- anl[!duplicated(anl$USUBJID), ]\n\nggplot(anl, aes(x = .data[[\"ACTARM\"]])) +\n  geom_bar(fill = getOption(\"ggplot2.discrete.fill\")[1]) +\n  theme(plot.title = element_text(hjust = 0.5)) +\n  ggtitle(\"Frequency of Subjects With Serious AEs: Safety-Evaluable Subjects\") +\n  xlab(paste0(getElement(vl_ae, \"ACTARM\"), \" (N = \", denom, \")\")) +\n  ylab(\"Frequency\") +\n  coord_flip()\n\n\n\n\n\n\n\nCodeanl <- adlb %>%\n  filter(PARAMCD == \"ALT\" & ANRIND == \"HIGH\")\nanl <- anl[!duplicated(anl$USUBJID), ]\n\npatpop5 <- as.data.frame(table(adsl$ACTARM)) %>%\n  mutate(ACTARM = as.vector(Var1)) %>%\n  mutate(TRTPOP = Freq) %>%\n  select(ACTARM, TRTPOP)\n\nanlpop <- as.data.frame(table(anl$ANRIND, anl$ACTARM)) %>%\n  filter(Var1 == \"HIGH\") %>%\n  mutate(ACTARM = as.vector(Var2)) %>%\n  mutate(EVENTCOUNT = Freq) %>%\n  select(ACTARM, EVENTCOUNT)\n\nanl <- left_join(patpop5, anlpop, by = \"ACTARM\")\nCIs <- binom.confint(x = anl$EVENTCOUNT, n = anl$TRTPOP, methods = \"exact\")\nanl <- cbind(anl, CIs[, 4:6])\n\nggplot(anl) +\n  geom_bar(aes(x = ACTARM, y = mean * 100), stat = \"identity\", fill = getOption(\"ggplot2.discrete.fill\")[1], alpha = 0.7) +\n  geom_errorbar(aes(x = ACTARM, ymin = lower * 100, ymax = upper * 100),\n    width = 0.5, colour = \"#20b4ff\",\n    alpha = 0.9, linewidth = 1.0\n  ) +\n  theme(plot.title = element_text(hjust = 0.5)) +\n  ggtitle(\"Percent of Subjects with Abnormaly High ALT: Safety-Evaluable Subjects\") +\n  xlab(paste0(getElement(vl_ae, \"ACTARM\"), \" (N = \", denom, \")\")) +\n  ylab(\"Percentage\")\n\n\n\n\n\n\n\nCodeanl <- adae %>%\n  filter(AESER == \"Y\")\n\npatpop6 <- dplyr::count(adsl, ACTARM, SEX, name = \"N_arm_sex\")\n\nanl <- anl[!duplicated(anl$USUBJID), ] %>%\n  group_by(ACTARM, SEX) %>%\n  summarise(n = n(), .groups = \"drop\") %>%\n  left_join(patpop6, by = c(\"ACTARM\", \"SEX\")) %>%\n  mutate(pct = round((n / N_arm_sex) * 100, 2))\n\nggplot(anl, aes(x = .data[[\"ACTARM\"]], fill = .data[[\"SEX\"]])) +\n  geom_col(aes(y = pct), position = position_dodge()) +\n  guides(fill = guide_legend(title = getElement(vl_ae, \"SEX\"))) +\n  scale_y_continuous(labels = scales::comma) +\n  theme(plot.title = element_text(hjust = 0.5)) +\n  ggtitle(\"Percent of Subjects With Serious AEs: Safety-Evaluable Subjects\") +\n  xlab(paste0(getElement(vl_ae, \"ACTARM\"), \" (N = \", denom, \")\")) +\n  ylab(\"Percent\")\n\n\n\n\n\n\n\nCodeanl <- adae %>%\n  filter(AESER == \"Y\")\n\nanl <- anl[!duplicated(anl$USUBJID), ] %>%\n  group_by(SEX, ACTARM) %>%\n  summarise(n = n(), .groups = \"drop_last\") %>%\n  mutate(N = patpop) %>%\n  mutate(N = as.numeric(N)) %>%\n  mutate(pct = round((n / N) * 100, 2))\n\nggplot(anl, aes(x = .data[[\"SEX\"]], fill = .data[[\"ACTARM\"]])) +\n  geom_col(aes(y = pct), position = position_dodge()) +\n  guides(fill = guide_legend(title = getElement(vl_ae, \"ACTARM\"))) +\n  scale_y_continuous(labels = scales::comma) +\n  theme(plot.title = element_text(hjust = 0.5)) +\n  ggtitle(\"Percent of Subjects With Serious AEs: Safety-Evaluable Subjects\") +\n  xlab(paste0(getElement(vl_ae, \"SEX\"), \" (N = \", denom, \")\")) +\n  ylab(\"Percent\")\n\n\n\n\n\n\n\nCodeanl1 <- adlb %>%\n  filter(AVISIT == \"BASELINE\", PARAMCD == \"CRP\" & ANRIND == \"HIGH\")\n\nanl <- anl1[!duplicated(anl1$USUBJID), ] %>%\n  group_by(ACTARM) %>%\n  summarise(n = n()) %>%\n  mutate(N = patpop) %>%\n  mutate(N = as.numeric(N)) %>%\n  mutate(pct = round((n / N) * 100, 2))\n\nplot <- ggplot(anl, aes(x = .data[[\"ACTARM\"]])) +\n  geom_col(aes(x = ACTARM, y = pct), fill = getOption(\"ggplot2.discrete.fill\")[1]) +\n  scale_y_continuous(labels = scales::comma, expand = expansion(c(0, .25))) +\n  geom_text(aes(y = pct, label = pct), stat = \"identity\", vjust = -0.5) +\n  theme(plot.title = element_text(hjust = 0.5)) +\n  ggtitle(\"Percent of Subjects with Abnormaly High CRP at Baseline \\n Safety-Evaluable Subjects\") +\n  xlab(paste0(getElement(vl_lb, \"ACTARM\"), \" (N = \", denom, \")\")) +\n  ylab(\"Percent\")\n\nsd_w <- anl1 %>%\n  group_by(ACTARM) %>%\n  summarise(\n    mean = round(mean(AVAL, na.rm = TRUE), 2),\n    median = round(median(AVAL, na.rm = TRUE), 2)\n  ) %>%\n  arrange(ACTARM)\n\nsd_l <- gather(sd_w, key = stat, value = value, mean:median)\nsd_l <- sd_l %>% mutate(\n  stat_lbl = case_when(\n    stat == \"mean\" ~ \"Mean\",\n    stat == \"median\" ~ \"Median\"\n  )\n)\n\nsd_l$stat_lbl <- factor(sd_l$stat_lbl, levels = c(\"Median\", \"Mean\"))\n\ntbl_theme <- theme(\n  panel.border = element_blank(),\n  panel.grid.major = element_blank(),\n  panel.grid.minor = element_blank(),\n  axis.ticks = element_blank(),\n  axis.title = element_blank(),\n  axis.text.y = element_text(face = \"plain\"),\n  axis.text.x = element_blank()\n)\n\ntbl <- ggplot(sd_l, aes(x = ACTARM, y = stat_lbl, label = value)) +\n  geom_text(size = 3) +\n  scale_y_discrete(labels = levels(sd_l$stat_lbl)) +\n  theme_bw() +\n  tbl_theme\n\nggpubr::ggarrange(plot, tbl,\n  heights = c(4, 1),\n  ncol = 1, nrow = 2, align = \"v\"\n)\n\n\n\n\n\n\n\nCodeanl <- adae\n\nanl <- anl %>%\n  arrange(USUBJID, AETOXGRC) %>%\n  group_by(USUBJID) %>%\n  slice(n()) %>%\n  ungroup()\n\nanl <- anl[!duplicated(anl$USUBJID), ] %>%\n  group_by(ACTARM, AETOXGRC) %>%\n  summarise(n = n(), .groups = \"drop_last\") %>%\n  mutate(N = patpop) %>%\n  mutate(N = as.numeric(N)) %>%\n  mutate(pct = round((n / N) * 100, 2))\n\nggplot(anl, aes(x = .data[[\"ACTARM\"]], fill = .data[[\"AETOXGRC\"]])) +\n  geom_col(aes(y = pct)) +\n  guides(fill = guide_legend(title = getElement(vl_ae, \"AETOXGRC\"))) +\n  scale_y_continuous(labels = scales::comma) +\n  theme(plot.title = element_text(hjust = 0.5)) +\n  ggtitle(\"Percent of Subjects With AE by Highest \\n NCI CTCAE Grade: Safety-Evaluable Subjects\") +\n  xlab(paste0(getElement(vl_ae, \"ACTARM\"), \" (N = \", denom, \")\")) +\n  ylab(\"Percent\")\n\n\n\n\n\n\n\nCode# In progress\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n [1] nestcolor_0.1.0.9005 tern_0.7.10.9056     rtables_0.6.0.1     \n [4] formatters_0.4.0     magrittr_2.0.3       tidyr_1.3.0         \n [7] scda_0.1.5.9009      ggplot2_3.4.1        dplyr_1.1.0         \n[10] binom_1.1-1.1       \n\nloaded via a namespace (and not attached):\n [1] tidyselect_1.2.0  xfun_0.37         purrr_1.0.1       splines_4.2.2    \n [5] lattice_0.20-45   carData_3.0-5     colorspace_2.1-0  vctrs_0.5.2      \n [9] generics_0.1.3    htmltools_0.5.4   yaml_2.3.7        utf8_1.2.3       \n[13] survival_3.5-3    rlang_1.0.6       pillar_1.8.1      ggpubr_0.6.0     \n[17] glue_1.6.2        withr_2.5.0       lifecycle_1.0.3   munsell_0.5.0    \n[21] ggsignif_0.6.4    gtable_0.3.1      htmlwidgets_1.6.1 codetools_0.2-19 \n[25] evaluate_0.20     labeling_0.4.2    knitr_1.42        fastmap_1.1.1    \n[29] fansi_1.0.4       broom_1.0.3       backports_1.4.1   scales_1.2.1     \n[33] checkmate_2.1.0   jsonlite_1.8.4    abind_1.4-5       farver_2.1.1     \n[37] digest_0.6.31     rstatix_0.7.2     cowplot_1.1.1     rbibutils_2.2.13 \n[41] grid_4.2.2        Rdpack_2.4        cli_3.6.0         tools_4.2.2      \n[45] tibble_3.1.8      car_3.1-1         pkgconfig_2.0.3   Matrix_1.5-3     \n[49] rmarkdown_2.20    R6_2.5.1          compiler_4.2.2   \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R              [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/graphs/other/brg01.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "graphs/other/fstg01.html",
    "href": "graphs/other/fstg01.html",
    "title": "FSTG01",
    "section": "",
    "text": "Data Setup\nStandard Plot\nPlot Specifying Class Variables and  Options for the Treatment Variable\nPlot Selecting Columns and  Changing the Alpha Level\nPlot with Fixed  Symbol Size\nPlot of CR Only, Setting  Values Indicating Response\nTeal\nSession Info\n\n\n\n\nCodelibrary(scda)\nlibrary(dplyr)\nlibrary(tern)\nlibrary(nestcolor)\n\nadsl_f <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\") %>%\n  select(STUDYID, USUBJID, ARMCD, ARM, SEX, BMRKR2, STRATA1, STRATA2)\n\nadrs_f <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adrs\") %>%\n  filter(PARAMCD == \"INVET\") %>%\n  select(STUDYID, USUBJID, PARAMCD, AVISIT, AVALC)\n\nanl <- inner_join(adsl_f, adrs_f, by = c(\"STUDYID\", \"USUBJID\"))\nanl <- df_explicit_na(anl)\nanl_labels <- var_labels(anl)\n\nanl_rsp_arms_ab <- anl %>%\n  mutate(is_rsp = AVALC %in% c(\"CR\", \"PR\")) %>%\n  filter(ARMCD %in% c(\"ARM B\", \"ARM A\")) %>%\n  mutate(\n    ARMCD = relevel(ARMCD, ref = \"ARM B\") %>%\n      droplevels(),\n    ARM = relevel(ARM, ref = \"B: Placebo\") %>%\n      droplevels()\n  ) %>%\n  droplevels()\nvar_labels(anl_rsp_arms_ab) <- c(anl_labels, is_rsp = \"Is Responder\")\n\n\n\n\n\nCodedf <- extract_rsp_subgroups(\n  variables = list(\n    rsp = \"is_rsp\",\n    arm = \"ARM\",\n    subgroups = c(\"SEX\", \"BMRKR2\"),\n    strata_var = \"STRATA2\"\n  ),\n  data = anl_rsp_arms_ab,\n  conf_level = 0.95\n)\n\nresult <- basic_table() %>%\n  tabulate_rsp_subgroups(df, vars = c(\"n_tot\", \"n\", \"n_rsp\", \"prop\", \"or\", \"ci\"))\n\np <- g_forest(\n  tbl = result\n)\ngrid::grid.draw(p)\n\n\n\n\n\n\n\nCodeanl_rsp_comb_arms_ac <- anl %>%\n  mutate(is_rsp = AVALC %in% c(\"CR\", \"PR\")) %>%\n  filter(ARMCD %in% c(\"ARM B\", \"ARM A\", \"ARM C\")) %>%\n  mutate(\n    ARMCD = relevel(ARMCD, ref = \"ARM B\") %>%\n      droplevels() %>%\n      combine_levels(levels = c(\"ARM A\", \"ARM C\")),\n    ARM = relevel(ARM, ref = \"B: Placebo\") %>%\n      droplevels() %>%\n      combine_levels(levels = c(\"A: Drug X\", \"C: Combination\")),\n    # reorder levels of SEX\n    SEX = forcats::fct_relevel(SEX, \"M\", \"F\"),\n    # reorder levels of STRATA1 by frequency\n    STRATA1 = forcats::fct_infreq(STRATA1)\n  ) %>%\n  droplevels()\nvar_labels(anl_rsp_comb_arms_ac) <- c(anl_labels, is_rsp = \"Is Responder\")\n\ndf <- extract_rsp_subgroups(\n  variables = list(\n    rsp = \"is_rsp\",\n    arm = \"ARMCD\",\n    subgroups = c(\"SEX\", \"BMRKR2\"),\n    strata_var = \"STRATA2\"\n  ),\n  data = anl_rsp_comb_arms_ac,\n  conf_level = 0.95\n)\n\nresult <- basic_table() %>%\n  tabulate_rsp_subgroups(df, vars = c(\"n_tot\", \"n\", \"n_rsp\", \"prop\", \"or\", \"ci\"))\n\np <- g_forest(\n  tbl = result\n)\n\ngrid::grid.draw(p)\n\n\n\n\n\n\n\nCodedf <- extract_rsp_subgroups(\n  variables = list(\n    rsp = \"is_rsp\",\n    arm = \"ARM\",\n    subgroups = c(\"SEX\", \"BMRKR2\"),\n    strata_var = \"STRATA2\"\n  ),\n  data = anl_rsp_arms_ab,\n  conf_level = 0.90\n)\n\nresult <- basic_table() %>%\n  tabulate_rsp_subgroups(df, vars = c(\"n_tot\", \"or\", \"ci\"))\n\np <- g_forest(\n  tbl = result\n)\n\ngrid::grid.draw(p)\n\n\n\n\n\n\n\nCodedf <- extract_rsp_subgroups(\n  variables = list(\n    rsp = \"is_rsp\",\n    arm = \"ARM\",\n    subgroups = c(\"SEX\", \"BMRKR2\"),\n    strata_var = \"STRATA2\"\n  ),\n  data = anl_rsp_arms_ab,\n  conf_level = 0.95\n)\n\nresult <- basic_table() %>%\n  tabulate_rsp_subgroups(df, vars = c(\"n_tot\", \"n\", \"n_rsp\", \"prop\", \"or\", \"ci\"))\n\np <- g_forest(\n  tbl = result,\n  col_symbol_size = NULL\n)\n\ngrid::grid.draw(p)\n\n\n\n\n\n\n\nCodeanl_cr_arms_ab <- anl %>%\n  mutate(is_rsp = AVALC == \"CR\") %>%\n  filter(ARMCD %in% c(\"ARM B\", \"ARM A\")) %>%\n  mutate(\n    ARMCD = relevel(ARMCD, ref = \"ARM B\") %>%\n      droplevels(),\n    ARM = relevel(ARM, ref = \"B: Placebo\") %>%\n      droplevels()\n  ) %>%\n  droplevels()\nvar_labels(anl_cr_arms_ab) <- c(anl_labels, is_rsp = \"Is CR\")\n\ndf <- extract_rsp_subgroups(\n  variables = list(\n    rsp = \"is_rsp\",\n    arm = \"ARM\",\n    subgroups = c(\"SEX\", \"BMRKR2\"),\n    strata_var = \"STRATA2\"\n  ),\n  data = anl_cr_arms_ab,\n  conf_level = 0.95\n)\n\nresult <- basic_table() %>%\n  tabulate_rsp_subgroups(df, vars = c(\"n_tot\", \"n\", \"n_rsp\", \"prop\", \"or\", \"ci\"))\n\np <- g_forest(\n  tbl = result\n)\n\ngrid::grid.draw(p)\n\n\n\n\n\n\n\nCodelibrary(teal.modules.clinical)\nlibrary(scda)\n\nADSL <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nADRS <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adrs\")\n\narm_ref_comp <- list(\n  ARM = list(\n    ref = \"B: Placebo\",\n    comp = c(\"A: Drug X\", \"C: Combination\")\n  ),\n  ARMCD = list(\n    ref = \"ARM B\",\n    comp = c(\"ARM A\", \"ARM C\")\n  )\n)\n\napp <- init(\n  data = cdisc_data(\n    cdisc_dataset(\"ADSL\", ADSL, code = 'ADSL <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")'),\n    cdisc_dataset(\"ADRS\", ADRS, code = 'ADRS <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adrs\")'),\n    check = TRUE\n  ),\n  modules = modules(\n    tm_g_forest_rsp(\n      label = \"Forest Response\",\n      dataname = \"ADRS\",\n      arm_var = choices_selected(\n        variable_choices(ADSL, c(\"ARM\", \"ARMCD\")),\n        \"ARMCD\"\n      ),\n      arm_ref_comp = arm_ref_comp,\n      paramcd = choices_selected(\n        value_choices(ADRS, \"PARAMCD\", \"PARAM\"),\n        \"BESRSPI\"\n      ),\n      subgroup_var = choices_selected(\n        variable_choices(ADSL, names(ADSL)),\n        c(\"BMRKR2\", \"SEX\")\n      ),\n      strata_var = choices_selected(\n        variable_choices(ADSL, c(\"STRATA1\", \"STRATA2\")),\n        \"STRATA2\"\n      ),\n      plot_height = c(600L, 200L, 2000L),\n      plot_width = c(1100L, 200L, 2000L)\n    )\n  )\n)\n\n[INFO] 2023-03-10 05:14:08.0031 pid:1559 token:[] teal.modules.clinical Initializing tm_g_forest_rsp\n\nCodeshinyApp(app$ui, app$server)\n\n\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n [1] teal.modules.clinical_0.8.14.9026 teal_0.12.0.9023                 \n [3] teal.transform_0.2.0.9011         teal.data_0.1.2.9013             \n [5] shiny_1.7.4                       nestcolor_0.1.0.9005             \n [7] tern_0.7.10.9056                  rtables_0.6.0.1                  \n [9] formatters_0.4.0                  magrittr_2.0.3                   \n[11] dplyr_1.1.0                       scda_0.1.5.9009                  \n\nloaded via a namespace (and not attached):\n [1] sass_0.4.5               tidyr_1.3.0              jsonlite_1.8.4          \n [4] splines_4.2.2            R.utils_2.12.2           bslib_0.4.2             \n [7] teal.slice_0.2.0.9026    Rdpack_2.4               assertthat_0.2.1        \n[10] teal.code_0.3.0.9001     tern.gee_0.1.0.9002      yaml_2.3.7              \n[13] pillar_1.8.1             backports_1.4.1          lattice_0.20-45         \n[16] glue_1.6.2               teal.widgets_0.2.0.9024  digest_0.6.31           \n[19] promises_1.2.0.1         rbibutils_2.2.13         checkmate_2.1.0         \n[22] colorspace_2.1-0         R.oo_1.25.0              htmltools_0.5.4         \n[25] httpuv_1.6.9             Matrix_1.5-3             pkgconfig_2.0.3         \n[28] broom_1.0.3              logger_0.2.2             purrr_1.0.1             \n[31] xtable_1.8-4             mvtnorm_1.1-3            webshot_0.5.4           \n[34] scales_1.2.1             processx_3.8.0           fontawesome_0.5.0       \n[37] later_1.3.0              emmeans_1.8.4-1          tibble_3.1.8            \n[40] styler_1.9.1             generics_0.1.3           ggplot2_3.4.1           \n[43] ellipsis_0.3.2           shinyvalidate_0.1.2      cachem_1.0.7            \n[46] withr_2.5.0              shinyjs_2.1.0            geepack_1.3.9           \n[49] cli_3.6.0                survival_3.5-3           mime_0.12               \n[52] memoise_2.0.1            ps_1.7.2                 estimability_1.4.1      \n[55] evaluate_0.20            R.methodsS3_1.8.2        fansi_1.0.4             \n[58] R.cache_0.16.0           nlme_3.1-162             MASS_7.3-58.3           \n[61] forcats_1.0.0            textshaping_0.3.6        teal.reporter_0.1.1.9013\n[64] tools_4.2.2              lifecycle_1.0.3          munsell_0.5.0           \n[67] callr_3.7.3              compiler_4.2.2           jquerylib_0.1.4         \n[70] systemfonts_1.0.4        rlang_1.0.6              grid_4.2.2              \n[73] htmlwidgets_1.6.1        rmarkdown_2.20           shinyWidgets_0.7.6      \n[76] gtable_0.3.1             codetools_0.2-19         teal.logger_0.1.1.9004  \n[79] R6_2.5.1                 knitr_1.42               fastmap_1.1.1           \n[82] utf8_1.2.3               ragg_1.2.5               Rcpp_1.0.10             \n[85] vctrs_0.5.2              tidyselect_1.2.0         xfun_0.37               \n[88] coda_0.19-4             \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R                       [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/graphs/other/fstg01.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "graphs/other/mng01.html",
    "href": "graphs/other/mng01.html",
    "title": "MNG01",
    "section": "",
    "text": "Data Setup\nPlot of Mean  and CI\nPlot of Mean and CIs of Change  from Baseline (Changing the Input  Analysis Data Set and Analysis Variable)\nPlot of Mean (+/-SD)  (Changing the Statistics)\nPlot of Mean and CI  (Modify Alpha Level)\nPlot of Mean and CI (with Number  of Patients only in Table Section)\nPlot of Mean and CI  (with Table Section)\nPlot of Median and CI (Visits  Condensed in Table Section)\nPlot of Mean and  Upper Confidence Limit\nTeal\nSession Info\n\n\n\n\nCodelibrary(dplyr)\nlibrary(tern)\nlibrary(scda)\nlibrary(nestcolor)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadlb <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adlb\")\nadvs <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"advs\")\n\nadsl_f <- adsl %>%\n  filter(SAFFL == \"Y\") %>%\n  df_explicit_na()\n\nadlb_f <- adlb %>%\n  mutate(AVISIT = forcats::fct_reorder(AVISIT, AVISITN, min)) %>%\n  dplyr::filter(\n    SAFFL == \"Y\",\n    ANL01FL == \"Y\",\n    ONTRTFL == \"Y\",\n    PARAMCD == \"ALT\",\n    AVISIT != \"SCREENING\"\n  ) %>%\n  droplevels() %>%\n  df_explicit_na()\n\nadvs_f <- advs %>%\n  mutate(AVISIT = forcats::fct_reorder(AVISIT, AVISITN, min)) %>%\n  dplyr::filter(\n    SAFFL == \"Y\",\n    ONTRTFL == \"Y\",\n    PARAMCD == \"DIABP\",\n    AVISIT != \"SCREENING\"\n  ) %>%\n  droplevels() %>%\n  df_explicit_na()\n\n\n\n\n\nCodeg_lineplot(\n  df = adlb_f,\n  alt_counts_df = adsl_f,\n  subtitle = \"Laboratory Test:\"\n)\n\n\n\n\n\n\n\nCodeg_lineplot(\n  df = advs_f,\n  alt_counts_df = adsl_f,\n  variables = control_lineplot_vars(y = \"CHG\"),\n  title = \"Plot of Mean and 95% Confidence Intervals of Change from Baseline by Visit\",\n  subtitle = \"Assessment:\"\n)\n\n\n\n\n\n\n\nCodeg_lineplot(\n  df = adlb_f,\n  alt_counts_df = adsl_f,\n  interval = \"mean_sdi\",\n  whiskers = c(\"mean_sdi_lwr\", \"mean_sdi_upr\"),\n  title = \"Plot of Mean (+/-SD)\",\n  subtitle = \"Laboratory Test:\"\n)\n\n\n\n\n\n\n\nCodeg_lineplot(\n  df = adlb_f,\n  alt_counts_df = adsl_f,\n  control = control_summarize_vars(conf_level = 0.80),\n  title = \"Plot of Mean and 80% Confidence Limits by Visit\",\n  subtitle = \"Laboratory Test:\"\n)\n\n\n\n\n\n\n\nCodeg_lineplot(\n  df = adlb_f,\n  alt_counts_df = adsl_f,\n  table = \"n\",\n  subtitle = \"Laboratory Test:\"\n)\n\n\n\n\n\n\n\nCodeg_lineplot(\n  df = adlb_f,\n  alt_counts_df = adsl_f,\n  table = c(\"n\", \"mean\", \"mean_ci\"),\n  subtitle = \"Laboratory Test:\"\n)\n\n\n\n\n\n\nThis option is not supported.\n\n\n\nCodeg_lineplot(\n  df = adlb_f,\n  alt_counts_df = adsl_f,\n  whiskers = \"mean_ci_upr\",\n  subtitle = \"Laboratory Test:\"\n)\n\n\n\n\n\n\n\nCodelibrary(scda)\nlibrary(dplyr)\nlibrary(teal.modules.clinical)\n\nADSL <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nADLB <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adlb\") %>%\n  mutate(AVISIT = forcats::fct_reorder(AVISIT, AVISITN, min))\n\napp <- init(\n  data = cdisc_data(\n    cdisc_dataset(\"ADSL\", ADSL, code = 'ADSL <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")'),\n    cdisc_dataset(\"ADLB\", ADLB, code = 'ADLB <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adlb\") %>%\n                    mutate(AVISIT = forcats::fct_reorder(AVISIT, AVISITN, min))'),\n    check = TRUE\n  ),\n  modules = modules(\n    tm_g_lineplot(\n      label = \"LINE PLOT\",\n      dataname = \"ADLB\",\n      strata = choices_selected(\n        variable_choices(ADSL, c(\"ARM\", \"ARMCD\", \"ACTARMCD\")),\n        \"ARM\"\n      ),\n      y = choices_selected(\n        variable_choices(ADLB, c(\"AVAL\", \"BASE\", \"CHG\", \"PCHG\")),\n        \"AVAL\"\n      ),\n      param = choices_selected(\n        value_choices(ADLB, \"PARAMCD\", \"PARAM\"),\n        \"ALT\"\n      )\n    )\n  )\n)\n\n[INFO] 2023-03-10 05:14:45.2759 pid:1642 token:[] teal.modules.clinical Initializing tm_g_lineplot\n\nCodeshinyApp(app$ui, app$server)\n\n\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n [1] teal.modules.clinical_0.8.14.9026 teal_0.12.0.9023                 \n [3] teal.transform_0.2.0.9011         teal.data_0.1.2.9013             \n [5] shiny_1.7.4                       nestcolor_0.1.0.9005             \n [7] scda_0.1.5.9009                   tern_0.7.10.9056                 \n [9] rtables_0.6.0.1                   formatters_0.4.0                 \n[11] magrittr_2.0.3                    dplyr_1.1.0                      \n\nloaded via a namespace (and not attached):\n [1] sass_0.4.5               tidyr_1.3.0              jsonlite_1.8.4          \n [4] splines_4.2.2            R.utils_2.12.2           bslib_0.4.2             \n [7] teal.slice_0.2.0.9026    Rdpack_2.4               assertthat_0.2.1        \n[10] teal.code_0.3.0.9001     tern.gee_0.1.0.9002      yaml_2.3.7              \n[13] pillar_1.8.1             backports_1.4.1          lattice_0.20-45         \n[16] glue_1.6.2               teal.widgets_0.2.0.9024  digest_0.6.31           \n[19] promises_1.2.0.1         rbibutils_2.2.13         checkmate_2.1.0         \n[22] colorspace_2.1-0         R.oo_1.25.0              cowplot_1.1.1           \n[25] htmltools_0.5.4          httpuv_1.6.9             Matrix_1.5-3            \n[28] pkgconfig_2.0.3          broom_1.0.3              logger_0.2.2            \n[31] purrr_1.0.1              xtable_1.8-4             mvtnorm_1.1-3           \n[34] webshot_0.5.4            scales_1.2.1             processx_3.8.0          \n[37] fontawesome_0.5.0        later_1.3.0              emmeans_1.8.4-1         \n[40] tibble_3.1.8             styler_1.9.1             generics_0.1.3          \n[43] farver_2.1.1             ggplot2_3.4.1            ellipsis_0.3.2          \n[46] shinyvalidate_0.1.2      cachem_1.0.7             withr_2.5.0             \n[49] shinyjs_2.1.0            geepack_1.3.9            cli_3.6.0               \n[52] survival_3.5-3           mime_0.12                memoise_2.0.1           \n[55] ps_1.7.2                 estimability_1.4.1       evaluate_0.20           \n[58] R.methodsS3_1.8.2        fansi_1.0.4              R.cache_0.16.0          \n[61] nlme_3.1-162             MASS_7.3-58.3            forcats_1.0.0           \n[64] textshaping_0.3.6        teal.reporter_0.1.1.9013 tools_4.2.2             \n[67] lifecycle_1.0.3          munsell_0.5.0            callr_3.7.3             \n[70] jquerylib_0.1.4          compiler_4.2.2           systemfonts_1.0.4       \n[73] rlang_1.0.6              grid_4.2.2               htmlwidgets_1.6.1       \n[76] labeling_0.4.2           rmarkdown_2.20           shinyWidgets_0.7.6      \n[79] gtable_0.3.1             codetools_0.2-19         teal.logger_0.1.1.9004  \n[82] R6_2.5.1                 knitr_1.42               fastmap_1.1.1           \n[85] utf8_1.2.3               ragg_1.2.5               Rcpp_1.0.10             \n[88] vctrs_0.5.2              tidyselect_1.2.0         xfun_0.37               \n[91] coda_0.19-4             \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R                       [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/graphs/other/mng01.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "graphs/other/mmrmg01.html",
    "href": "graphs/other/mmrmg01.html",
    "title": "MMRMG01",
    "section": "",
    "text": "Given an MMRM fitted with s_mmrm, g_mmrm_lsmeans displays for each visit the adjusted means within group and/or difference in adjusted means between groups. g_mmrm_diagnostic displays marginal residual plots for evaluating model fit.\n\n\nData Setup and  Model Fitting\nLeast Squares Means:  Estimates Within Groups\nLeast Squares Means:  Contrasts Between Groups\nModel Diagnostics: Marginal  Fitted Values vs. Residuals\nModel Diagnostics: Normality  of Marginal Residuals\nTeal\nSession Info\n\n\n\n\nCodelibrary(dplyr)\nlibrary(tern.mmrm)\nlibrary(scda)\nlibrary(nestcolor)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadqs <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adqs\")\n\nadqs_f <- adqs %>%\n  dplyr::filter(PARAMCD == \"FKSI-FWB\" & !AVISIT %in% c(\"BASELINE\")) %>%\n  droplevels() %>%\n  dplyr::mutate(ARM = factor(ARM, levels = c(\"B: Placebo\", \"A: Drug X\", \"C: Combination\"))) %>%\n  dplyr::mutate(AVISITN = rank(AVISITN) %>% as.factor() %>% as.numeric() %>% as.factor())\n\nmmrm_results <- fit_mmrm(\n  vars = list(\n    response = \"AVAL\",\n    covariates = c(\"STRATA2\"),\n    id = \"USUBJID\",\n    arm = \"ARM\",\n    visit = \"AVISIT\"\n  ),\n  data = adqs_f\n)\n\n\n\n\nConsidering the treatment variable in the model\n\nCodeg_mmrm_lsmeans(\n  mmrm_results,\n  select = \"estimates\",\n  xlab = \"Visit\"\n)\n\n\n\n\nConsidering the treatment variable in the model, with lines\n\nCodeg_mmrm_lsmeans(\n  mmrm_results,\n  select = \"estimates\",\n  xlab = \"Visit\",\n  show_lines = TRUE\n)\n\n\n\n\nConsidering the treatment variable in the model, with statistics table\n\nCodeg_mmrm_lsmeans(\n  mmrm_results,\n  select = \"estimates\",\n  xlab = \"Visit\",\n  table_stats = c(\"n\", \"estimate\", \"se\", \"ci\"),\n  table_font_size = 4,\n  table_rel_height = 0.6\n)\n\n\n\n\n\n\n\nUsers can choose to display both estimates and contrasts together by running g_mmrm_lsmeans(mmrm_results).\n\nCodeg_mmrm_lsmeans(\n  mmrm_results,\n  select = \"contrasts\",\n  titles = c(contrasts = \"Contrasts of FKSI-FWB means\"),\n  xlab = \"Visit\"\n)\n\n\n\n\n\n\n\nCodeg_mmrm_diagnostic(mmrm_results)\n\n\n\n\n\n\n\nCodeg_mmrm_diagnostic(mmrm_results, type = \"q-q-residual\")\n\n\n\n\n\n\n\nCodelibrary(teal.modules.clinical)\nlibrary(scda)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadqs <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adqs\") %>%\n  dplyr::filter(ABLFL != \"Y\" & ABLFL2 != \"Y\") %>%\n  dplyr::filter(AVISIT %in% c(\"WEEK 1 DAY 8\", \"WEEK 2 DAY 15\", \"WEEK 3 DAY 22\")) %>%\n  dplyr::mutate(\n    AVISIT = as.factor(AVISIT),\n    AVISITN = rank(AVISITN) %>%\n      as.factor() %>%\n      as.numeric() %>%\n      as.factor() # making consecutive numeric factor\n  )\n\narm_ref_comp <- list(\n  ARMCD = list(\n    ref = \"ARM A\",\n    comp = c(\"ARM B\", \"ARM C\")\n  )\n)\n\napp <- init(\n  data = cdisc_data(\n    cdisc_dataset(\"ADSL\", adsl),\n    cdisc_dataset(\"ADQS\", adqs),\n    code = '\n    ADSL <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\n    ADQS <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adqs\") %>%\n              dplyr::filter(ABLFL != \"Y\" & ABLFL2 != \"Y\") %>%\n              dplyr::filter(AVISIT %in% c(\"WEEK 1 DAY 8\", \"WEEK 2 DAY 15\", \"WEEK 3 DAY 22\")) %>%\n              dplyr::mutate(\n                AVISIT = as.factor(AVISIT),\n                AVISITN = rank(AVISITN) %>%\n                  as.factor() %>%\n                  as.numeric() %>%\n                  as.factor() # making consecutive numeric factor\n              )\n    ',\n    check = TRUE\n  ),\n  modules = modules(\n    tm_a_mmrm(\n      label = \"MMRM\",\n      dataname = \"ADQS\",\n      aval_var = choices_selected(c(\"AVAL\", \"CHG\"), \"AVAL\"),\n      id_var = choices_selected(c(\"USUBJID\", \"SUBJID\"), \"USUBJID\"),\n      arm_var = choices_selected(c(\"ARM\", \"ARMCD\"), \"ARMCD\"),\n      visit_var = choices_selected(c(\"AVISIT\", \"AVISITN\"), \"AVISIT\"),\n      arm_ref_comp = arm_ref_comp,\n      paramcd = choices_selected(\n        choices = value_choices(adqs, \"PARAMCD\", \"PARAM\"),\n        selected = \"FKSI-FWB\"\n      ),\n      cov_var = choices_selected(c(\"BASE\", \"AGE\", \"SEX\", \"BASE:AVISIT\"), NULL),\n      conf_level = choices_selected(c(0.95, 0.9, 0.8), 0.95)\n    )\n  )\n)\n\n[INFO] 2023-03-10 05:15:11.9916 pid:1743 token:[] teal.modules.clinical Initializing tm_a_mmrm\n\nCodeshinyApp(app$ui, app$server)\n\n\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n [1] teal.modules.clinical_0.8.14.9026 teal_0.12.0.9023                 \n [3] teal.transform_0.2.0.9011         teal.data_0.1.2.9013             \n [5] shiny_1.7.4                       nestcolor_0.1.0.9005             \n [7] scda_0.1.5.9009                   tern.mmrm_0.2.2.9002             \n [9] tern_0.7.10.9056                  rtables_0.6.0.1                  \n[11] formatters_0.4.0                  magrittr_2.0.3                   \n[13] dplyr_1.1.0                      \n\nloaded via a namespace (and not attached):\n [1] sass_0.4.5               tidyr_1.3.0              jsonlite_1.8.4          \n [4] splines_4.2.2            bslib_0.4.2              teal.slice_0.2.0.9026   \n [7] Rdpack_2.4               assertthat_0.2.1         tern.gee_0.1.0.9002     \n[10] yaml_2.3.7               numDeriv_2016.8-1.1      pillar_1.8.1            \n[13] backports_1.4.1          lattice_0.20-45          glue_1.6.2              \n[16] teal.widgets_0.2.0.9024  digest_0.6.31            promises_1.2.0.1        \n[19] rbibutils_2.2.13         checkmate_2.1.0          colorspace_2.1-0        \n[22] cowplot_1.1.1            htmltools_0.5.4          httpuv_1.6.9            \n[25] Matrix_1.5-3             mmrm_0.2.2               pkgconfig_2.0.3         \n[28] broom_1.0.3              logger_0.2.2             purrr_1.0.1             \n[31] xtable_1.8-4             mvtnorm_1.1-3            webshot_0.5.4           \n[34] scales_1.2.1             processx_3.8.0           fontawesome_0.5.0       \n[37] later_1.3.0              emmeans_1.8.4-1          tibble_3.1.8            \n[40] generics_0.1.3           farver_2.1.1             ggplot2_3.4.1           \n[43] ellipsis_0.3.2           shinyvalidate_0.1.2      cachem_1.0.7            \n[46] geepack_1.3.9            withr_2.5.0              shinyjs_2.1.0           \n[49] TMB_1.9.2                cli_3.6.0                survival_3.5-3          \n[52] mime_0.12                memoise_2.0.1            ps_1.7.2                \n[55] estimability_1.4.1       evaluate_0.20            fansi_1.0.4             \n[58] parallelly_1.34.0        MASS_7.3-58.3            nlme_3.1-162            \n[61] teal.reporter_0.1.1.9013 tools_4.2.2              lifecycle_1.0.3         \n[64] stringr_1.5.0            munsell_0.5.0            callr_3.7.3             \n[67] jquerylib_0.1.4          compiler_4.2.2           rlang_1.0.6             \n[70] grid_4.2.2               htmlwidgets_1.6.1        shinyWidgets_0.7.6      \n[73] labeling_0.4.2           rmarkdown_2.20           gtable_0.3.1            \n[76] codetools_0.2-19         teal.logger_0.1.1.9004   R6_2.5.1                \n[79] knitr_1.42               fastmap_1.1.1            utf8_1.2.3              \n[82] stringi_1.7.12           parallel_4.2.2           Rcpp_1.0.10             \n[85] vctrs_0.5.2              tidyselect_1.2.0         xfun_0.37               \n[88] coda_0.19-4             \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R                       [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/graphs/other/mmrmg01.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "graphs/other/kmg01.html",
    "href": "graphs/other/kmg01.html",
    "title": "KMG01",
    "section": "",
    "text": "Data Setup\nStandard Plot\nPlot of Failures\nPlot Without  Comparative Statistics\nPlot Without  Censoring Marks\nPlot Modifying  Censoring Marks\nPlot Modifying Options for Statistics,  Tie Handling, Stratification, etc.\nTeal\nSession Info\n\n\n\n\nCodelibrary(tern)\nlibrary(scda)\nlibrary(dplyr)\nlibrary(nestcolor)\n\nadtte <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adtte\")\nanl <- adtte %>%\n  dplyr::filter(PARAMCD == \"OS\") %>%\n  dplyr::mutate(is_event = CNSR == 0)\nvariables <- list(tte = \"AVAL\", is_event = \"is_event\", arm = \"ARMCD\")\n\n\n\n\n\nCoderesult <- g_km(\n  df = anl,\n  variables = variables,\n  xlab = \"Time (Days)\",\n  annot_coxph = TRUE\n)\n\n\n\n\n\n\n\nCoderesult <- g_km(\n  df = anl,\n  variables = variables,\n  xlab = \"Time (Days)\",\n  yval = \"Failure\",\n  annot_surv_med = TRUE,\n  annot_coxph = TRUE,\n  font_size = 7.5,\n  position_coxph = c(0.3, 0),\n  position_surv_med = c(0.9, 0.3)\n)\n\n\n\n\n\n\n\nCoderesult <- g_km(\n  df = anl,\n  variables = variables,\n  xlab = \"Time (Days)\",\n  annot_surv_med = TRUE\n)\n\n\n\n\n\n\n\nCoderesult <- g_km(\n  df = anl,\n  variables = variables,\n  censor_show = FALSE,\n  xlab = \"Time (Days)\",\n  annot_coxph = TRUE\n)\n\n\n\n\n\n\n\nCoderesult <- g_km(\n  df = anl,\n  variables = variables,\n  pch = 1,\n  size = 2,\n  xlab = \"Time (Days)\",\n  annot_coxph = TRUE\n)\n\n\n\n\n\n\n\nCodevariables$strat <- c(\"STRATA1\", \"STRATA2\")\nresult <- g_km(\n  df = anl,\n  variables = variables,\n  control_surv = control_surv_timepoint(conf_level = 0.8),\n  xlab = \"Time (Days)\",\n  annot_coxph = TRUE,\n  control_coxph_pw = control_coxph(\n    pval_method = \"wald\",\n    ties = \"breslow\",\n    conf_level = 0.8\n  )\n)\n\n\n\n\n\n\n\nCodelibrary(teal.modules.clinical)\nlibrary(scda)\n\nADSL <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nADTTE <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adtte\")\n\narm_ref_comp <- list(\n  ACTARMCD = list(\n    ref = \"ARM B\",\n    comp = c(\"ARM A\", \"ARM C\")\n  ),\n  ARM = list(\n    ref = \"B: Placebo\",\n    comp = c(\"A: Drug X\", \"C: Combination\")\n  )\n)\n\napp <- init(\n  data = cdisc_data(\n    cdisc_dataset(\"ADSL\", ADSL, code = 'ADSL <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")'),\n    cdisc_dataset(\"ADTTE\", ADTTE, code = 'ADTTE <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adtte\")'),\n    check = TRUE\n  ),\n  modules = modules(\n    tm_g_km(\n      label = \"KM PLOT\",\n      plot_height = c(600, 100, 2000),\n      dataname = \"ADTTE\",\n      arm_var = choices_selected(\n        variable_choices(ADSL, c(\"ARM\", \"ARMCD\", \"ACTARMCD\")),\n        \"ARM\"\n      ),\n      paramcd = choices_selected(\n        value_choices(ADTTE, \"PARAMCD\", \"PARAM\"),\n        \"OS\"\n      ),\n      arm_ref_comp = arm_ref_comp,\n      strata_var = choices_selected(\n        variable_choices(ADSL, c(\"SEX\", \"BMRKR2\")),\n        \"SEX\"\n      ),\n      facet_var = choices_selected(\n        variable_choices(ADSL, c(\"SEX\", \"BMRKR2\")),\n        NULL\n      )\n    )\n  )\n)\n\n[INFO] 2023-03-10 05:15:49.1344 pid:1840 token:[] teal.modules.clinical Initializing tm_g_km\n\nCodeshinyApp(app$ui, app$server)\n\n\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n [1] teal.modules.clinical_0.8.14.9026 teal_0.12.0.9023                 \n [3] teal.transform_0.2.0.9011         teal.data_0.1.2.9013             \n [5] shiny_1.7.4                       nestcolor_0.1.0.9005             \n [7] dplyr_1.1.0                       scda_0.1.5.9009                  \n [9] tern_0.7.10.9056                  rtables_0.6.0.1                  \n[11] formatters_0.4.0                  magrittr_2.0.3                   \n\nloaded via a namespace (and not attached):\n [1] sass_0.4.5               tidyr_1.3.0              jsonlite_1.8.4          \n [4] splines_4.2.2            R.utils_2.12.2           bslib_0.4.2             \n [7] teal.slice_0.2.0.9026    Rdpack_2.4               assertthat_0.2.1        \n[10] teal.code_0.3.0.9001     tern.gee_0.1.0.9002      yaml_2.3.7              \n[13] pillar_1.8.1             backports_1.4.1          lattice_0.20-45         \n[16] glue_1.6.2               teal.widgets_0.2.0.9024  digest_0.6.31           \n[19] promises_1.2.0.1         rbibutils_2.2.13         checkmate_2.1.0         \n[22] colorspace_2.1-0         R.oo_1.25.0              htmltools_0.5.4         \n[25] httpuv_1.6.9             Matrix_1.5-3             pkgconfig_2.0.3         \n[28] broom_1.0.3              logger_0.2.2             purrr_1.0.1             \n[31] xtable_1.8-4             mvtnorm_1.1-3            webshot_0.5.4           \n[34] scales_1.2.1             processx_3.8.0           fontawesome_0.5.0       \n[37] later_1.3.0              emmeans_1.8.4-1          tibble_3.1.8            \n[40] styler_1.9.1             generics_0.1.3           farver_2.1.1            \n[43] ggplot2_3.4.1            ellipsis_0.3.2           shinyvalidate_0.1.2     \n[46] cachem_1.0.7             withr_2.5.0              shinyjs_2.1.0           \n[49] geepack_1.3.9            cli_3.6.0                survival_3.5-3          \n[52] mime_0.12                memoise_2.0.1            ps_1.7.2                \n[55] estimability_1.4.1       evaluate_0.20            R.methodsS3_1.8.2       \n[58] fansi_1.0.4              R.cache_0.16.0           nlme_3.1-162            \n[61] MASS_7.3-58.3            textshaping_0.3.6        teal.reporter_0.1.1.9013\n[64] tools_4.2.2              lifecycle_1.0.3          munsell_0.5.0           \n[67] callr_3.7.3              jquerylib_0.1.4          compiler_4.2.2          \n[70] systemfonts_1.0.4        rlang_1.0.6              grid_4.2.2              \n[73] htmlwidgets_1.6.1        labeling_0.4.2           rmarkdown_2.20          \n[76] shinyWidgets_0.7.6       gtable_0.3.1             codetools_0.2-19        \n[79] teal.logger_0.1.1.9004   R6_2.5.1                 gridExtra_2.3           \n[82] knitr_1.42               fastmap_1.1.1            utf8_1.2.3              \n[85] ragg_1.2.5               Rcpp_1.0.10              vctrs_0.5.2             \n[88] tidyselect_1.2.0         xfun_0.37                coda_0.19-4             \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R                       [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/graphs/other/kmg01.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "graphs/other/fstg02.html",
    "href": "graphs/other/fstg02.html",
    "title": "FSTG02",
    "section": "",
    "text": "Data Setup\nStandard Plot\nPlot Specifying Class Variables and  Options for the Treatment Variable\nPlot Selecting Columns and  Changing the Alpha Level)\nPlot with Fixed  Symbol Size\nTeal\nSession Info\n\n\n\n\nCodelibrary(tern)\nlibrary(dplyr)\nlibrary(forcats)\nlibrary(nestcolor)\nlibrary(scda)\n\npreprocess_adtte <- function(adtte) {\n  # Save variable labels before data processing steps.\n  adtte_labels <- var_labels(adtte)\n\n  adtte <- adtte %>%\n    df_explicit_na() %>%\n    dplyr::filter(\n      PARAMCD == \"OS\",\n      ARM %in% c(\"B: Placebo\", \"A: Drug X\"),\n      SEX %in% c(\"M\", \"F\")\n    ) %>%\n    dplyr::mutate(\n      # Reorder levels of ARM to display reference arm before treatment arm.\n      ARM = droplevels(forcats::fct_relevel(ARM, \"B: Placebo\")),\n      SEX = droplevels(SEX),\n      is_event = CNSR == 0,\n      # Convert time to MONTH\n      AVAL = day2month(AVAL),\n      AVALU = \"Months\"\n    ) %>%\n    var_relabel(\n      ARM = adtte_labels[\"ARM\"],\n      SEX = adtte_labels[\"SEX\"],\n      is_event = \"Event Flag\",\n      AVAL = adtte_labels[\"AVAL\"],\n      AVALU = adtte_labels[\"AVALU\"]\n    )\n\n  adtte\n}\n\nanl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adtte\") %>%\n  preprocess_adtte()\n\n\n\n\n\nCodeanl1 <- anl\n\ndf <- extract_survival_subgroups(\n  variables = list(tte = \"AVAL\", is_event = \"is_event\", arm = \"ARM\", subgroups = c(\"SEX\", \"BMRKR2\")),\n  data = anl1\n)\n\nresult <- basic_table() %>%\n  tabulate_survival_subgroups(\n    df = df,\n    vars = c(\"n_tot\", \"n\", \"median\", \"hr\", \"ci\"),\n    time_unit = anl1$AVALU[1]\n  )\nresult\n\nBaseline Risk Factors                          B: Placebo               A: Drug X                                    \n                                Total n    n    Median (Months)    n    Median (Months)   Hazard Ratio   95% Wald CI \n—————————————————————————————————————————————————————————————————————————————————————————————————————————————————————\nAll Patients                      268     134        27.5         134        41.4             0.72       (0.53, 0.98)\nSex                                                                                                                  \n  F                               161     82         28.0         79         41.9             0.70       (0.46, 1.05)\n  M                               107     52         17.3         55         27.9             0.78       (0.49, 1.26)\nCategorical Level Biomarker 2                                                                                        \n  LOW                             95      45         24.7         50         38.1             0.71       (0.42, 1.17)\n  MEDIUM                          93      56         23.7         37         41.7             0.57       (0.32, 1.01)\n  HIGH                            80      33         27.9         47         35.2             0.98       (0.56, 1.72)\n\nCode# Add plot.\np <- g_forest(\n  tbl = result\n)\n\ngrid::grid.draw(p)\n\n\n\n\n\n\n\nCodeanl2 <- anl %>%\n  mutate(\n    # Recode levels of arm.\n    ARM = forcats::fct_recode(\n      ARM,\n      \"Placebo\" = \"B: Placebo\",\n      \"Drug X\" = \"A: Drug X\"\n    ),\n    # Reorder levels of `SEX`.\n    SEX = forcats::fct_relevel(SEX, \"M\", \"F\"),\n    # Reorder levels of `STRATA1`` by frequency.\n    STRATA1 = forcats::fct_infreq(STRATA1)\n  )\n\ndf <- extract_survival_subgroups(\n  variables = list(tte = \"AVAL\", is_event = \"is_event\", arm = \"ARM\", subgroups = c(\"SEX\", \"STRATA1\")),\n  data = anl2\n)\n\nresult <- basic_table() %>%\n  tabulate_survival_subgroups(\n    df = df,\n    vars = c(\"n_tot\", \"n\", \"median\", \"hr\", \"ci\"),\n    time_unit = anl2$AVALU[1]\n  )\nresult\n\nBaseline Risk Factors                      Placebo                 Drug X                                      \n                          Total n    n    Median (Months)    n    Median (Months)   Hazard Ratio   95% Wald CI \n———————————————————————————————————————————————————————————————————————————————————————————————————————————————\nAll Patients                268     134        27.5         134        41.4             0.72       (0.53, 0.98)\nSex                                                                                                            \n  M                         107     52         17.3         55         27.9             0.78       (0.49, 1.26)\n  F                         161     82         28.0         79         41.9             0.70       (0.46, 1.05)\nStratification Factor 1                                                                                        \n  C                         94      45         16.3         49         54.7             0.53       (0.31, 0.90)\n  B                         92      45         27.9         47         32.4             0.87       (0.53, 1.45)\n  A                         82      44         35.7         38         35.2             0.86       (0.48, 1.53)\n\nCodep <- g_forest(\n  tbl = result\n)\n\ngrid::grid.draw(p)\n\n\n\n\n\n\n\nCodeanl3 <- anl\n\ndf <- extract_survival_subgroups(\n  variables = list(tte = \"AVAL\", is_event = \"is_event\", arm = \"ARM\", subgroups = c(\"SEX\", \"BMRKR2\")),\n  control = control_coxph(conf_level = 0.9),\n  data = anl3\n)\n\nresult <- basic_table() %>%\n  tabulate_survival_subgroups(\n    df = df,\n    vars = c(\"n_tot\", \"hr\", \"ci\")\n  )\nresult\n\nBaseline Risk Factors                                                \n                                Total n   Hazard Ratio   90% Wald CI \n—————————————————————————————————————————————————————————————————————\nAll Patients                      268         0.72       (0.55, 0.93)\nSex                                                                  \n  F                               161         0.70       (0.50, 0.98)\n  M                               107         0.78       (0.53, 1.17)\nCategorical Level Biomarker 2                                        \n  LOW                             95          0.71       (0.46, 1.08)\n  MEDIUM                          93          0.57       (0.36, 0.92)\n  HIGH                            80          0.98       (0.61, 1.57)\n\nCode# Add plot.\np <- g_forest(\n  tbl = result\n)\n\ngrid::grid.draw(p)\n\n\n\n\n\n\n\nCodeanl4 <- anl\n\ndf <- extract_survival_subgroups(\n  variables = list(tte = \"AVAL\", is_event = \"is_event\", arm = \"ARM\", subgroups = c(\"SEX\", \"BMRKR2\")),\n  data = anl4\n)\n\nresult <- basic_table() %>%\n  tabulate_survival_subgroups(\n    df = df,\n    vars = c(\"n_tot\", \"n\", \"median\", \"hr\", \"ci\"),\n    time_unit = anl4$AVALU[1]\n  )\nresult\n\nBaseline Risk Factors                          B: Placebo               A: Drug X                                    \n                                Total n    n    Median (Months)    n    Median (Months)   Hazard Ratio   95% Wald CI \n—————————————————————————————————————————————————————————————————————————————————————————————————————————————————————\nAll Patients                      268     134        27.5         134        41.4             0.72       (0.53, 0.98)\nSex                                                                                                                  \n  F                               161     82         28.0         79         41.9             0.70       (0.46, 1.05)\n  M                               107     52         17.3         55         27.9             0.78       (0.49, 1.26)\nCategorical Level Biomarker 2                                                                                        \n  LOW                             95      45         24.7         50         38.1             0.71       (0.42, 1.17)\n  MEDIUM                          93      56         23.7         37         41.7             0.57       (0.32, 1.01)\n  HIGH                            80      33         27.9         47         35.2             0.98       (0.56, 1.72)\n\nCode# Add plot.\np <- g_forest(\n  tbl = result,\n  col_symbol_size = NULL\n)\n\ngrid::grid.draw(p)\n\n\n\n\n\n\n\nCodelibrary(teal.modules.clinical)\nlibrary(scda)\n\nADSL <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nADSL <- ADSL %>%\n  dplyr::filter(ARM %in% c(\"B: Placebo\", \"A: Drug X\")) %>%\n  dplyr::mutate(ARM = droplevels(forcats::fct_relevel(ARM, \"B: Placebo\"))) %>%\n  dplyr::mutate(ARMCD = droplevels(forcats::fct_relevel(ARMCD, \"ARM B\")))\nADSL$RACE <- droplevels(ADSL$RACE)\n\nADTTE <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adtte\")\nadtte_labels <- var_labels(ADTTE)\n\nADTTE <- ADTTE %>%\n  dplyr::filter(\n    PARAMCD == \"OS\",\n    ARM %in% c(\"B: Placebo\", \"A: Drug X\"),\n    SEX %in% c(\"M\", \"F\")\n  ) %>%\n  dplyr::mutate(\n    # Reorder levels of ARM to display reference arm before treatment arm.\n    ARM = droplevels(forcats::fct_relevel(ARM, \"B: Placebo\")),\n    SEX = droplevels(SEX),\n    is_event = CNSR == 0,\n    # Convert time to MONTH\n    AVAL = day2month(AVAL),\n    AVALU = \"Months\"\n  ) %>%\n  var_relabel(\n    ARM = adtte_labels[\"ARM\"],\n    SEX = adtte_labels[\"SEX\"],\n    is_event = \"Event Flag\",\n    AVAL = adtte_labels[\"AVAL\"],\n    AVALU = adtte_labels[\"AVALU\"]\n  )\n\napp <- init(\n  data = cdisc_data(\n    cdisc_dataset(\"ADSL\", ADSL,\n      code = 'ADSL <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\n      ADSL <- ADSL %>%\n        dplyr::filter(ARM %in% c(\"B: Placebo\", \"A: Drug X\")) %>%\n        dplyr::mutate(ARM = droplevels(forcats::fct_relevel(ARM, \"B: Placebo\"))) %>%\n        dplyr::mutate(ARMCD = droplevels(forcats::fct_relevel(ARMCD, \"ARM B\")))\n      ADSL$RACE <- droplevels(ADSL$RACE)\n      '\n    ),\n    cdisc_dataset(\"ADTTE\", ADTTE, code = '\n                  ADTTE <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adtte\")\n                  adtte_labels <- var_labels(ADTTE)\n                  ADTTE <- ADTTE %>%\n                    dplyr::filter(\n                      PARAMCD == \"OS\",\n                      ARM %in% c(\"B: Placebo\", \"A: Drug X\"),\n                      SEX %in% c(\"M\", \"F\")\n                    ) %>%\n                    dplyr::mutate(\n                      # Reorder levels of ARM to display reference arm before treatment arm.\n                      ARM = droplevels(forcats::fct_relevel(ARM, \"B: Placebo\")),\n                      SEX = droplevels(SEX),\n                      is_event = CNSR == 0,\n                      # Convert time to MONTH\n                      AVAL = day2month(AVAL),\n                      AVALU = \"Months\"\n                    ) %>%\n                    var_relabel(\n                      ARM = adtte_labels[\"ARM\"],\n                      SEX = adtte_labels[\"SEX\"],\n                      is_event = \"Event Flag\",\n                      AVAL = adtte_labels[\"AVAL\"],\n                      AVALU = adtte_labels[\"AVALU\"]\n                    )\n                  '),\n    check = TRUE\n  ),\n  modules = modules(\n    tm_g_forest_tte(\n      label = \"Forest Survival\",\n      dataname = \"ADTTE\",\n      arm_var = choices_selected(c(\"ARM\", \"ARMCD\"), \"ARM\"),\n      subgroup_var = choices_selected(names(ADSL), c(\"SEX\", \"BMRKR2\")),\n      paramcd = choices_selected(value_choices(ADTTE, \"PARAMCD\", \"PARAM\"), \"OS\"),\n      strata_var = choices_selected(c(\"STRATA1\", \"STRATA2\"), \"STRATA2\"),\n      plot_height = c(600, 200, 2000),\n      plot_width = c(1500, 200, 5000)\n    )\n  )\n)\n\n[INFO] 2023-03-10 05:16:48.8293 pid:1955 token:[] teal.modules.clinical Initializing tm_g_forest_tte\n\nCodeshinyApp(app$ui, app$server)\n\n\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n [1] teal.modules.clinical_0.8.14.9026 teal_0.12.0.9023                 \n [3] teal.transform_0.2.0.9011         teal.data_0.1.2.9013             \n [5] shiny_1.7.4                       scda_0.1.5.9009                  \n [7] nestcolor_0.1.0.9005              forcats_1.0.0                    \n [9] dplyr_1.1.0                       tern_0.7.10.9056                 \n[11] rtables_0.6.0.1                   formatters_0.4.0                 \n[13] magrittr_2.0.3                   \n\nloaded via a namespace (and not attached):\n [1] sass_0.4.5               tidyr_1.3.0              jsonlite_1.8.4          \n [4] splines_4.2.2            R.utils_2.12.2           bslib_0.4.2             \n [7] teal.slice_0.2.0.9026    Rdpack_2.4               assertthat_0.2.1        \n[10] teal.code_0.3.0.9001     tern.gee_0.1.0.9002      yaml_2.3.7              \n[13] pillar_1.8.1             backports_1.4.1          lattice_0.20-45         \n[16] glue_1.6.2               teal.widgets_0.2.0.9024  digest_0.6.31           \n[19] promises_1.2.0.1         rbibutils_2.2.13         checkmate_2.1.0         \n[22] colorspace_2.1-0         R.oo_1.25.0              htmltools_0.5.4         \n[25] httpuv_1.6.9             Matrix_1.5-3             pkgconfig_2.0.3         \n[28] broom_1.0.3              logger_0.2.2             purrr_1.0.1             \n[31] xtable_1.8-4             mvtnorm_1.1-3            scales_1.2.1            \n[34] webshot_0.5.4            processx_3.8.0           fontawesome_0.5.0       \n[37] later_1.3.0              emmeans_1.8.4-1          tibble_3.1.8            \n[40] styler_1.9.1             generics_0.1.3           ggplot2_3.4.1           \n[43] ellipsis_0.3.2           shinyvalidate_0.1.2      cachem_1.0.7            \n[46] withr_2.5.0              shinyjs_2.1.0            geepack_1.3.9           \n[49] cli_3.6.0                survival_3.5-3           mime_0.12               \n[52] memoise_2.0.1            ps_1.7.2                 estimability_1.4.1      \n[55] evaluate_0.20            R.methodsS3_1.8.2        fansi_1.0.4             \n[58] R.cache_0.16.0           nlme_3.1-162             MASS_7.3-58.3           \n[61] textshaping_0.3.6        teal.reporter_0.1.1.9013 tools_4.2.2             \n[64] lifecycle_1.0.3          munsell_0.5.0            callr_3.7.3             \n[67] compiler_4.2.2           jquerylib_0.1.4          systemfonts_1.0.4       \n[70] rlang_1.0.6              grid_4.2.2               htmlwidgets_1.6.1       \n[73] shinyWidgets_0.7.6       rmarkdown_2.20           gtable_0.3.1            \n[76] codetools_0.2-19         teal.logger_0.1.1.9004   R6_2.5.1                \n[79] knitr_1.42               fastmap_1.1.1            utf8_1.2.3              \n[82] ragg_1.2.5               Rcpp_1.0.10              vctrs_0.5.2             \n[85] tidyselect_1.2.0         xfun_0.37                coda_0.19-4             \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R                       [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/graphs/other/fstg02.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "graphs/other/bwg01.html",
    "href": "graphs/other/bwg01.html",
    "title": "BWG01",
    "section": "",
    "text": "Data Setup\nStandard Plot\nPlot Changing  Whiskers\nPlot Adding  Outliers\nPlot Specifying Marker  for Outliers and  Adding Patient ID\nPlot Specifying  Marker for Mean\nPlot by Treatment  and Timepoint\nPlot by Timepoint  and Treatment\nPlot with  Table Section\nPlot with Number of Patients  only in Table Section\nTeal\nSession Info\n\n\n\n\nCode# generic code for all plots\nlibrary(scda)\nlibrary(dplyr)\nlibrary(ggplot2)\nlibrary(nestcolor)\n\nadlb <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adlb\")\nadlb <- adlb %>% filter(PARAMCD == \"ALT\" & AVISIT == \"WEEK 2 DAY 15\")\n\n# Definition of boxplot boundaries and whiskers\nfive_num <- function(x, probs = c(0, 0.25, 0.5, 0.75, 1)) {\n  r <- quantile(x, probs)\n  names(r) <- c(\"ymin\", \"lower\", \"middle\", \"upper\", \"ymax\")\n  r\n}\n\n# get outliers based on quantile\n# for outliers based on IQR see coef in geom_boxplot\nget_outliers <- function(x, probs = c(0.05, 0.95)) {\n  r <- subset(x, x < quantile(x, probs[1]) | quantile(x, probs[2]) < x)\n  if (!is.null(x)) {\n    x_names <- subset(names(x), x < quantile(x, probs[1]) | quantile(x, probs[2]) < x)\n    names(r) <- x_names\n  }\n  r\n}\n\n# create theme used for all plots\ntheme_bp <- theme(\n  plot.title = element_text(hjust = 0),\n  plot.subtitle = element_text(hjust = 0),\n  plot.caption = element_text(hjust = 0),\n  panel.background = element_rect(fill = \"white\", color = \"grey50\")\n)\n\n# assign fill color and outline color\nfc <- \"#eaeef5\"\noc <- getOption(\"ggplot2.discrete.fill\")[1]\n\n# get plot metadata data to derive coordinates for adding annotations\nbp_annos <- function(bp, color, annos = 1) {\n  bp_mdat <- ggplot_build(bp)$data[[1]]\n  # bp_metadata <<- bp_mdat\n  if (annos == 1) {\n    bp <- bp +\n      geom_segment(data = bp_mdat, aes(\n        x = xmin + (xmax - xmin) / 4, xend = xmax - (xmax - xmin) / 4,\n        y = ymax, yend = ymax\n      ), size = .5, color = color) +\n      geom_segment(data = bp_mdat, aes(\n        x = xmin + (xmax - xmin) / 4, xend = xmax - (xmax - xmin) / 4,\n        y = ymin, yend = ymin\n      ), size = .5, color = color)\n  } else {\n    bp <- bp +\n      geom_segment(data = bp_mdat, aes(\n        x = xmin + (xmax - xmin) / 4, xend = xmax - (xmax - xmin) / 4,\n        y = ymax, yend = ymax\n      ), size = .5, color = color) +\n      geom_segment(data = bp_mdat, aes(\n        x = xmin + (xmax - xmin) / 4, xend = xmax - (xmax - xmin) / 4,\n        y = ymin, yend = ymin\n      ), size = .5, color = color) +\n      geom_segment(data = bp_mdat, aes(\n        x = xmin, xend = xmax,\n        y = middle, yend = middle\n      ), colour = color, size = .5)\n  }\n  return(bp)\n}\n\n\n\n\n\nCodebp_1 <- ggplot(adlb, aes(x = ARMCD, y = AVAL)) +\n  stat_summary(geom = \"boxplot\", fun.data = five_num, fill = fc, color = oc) +\n  stat_summary(geom = \"point\", fun = mean, size = 3, shape = 8) +\n  labs(\n    title = \"Box Plot of Laboratory Test Results\",\n    subtitle = paste(\"Visit:\", adlb$AVISIT[1]),\n    caption = \"The whiskers extend to the minimum and maximum values.\",\n    x = \"Treatment Group\",\n    y = paste0(adlb$PARAMCD[1], \" (\", adlb$AVALU[1], \")\")\n  ) +\n  theme_bp\n\nbp_annos(bp_1, oc)\n\nWarning: Using `size` aesthetic for lines was deprecated in ggplot2 3.4.0.\nℹ Please use `linewidth` instead.\n\n\n\n\n\n\n\n\nCodebp_3 <- ggplot(adlb, aes(x = ARMCD, y = AVAL)) +\n  stat_summary(\n    geom = \"boxplot\", fun.data = five_num,\n    fun.args = list(probs = c(0.05, 0.25, 0.5, 0.75, 0.95)), fill = fc, color = oc\n  ) +\n  stat_summary(geom = \"point\", fun = mean, size = 3, shape = 8) +\n  labs(\n    title = \"Box Plot of Laboratory Test Results\",\n    subtitle = paste(\"Visit:\", adlb$AVISIT[1]),\n    caption = \"The whiskers extend to the 5th and 95th percentile. Values outside the whiskers have not been plotted.\",\n    x = \"Treatment Group\",\n    y = paste0(adlb$PARAMCD[1], \" (\", adlb$AVALU[1], \")\")\n  ) +\n  theme_bp\n\nbp_annos(bp_3, oc)\n\n\n\n\n\n\n\nCodebp_4 <- ggplot(adlb, aes(x = ARMCD, y = AVAL)) +\n  stat_summary(\n    geom = \"boxplot\", fun.data = five_num,\n    fun.args = list(probs = c(0.05, 0.25, 0.5, 0.75, 0.95)), fill = fc, color = oc\n  ) +\n  stat_summary(geom = \"point\", fun = get_outliers, shape = 1) +\n  stat_summary(geom = \"point\", fun = mean, size = 3, shape = 8) +\n  labs(\n    title = \"Box Plot of Laboratory Test Results\",\n    subtitle = paste(\"Visit:\", adlb$AVISIT[1]),\n    caption = \"The whiskers extend to the 5th and 95th percentile.\",\n    x = \"Treatment Group\",\n    y = paste0(adlb$PARAMCD[1], \" (\", adlb$AVALU[1], \")\")\n  ) +\n  theme_bp\n\nbp_annos(bp_4, oc)\n\n\n\n\n\n\n\nCodeadlb_o <- adlb %>%\n  group_by(ARMCD) %>%\n  mutate(OUTLIER = AVAL < quantile(AVAL, 0.01) | AVAL > quantile(AVAL, 0.99)) %>%\n  filter(OUTLIER == TRUE) %>%\n  select(ARMCD, AVAL, USUBJID)\n# Next step may be study-specific: shorten USUBJID to make annotation labels\n# next 2 lines of code split USUBJID by \"-\" and take the last syllable as ID\nn_split <- max(vapply(strsplit(adlb_o$USUBJID, \"-\"), length, numeric(1)))\nadlb_o$ID <- vapply(strsplit(adlb_o$USUBJID, \"-\"), `[[`, n_split, FUN.VALUE = \"a\")\n\nbp_5 <- ggplot(adlb, aes(x = ARMCD, y = AVAL)) +\n  stat_summary(\n    geom = \"boxplot\", fun.data = five_num,\n    fun.args = list(probs = c(0.01, 0.25, 0.5, 0.75, 0.99)), fill = fc, color = oc\n  ) +\n  stat_summary(geom = \"point\", fun = mean, size = 3, shape = 8) +\n  geom_point(data = adlb_o, aes(x = ARMCD, y = AVAL), shape = 1) +\n  geom_text(data = adlb_o, aes(x = ARMCD, y = AVAL, label = ID), size = 3, hjust = -0.2) +\n  labs(\n    title = \"Box Plot of Laboratory Test Results\",\n    subtitle = paste(\"Visit:\", adlb$AVISIT[1]),\n    caption = \"The whiskers extend to the largest and smallest observed value within 1.5*IQR.\",\n    x = \"Treatment Group\",\n    y = paste0(adlb$PARAMCD[1], \" (\", adlb$AVALU[1], \")\")\n  ) +\n  theme_bp\n\nbp_annos(bp_5, oc)\n\n\n\n\n\n\n\nCodebp_6 <- ggplot(adlb, aes(x = ARMCD, y = AVAL)) +\n  geom_boxplot(fill = fc, color = oc) +\n  stat_summary(geom = \"point\", fun = mean, size = 3, shape = 5) +\n  labs(\n    title = \"Box Plot of Laboratory Test Results\",\n    subtitle = paste(\"Visit:\", adlb$AVISIT[1]),\n    caption = \"The whiskers extend to the minimum and maximum values.\",\n    x = \"Treatment Group\",\n    y = paste0(adlb$PARAMCD[1], \" (\", adlb$AVALU[1], \")\")\n  ) +\n  theme_bp\n\nbp_annos(bp_6, oc)\n\n\n\n\n\n\n\nCodeadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadlb <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adlb\")\n\nadlb_v <- adlb %>%\n  filter(PARAMCD == \"ALT\" &\n    AVISIT %in% c(\"WEEK 1 DAY 8\", \"WEEK 2 DAY 15\", \"WEEK 3 DAY 22\", \"WEEK 4 DAY 29\"))\n\nbp_7 <- ggplot(adlb_v, aes(x = AVISIT, y = AVAL)) +\n  stat_summary(geom = \"boxplot\", fun.data = five_num, position = position_dodge2(.5), aes(fill = ARMCD, color = ARMCD)) +\n  stat_summary(geom = \"point\", fun = mean, aes(group = ARMCD), size = 3, shape = 8, position = position_dodge2(1)) +\n  labs(\n    title = \"Box Plot of Laboratory Test Results\",\n    caption = \"The whiskers extend to the minimum and maximum values.\",\n    x = \"Visit\",\n    y = paste0(adlb$PARAMCD[1], \" (\", adlb$AVALU[1], \")\")\n  ) +\n  theme_bp\n\nbp_annos(bp_7, oc, 2)\n\n\n\n\n\n\n\nCodebp_8 <- ggplot(adlb_v, aes(x = ARMCD, y = AVAL)) +\n  stat_summary(geom = \"boxplot\", fun.data = five_num, position = position_dodge2(width = .5), aes(fill = AVISIT, color = AVISIT)) +\n  stat_summary(geom = \"point\", fun = mean, aes(group = AVISIT), size = 3, shape = 8, position = position_dodge2(1)) +\n  labs(\n    title = \"Box Plot of Laboratory Test Results\",\n    caption = \"The whiskers extend to the minimum and maximum values.\",\n    x = \"Treatment Group\",\n    y = paste0(adlb$PARAMCD[1], \" (\", adlb$AVALU[1], \")\")\n  ) +\n  theme_bp\n\nbp_annos(bp_8, oc, 2)\n\n\n\n\n\n\n\nCode# Make wide dataset with summary statistics\nadlb_wide <- adlb %>%\n  group_by(ARMCD) %>%\n  summarise(\n    n = n(),\n    mean = round(mean(AVAL), 1),\n    median = round(median(AVAL), 1),\n    median_ci = paste(round(DescTools::MedianCI(AVAL)[1:2], 1), collapse = \" - \"),\n    q1_q3 = paste(round(quantile(AVAL, c(0.25, 0.75)), 1), collapse = \" - \"),\n    min_max = paste0(round(min(AVAL), 1), \"-\", max(round(AVAL, 2)))\n  )\n\n# Make long dataset\nadlb_long <- tidyr::gather(adlb_wide, key = type, value = stat, n:min_max)\nadlb_long <- adlb_long %>% mutate(\n  type_lbl = case_when(\n    type == \"n\" ~ \"n\",\n    type == \"mean\" ~ \"Mean\",\n    type == \"median\" ~ \"Median\",\n    type == \"median_ci\" ~ \"95% CI for Median\",\n    type == \"q1_q3\" ~ \"25% and 75%-ile\",\n    type == \"min_max\" ~ \"Min - Max\"\n  )\n)\nadlb_long$type_lbl <- factor(adlb_long$type_lbl,\n  levels = c(\"Min - Max\", \"25% and 75%-ile\", \"95% CI for Median\", \"Median\", \"Mean\", \"n\")\n)\n\nbp_9 <- ggplot(adlb, aes(x = ARMCD, y = AVAL)) +\n  stat_summary(geom = \"boxplot\", fun.data = five_num, fill = fc, color = oc) +\n  stat_summary(geom = \"point\", fun = mean, size = 3, shape = 8) +\n  labs(\n    title = \"Box Plot of Laboratory Test Results\",\n    subtitle = paste(\"Visit:\", adlb$AVISIT[1]),\n    x = \"Treatment Group\",\n    y = paste0(adlb$PARAMCD[1], \" (\", adlb$AVALU[1], \")\")\n  ) +\n  theme_bp\n\ntbl_theme <- theme(\n  panel.border = element_blank(),\n  panel.grid.major = element_blank(),\n  panel.grid.minor = element_blank(),\n  axis.ticks = element_blank(),\n  axis.title = element_blank(),\n  axis.text.y = element_text(face = \"plain\"),\n  axis.text.x = element_blank()\n)\n\ntbl_1 <- ggplot(adlb_long, aes(x = ARMCD, y = type_lbl, label = stat), vjust = 10) +\n  geom_text(size = 3) +\n  scale_y_discrete(labels = levels(adlb_long$type_lbl)) +\n  theme_bw() +\n  tbl_theme +\n  labs(caption = \"The whiskers extend to the minimum and maximum values.\") +\n  theme_bp\n\nggpubr::ggarrange(bp_annos(bp_9, oc), tbl_1,\n  heights = c(4, 2),\n  ncol = 1, nrow = 2, align = \"v\"\n)\n\n\n\n\n\n\n\nCodetbl_2 <- adlb_long %>%\n  filter(type == \"n\") %>%\n  ggplot(aes(x = ARMCD, y = type_lbl, label = stat)) +\n  geom_text(size = 3) +\n  scale_y_discrete(labels = \"n\") +\n  theme_bw() +\n  tbl_theme +\n  labs(caption = \"The whiskers extend to the minimum and maximum values.\") +\n  theme_bp\n\nggpubr::ggarrange(bp_annos(bp_9, oc), tbl_2,\n  heights = c(6, 1),\n  ncol = 1, nrow = 2, align = \"v\"\n)\n\n\n\n\n\n\n\nCodelibrary(scda)\nlibrary(teal.modules.general)\n\nADSL <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nADLB <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adlb\")\n\n# If PARAMCD and AVISIT are not factors, convert to factors\n# Also fill in missing values with \"<Missing>\"\nADLB <- ADLB %>%\n  tern::df_explicit_na(\n    omit_columns = setdiff(names(ADLB), c(\"PARAMCD\", \"AVISIT\")),\n    char_as_factor = TRUE\n  )\n\n# If statment below fails, pre-process ADLB to be one record per\n# study, subject, param and visit eg. filter with ANLFL = 'Y'\nstopifnot(nrow(ADLB) == nrow(unique(ADLB[, c(\"STUDYID\", \"USUBJID\", \"PARAMCD\", \"AVISIT\")])))\n\napp <- init(\n  data = cdisc_data(\n    cdisc_dataset(\"ADSL\", ADSL),\n    cdisc_dataset(\"ADLB\", ADLB, keys = c(\"STUDYID\", \"USUBJID\", \"PARAMCD\", \"AVISIT\")), # do not modify\n    code = 'ADSL <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\n    ADLB <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adlb\")\n    ADLB <- ADLB %>%\n      tern::df_explicit_na(\n        omit_columns = setdiff(names(ADLB), c(\"PARAMCD\", \"AVISIT\")),\n        char_as_factor = TRUE)'\n  ),\n  modules = modules(\n    tm_g_bivariate(\n      x = data_extract_spec(\n        dataname = \"ADSL\",\n        select = select_spec(\n          label = \"Select variable:\",\n          choices = names(ADSL),\n          selected = \"ARMCD\",\n          fixed = FALSE\n        )\n      ),\n      y = data_extract_spec(\n        dataname = \"ADLB\",\n        filter = list(\n          filter_spec(\n            vars = c(\"PARAMCD\"),\n            choices = levels(ADLB$PARAMCD),\n            selected = levels(ADLB$PARAMCD)[1],\n            multiple = FALSE,\n            label = \"Choose lab parameter\"\n          ),\n          filter_spec(\n            vars = c(\"AVISIT\"),\n            choices = levels(ADLB$AVISIT),\n            selected = levels(ADLB$AVISIT)[1],\n            multiple = FALSE,\n            label = \"Choose visit\"\n          )\n        ),\n        select = select_spec(\n          label = \"Select variable:\",\n          choices = names(ADLB),\n          selected = \"AVAL\",\n          multiple = FALSE,\n          fixed = TRUE\n        )\n      ),\n      row_facet = data_extract_spec(\n        dataname = \"ADLB\",\n        select = select_spec(\n          label = \"Select variables:\",\n          choices = names(ADLB),\n          selected = NULL,\n          multiple = FALSE,\n          fixed = FALSE\n        )\n      ),\n      col_facet = data_extract_spec(\n        dataname = \"ADLB\",\n        select = select_spec(\n          label = \"Select variables:\",\n          choices = names(ADLB),\n          selected = NULL,\n          multiple = FALSE,\n          fixed = FALSE\n        )\n      )\n    )\n  )\n)\n\n[INFO] 2023-03-10 05:17:31.1151 pid:2036 token:[] teal.modules.general Initializing tm_g_bivariate\n\nCodeshinyApp(app$ui, app$server)\n\n\n\n\nWarning: Removed 8000 rows containing non-finite values (`stat_boxplot()`).\n\n\n\n\n\n\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n [1] teal.modules.general_0.2.15.9017 teal_0.12.0.9023                \n [3] teal.transform_0.2.0.9011        magrittr_2.0.3                  \n [5] teal.data_0.1.2.9013             shinyTree_0.2.7                 \n [7] shiny_1.7.4                      ggmosaic_0.3.3                  \n [9] nestcolor_0.1.0.9005             ggplot2_3.4.1                   \n[11] dplyr_1.1.0                      scda_0.1.5.9009                 \n\nloaded via a namespace (and not attached):\n  [1] colorspace_2.1-0         ggsignif_0.6.4           ellipsis_0.3.2          \n  [4] class_7.3-21             gld_2.6.6                rstudioapi_0.14         \n  [7] proxy_0.4-27             ggpubr_0.6.0             farver_2.1.1            \n [10] ggrepel_0.9.3            fansi_1.0.4              mvtnorm_1.1-3           \n [13] R.methodsS3_1.8.2        codetools_0.2-19         splines_4.2.2           \n [16] cachem_1.0.7             rootSolve_1.8.2.3        knitr_1.42              \n [19] jsonlite_1.8.4           broom_1.0.3              R.oo_1.25.0             \n [22] compiler_4.2.2           httr_1.4.5               backports_1.4.1         \n [25] Matrix_1.5-3             fastmap_1.1.1            lazyeval_0.2.2          \n [28] cli_3.6.0                later_1.3.0              htmltools_0.5.4         \n [31] tools_4.2.2              gtable_0.3.1             glue_1.6.2              \n [34] lmom_2.9                 Rcpp_1.0.10              carData_3.0-5           \n [37] styler_1.9.1             cellranger_1.1.0         jquerylib_0.1.4         \n [40] vctrs_0.5.2              teal.logger_0.1.1.9004   xfun_0.37               \n [43] stringr_1.5.0            rbibutils_2.2.13         ps_1.7.2                \n [46] shinyvalidate_0.1.2      mime_0.12                lifecycle_1.0.3         \n [49] rstatix_0.7.2            MASS_7.3-58.3            scales_1.2.1            \n [52] ragg_1.2.5               promises_1.2.0.1         rtables_0.6.0.1         \n [55] expm_0.999-7             tern_0.7.10.9056         yaml_2.3.7              \n [58] Exact_3.2                teal.slice_0.2.0.9026    memoise_2.0.1           \n [61] teal.widgets_0.2.0.9024  sass_0.4.5               stringi_1.7.12          \n [64] e1071_1.7-13             checkmate_2.1.0          teal.reporter_0.1.1.9013\n [67] boot_1.3-28.1            systemfonts_1.0.4        Rdpack_2.4              \n [70] rlang_1.0.6              pkgconfig_2.0.3          teal.code_0.3.0.9001    \n [73] evaluate_0.20            lattice_0.20-45          fontawesome_0.5.0       \n [76] purrr_1.0.1              htmlwidgets_1.6.1        labeling_0.4.2          \n [79] cowplot_1.1.1            tidyselect_1.2.0         processx_3.8.0          \n [82] logger_0.2.2             R6_2.5.1                 DescTools_0.99.48       \n [85] generics_0.1.3           pillar_1.8.1             withr_2.5.0             \n [88] survival_3.5-3           abind_1.4-5              tibble_3.1.8            \n [91] car_3.1-1                shinyWidgets_0.7.6       utf8_1.2.3              \n [94] plotly_4.10.1            rmarkdown_2.20           grid_4.2.2              \n [97] readxl_1.4.2             data.table_1.14.8        callr_3.7.3             \n[100] formatters_0.4.0         forcats_1.0.0            digest_0.6.31           \n[103] webshot_0.5.4            R.cache_0.16.0           xtable_1.8-4            \n[106] tidyr_1.3.0              httpuv_1.6.9             textshaping_0.3.6       \n[109] R.utils_2.12.2           munsell_0.5.0            viridisLite_0.4.1       \n[112] bslib_0.4.2              shinyjs_2.1.0           \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R                      [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/graphs/other/bwg01.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "graphs/other/ltg01.html",
    "href": "graphs/other/ltg01.html",
    "title": "LTG01",
    "section": "",
    "text": "Lattice plots are natively handled by R, the examples below rely mostly on the package ggplot2.\n\n\nData Setup\nPlot of Liver Function Tests\nPlot of Liver Function Tests  Including Mean, Median, and 95% CIs\nTeal\nSession Info\n\n\n\n\nCodelibrary(scda)\nlibrary(tern)\nlibrary(teal)\nlibrary(teal.modules.clinical)\nlibrary(ggplot2)\nlibrary(dplyr)\nlibrary(nestcolor)\n\n# Datasets\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\") %>% slice(1:8)\nadlb <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adlb\") %>% filter(USUBJID %in% adsl$USUBJID)\n\n# Pre-processing\nadlb$AVISIT_txt <- adlb$AVISIT\nadlb$AVISIT <- as.numeric(adlb$AVISIT)\nadlb$ARM_N <- adlb$ARM\nlevels(adlb$ARM_N) <- with(\n  data = adlb,\n  paste0(\n    levels(ARM_N), \" (N = \",\n    tapply(SUBJID, ARM_N, function(x) length(unique(x))), \")\"\n  )\n)\n\n# Plot utils\nnpch <- 1:25\nnpatients <- length(unique(adlb$SUBJID))\npch <- c(\n  rep(npch, times = npatients %/% length(npch)),\n  npch[1:(npatients %% length(npch))]\n)\n\n\n\n\nBasic Plot\n\nCode# General mapping and \"lattice\" (\"facet\" in ggplot2 nomenclature).\ng1 <- {\n  ggplot(\n    data = adlb,\n    mapping = aes(x = AVISIT, y = AVAL, colour = SUBJID, shape = SUBJID)\n  ) +\n    facet_grid(LBTESTCD ~ ARM, scales = \"free_y\") +\n    scale_shape_manual(values = pch)\n}\n\n# Add points and lines.\ng1 <- g1 + geom_point()\ng1 <- g1 + geom_line()\ng1\n\n\n\n\nModifying Facets\nThe units describing rows of panes and the number of patients under each arm is specified by modifying facet_grid():\n\nCode# Include the units and the sample size N.\ng2 <- g1 + facet_grid(\n  paste0(LBTESTCD, \"\\n(\", AVALU, \")\") ~ ARM_N,\n  scales = \"free_y\"\n)\n\ng2\n\n\n\n\nModifying X-Axis\nThe graphic elements are modified through usual ggplot2 functions. For instance, the x-axis could be improved as follows:\n\nCodeg3 <- g2 + theme(\n  axis.text.x = element_text(angle = 45, hjust = 1),\n  axis.title = element_blank()\n) + scale_x_continuous(breaks = adlb$AVISIT, labels = adlb$AVISIT_txt)\n\ng3\n\n\n\n\n\n\n\nThe functions stat_mean_ci and stat_median_ci from the tern package allow the addition of mean and/or median confidence intervals. The example below suggests a larger dataset, where the individual subject legend may not be relevant but the mean or the median are of special interest.\nPre-Processing\n\nCode# Datasets\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\") %>% slice(1:40)\nadlb <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adlb\") %>% filter(USUBJID %in% adsl$USUBJID)\n\n# Pre-processing\nadlb$AVISIT_txt <- adlb$AVISIT\nadlb$AVISIT <- as.numeric(adlb$AVISIT)\nadlb$ARM_N <- adlb$ARM\nlevels(adlb$ARM_N) <- with(\n  data = adlb,\n  paste0(\n    levels(ARM_N), \" (N = \",\n    tapply(SUBJID, ARM_N, function(x) length(unique(x))), \")\"\n  )\n)\n\n# Plot utils\nnpch <- 1:25\nnpatients <- length(unique(adlb$SUBJID))\npch <- c(\n  rep(npch, times = npatients %/% length(npch)),\n  npch[1:(npatients %% length(npch))]\n)\n\n\nBasic Plot\n\nCode# General mapping and \"lattice\" (\"facet\" in ggplot2 nomenclature)\ng4 <- {\n  ggplot(\n    data = adlb,\n    mapping = aes(x = AVISIT, y = AVAL, colour = SUBJID, shape = SUBJID)\n  ) +\n    facet_grid(LBTESTCD ~ ARM_N, scales = \"free_y\") +\n    scale_shape_manual(values = pch) +\n    scale_color_manual(values = rep(getOption(\"ggplot2.discrete.colour\"), 2))\n}\n\n# Add points and lines.\n# Note that with so many patients, legend might not be useful and transparency\n#   is advisable.\ng4 <- g4 + geom_point(alpha = .3)\ng4 <- g4 + geom_line(alpha = .3)\ng4 <- g4 + guides(colour = \"none\", shape = \"none\")\ng4 <- g4 + theme(\n  axis.text.x = element_text(angle = 45, hjust = 1),\n  axis.title  = element_blank()\n)\ng4 <- g4 + scale_x_continuous(breaks = adlb$AVISIT, labels = adlb$AVISIT_txt)\ng4\n\n\n\n\nAdding Mean\n\nCode# Add the mean along with the 95% CI at every visit.\nmean_text <- \"Mean +/- 95% CI\"\ng51 <- g4 + stat_summary(\n  fun = mean, linewidth = 1, geom = \"line\",\n  aes(group = 1, linetype = mean_text)\n)\ng51 <- g51 + stat_summary(\n  fun.data = stat_mean_ci, geom = \"errorbar\",\n  aes(group = 1, linetype = mean_text)\n)\ng51\n\n\n\n\nAdding Median\n\nCode# Instead of a mean, the median could be more relevant. Add the median and 95% CI as follows.\nmedian_text <- \"Median +/- 95% CI\"\ng52 <- g51 + stat_summary(\n  fun = median, linewidth = 1, geom = \"line\",\n  aes(group = 1, linetype = median_text)\n)\ng52 <- g52 + stat_summary(\n  fun.data = stat_median_ci, geom = \"errorbar\",\n  aes(group = 1, linetype = median_text)\n)\ng52 + guides(linetype = guide_legend(title = \"Aggregate\"))\n\n\n\n\nChanging Confidence Level\n\nCode# Change the confidence level of interval.\n# Note: check `?stat_mean_ci()` and `?stat_median_ci()` for further fine tuning.\nmedian_text <- \"Median +/- 80% CI\"\ng53 <- g4 + stat_summary(\n  fun = median, linewidth = 1, geom = \"line\",\n  aes(group = 1, linetype = median_text)\n)\ng53 <- g53 + stat_summary(\n  fun.data = function(x) stat_median_ci(x, conf_level = 0.8),\n  geom = \"errorbar\", aes(group = 1, linetype = median_text)\n)\ng53\n\n\n\n\n\n\n\n\nCode# In progress\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n [1] nestcolor_0.1.0.9005              dplyr_1.1.0                      \n [3] ggplot2_3.4.1                     teal.modules.clinical_0.8.14.9026\n [5] teal_0.12.0.9023                  teal.transform_0.2.0.9011        \n [7] teal.data_0.1.2.9013              shiny_1.7.4                      \n [9] tern_0.7.10.9056                  rtables_0.6.0.1                  \n[11] formatters_0.4.0                  magrittr_2.0.3                   \n[13] scda_0.1.5.9009                  \n\nloaded via a namespace (and not attached):\n [1] Rcpp_1.0.10            mvtnorm_1.1-3          lattice_0.20-45       \n [4] tidyr_1.3.0            assertthat_0.2.1       digest_0.6.31         \n [7] utf8_1.2.3             mime_0.12              R6_2.5.1              \n[10] backports_1.4.1        evaluate_0.20          coda_0.19-4           \n[13] pillar_1.8.1           Rdpack_2.4             geepack_1.3.9         \n[16] rlang_1.0.6            Matrix_1.5-3           checkmate_2.1.0       \n[19] rmarkdown_2.20         labeling_0.4.2         splines_4.2.2         \n[22] shinyjs_2.1.0          htmlwidgets_1.6.1      munsell_0.5.0         \n[25] broom_1.0.3            compiler_4.2.2         httpuv_1.6.9          \n[28] xfun_0.37              pkgconfig_2.0.3        htmltools_0.5.4       \n[31] tidyselect_1.2.0       tibble_3.1.8           teal.logger_0.1.1.9004\n[34] codetools_0.2-19       fansi_1.0.4            withr_2.5.0           \n[37] later_1.3.0            MASS_7.3-58.3          rbibutils_2.2.13      \n[40] grid_4.2.2             nlme_3.1-162           jsonlite_1.8.4        \n[43] xtable_1.8-4           gtable_0.3.1           lifecycle_1.0.3       \n[46] scales_1.2.1           estimability_1.4.1     cli_3.6.0             \n[49] farver_2.1.1           promises_1.2.0.1       logger_0.2.2          \n[52] ellipsis_0.3.2         generics_0.1.3         vctrs_0.5.2           \n[55] tools_4.2.2            glue_1.6.2             purrr_1.0.1           \n[58] emmeans_1.8.4-1        fastmap_1.1.1          survival_3.5-3        \n[61] yaml_2.3.7             colorspace_2.1-0       tern.gee_0.1.0.9002   \n[64] knitr_1.42            \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R                       [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/graphs/other/ltg01.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "graphs/other/cig01.html",
    "href": "graphs/other/cig01.html",
    "title": "CIG01",
    "section": "",
    "text": "Data Setup\nPlot of Mean and  95% CIs for Mean\nPlot of Confidence Interval Using  a Different Stratification Variable\nPlot of Median and  95% CIs for Median\nPlot of Median and 95% CIs for  Median Using Different Alpha Level\nTable of Mean  and Median\nTeal\nSession Info\n\n\n\n\nCodelibrary(tern)\nlibrary(ggplot2)\nlibrary(dplyr)\nlibrary(scda)\nlibrary(nestcolor)\n\nadlb <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adlb\") %>%\n  filter(PARAMCD == \"ALT\", AVISIT == \"BASELINE\")\n\n\n\n\nThe function stat_mean_ci from the tern package can be used with default values to draw the 95% confidence interval around the mean.\n\nCodeggplot(\n  data = adlb,\n  mapping = aes(\n    x = ARMCD, y = AVAL, color = SEX,\n    lty = SEX, shape = SEX\n  )\n) +\n  stat_summary(\n    fun.data = stat_mean_ci,\n    geom = \"errorbar\",\n    width = 0.1,\n    position = position_dodge(width = 0.5)\n  ) +\n  stat_summary(\n    fun = mean,\n    geom = \"point\",\n    position = position_dodge(width = 0.5)\n  ) +\n  labs(\n    title = \"Confidence Interval Plot by Treatment Group\",\n    caption = \"Mean and 95% CIs for mean are displayed.\",\n    x = \"Treatment Group\",\n    y = paste0(adlb$PARAMCD[1], \" (\", adlb$AVALU[1], \")\")\n  )\n\n\n\n\n\n\n\nCodeggplot(\n  data = adlb,\n  mapping = aes(\n    x = ARMCD, y = AVAL, color = STRATA2,\n    lty = STRATA2, shape = STRATA2\n  )\n) +\n  stat_summary(\n    fun.data = stat_mean_ci,\n    geom = \"errorbar\",\n    width = 0.1,\n    position = position_dodge(width = 0.5)\n  ) +\n  stat_summary(\n    fun = mean,\n    geom = \"point\",\n    position = position_dodge(width = 0.5)\n  ) +\n  labs(\n    title = \"Confidence Interval Plot by Treatment Group\",\n    caption = \"Mean and 95% CIs for mean are displayed.\",\n    x = \"Treatment Group\",\n    y = paste0(adlb$PARAMCD[1], \" (\", adlb$AVALU[1], \")\")\n  )\n\n\n\n\n\n\nThe function stat_median_ci from the tern package works similarly to stat_mean_ci.\n\nCodeggplot(\n  data = adlb,\n  mapping = aes(\n    x = ARMCD, y = AVAL, color = STRATA1,\n    lty = STRATA1, shape = STRATA1\n  )\n) +\n  stat_summary(\n    fun.data = stat_median_ci,\n    geom = \"errorbar\",\n    width = 0.1,\n    position = position_dodge(width = 0.5)\n  ) +\n  stat_summary(\n    fun = median,\n    geom = \"point\",\n    position = position_dodge(width = 0.5)\n  ) +\n  labs(\n    title = \"Confidence Interval Plot by Treatment Group\",\n    caption = \"Median and 95% CIs for median are displayed.\",\n    x = \"Treatment Group\",\n    y = paste0(adlb$PARAMCD[1], \" (\", adlb$AVALU[1], \")\")\n  )\n\n\n\n\n\n\nTo modify the confidence level for the estimation of the confidence interval, the call to stat_mean_ci (or stat_median_ci) can be slightly modified.\n\nCodeggplot(\n  data = adlb,\n  mapping = aes(\n    x = ARMCD, y = AVAL, color = SEX,\n    lty = SEX, shape = SEX\n  )\n) +\n  stat_summary(\n    fun.data = function(x) stat_mean_ci(x, conf_level = 0.9),\n    geom = \"errorbar\",\n    width = 0.1,\n    position = position_dodge(width = 0.5)\n  ) +\n  stat_summary(\n    fun = mean,\n    geom = \"point\",\n    position = position_dodge(width = 0.5)\n  ) +\n  labs(\n    title = \"Confidence Interval Plot by Treatment Group\",\n    caption = \"Mean and 90% CIs for mean are displayed.\",\n    x = \"Treatment Group\",\n    y = paste0(adlb$PARAMCD[1], \" (\", adlb$AVALU[1], \")\")\n  )\n\n\n\n\n\n\nThe corresponding table is simply obtained using the rtables framework:\n\nCodelyt <- basic_table() %>%\n  split_cols_by(var = \"ARMCD\") %>%\n  summarize_vars(vars = \"AVAL\", .stats = c(\"mean_sd\", \"median\"))\nbuild_table(lyt = lyt, df = adlb)\n\n              ARM A        ARM B        ARM C   \n————————————————————————————————————————————————\nMean (SD)   19.8 (4.2)   20.2 (4.2)   20.5 (3.9)\nMedian         19.8         20.1         20.4   \n\n\n\n\n\nCodelibrary(teal.modules.clinical)\nlibrary(scda)\n\nADSL <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nADLB <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adlb\")\n\napp <- init(\n  data = cdisc_data(\n    cdisc_dataset(\"ADSL\", ADSL),\n    cdisc_dataset(\"ADLB\", ADLB),\n    code = 'ADSL <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\n    ADLB <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adlb\")'\n  ),\n  modules = modules(\n    tm_g_ci(\n      label = \"Confidence Interval Plot\",\n      x_var = data_extract_spec(\n        dataname = \"ADSL\",\n        select = select_spec(\n          choices = c(\"ARMCD\", \"BMRKR2\"),\n          selected = c(\"ARMCD\"),\n          multiple = FALSE,\n          fixed = FALSE\n        )\n      ),\n      y_var = data_extract_spec(\n        dataname = \"ADLB\",\n        filter = list(\n          filter_spec(\n            vars = \"PARAMCD\",\n            choices = levels(ADLB$PARAMCD),\n            selected = levels(ADLB$PARAMCD)[1],\n            multiple = FALSE,\n            label = \"Select lab:\"\n          ),\n          filter_spec(\n            vars = \"AVISIT\",\n            choices = levels(ADLB$AVISIT),\n            selected = levels(ADLB$AVISIT)[1],\n            multiple = FALSE,\n            label = \"Select visit:\"\n          )\n        ),\n        select = select_spec(\n          label = \"Analyzed Value\",\n          choices = c(\"AVAL\", \"CHG\"),\n          selected = \"AVAL\",\n          multiple = FALSE,\n          fixed = FALSE\n        )\n      ),\n      color = data_extract_spec(\n        dataname = \"ADSL\",\n        select = select_spec(\n          label = \"Color by variable\",\n          choices = c(\"SEX\", \"STRATA1\", \"STRATA2\"),\n          selected = c(\"STRATA1\"),\n          multiple = FALSE,\n          fixed = FALSE\n        )\n      )\n    )\n  ),\n  header = \"Example of Confidence Interval Plot\",\n  footer = tags$p(\n    class = \"text-muted\", \"Source: `teal.modules.clinical::tm_g_ci`\"\n  )\n)\n\n[INFO] 2023-03-10 05:18:18.0513 pid:2188 token:[] teal.modules.clinical Initializing tm_g_ci\n\nCodeshinyApp(app$ui, app$server)\n\n\n\n\n\n\n\n\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n [1] teal.modules.clinical_0.8.14.9026 teal_0.12.0.9023                 \n [3] teal.transform_0.2.0.9011         teal.data_0.1.2.9013             \n [5] shiny_1.7.4                       nestcolor_0.1.0.9005             \n [7] scda_0.1.5.9009                   dplyr_1.1.0                      \n [9] ggplot2_3.4.1                     tern_0.7.10.9056                 \n[11] rtables_0.6.0.1                   formatters_0.4.0                 \n[13] magrittr_2.0.3                   \n\nloaded via a namespace (and not attached):\n [1] sass_0.4.5               tidyr_1.3.0              jsonlite_1.8.4          \n [4] splines_4.2.2            R.utils_2.12.2           bslib_0.4.2             \n [7] teal.slice_0.2.0.9026    Rdpack_2.4               assertthat_0.2.1        \n[10] teal.code_0.3.0.9001     tern.gee_0.1.0.9002      yaml_2.3.7              \n[13] pillar_1.8.1             backports_1.4.1          lattice_0.20-45         \n[16] glue_1.6.2               teal.widgets_0.2.0.9024  digest_0.6.31           \n[19] promises_1.2.0.1         rbibutils_2.2.13         checkmate_2.1.0         \n[22] colorspace_2.1-0         R.oo_1.25.0              htmltools_0.5.4         \n[25] httpuv_1.6.9             Matrix_1.5-3             pkgconfig_2.0.3         \n[28] broom_1.0.3              logger_0.2.2             purrr_1.0.1             \n[31] xtable_1.8-4             mvtnorm_1.1-3            webshot_0.5.4           \n[34] scales_1.2.1             processx_3.8.0           fontawesome_0.5.0       \n[37] later_1.3.0              emmeans_1.8.4-1          tibble_3.1.8            \n[40] styler_1.9.1             generics_0.1.3           farver_2.1.1            \n[43] ellipsis_0.3.2           shinyvalidate_0.1.2      cachem_1.0.7            \n[46] withr_2.5.0              shinyjs_2.1.0            geepack_1.3.9           \n[49] cli_3.6.0                survival_3.5-3           mime_0.12               \n[52] memoise_2.0.1            ps_1.7.2                 estimability_1.4.1      \n[55] evaluate_0.20            R.methodsS3_1.8.2        fansi_1.0.4             \n[58] R.cache_0.16.0           nlme_3.1-162             MASS_7.3-58.3           \n[61] textshaping_0.3.6        teal.reporter_0.1.1.9013 tools_4.2.2             \n[64] lifecycle_1.0.3          munsell_0.5.0            callr_3.7.3             \n[67] compiler_4.2.2           jquerylib_0.1.4          systemfonts_1.0.4       \n[70] rlang_1.0.6              grid_4.2.2               htmlwidgets_1.6.1       \n[73] shinyWidgets_0.7.6       labeling_0.4.2           rmarkdown_2.20          \n[76] gtable_0.3.1             codetools_0.2-19         teal.logger_0.1.1.9004  \n[79] R6_2.5.1                 knitr_1.42               fastmap_1.1.1           \n[82] utf8_1.2.3               ragg_1.2.5               Rcpp_1.0.10             \n[85] vctrs_0.5.2              tidyselect_1.2.0         xfun_0.37               \n[88] coda_0.19-4             \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R                       [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/graphs/other/cig01.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "graphs/other/ippg01.html",
    "href": "graphs/other/ippg01.html",
    "title": "IPPG01",
    "section": "",
    "text": "For illustration purposes, we will subset the adlb dataset for safety population in treatment arm A and a specific lab parameter (ALT).\n\n\nData Setup\nStandard Plot\nPlot with Patient Baselines as Reference\nTeal\nSession Info\n\n\n\n\nCodelibrary(tern)\nlibrary(scda)\nlibrary(dplyr)\nlibrary(ggplot2)\nlibrary(nestcolor)\n\n# use small sample size\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\") %>% slice(1:15)\nadlb <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adlb\") %>% filter(USUBJID %in% adsl$USUBJID)\n\n# Ensure character variables are converted to factors and empty strings and NAs are explicit missing levels.\nadlb <- df_explicit_na(adlb)\n\nadlb_f <- adlb %>%\n  filter(\n    SAFFL == \"Y\",\n    PARAMCD == \"ALT\",\n    AVISIT != \"SCREENING\",\n    ARMCD == \"ARM A\"\n  ) %>%\n  mutate(Patient_ID = sub(\".*id-\", \"\", USUBJID))\n\n\n\n\nThe user can select different plotting_choices depending on their preference. To demonstrate, separate plots are produced with a maximum of 3 observations each.\n\nCoderesult <- g_ipp(\n  df = adlb_f,\n  xvar = \"AVISIT\",\n  yvar = \"AVAL\",\n  xlab = \"Visit\",\n  ylab = \"SGOT/ALT (U/L)\",\n  id_var = \"Patient_ID\",\n  title = \"Individual Patient Plots\",\n  subtitle = \"Treatment Arm A\",\n  plotting_choices = \"split_by_max_obs\",\n  max_obs_per_plot = 3\n)\nresult\n\n[[1]]\n\n\n\n\n\n\n[[2]]\n\n\n\n\n\n\n\nHere, patients’ individual baseline values will be shown for reference. Note that users can provide their own custom theme to the function via the ggtheme argument.\n\nCoderesult <- g_ipp(\n  df = adlb_f,\n  xvar = \"AVISIT\",\n  yvar = \"AVAL\",\n  xlab = \"Visit\",\n  ylab = \"SGOT/ALT (U/L)\",\n  id_var = \"Patient_ID\",\n  title = \"Individual Patient Plots\",\n  subtitle = \"Treatment Arm A\",\n  add_baseline_hline = TRUE,\n  yvar_baseline = \"BASE\",\n  ggtheme = theme_minimal(),\n  plotting_choices = \"split_by_max_obs\",\n  max_obs_per_plot = 3\n)\nresult\n\n[[1]]\n\n\n\n\n\n\n[[2]]\n\n\n\n\n\n\n\n\nCodelibrary(teal)\nlibrary(teal.modules.clinical)\nlibrary(tern)\nlibrary(scda)\n\n# use small sample size\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\") %>% slice(1:15)\nadlb <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adlb\") %>% filter(USUBJID %in% adsl$USUBJID)\n\n# Ensure character variables are converted to factors and empty strings and NAs are explicit missing levels.\nadsl <- df_explicit_na(adsl)\nadlb <- df_explicit_na(adlb) %>%\n  dplyr::filter(AVISIT != \"SCREENING\")\n\napp <- init(\n  data = cdisc_data(\n    cdisc_dataset(\n      \"ADSL\",\n      adsl,\n      code = 'ADSL <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\") %>% slice(1:15)\n               ADSL <- df_explicit_na(ADSL)'\n    ),\n    cdisc_dataset(\n      \"ADLB\",\n      adlb,\n      code = 'ADLB <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adlb\") %>% filter(USUBJID %in% adsl$USUBJID)\n             ADLB <- df_explicit_na(ADLB) %>%\n               dplyr::filter(USUBJID %in% ADSL$USUBJID,\n                             AVISIT != \"SCREENING\")'\n    )\n  ),\n  modules = modules(\n    tm_g_ipp(\n      label = \"Individual Patient Plot\",\n      dataname = \"ADLB\",\n      arm_var = choices_selected(\n        value_choices(adlb, c(\"ARMCD\")),\n        \"ARM A\"\n      ),\n      paramcd = choices_selected(\n        value_choices(adlb, \"PARAMCD\"),\n        \"ALT\"\n      ),\n      aval_var = choices_selected(\n        variable_choices(adlb, c(\"AVAL\")),\n        \"AVAL\"\n      ),\n      avalu_var = choices_selected(\n        variable_choices(adlb, c(\"AVALU\")),\n        \"AVALU\",\n        fixed = TRUE\n      ),\n      id_var = choices_selected(\n        variable_choices(adlb, c(\"USUBJID\")),\n        \"USUBJID\",\n        fixed = TRUE\n      ),\n      visit_var = choices_selected(\n        variable_choices(adlb, c(\"AVISIT\")),\n        \"AVISIT\"\n      ),\n      base_var = choices_selected(\n        variable_choices(adlb, c(\"BASE\")),\n        \"BASE\",\n        fixed = TRUE\n      ),\n      add_baseline_hline = FALSE,\n      separate_by_obs = FALSE\n    )\n  )\n)\n\n[INFO] 2023-03-10 05:18:40.5874 pid:2277 token:[] teal.modules.clinical Initializing tm_g_ipp\n\nCodeshinyApp(app$ui, app$server)\n\n\n\n\n\n\n\n\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n [1] teal.modules.clinical_0.8.14.9026 teal_0.12.0.9023                 \n [3] teal.transform_0.2.0.9011         teal.data_0.1.2.9013             \n [5] shiny_1.7.4                       nestcolor_0.1.0.9005             \n [7] ggplot2_3.4.1                     dplyr_1.1.0                      \n [9] scda_0.1.5.9009                   tern_0.7.10.9056                 \n[11] rtables_0.6.0.1                   formatters_0.4.0                 \n[13] magrittr_2.0.3                   \n\nloaded via a namespace (and not attached):\n [1] sass_0.4.5               tidyr_1.3.0              jsonlite_1.8.4          \n [4] splines_4.2.2            R.utils_2.12.2           bslib_0.4.2             \n [7] teal.slice_0.2.0.9026    Rdpack_2.4               assertthat_0.2.1        \n[10] teal.code_0.3.0.9001     tern.gee_0.1.0.9002      yaml_2.3.7              \n[13] pillar_1.8.1             backports_1.4.1          lattice_0.20-45         \n[16] glue_1.6.2               teal.widgets_0.2.0.9024  digest_0.6.31           \n[19] promises_1.2.0.1         rbibutils_2.2.13         checkmate_2.1.0         \n[22] colorspace_2.1-0         R.oo_1.25.0              htmltools_0.5.4         \n[25] httpuv_1.6.9             Matrix_1.5-3             pkgconfig_2.0.3         \n[28] broom_1.0.3              logger_0.2.2             purrr_1.0.1             \n[31] xtable_1.8-4             mvtnorm_1.1-3            webshot_0.5.4           \n[34] scales_1.2.1             processx_3.8.0           fontawesome_0.5.0       \n[37] later_1.3.0              emmeans_1.8.4-1          tibble_3.1.8            \n[40] styler_1.9.1             generics_0.1.3           farver_2.1.1            \n[43] ellipsis_0.3.2           shinyvalidate_0.1.2      cachem_1.0.7            \n[46] withr_2.5.0              shinyjs_2.1.0            geepack_1.3.9           \n[49] cli_3.6.0                survival_3.5-3           mime_0.12               \n[52] memoise_2.0.1            ps_1.7.2                 estimability_1.4.1      \n[55] evaluate_0.20            R.methodsS3_1.8.2        fansi_1.0.4             \n[58] R.cache_0.16.0           nlme_3.1-162             MASS_7.3-58.3           \n[61] forcats_1.0.0            textshaping_0.3.6        teal.reporter_0.1.1.9013\n[64] tools_4.2.2              lifecycle_1.0.3          munsell_0.5.0           \n[67] callr_3.7.3              jquerylib_0.1.4          compiler_4.2.2          \n[70] systemfonts_1.0.4        rlang_1.0.6              grid_4.2.2              \n[73] htmlwidgets_1.6.1        labeling_0.4.2           rmarkdown_2.20          \n[76] shinyWidgets_0.7.6       gtable_0.3.1             codetools_0.2-19        \n[79] teal.logger_0.1.1.9004   R6_2.5.1                 knitr_1.42              \n[82] fastmap_1.1.1            utf8_1.2.3               ragg_1.2.5              \n[85] Rcpp_1.0.10              vctrs_0.5.2              tidyselect_1.2.0        \n[88] xfun_0.37                coda_0.19-4             \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R                       [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/graphs/other/ippg01.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "graphs/pharmacokinetic/pkcg02.html",
    "href": "graphs/pharmacokinetic/pkcg02.html",
    "title": "PKCG02",
    "section": "",
    "text": "Data Setup\nPlot in Linear Scale\nPlot in Log Scale\nTeal\nSession Info\n\n\n\n\nCodelibrary(tern)\nlibrary(scda)\nlibrary(dplyr)\nlibrary(ggplot2)\nlibrary(nestcolor)\n\nadpc <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adpc\")\n\n\n\n\n\nCodeadpc_a <- adpc %>%\n  filter(\n    PARAM == \"Plasma Drug X\",\n    ARMCD == \"ARM A\"\n  ) %>%\n  mutate(Patient_ID = sub(\".*id-\", \"\", USUBJID)) %>%\n  filter(Patient_ID %in% unique(Patient_ID)[1:10])\n\nuse_title1 <- \"Plot of X Concentration (ug/mL) Over Time by Treatment: \\nPK Evaluable Patients\"\nuse_subtitle1 <- \"Analyte: Plasma X (ug/mL) \\nTreatment Group: ARM A\"\nuse_footnote1 <- \"Program: \\nOutput:\"\n\nresult <- g_ipp(\n  df = adpc_a,\n  xvar = \"NRELTM1\",\n  yvar = \"AVAL\",\n  xlab = \"Norminal Time from First Dose (hr)\",\n  ylab = \"Concentration (ug/mL)\",\n  id_var = \"Patient_ID\",\n  add_baseline_hline = F,\n  yvar_baseline = \"AVAL\", #  yvar_baseline cannot be NA or ignore\n  title = use_title1,\n  subtitle = use_subtitle1,\n  caption = use_footnote1,\n  plotting_choices = \"all_in_one\"\n)\nresult\n\n\n\n\n\n\n\nCodeadpc_a <- adpc %>%\n  filter(\n    PARAM == \"Plasma Drug X\",\n    ARMCD == \"ARM A\"\n  ) %>%\n  mutate(Patient_ID = sub(\".*id-\", \"\", USUBJID)) %>%\n  mutate(avalog = ifelse(AVAL != 0, AVAL, 0.001)) %>%\n  filter(Patient_ID %in% unique(Patient_ID)[1:10])\n\nuse_title3 <- \"Log-scale Plot of X Concentration (ug/mL) Over Time by Treatment: \\nPK Evaluable Patients\"\nuse_subtitle3 <- \"Analyte: Plasma X (ug/mL) \\nTreatment Group: ARM A\"\nuse_footnote3 <- \"Program: \\nOutput:\"\n\nresult <- g_ipp(\n  df = adpc_a,\n  xvar = \"NRELTM1\",\n  yvar = \"avalog\",\n  xlab = \"Norminal Time from First Dose (hr)\",\n  ylab = \"Concentration (ug/mL)\",\n  id_var = \"Patient_ID\",\n  add_baseline_hline = F,\n  yvar_baseline = \"AVAL\", #  yvar_baseline cannot be NA or ignore\n  title = use_title3,\n  caption = use_footnote3,\n  subtitle = use_subtitle3,\n  plotting_choices = \"all_in_one\"\n)\nresult + ggplot2::scale_y_log10(breaks = c(0.001, 0.01, 0.1, 1, 10), label = c(0.001, 0.01, 0.1, 1, 10))\n\n\n\n\n\n\n\nCode# In progress\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n[1] nestcolor_0.1.0.9005 ggplot2_3.4.1        dplyr_1.1.0         \n[4] scda_0.1.5.9009      tern_0.7.10.9056     rtables_0.6.0.1     \n[7] formatters_0.4.0     magrittr_2.0.3      \n\nloaded via a namespace (and not attached):\n [1] compiler_4.2.2    pillar_1.8.1      tools_4.2.2       digest_0.6.31    \n [5] lattice_0.20-45   jsonlite_1.8.4    evaluate_0.20     lifecycle_1.0.3  \n [9] tibble_3.1.8      gtable_0.3.1      checkmate_2.1.0   pkgconfig_2.0.3  \n[13] rlang_1.0.6       Matrix_1.5-3      cli_3.6.0         yaml_2.3.7       \n[17] xfun_0.37         fastmap_1.1.1     withr_2.5.0       knitr_1.42       \n[21] generics_0.1.3    vctrs_0.5.2       htmlwidgets_1.6.1 grid_4.2.2       \n[25] tidyselect_1.2.0  glue_1.6.2        R6_2.5.1          fansi_1.0.4      \n[29] Rdpack_2.4        survival_3.5-3    rmarkdown_2.20    farver_2.1.1     \n[33] purrr_1.0.1       tidyr_1.3.0       codetools_0.2-19  splines_4.2.2    \n[37] backports_1.4.1   scales_1.2.1      htmltools_0.5.4   rbibutils_2.2.13 \n[41] colorspace_2.1-0  labeling_0.4.2    utf8_1.2.3        munsell_0.5.0    \n[45] broom_1.0.3      \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R              [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/graphs/pharmacokinetic/pkcg02.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "graphs/pharmacokinetic/pkpg04.html",
    "href": "graphs/pharmacokinetic/pkpg04.html",
    "title": "PKPG04",
    "section": "",
    "text": "Data Setup\nPlot of CMAX by Visit\nSession Info\n\n\n\n\nCodelibrary(tern)\nlibrary(scda)\nlibrary(dplyr)\nlibrary(ggplot2)\nlibrary(ggrepel)\nlibrary(nestcolor)\n\nadpp <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adpp\")\n\n\n\n\n\nCode# filtered parameter\nadpp <- adpp %>% filter(toupper(PARAMCD) == \"CMAX\" & toupper(PPSPEC) == \"PLASMA\")\n\nuse_title <- paste0(\"Boxplot of \", as.character(unique(adpp$PARAM)), \" by Visit\")\nuse_subtitle <- paste0(\"Analyte:\\nPK Parameter: \", as.character(unique(adpp$PARAM)), \" (\", as.character(unique(adpp$AVALU)), \")\")\nuse_footnote <- \"Program: \\nOutput:\"\n\np <- ggplot(adpp, aes(x = AVISIT, y = AVAL, fill = ACTARM, label = SUBJID)) +\n  geom_boxplot(outlier.size = 2) +\n  stat_boxplot(geom = \"errorbar\") +\n  stat_summary(geom = \"point\", fun = \"mean\", col = \"black\", size = 5, shape = 8, position = position_dodge(0.75)) +\n  geom_text_repel(\n    data = . %>% group_by(AVISIT, ACTARM) %>% filter(AVAL %in% boxplot.stats(AVAL)$out),\n    aes(x = AVISIT, y = AVAL, label = SUBJID, color = ACTARM),\n    size = 3, hjust = -0.2, position = position_dodge(0.75)\n  ) +\n  labs(\n    title = use_title,\n    subtitle = use_subtitle,\n    caption = use_footnote,\n    x = \"Visit\",\n    y = paste0(as.character(unique(adpp$PARAM)), \" (\", as.character(unique(adpp$AVALU)), \")\")\n  ) +\n  theme(plot.caption = element_text(hjust = 0)) +\n  theme_nest()\n\np + geom_point(aes(fill = ACTARM), size = 2, shape = 21, position = position_dodge(0.75))\n\n\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n[1] nestcolor_0.1.0.9005 ggrepel_0.9.3        ggplot2_3.4.1       \n[4] dplyr_1.1.0          scda_0.1.5.9009      tern_0.7.10.9056    \n[7] rtables_0.6.0.1      formatters_0.4.0     magrittr_2.0.3      \n\nloaded via a namespace (and not attached):\n [1] Rcpp_1.0.10       compiler_4.2.2    pillar_1.8.1      tools_4.2.2      \n [5] digest_0.6.31     lattice_0.20-45   jsonlite_1.8.4    evaluate_0.20    \n [9] lifecycle_1.0.3   tibble_3.1.8      gtable_0.3.1      checkmate_2.1.0  \n[13] pkgconfig_2.0.3   rlang_1.0.6       Matrix_1.5-3      cli_3.6.0        \n[17] yaml_2.3.7        xfun_0.37         fastmap_1.1.1     withr_2.5.0      \n[21] knitr_1.42        generics_0.1.3    vctrs_0.5.2       htmlwidgets_1.6.1\n[25] grid_4.2.2        tidyselect_1.2.0  glue_1.6.2        R6_2.5.1         \n[29] fansi_1.0.4       Rdpack_2.4        survival_3.5-3    rmarkdown_2.20   \n[33] farver_2.1.1      purrr_1.0.1       tidyr_1.3.0       codetools_0.2-19 \n[37] splines_4.2.2     backports_1.4.1   scales_1.2.1      htmltools_0.5.4  \n[41] rbibutils_2.2.13  colorspace_2.1-0  labeling_0.4.2    utf8_1.2.3       \n[45] munsell_0.5.0     broom_1.0.3      \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R              [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/graphs/pharmacokinetic/pkpg04.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "graphs/pharmacokinetic/pkpg06.html",
    "href": "graphs/pharmacokinetic/pkpg06.html",
    "title": "PKPG06",
    "section": "",
    "text": "Data Setup\nPlot with Whiskers at ±1.5  Times Inter-Quartile Range\nPlot with Whiskers at  Minimum and Maximum Values\nPlot with Whiskers at  5th and 95th Percentiles\nTeal\nSession Info\n\n\n\n\nCodelibrary(dplyr)\nlibrary(scda)\nlibrary(ggplot2)\nlibrary(tidyr)\nlibrary(tern)\nlibrary(nestcolor)\n\nadpp <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adpp\")\n\n# Filter NAs\nadpp <- adpp %>%\n  filter(PPSPEC != \"NA\" & PARAM != \"NA\" & PPCAT != \"NA\") %>%\n  filter(PARAMCD == \"CMAX\" | PARAMCD == \"AUCIFO\", AVISITN == 1)\n\n# filter data by PPCAT and calculate ratio\nanl_x <- adpp %>%\n  filter(PPCAT %in% c(\"Metabolite Drug X\", \"Plasma Drug X\")) %>%\n  pivot_wider(\n    id_cols = c(USUBJID, ACTARM, PARAMCD, AVISIT),\n    names_from = PPCAT,\n    values_from = AVAL\n  ) %>%\n  mutate(ratio = `Metabolite Drug X` / `Plasma Drug X`) %>%\n  filter(!is.na(ratio), ratio != Inf)\n\nanl_y <- adpp %>%\n  filter(PPCAT %in% c(\"Metabolite Drug Y\", \"Plasma Drug Y\")) %>%\n  pivot_wider(\n    id_cols = c(USUBJID, ACTARM, PARAMCD, AVISIT),\n    names_from = PPCAT,\n    values_from = AVAL\n  ) %>%\n  mutate(ratio = `Metabolite Drug Y` / `Plasma Drug Y`) %>%\n  filter(!is.na(ratio), ratio != Inf)\n\n\n\n\nDrug X Boxplot\n\nCodep <- ggplot(anl_x, aes(x = PARAMCD, y = ratio, fill = ACTARM, label = USUBJID)) +\n  geom_boxplot(outlier.size = 2) +\n  stat_boxplot(geom = \"errorbar\") +\n  stat_summary(geom = \"point\", fun = \"mean\", col = \"black\", size = 5, shape = 8, position = position_dodge(0.75)) +\n  geom_text(\n    data = . %>% group_by(PARAMCD, ACTARM) %>% filter(ratio %in% boxplot.stats(ratio)$out),\n    aes(x = PARAMCD, y = ratio, label = USUBJID, col = factor(ACTARM)),\n    size = 3, hjust = -0.2, position = position_dodge(0.75), show.legend = F\n  ) +\n  labs(\n    title = \"Boxplot of Metabolite to Parent Ratios by Treatment\",\n    subtitle = paste0(\"Analyte: Plasma Drug X, Metabolite Drug X \", \"\\nPK Parameter: \", as.character(paste(unique(anl_x$PARAMCD), collapse = \", \")), \"\\nVisit: \", as.character((unique(anl_x$AVISIT)))),\n    caption = \"Program: \\nOutput:\",\n    x = \"Parameter\",\n    y = \"Metabolite to Parent Ratio\"\n  ) +\n  theme(plot.caption = element_text(hjust = 0)) +\n  theme_nest()\n\n# PKPG06\np\n\n\n\n\nDrug Y Boxplot\n\nCodep <- ggplot(anl_y, aes(x = PARAMCD, y = ratio, fill = ACTARM, label = USUBJID)) +\n  geom_boxplot(outlier.size = 2) +\n  stat_boxplot(geom = \"errorbar\") +\n  stat_summary(geom = \"point\", fun = \"mean\", col = \"black\", size = 5, shape = 8, position = position_dodge(0.75)) +\n  geom_text(\n    data = . %>% group_by(PARAMCD, ACTARM) %>% filter(ratio %in% boxplot.stats(ratio)$out),\n    aes(x = PARAMCD, y = ratio, label = USUBJID, color = ACTARM),\n    size = 3, hjust = -0.2, position = position_dodge(0.75), show.legend = F\n  ) +\n  labs(\n    title = \"Boxplot of Metabolite to Parent Ratios by Treatment\",\n    subtitle = paste0(\"Analyte: Plasma Drug Y, Metabolite Drug Y \", \"\\nPK Parameter: \", as.character(paste(unique(anl_y$PARAMCD), collapse = \", \")), \"\\nVisit: \", as.character((unique(anl_y$AVISIT)))),\n    caption = \"Program: \\nOutput:\",\n    x = \"Parameter\",\n    y = \"Metabolite to Parent Ratio\"\n  ) +\n  theme(plot.caption = element_text(hjust = 0)) +\n  theme_nest()\n\n# result\np\n\n\n\n\n\n\n\n\nCode# whiskers are formed with the minimum and maximum values\np <- ggplot(anl_x, aes(x = PARAMCD, y = ratio, fill = ACTARM, label = USUBJID)) +\n  geom_boxplot(outlier.size = 0) +\n  stat_boxplot(geom = \"errorbar\", coef = NULL) +\n  stat_summary(geom = \"point\", fun = \"mean\", col = \"black\", size = 5, shape = 8, position = position_dodge(0.75)) +\n  labs(\n    title = \"Boxplot of Metabolite to Parent Ratios by Treatment\",\n    subtitle = paste0(\"Analyte: Plasma Drug X, Metabolite Drug X \", \"\\nPK Parameter: \", as.character(paste(unique(anl_x$PARAMCD), collapse = \", \")), \"\\nVisit: \", as.character((unique(anl_x$AVISIT)))),\n    caption = \"Program:\\nOutput:\",\n    x = \"Parameter\",\n    y = \"Metabolite to Parent Ratio\"\n  ) +\n  theme(plot.caption = element_text(hjust = 0)) +\n  theme_nest()\n\n# result\np\n\n\n\n\n\n\n\nCode# functions to calculate custom quantiles and outliers\nquantiles <- function(x) {\n  quant <- quantile(x, probs = c(0.05, 0.25, 0.5, 0.75, 0.95))\n  names(quant) <- c(\"ymin\", \"lower\", \"middle\", \"upper\", \"ymax\")\n  quant\n}\n\noutliers <- function(x) {\n  return(x < quantile(x, 0.05) | x > quantile(x, 0.95))\n}\n\np <- ggplot(anl_x, aes(factor(PARAMCD), ratio, fill = factor(ACTARM), label = USUBJID)) +\n  stat_summary(\n    fun.data = quantiles, geom = \"boxplot\",\n    position = position_dodge(1)\n  ) +\n  stat_summary(geom = \"point\", fun = \"mean\", col = \"black\", size = 5, shape = 8, position = position_dodge(1)) +\n  stat_summary(\n    fun.data = quantiles, geom = \"errorbar\",\n    position = position_dodge(1)\n  ) +\n  geom_point(\n    data = . %>% group_by(PARAMCD, ACTARM) %>%\n      mutate(outlier = ifelse(outliers(ratio), ratio, as.numeric(NA))),\n    aes(x = PARAMCD, y = outlier), na.rm = T,\n    size = 2, position = position_dodge(1), show.legend = F\n  ) +\n  geom_text(\n    data = . %>% group_by(PARAMCD, ACTARM) %>%\n      mutate(outlier = ifelse(outliers(ratio), ratio, as.numeric(NA))),\n    aes(x = PARAMCD, y = outlier, label = USUBJID, color = ACTARM), na.rm = T,\n    size = 3, hjust = -0.2, vjust = 1, position = position_dodge(1), show.legend = F\n  ) +\n  labs(\n    title = \"Boxplot of Metabolite to Parent Ratios by Treatment\",\n    subtitle = paste0(\"Analyte: Plasma Drug X, Metabolite Drug X \", \"\\nPK Parameter: \", as.character(paste(unique(anl_x$PARAMCD), collapse = \", \")), \"\\nVisit: \", as.character((unique(anl_x$AVISIT)))),\n    caption = \"Program: \\nOutput:\",\n    x = \"Parameter\",\n    y = \"Metabolite to Parent Ratio\"\n  ) +\n  theme(plot.caption = element_text(hjust = 0)) +\n  theme_nest()\n\n# result\np\n\n\n\n\n\n\n\nCode# In progress\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n[1] nestcolor_0.1.0.9005 tern_0.7.10.9056     rtables_0.6.0.1     \n[4] formatters_0.4.0     magrittr_2.0.3       tidyr_1.3.0         \n[7] ggplot2_3.4.1        scda_0.1.5.9009      dplyr_1.1.0         \n\nloaded via a namespace (and not attached):\n [1] pillar_1.8.1      compiler_4.2.2    tools_4.2.2       digest_0.6.31    \n [5] lattice_0.20-45   jsonlite_1.8.4    evaluate_0.20     lifecycle_1.0.3  \n [9] tibble_3.1.8      gtable_0.3.1      checkmate_2.1.0   pkgconfig_2.0.3  \n[13] rlang_1.0.6       Matrix_1.5-3      cli_3.6.0         yaml_2.3.7       \n[17] xfun_0.37         fastmap_1.1.1     withr_2.5.0       knitr_1.42       \n[21] generics_0.1.3    vctrs_0.5.2       htmlwidgets_1.6.1 grid_4.2.2       \n[25] tidyselect_1.2.0  glue_1.6.2        R6_2.5.1          fansi_1.0.4      \n[29] Rdpack_2.4        survival_3.5-3    rmarkdown_2.20    farver_2.1.1     \n[33] purrr_1.0.1       codetools_0.2-19  splines_4.2.2     rbibutils_2.2.13 \n[37] scales_1.2.1      backports_1.4.1   htmltools_0.5.4   colorspace_2.1-0 \n[41] labeling_0.4.2    utf8_1.2.3        munsell_0.5.0     broom_1.0.3      \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R              [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/graphs/pharmacokinetic/pkpg06.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "graphs/pharmacokinetic/pkpg02.html",
    "href": "graphs/pharmacokinetic/pkpg02.html",
    "title": "PKPG02",
    "section": "",
    "text": "Data Setup\nSummary of Pharmacokinetic  Parameters – Plasma\nSummary of Plasma Pharmacokinetic  Parameters with Median Points\nTeal\nSession Info\n\n\n\n\nCodelibrary(tern)\nlibrary(scda)\nlibrary(dplyr)\nlibrary(ggplot2)\nlibrary(nestcolor)\n\n# need adex for dose info and adpp for AUC max info\nadex <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adex\")\nadpp <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adpp\")\n\nadpp_a <- adpp %>%\n  filter(\n    PPSPEC == \"Plasma\",\n    AVISITN == \"1\",\n    PARAMCD == \"AUCIFO\"\n  ) %>%\n  mutate(AUCinf = AVAL)\n\nadex_a <- adex %>%\n  filter(\n    AVISITN == \"1\",\n    PARAMCD == \"DOSE\"\n  ) %>%\n  mutate(Dose = AVAL) %>%\n  select(USUBJID, Dose)\n\n# join the dose information to the adpp table\nadpp_adex <- left_join(adpp_a, adex_a, by = \"USUBJID\") %>%\n  group_by(`ARM`) %>%\n  mutate(count = paste0(`ARM`, \" (\", n(), \")\"))\n\n# set x and y variable names\nx_var <- \"Dose\"\ny_var <- \"AUCinf\"\n\n\n\n\n\nCode# calculate Summary Statistics (mean and sd) for each group\nSummaryStat <- adpp_adex %>%\n  group_by(Dose = as.factor(Dose)) %>%\n  summarise(AUCsd = sd(AUCinf), meanAUC = mean(AUCinf))\nSummaryStat$Dose <- as.numeric(as.character(SummaryStat$Dose))\n\n# generate linear model\nmod1 <- lm(log(AUCinf) ~ log(Dose), adpp_adex)\n\n# obtain linear model coefficient values\ncf <- round(coef(mod1), 2)\n\n# generate linear model equation\neq <- paste0(\n  \"y = \", cf[1],\n  ifelse(sign(cf[2]) == 1, \" + \", \" - \"), abs(cf[2]), \" x , \",\n  \"R²\",\n  \" = \",\n  signif(summary(mod1)$adj.r.squared, 3)\n)\n\nresult <- ggplot(adpp_adex, aes(x = .data[[x_var]], y = .data[[y_var]])) +\n  annotate(geom = \"text\", x = min(adpp_adex[[x_var]]), y = max(adpp_adex[[y_var]]), label = eq, hjust = 0.1) +\n  geom_point(size = 1, aes(color = factor(`count`))) +\n  scale_x_continuous(\n    name = \"Dose (mg/mL)\",\n    breaks = unique(adpp_adex$Dose)\n  ) +\n  scale_y_continuous(\n    name = paste(y_var, adpp_a$AVALU),\n    trans = \"log\",\n    breaks = exp(ceiling(seq(\n      from = min(log(adpp_adex$AUCinf)), to = max(log(adpp_adex$AUCinf)),\n      by = 1\n    ))),\n    labels = as.character(ceiling(seq(\n      from = min(log(adpp_adex$AUCinf)),\n      to = max(log(adpp_adex$AUCinf)), by = 1\n    )))\n  ) +\n  geom_smooth(method = \"lm\", formula = y ~ x, se = F, color = \"black\", linewidth = 0.5) +\n  # Display error bars for each dosing group (this will only appear if the sd is less than the mean)\n  geom_errorbar(\n    data = SummaryStat, aes(x = `Dose`, y = `meanAUC`, ymin = `meanAUC` - `AUCsd`, ymax = `meanAUC` + AUCsd), width = .05,\n    position = position_dodge(.1)\n  ) +\n  geom_point(data = SummaryStat, aes(x = Dose, y = meanAUC, size = 1), shape = 2, show.legend = FALSE) +\n  ggtitle(paste(\n    \"Dose-Proportionality Plot of Serum\", as.character(unique(adex$TRT01P)),\n    y_var, \"in\", adpp_a$AVALU\n  ), subtitle = \"Summary of serum PK parameters by treatment\") +\n  labs(color = \"Treatment Arm\") +\n  theme_nest()\n\nresult\n\n\n\n\n\n\n\nCode# calculate median for each group if preferred\nSummaryStat <- adpp_adex %>%\n  group_by(Dose = as.factor(Dose)) %>%\n  summarise(medAUC = median(AUCinf))\nSummaryStat$Dose <- as.numeric(as.character(SummaryStat$Dose))\n\nresult <- ggplot(adpp_adex, aes(x = .data[[x_var]], y = .data[[y_var]])) +\n  annotate(geom = \"text\", x = min(adpp_adex[[x_var]]), y = max(adpp_adex[[y_var]]), label = eq, hjust = 0.1) +\n  geom_point(size = 1, aes(color = factor(`count`))) +\n  geom_smooth(method = \"lm\", formula = y ~ x, se = F, color = \"black\", linewidth = 0.5) +\n  geom_point(data = SummaryStat, aes(x = Dose, y = medAUC, size = 1), shape = 2, show.legend = FALSE) +\n  ggtitle(paste(\"Dose-Proportionality Plot of Serum\", as.character(unique(adex$TRT01P)), y_var, \"in\", adpp_a$AVALU), subtitle = \"Summary of serum PK parameters by treatment\") +\n  labs(color = \"Treatment Arm\") +\n  scale_y_continuous(\n    name = paste(y_var, adpp_a$AVALU),\n    trans = \"log\",\n    breaks = exp(ceiling(seq(from = min(log(adpp_adex$AUCinf)), to = max(log(adpp_adex$AUCinf)), by = 1))),\n    labels = as.character(ceiling(seq(from = min(log(adpp_adex$AUCinf)), to = max(log(adpp_adex$AUCinf)), by = 1)))\n  ) +\n  scale_x_continuous(\n    name = \"Dose (mg/mL)\",\n    breaks = unique(adpp_adex$Dose)\n  ) +\n  theme_nest()\n\nresult\n\n\n\n\n\n\n\nCode# In progress\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n[1] nestcolor_0.1.0.9005 ggplot2_3.4.1        dplyr_1.1.0         \n[4] scda_0.1.5.9009      tern_0.7.10.9056     rtables_0.6.0.1     \n[7] formatters_0.4.0     magrittr_2.0.3      \n\nloaded via a namespace (and not attached):\n [1] compiler_4.2.2    pillar_1.8.1      tools_4.2.2       digest_0.6.31    \n [5] nlme_3.1-162      lattice_0.20-45   jsonlite_1.8.4    evaluate_0.20    \n [9] lifecycle_1.0.3   tibble_3.1.8      gtable_0.3.1      checkmate_2.1.0  \n[13] mgcv_1.8-42       pkgconfig_2.0.3   rlang_1.0.6       Matrix_1.5-3     \n[17] cli_3.6.0         yaml_2.3.7        xfun_0.37         fastmap_1.1.1    \n[21] withr_2.5.0       knitr_1.42        generics_0.1.3    vctrs_0.5.2      \n[25] htmlwidgets_1.6.1 grid_4.2.2        tidyselect_1.2.0  glue_1.6.2       \n[29] R6_2.5.1          fansi_1.0.4       Rdpack_2.4        survival_3.5-3   \n[33] rmarkdown_2.20    farver_2.1.1      purrr_1.0.1       tidyr_1.3.0      \n[37] codetools_0.2-19  splines_4.2.2     backports_1.4.1   scales_1.2.1     \n[41] htmltools_0.5.4   rbibutils_2.2.13  colorspace_2.1-0  utf8_1.2.3       \n[45] munsell_0.5.0     broom_1.0.3      \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R              [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/graphs/pharmacokinetic/pkpg02.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "graphs/pharmacokinetic/pkcg01.html",
    "href": "graphs/pharmacokinetic/pkcg01.html",
    "title": "PKCG01",
    "section": "",
    "text": "Data Setup\nPlot in Linear Scale\nPlot in Log Scale\nTeal\nSession Info\n\n\n\n\nCodelibrary(tern)\nlibrary(scda)\nlibrary(dplyr)\nlibrary(ggplot2)\nlibrary(nestcolor)\n\nadpc <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adpc\")\n\n\n\n\n\nCodeadpc_a <- adpc %>%\n  filter(\n    PARAM == \"Plasma Drug X\",\n    ARMCD == \"ARM A\"\n  ) %>%\n  mutate(Patient_ID = sub(\".*id-\", \"\", USUBJID))\n\nuse_title <- \"Plot of Plasma Drug X (ug/mL) Concentrations Over Time by\\nPatient: PK Evaluable Patients\"\nuse_subtitle <- \"Analyte: Plasma Drug X (ug/mL) \\nTreatment Group: ARM A\"\nuse_footnote <- \"Program: \\nOutput:\"\n\nresult <- g_ipp(\n  df = adpc_a,\n  xvar = \"NRELTM1\",\n  yvar = \"AVAL\",\n  xlab = \"Norminal Time from First Dose (hr)\",\n  ylab = \"Concentration (ug/mL)\",\n  id_var = \"Patient_ID\",\n  add_baseline_hline = F,\n  yvar_baseline = \"AVAL\", #  yvar_baseline cannot be NA or ignore\n  title = use_title,\n  subtitle = use_subtitle,\n  caption = use_footnote,\n  plotting_choices = \"separate_by_obs\"\n)\nresult[[1]] # only show the first subject\n\n\n\n\n\n\n\nCodeadpc_a <- adpc %>%\n  filter(\n    PARAM == \"Plasma Drug X\",\n    ARMCD == \"ARM A\"\n  ) %>%\n  mutate(avalog = ifelse(AVAL != 0, AVAL, 0.001)) %>%\n  mutate(Patient_ID = sub(\".*id-\", \"\", USUBJID))\n\nuse_title2 <- \"Plot of Plasma Drug X (ug/mL) Concentrations Over Time by\\nPatient: PK Evaluable Patients\"\nuse_subtitle2 <- \"Analyte: Plasma Drug X (ug/mL) \\nTreatment Group: ARM A\"\nuse_footnote2 <- \"Program: \\nOutput:\"\n\nresult <- g_ipp(\n  df = adpc_a,\n  xvar = \"NRELTM1\",\n  yvar = \"avalog\",\n  xlab = \"Norminal Time from First Dose (hr)\",\n  ylab = \"Concentration (ug/mL)\",\n  id_var = \"Patient_ID\",\n  add_baseline_hline = F,\n  yvar_baseline = \"AVAL\", #  yvar_baseline cannot be NA or ignore\n  title = use_title2,\n  subtitle = use_subtitle2,\n  caption = use_footnote2,\n  plotting_choices = \"separate_by_obs\"\n)\nresult[[1]] + ggplot2::scale_y_log10(breaks = c(0.001, 0.01, 0.1, 1, 10), label = c(0.001, 0.01, 0.1, 1, 10))\n\n\n\n\n\n\n\nCode# In progress\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n[1] nestcolor_0.1.0.9005 ggplot2_3.4.1        dplyr_1.1.0         \n[4] scda_0.1.5.9009      tern_0.7.10.9056     rtables_0.6.0.1     \n[7] formatters_0.4.0     magrittr_2.0.3      \n\nloaded via a namespace (and not attached):\n [1] compiler_4.2.2    pillar_1.8.1      tools_4.2.2       digest_0.6.31    \n [5] lattice_0.20-45   jsonlite_1.8.4    evaluate_0.20     lifecycle_1.0.3  \n [9] tibble_3.1.8      gtable_0.3.1      checkmate_2.1.0   pkgconfig_2.0.3  \n[13] rlang_1.0.6       Matrix_1.5-3      cli_3.6.0         yaml_2.3.7       \n[17] xfun_0.37         fastmap_1.1.1     withr_2.5.0       knitr_1.42       \n[21] generics_0.1.3    vctrs_0.5.2       htmlwidgets_1.6.1 grid_4.2.2       \n[25] tidyselect_1.2.0  glue_1.6.2        R6_2.5.1          fansi_1.0.4      \n[29] Rdpack_2.4        survival_3.5-3    rmarkdown_2.20    farver_2.1.1     \n[33] purrr_1.0.1       tidyr_1.3.0       codetools_0.2-19  splines_4.2.2    \n[37] backports_1.4.1   scales_1.2.1      htmltools_0.5.4   rbibutils_2.2.13 \n[41] colorspace_2.1-0  labeling_0.4.2    utf8_1.2.3        munsell_0.5.0    \n[45] broom_1.0.3      \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R              [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/graphs/pharmacokinetic/pkcg01.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "graphs/pharmacokinetic/pkcg03.html",
    "href": "graphs/pharmacokinetic/pkcg03.html",
    "title": "PKCG03",
    "section": "",
    "text": "Data Setup\nPlot in Linear Scale\nPlot in Log Scale\nTeal\nSession Info\n\n\n\n\nCodelibrary(tern)\nlibrary(scda)\nlibrary(dplyr)\nlibrary(ggplot2)\nlibrary(nestcolor)\n\nadsl_f <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\") %>%\n  filter(SAFFL == \"Y\" & ARM != \"B: Placebo\") %>%\n  df_explicit_na()\n\nadpc <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adpc\") %>%\n  mutate(Patient_ID = sub(\".*id-\", \"\", USUBJID)) %>%\n  filter(PARAM == \"Plasma Drug X\") %>%\n  droplevels() %>%\n  df_explicit_na()\n\n\n\n\n\nCodeuse_title <- \"Plot of Mean (+/- SD) Plasma Concentrations Over Time by Treatment, \\nPK Evaluable Patients\"\nuse_subtitle <- \"Analyte:\"\nuse_footnote <- \"Program: \\nOutput:\"\n\nresult <- g_lineplot(\n  df = adpc,\n  variables = control_lineplot_vars(\n    x = \"NRELTM1\",\n    y = \"AVAL\",\n    strata = \"ARM\",\n    paramcd = \"PARAM\",\n    y_unit = \"AVALU\"\n  ),\n  alt_counts_df = adsl_f,\n  y_lab = \"Concentration\",\n  y_lab_add_paramcd = FALSE,\n  y_lab_add_unit = TRUE,\n  interval = \"mean_sdi\",\n  whiskers = c(\"mean_sdi_lwr\", \"mean_sdi_upr\"),\n  title = use_title,\n  subtitle = use_subtitle,\n  caption = use_footnote,\n  ggtheme = theme_nest()\n)\n\nresult + theme(plot.caption = element_text(hjust = 0))\n\n\n\n\n\n\n\nCodeuse_title <- \"Plot of Mean (+/- SD) Log-Scale Plasma Concentrations Over Time by Treatment, \\nPK Evaluable Patients\"\nuse_subtitle <- \"Analyte:\"\nuse_footnote <- \"Program: \\nOutput:\"\n\nadpc <- adpc %>%\n  mutate(avalog = ifelse(AVAL != 0, AVAL, 0.001))\n\nresult <- g_lineplot(\n  df = adpc,\n  variables = control_lineplot_vars(\n    x = \"NRELTM1\",\n    y = \"avalog\",\n    strata = \"ARM\",\n    paramcd = \"PARAM\",\n    y_unit = \"AVALU\"\n  ),\n  alt_counts_df = adsl_f,\n  y_lab = \"Concentration\",\n  y_lab_add_paramcd = FALSE,\n  y_lab_add_unit = TRUE,\n  interval = \"mean_sdi\",\n  whiskers = c(\"mean_sdi_lwr\", \"mean_sdi_upr\"),\n  title = use_title,\n  subtitle = use_subtitle,\n  caption = use_footnote,\n  ggtheme = theme_nest()\n)\n\nresult + theme(plot.caption = element_text(hjust = 0)) +\n  ggplot2::scale_y_log10(breaks = c(0.001, 0.01, 0.1, 1, 10), label = c(0.001, 0.01, 0.1, 1, 10))\n\nScale for y is already present.\nAdding another scale for y, which will replace the existing scale.\n\n\n\n\n\n\n\n\nCode# In progress\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n[1] nestcolor_0.1.0.9005 ggplot2_3.4.1        dplyr_1.1.0         \n[4] scda_0.1.5.9009      tern_0.7.10.9056     rtables_0.6.0.1     \n[7] formatters_0.4.0     magrittr_2.0.3      \n\nloaded via a namespace (and not attached):\n [1] compiler_4.2.2    pillar_1.8.1      forcats_1.0.0     tools_4.2.2      \n [5] digest_0.6.31     lattice_0.20-45   jsonlite_1.8.4    evaluate_0.20    \n [9] lifecycle_1.0.3   tibble_3.1.8      gtable_0.3.1      checkmate_2.1.0  \n[13] pkgconfig_2.0.3   rlang_1.0.6       Matrix_1.5-3      cli_3.6.0        \n[17] yaml_2.3.7        xfun_0.37         fastmap_1.1.1     withr_2.5.0      \n[21] knitr_1.42        generics_0.1.3    vctrs_0.5.2       htmlwidgets_1.6.1\n[25] grid_4.2.2        tidyselect_1.2.0  glue_1.6.2        R6_2.5.1         \n[29] fansi_1.0.4       Rdpack_2.4        survival_3.5-3    rmarkdown_2.20   \n[33] farver_2.1.1      purrr_1.0.1       tidyr_1.3.0       codetools_0.2-19 \n[37] splines_4.2.2     backports_1.4.1   scales_1.2.1      htmltools_0.5.4  \n[41] rbibutils_2.2.13  colorspace_2.1-0  labeling_0.4.2    utf8_1.2.3       \n[45] munsell_0.5.0     broom_1.0.3      \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R              [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/graphs/pharmacokinetic/pkcg03.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "graphs/pharmacokinetic/pkpg01.html",
    "href": "graphs/pharmacokinetic/pkpg01.html",
    "title": "PKPG01",
    "section": "",
    "text": "Data Setup\nPlot with Two Cohorts\nPlot with Six Cohorts\nTeal\nSession Info\n\n\n\n\nCodelibrary(tern)\nlibrary(scda)\nlibrary(dplyr)\nlibrary(ggplot2)\nlibrary(nestcolor)\n\n# loading in the data\nadpp <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adpp\")\n\n# filtering the rows for specific data entries\nadpp <- adpp %>%\n  filter(PARAMCD == \"RCPCINT\", AVISIT == \"CYCLE 1 DAY 1\", PPCAT == \"Plasma Drug X\")\n\n# adding or modifying specific columns\nadpp <- adpp %>%\n  mutate(ARM = as.factor(TRT01A)) %>%\n  mutate(PARAM1 = \"Fe\") %>% # re-format PK parameter name\n  mutate(Time = as.numeric(gsub(\"PT*|\\\\.|H$\", \"\", PPENINT))) %>%\n  droplevels() %>%\n  df_explicit_na()\n\n# in cases where the cohorts are numeric it is possible to rename them\nlevels(adpp$ARM) <- c(\n  \"A: Drug X\",\n  \"C: Combination\"\n)\n\n\n\n\n\nCodeuse_title <- \"Plot of Mean (+/- SD) Cummulative Percentage (%) of Recovered Drug in Urine \\nby Analyte, Visit: PK Evaluable Patients\"\nuse_subtitle <- \"Analyte: Plasma Drug X \\nVisit: CYCLE 1 DAY 1 \\nPK Parameter:\"\nuse_footnote <- \"Program: \\nOutput:\"\n\nseparation_between_barplots <- 1.5\n\nresult <- g_lineplot(\n  df = adpp,\n  variables = control_lineplot_vars(\n    x = \"Time\",\n    y = \"AVAL\",\n    strata = \"ARM\",\n    paramcd = \"PARAM1\",\n    y_unit = \"AVALU\"\n  ),\n  alt_counts_df = adpp,\n  y_lab = \"Cummulative Percentage\",\n  x_lab = \"Time (hours)\",\n  y_lab_add_paramcd = FALSE,\n  y_lab_add_unit = TRUE,\n  interval = \"mean_sdi\",\n  whiskers = c(\"mean_sdi_lwr\", \"mean_sdi_upr\"),\n  title = use_title,\n  subtitle = use_subtitle,\n  caption = use_footnote,\n  ggtheme = theme_nest(),\n  position = ggplot2::position_dodge(width = 2)\n)\n\nresult + theme(plot.caption = element_text(hjust = 0)) +\n  scale_x_continuous(breaks = c(12, 24))\n\n\n\n\n\n\nIn this case we need to process the data further by artificially adding more random rows. Of course this step is not necessary in the case that data already has more cohorts.\n\nCodeadpp_hck <- adpp %>%\n  mutate(AVAL + 1 * rnorm(nrow(adpp), mean = 1, sd = 1)) %>%\n  mutate(ARM = as.factor(sample(\n    c(\n      \"D: Drug D\",\n      \"E: Drug E\",\n      \"F: Drug F\",\n      \"G: Drug G\"\n    ),\n    nrow(adpp),\n    replace = TRUE,\n    prob = c(0.4, 0.3, 0.2, 0.1)\n  )))\n\nadpp <- bind_rows(adpp, adpp_hck)\n\nuse_title <- \"Plot of Mean (+/- SD) Cummulative Percentage (%) of Recovered Drug in Urine \\nby Analyte, Visit: PK Evaluable Patients\"\nuse_subtitle <- \"Analyte: Plasma Drug X \\nVisit: CYCLE 1 DAY 1 \\nPK Parameter:\"\nuse_footnote <- \"Program: \\nOutput:\"\n\nseparation_between_barplots <- 1.5\n\nresult <- g_lineplot(\n  df = adpp,\n  variables = control_lineplot_vars(\n    x = \"Time\",\n    y = \"AVAL\",\n    strata = \"ARM\",\n    paramcd = \"PARAM1\",\n    y_unit = \"AVALU\"\n  ),\n  alt_counts_df = adpp,\n  y_lab = \"Cummulative Percentage\",\n  x_lab = \"Time (hours)\",\n  y_lab_add_paramcd = FALSE,\n  y_lab_add_unit = TRUE,\n  interval = \"mean_sdi\",\n  whiskers = c(\"mean_sdi_lwr\", \"mean_sdi_upr\"),\n  title = use_title,\n  subtitle = use_subtitle,\n  caption = use_footnote,\n  ggtheme = theme_nest(),\n  position = ggplot2::position_dodge(width = 2)\n)\n\nresult + theme(plot.caption = element_text(hjust = 0)) +\n  scale_x_continuous(breaks = c(12, 24))\n\n\n\n\n\n\n\nCode# In progress\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n[1] nestcolor_0.1.0.9005 ggplot2_3.4.1        dplyr_1.1.0         \n[4] scda_0.1.5.9009      tern_0.7.10.9056     rtables_0.6.0.1     \n[7] formatters_0.4.0     magrittr_2.0.3      \n\nloaded via a namespace (and not attached):\n [1] compiler_4.2.2    pillar_1.8.1      forcats_1.0.0     tools_4.2.2      \n [5] digest_0.6.31     lattice_0.20-45   jsonlite_1.8.4    evaluate_0.20    \n [9] lifecycle_1.0.3   tibble_3.1.8      gtable_0.3.1      checkmate_2.1.0  \n[13] pkgconfig_2.0.3   rlang_1.0.6       Matrix_1.5-3      cli_3.6.0        \n[17] yaml_2.3.7        xfun_0.37         fastmap_1.1.1     withr_2.5.0      \n[21] knitr_1.42        generics_0.1.3    vctrs_0.5.2       htmlwidgets_1.6.1\n[25] grid_4.2.2        tidyselect_1.2.0  glue_1.6.2        R6_2.5.1         \n[29] fansi_1.0.4       Rdpack_2.4        survival_3.5-3    rmarkdown_2.20   \n[33] farver_2.1.1      purrr_1.0.1       tidyr_1.3.0       codetools_0.2-19 \n[37] splines_4.2.2     backports_1.4.1   scales_1.2.1      htmltools_0.5.4  \n[41] rbibutils_2.2.13  colorspace_2.1-0  labeling_0.4.2    utf8_1.2.3       \n[45] munsell_0.5.0     broom_1.0.3      \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R              [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/graphs/pharmacokinetic/pkpg01.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "graphs/pharmacokinetic/pkpg03.html",
    "href": "graphs/pharmacokinetic/pkpg03.html",
    "title": "PKPG03",
    "section": "",
    "text": "Data Setup\nPlot of CMAX by Visit\nSession Info\n\n\n\n\nCodelibrary(tern)\nlibrary(scda)\nlibrary(dplyr)\nlibrary(ggplot2)\nlibrary(nestcolor)\n\nadpp <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adpp\")\n\n\n\n\n\nCode# filtered parameter\nadpp <- adpp %>% filter(PARAMCD == \"CMAX\", PPSPEC == \"Plasma\")\n\nuse_title <- paste0(\"Boxplot of \", as.character(unique(adpp$PARAM)), \" by Visit\")\nuse_subtitle <- paste0(\"Analyte:\\nPK Parameter: \", as.character(unique(adpp$PARAM)), \" (\", as.character(unique(adpp$AVALU)), \")\")\nuse_footnote <- \"Program: \\nOutput:\"\n\np <- ggplot(adpp, aes(x = AVISIT, y = AVAL, fill = ACTARM, label = SUBJID)) +\n  geom_boxplot(outlier.size = 2) +\n  stat_boxplot(geom = \"errorbar\") +\n  stat_summary(geom = \"point\", fun = \"mean\", col = \"black\", size = 5, shape = 8, position = position_dodge(0.75)) +\n  geom_text(\n    data = . %>% group_by(AVISIT, ACTARM) %>% filter(AVAL %in% boxplot.stats(AVAL)$out),\n    aes(x = AVISIT, y = AVAL, label = SUBJID, color = ACTARM),\n    size = 3, hjust = -0.2, position = position_dodge(0.75)\n  ) +\n  labs(\n    title = use_title,\n    subtitle = use_subtitle,\n    caption = use_footnote,\n    x = \"Visit\",\n    y = paste0(as.character(unique(adpp$PARAM)), \" (\", as.character(unique(adpp$AVALU)), \")\")\n  ) +\n  theme(plot.caption = element_text(hjust = 0)) +\n  theme_nest()\n\np\n\n\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n[1] nestcolor_0.1.0.9005 ggplot2_3.4.1        dplyr_1.1.0         \n[4] scda_0.1.5.9009      tern_0.7.10.9056     rtables_0.6.0.1     \n[7] formatters_0.4.0     magrittr_2.0.3      \n\nloaded via a namespace (and not attached):\n [1] compiler_4.2.2    pillar_1.8.1      tools_4.2.2       digest_0.6.31    \n [5] lattice_0.20-45   jsonlite_1.8.4    evaluate_0.20     lifecycle_1.0.3  \n [9] tibble_3.1.8      gtable_0.3.1      checkmate_2.1.0   pkgconfig_2.0.3  \n[13] rlang_1.0.6       Matrix_1.5-3      cli_3.6.0         yaml_2.3.7       \n[17] xfun_0.37         fastmap_1.1.1     withr_2.5.0       knitr_1.42       \n[21] generics_0.1.3    vctrs_0.5.2       htmlwidgets_1.6.1 grid_4.2.2       \n[25] tidyselect_1.2.0  glue_1.6.2        R6_2.5.1          fansi_1.0.4      \n[29] Rdpack_2.4        survival_3.5-3    rmarkdown_2.20    farver_2.1.1     \n[33] purrr_1.0.1       tidyr_1.3.0       codetools_0.2-19  splines_4.2.2    \n[37] backports_1.4.1   scales_1.2.1      htmltools_0.5.4   rbibutils_2.2.13 \n[41] colorspace_2.1-0  labeling_0.4.2    utf8_1.2.3        munsell_0.5.0    \n[45] broom_1.0.3      \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R              [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/graphs/pharmacokinetic/pkpg03.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "tlg-index.html",
    "href": "tlg-index.html",
    "title": "Index",
    "section": "",
    "text": "Tables\nAdverse Events\n        AET01_AESI – Safety Summary (Adverse Events of Special Interest)\n        AET01 – Safety Summary\n        AET02_SMQ – Adverse Events by Standardized MedDRA Query\n        AET02 – Adverse Events\n        AET03 – Adverse Events by Greatest Intensity\n        AET04_PI – Adverse Events Reported in \\(\\geq\\) 10% of Patients by Highest NCI CTCAE Grade\n        AET04 – Adverse Events by Highest NCI CTCAE Grade\n        AET05_ALL – Adverse Event Rate Adjusted for Patient-Years at Risk – All Occurrences\n        AET05 – Adverse Event Rate Adjusted for Patient-Years at Risk – First Occurrence\n        AET06_SMQ – Adverse Events by Baseline Characteristic, by SMQ and Preferred Term\n        AET06 – Adverse Events by Baseline Characteristic\n        AET07 – Adverse Events Resulting in Death\n        AET09_SMQ – Adverse Events Related to Study Drug by Standardized MedDRA Query\n        AET09 – Adverse Events Related to Study Drug\n        AET10 – Most Common (\\(\\geq\\) 5%) Adverse Events\nEfficacy\n        AOVT01 – ANCOVA for Multiple End Points\n        COXT01 – Cox Regression\n        COXT02 – Multi-Variable Cox Regression\n        DORT01 – Duration of Response\n        LGRT02 – Multi-Variable Logistic Regression\n        MMRMT01 – Tables for Mixed-Effect Model Repeated Measures Analysis\n        ONCT05 – Objective Response Rate by Subgroup\n        RSPT01 – Best Overall Response\n        TTET01 – Time-To-Event Summary\nLab Results\n        LBT01 – Laboratory Test Results and Change from Baseline by Visit\n        LBT02 – Laboratory Test Results by Visit\n        LBT03 – Laboratory Test Results Change from Baseline by Visit\n        LBT04 – Laboratory Abnormalities Not Present at Baseline\n        LBT05 – Laboratory Abnormalities with Single and Replicated Marked\n        LBT06 – Laboratory Abnormalities by Visit and Baseline Status\n        LBT07 – Laboratory Test Results with Highest NCI CTCAE Grade Post-Baseline\n        LBT08 – Laboratory Test Results with Highest NCI CTCAE Grade at Any Time\n        LBT09 – Liver Laboratory Tests – Patients with Elevated Post-Baseline AST or ALT Levels\n        LBT10_BL – Liver Laboratory Tests – Patients with Elevated Post-Baseline AST or ALT Levels at Two Consecutive Visits (with Respect to Baseline)\n        LBT10 – Liver Laboratory Tests – Patients with Elevated Post-Baseline AST or ALT Levels at Two Consecutive Visits (with Respect to ULN)\n        LBT11_BL – Time to First Increase in Liver Laboratory Test Result Meeting Hy’s Law Laboratory Critieria (with Respect to Baseline)\n        LBT11 – Time to First Increase in Liver Laboratory Test Result Meeting Hy’s Law Laboratory Critieria (with Respect to ULN)\n        LBT12_BL – Liver Laboratory Tests by Time on Treatment – Patients with Elevated Post-Baseline AST or ALT Levels (with Respect to Baseline)\n        LBT12 – Liver Laboratory Tests by Time on Treatment – Patients with Elevated Post-Baseline AST or ALT Levels (with Respect to ULN)\n        LBT13 – NCI CTCAE Grade Laboratory Abnormalities by Visit and Baseline Grade\n        LBT14 – Laboratory Test Results Shift Table – Highest NCI CTCAE Grade Post-Baseline by Baseline NCI CTCAE Grade\n        LBT15 – Laboratory Test Shifts to NCI CTCAE Grade 3-4 Post-Baseline\nPharmacokinetic\n        ADAT01 – Baseline Prevalence and Incidence of Treatment Emergent ADA\n        ADAT02 – Summary of Patients with Treatment-Induced ADA\n        ADAT03 – Summary of Serum Concentrations at Timepoints Where ADA Samples Were Collected and Analyzed\n        ADAT04A – Baseline Prevalence and Incidence of Treatment Emergent NAbs\n        ADAT04B – Baseline Prevalence and Incidence of NAbs\n        PKCT01 – Summary Concentration Table\n        PKPT02 – Pharmacokinetic Parameter Summary – Plasma/Serum/Blood PK Parameters (Stats in Rows)\n        PKPT03 – Pharmacokinetic Parameter Summary of Plasma by Treatment (Stats in Columns)\n        PKPT04 – Pharmacokinetic Parameter Summary – Urine PK Parameters (Stats in Rows)\n        PKPT05 – Summary of Urinary PK Parameters by Treatment Arm (Stats in Columns)\n        PKPT06 – Pharmacokinetic Parameter Summary – Dose-Normalized PK Parameters (Stats in Rows)\n        PKPT07 – Table of Mean Dose-Normalized Selected Pharmacokinetic Parameters (Stats in Columns)\n        PKPT08 – Pharmacokinetic Parameter Summary of Cumulative Amount of Drug Eliminated and Cumulative Percentage of Drug Recovered (Stats in Columns)\n        PKPT11 – Pharmacokinetic Parameter Estimated Ratios of Geometric Means and 90% Confidence Intervals for AUC and CMAX\nSafety\n        CMT01 – Concomitant Medications (GNEDrug Legacy Coding)\n        CMT01A – Concomitant Medications by Medication Class and Preferred Name\n        CMT01B – Concomitant Medications by Medication Class and Preferred Name\n        CMT02_PT – Concomitant Medications by Preferred Name (WHODrug Coding)\n        DMT01 – Demographics and Baseline Characteristics\n        DST01 – Patient Disposition\n        DTHT01 – Deaths\n        EGT01 – ECG Results and Change from Baseline by Visit\n        EGT02 – ECG Abnormalities (EGT02_1 & EGT02_2)\n        EGT03 – Shift Table of ECG Interval Data – Baseline Versus Minimum/Maximum Post-Baseline\n        EGT04 – Shift Table of Qualitative ECG Assessments\n        EGT05_QTCAT – ECG Actual Values and Changes from Baseline by Visit\n        ENTXX – Enrollment Variants\n        EUDRAT01 – Non-Serious Adverse Events Reported in \\(\\geq\\) 5% of Patients in Any Treatment Group – Patients and Events\n        EUDRAT02 – Serious Adverse Events, Fatal Serious Adverse Events, and Serious Adverse Events Related to Study Medication\n        EXT01 – Study Drug Exposure Table\n        MHT01 – Medical History\n        PDT01 – Major Protocol Deviations\n        PDT02 – Major Protocol Deviations Related to Epidemic/Pandemic\n        VST01 – Vital Sign Results and Change from Baseline by Visit\n        VST02 – Vital Sign Abnormalities\nOther\n        AOVT02 – ANCOVA with Single End Point and Customized Table\n        AOVT03 – ANCOVA with Consideration of Interaction\n        CMHT01 – Cochran-Mantel-Haenszel (CMH) Summary\n        DISCLOSUREST01 – Disclosures Outputs\n        RATET01 – Event Rate Summary for Recurrent Events\n        RBMIT01 – Tables for RBMI\n        RMPT01 – Duration of Exposure for Risk Management Plan\n        RMPT03 – Extent of Exposure by Age Group and Gender for Risk Management Plan\n        RMPT04 – Extent of Exposure by Ethnic Origin for Risk Management Plan\n        RMPT05 – Extent of Exposure by Race for Risk Management Plan\n        RMPT06 – Seriousness, Outcomes, Severity, Frequency with 95% CI for Risk Management Plan\nGraphs\nPharmacokinetic\n        PKCG01 – Plot of PK Concentration Over Time by Subject\n        PKCG02 – Plot of PK Concentration Over Time by Cohort/Treatment Group/Dose\n        PKCG03 – Plot of Mean PK Concentration Over Time by Cohort\n        PKPG01 – Plot of Mean Cumulative Percentage (%) of Recovered Drug in Urine\n        PKPG02 – Pharmacokinetic Parameter Summary of Serum PK Parameters by Treatment\n        PKPG03 – Box Plot of Pharmacokinetic Parameters by Visit – Plasma\n        PKPG04 – Box Plot of Pharmacokinetic Parameters by Visit – Plasma\n        PKPG06 – Boxplot of Metabolite to Parent Ratios by Treatment\nOther\n        BRG01 – Bar Chart\n        BWG01 – Box Plot\n        CIG01 – Confidence Interval Plot\n        FSTG01 – Subgroup Analysis of Best Overall Response\n        FSTG02 – Subgroup Analysis of Survival Duration\n        IPPG01 – Individual Patient Plot Over Time\n        KMG01 – Kaplan-Meier Plot\n        LTG01 – Lattice Plot of Laboratory Tests by Treatment Group Over Time\n        MMRMG01 – Plots for Mixed-Effect Model Repeated Measures Analysis\n        MMRMG02 – Forest Plot for Mixed-Effect Model Repeated Measures\n        MNG01 – Mean Plot"
  },
  {
    "objectID": "tables/adverse-events/aet06.html",
    "href": "tables/adverse-events/aet06.html",
    "title": "AET06",
    "section": "",
    "text": "Data Setup\nAdverse Events by Sex\nAdverse Events by Other Baseline  Characteristics (e.g. Biomarker Group)\nAdverse Events by Baseline Characteristic  from ADSUB (e.g. BMI Category)\nAdverse Events by Regrouped Baseline  Characteristics (e.g. Race)\nAdverse Events by Baseline Characteristics  (e.g. Sex) Including High-Level Terms\nTeal\nSession Info\n\n\n\n\nCodelibrary(dplyr)\nlibrary(tern)\nlibrary(scda)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadae <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adae\")\nadsub <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsub\")\n\nadsub_bmi <- adsub %>%\n  filter(PARAMCD == \"BBMISI\") %>%\n  select(STUDYID, USUBJID, AVALCAT1) %>%\n  mutate(\n    AVALCAT1 = factor(AVALCAT1, levels = c(\"<18.5\", \"18.5 - 24.9\", \"25 - 29.9\", \">30\"))\n  )\n\nadsl <- adsl %>%\n  mutate(\n    RACE1 = case_when(\n      RACE == \"WHITE\" ~ \"WHITE\",\n      TRUE ~ \"NON-WHITE\"\n    ),\n    RACE1 = factor(\n      RACE1,\n      levels = c(\"WHITE\", \"NON-WHITE\")\n    )\n  ) %>%\n  left_join(\n    y = adsub_bmi,\n    by = c(\"STUDYID\", \"USUBJID\")\n  )\n\nadae_labels <- var_labels(adae)\n\nadae <- adae %>%\n  mutate(\n    RACE1 = case_when(\n      RACE == \"WHITE\" ~ \"WHITE\",\n      TRUE ~ \"NON-WHITE\"\n    ),\n    RACE1 = factor(\n      RACE1,\n      levels = c(\"WHITE\", \"NON-WHITE\")\n    )\n  ) %>%\n  left_join(\n    y = adsub_bmi,\n    by = c(\"STUDYID\", \"USUBJID\")\n  )\n\nvar_labels(adae) <- c(adae_labels, \"RACE1\" = \"RACE WHITE/NON-WHITE\", \"AVALCAT1\" = \"Baseline BMI Category\")\n\n# Ensure character variables are converted to factors and empty strings and NAs are explicit missing levels.\nadsl <- df_explicit_na(adsl)\nadae <- df_explicit_na(adae)\nadsub_bmi <- df_explicit_na(adsub_bmi)\n\n\n\n\n\nCodesplit_fun <- drop_split_levels\n\nlyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ARM\") %>%\n  split_cols_by(\"SEX\") %>%\n  analyze_num_patients(\n    vars = \"USUBJID\",\n    .stats = c(\"unique\", \"nonunique\"),\n    .labels = c(\n      unique = \"Total number of patients with at least one adverse event\",\n      nonunique = \"Overall total number of events\"\n    )\n  ) %>%\n  split_rows_by(\n    \"AEBODSYS\",\n    child_labels = \"visible\",\n    nested = FALSE,\n    split_fun = split_fun,\n    label_pos = \"topleft\",\n    split_label = obj_label(adae$AEBODSYS)\n  ) %>%\n  summarize_num_patients(\n    var = \"USUBJID\",\n    .stats = c(\"unique\", \"nonunique\"),\n    .labels = c(\n      unique = \"Total number of patients with at least one adverse event\",\n      nonunique = \"Total number of events\"\n    )\n  ) %>%\n  count_occurrences(vars = \"AEDECOD\", .indent_mods = -1L) %>%\n  append_varlabels(adae, \"AEDECOD\", indent = 1L)\n\nresult <- build_table(\n  lyt = lyt,\n  df = adae,\n  alt_counts_df = adsl\n) %>%\n  prune_table() %>%\n  # Sorted by decreasing frequency across all groups by System Organ Class and Preferred Term.\n  sort_at_path(\n    path = c(\"AEBODSYS\"),\n    scorefun = cont_n_allcols\n  ) %>%\n  sort_at_path(\n    path = c(\"AEBODSYS\", \"*\", \"AEDECOD\"),\n    scorefun = score_occurrences\n  )\n\nresult\n\nBody System or Organ Class                                          A: Drug X                B: Placebo              C: Combination     \n  Dictionary-Derived Term                                        F            M            F            M            F            M     \n                                                               (N=79)       (N=55)       (N=82)       (N=52)       (N=70)       (N=62)  \n————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————\nTotal number of patients with at least one adverse event     72 (91.1%)   50 (90.9%)   77 (93.9%)   46 (88.5%)   65 (92.9%)   55 (88.7%)\nOverall total number of events                                  377          232          419          203          378          325    \ncl A.1                                                                                                                                  \n  Total number of patients with at least one adverse event   53 (67.1%)   25 (45.5%)   51 (62.2%)   24 (46.2%)   43 (61.4%)   46 (74.2%)\n  Total number of events                                         85           47           93           37           86           74    \n  dcd A.1.1.1.1                                              34 (43.0%)   16 (29.1%)   31 (37.8%)   14 (26.9%)   33 (47.1%)   30 (48.4%)\n  dcd A.1.1.1.2                                              32 (40.5%)   16 (29.1%)   33 (40.2%)   15 (28.8%)   24 (34.3%)   26 (41.9%)\ncl B.2                                                                                                                                  \n  Total number of patients with at least one adverse event   46 (58.2%)   33 (60.0%)   45 (54.9%)   29 (55.8%)   44 (62.9%)   41 (66.1%)\n  Total number of events                                         81           48           86           52           64           79    \n  dcd B.2.2.3.1                                              30 (38.0%)   18 (32.7%)   32 (39.0%)   22 (42.3%)   26 (37.1%)   25 (40.3%)\n  dcd B.2.1.2.1                                              29 (36.7%)   20 (36.4%)   30 (36.6%)   14 (26.9%)   22 (31.4%)   30 (48.4%)\ncl D.1                                                                                                                                  \n  Total number of patients with at least one adverse event   45 (57.0%)   34 (61.8%)   40 (48.8%)   27 (51.9%)   41 (58.6%)   39 (62.9%)\n  Total number of events                                         72           55           64           42           73           62    \n  dcd D.1.1.1.1                                              25 (31.6%)   25 (45.5%)   29 (35.4%)   13 (25.0%)   27 (38.6%)   24 (38.7%)\n  dcd D.1.1.4.2                                              30 (38.0%)   18 (32.7%)   22 (26.8%)   20 (38.5%)   27 (38.6%)   23 (37.1%)\ncl D.2                                                                                                                                  \n  Total number of patients with at least one adverse event   26 (32.9%)   21 (38.2%)   40 (48.8%)   18 (34.6%)   34 (48.6%)   23 (37.1%)\n  Total number of events                                         35           27           49           23           43           31    \n  dcd D.2.1.5.3                                              26 (32.9%)   21 (38.2%)   40 (48.8%)   18 (34.6%)   34 (48.6%)   23 (37.1%)\ncl B.1                                                                                                                                  \n  Total number of patients with at least one adverse event   28 (35.4%)   19 (34.5%)   33 (40.2%)   16 (30.8%)   24 (34.3%)   19 (30.6%)\n  Total number of events                                         33           23           36           24           35           27    \n  dcd B.1.1.1.1                                              28 (35.4%)   19 (34.5%)   33 (40.2%)   16 (30.8%)   24 (34.3%)   19 (30.6%)\ncl C.2                                                                                                                                  \n  Total number of patients with at least one adverse event   23 (29.1%)   12 (21.8%)   36 (43.9%)   12 (23.1%)   30 (42.9%)   25 (40.3%)\n  Total number of events                                         32           16           39           14           33           32    \n  dcd C.2.1.2.1                                              23 (29.1%)   12 (21.8%)   36 (43.9%)   12 (23.1%)   30 (42.9%)   25 (40.3%)\ncl C.1                                                                                                                                  \n  Total number of patients with at least one adverse event   30 (38.0%)   13 (23.6%)   36 (43.9%)   10 (19.2%)   27 (38.6%)   16 (25.8%)\n  Total number of events                                         39           16           52           11           44           20    \n  dcd C.1.1.1.3                                              30 (38.0%)   13 (23.6%)   36 (43.9%)   10 (19.2%)   27 (38.6%)   16 (25.8%)\n\n\n\n\n\nCodesplit_fun <- drop_split_levels\n\nlyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ARM\") %>%\n  split_cols_by(\"BMRKR2\") %>%\n  analyze_num_patients(\n    var = \"USUBJID\",\n    .stats = c(\"unique\", \"nonunique\"),\n    .labels = c(\n      unique = \"Total number of patients with at least one adverse event\",\n      nonunique = \"Overall total number of events\"\n    )\n  ) %>%\n  split_rows_by(\n    \"AEBODSYS\",\n    child_labels = \"visible\",\n    nested = FALSE,\n    split_fun = split_fun,\n    label_pos = \"topleft\",\n    split_label = obj_label(adae$AEBODSYS)\n  ) %>%\n  summarize_num_patients(\n    var = \"USUBJID\",\n    .stats = c(\"unique\", \"nonunique\"),\n    .labels = c(\n      unique = \"Total number of patients with at least one adverse event\",\n      nonunique = \"Total number of events\"\n    )\n  ) %>%\n  count_occurrences(vars = \"AEDECOD\", .indent_mods = -1L) %>%\n  append_varlabels(adae, \"AEDECOD\", indent = 1L)\n\nresult <- build_table(\n  lyt = lyt,\n  df = adae,\n  alt_counts_df = adsl\n) %>%\n  prune_table() %>%\n  # Sorted by decreasing frequency across all groups by System Organ Class and Preferred Term.\n  sort_at_path(\n    path = c(\"AEBODSYS\"),\n    scorefun = cont_n_allcols\n  ) %>%\n  sort_at_path(\n    path = c(\"AEBODSYS\", \"*\", \"AEDECOD\"),\n    scorefun = score_occurrences\n  )\n\nresult\n\nBody System or Organ Class                                                A: Drug X                              B: Placebo                           C: Combination           \n  Dictionary-Derived Term                                       LOW         MEDIUM        HIGH         LOW         MEDIUM        HIGH         LOW         MEDIUM        HIGH   \n                                                               (N=50)       (N=37)       (N=47)       (N=45)       (N=56)       (N=33)       (N=40)       (N=42)       (N=50)  \n———————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————\nTotal number of patients with at least one adverse event     46 (92.0%)   34 (91.9%)   42 (89.4%)   40 (88.9%)   53 (94.6%)   30 (90.9%)   36 (90.0%)   39 (92.9%)   45 (90.0%)\nOverall total number of events                                  248          166          195          196          261          165          220          258          225    \ncl A.1                                                                                                                                                                         \n  Total number of patients with at least one adverse event   31 (62.0%)   19 (51.4%)   28 (59.6%)   25 (55.6%)   31 (55.4%)   19 (57.6%)   28 (70.0%)   30 (71.4%)   31 (62.0%)\n  Total number of events                                         53           34           45           46           54           30           61           51           48    \n  dcd A.1.1.1.1                                              22 (44.0%)   10 (27.0%)   18 (38.3%)   14 (31.1%)   20 (35.7%)   11 (33.3%)   21 (52.5%)   24 (57.1%)   18 (36.0%)\n  dcd A.1.1.1.2                                              17 (34.0%)   13 (35.1%)   18 (38.3%)   18 (40.0%)   18 (32.1%)   12 (36.4%)   18 (45.0%)   14 (33.3%)   18 (36.0%)\ncl B.2                                                                                                                                                                         \n  Total number of patients with at least one adverse event   34 (68.0%)   21 (56.8%)   24 (51.1%)   23 (51.1%)   33 (58.9%)   18 (54.5%)   24 (60.0%)   27 (64.3%)   34 (68.0%)\n  Total number of events                                         53           37           39           40           61           37           40           47           56    \n  dcd B.2.2.3.1                                              21 (42.0%)   13 (35.1%)   14 (29.8%)   18 (40.0%)   22 (39.3%)   14 (42.4%)   16 (40.0%)   15 (35.7%)   20 (40.0%)\n  dcd B.2.1.2.1                                              21 (42.0%)   11 (29.7%)   17 (36.2%)   11 (24.4%)   21 (37.5%)   12 (36.4%)   13 (32.5%)   17 (40.5%)   22 (44.0%)\ncl D.1                                                                                                                                                                         \n  Total number of patients with at least one adverse event   34 (68.0%)   21 (56.8%)   24 (51.1%)   18 (40.0%)   33 (58.9%)   16 (48.5%)   25 (62.5%)   31 (73.8%)   24 (48.0%)\n  Total number of events                                         51           35           41           27           49           30           45           53           37    \n  dcd D.1.1.1.1                                              19 (38.0%)   16 (43.2%)   15 (31.9%)   13 (28.9%)   19 (33.9%)   10 (30.3%)   14 (35.0%)   22 (52.4%)   15 (30.0%)\n  dcd D.1.1.4.2                                              21 (42.0%)   9 (24.3%)    18 (38.3%)   9 (20.0%)    20 (35.7%)   13 (39.4%)   17 (42.5%)   18 (42.9%)   15 (30.0%)\ncl D.2                                                                                                                                                                         \n  Total number of patients with at least one adverse event   20 (40.0%)   12 (32.4%)   15 (31.9%)   19 (42.2%)   22 (39.3%)   17 (51.5%)   13 (32.5%)   23 (54.8%)   21 (42.0%)\n  Total number of events                                         27           13           22           23           26           23           17           33           24    \n  dcd D.2.1.5.3                                              20 (40.0%)   12 (32.4%)   15 (31.9%)   19 (42.2%)   22 (39.3%)   17 (51.5%)   13 (32.5%)   23 (54.8%)   21 (42.0%)\ncl B.1                                                                                                                                                                         \n  Total number of patients with at least one adverse event   14 (28.0%)   14 (37.8%)   19 (40.4%)   15 (33.3%)   24 (42.9%)   10 (30.3%)   14 (35.0%)   15 (35.7%)   14 (28.0%)\n  Total number of events                                         16           19           21           18           25           17           19           25           18    \n  dcd B.1.1.1.1                                              14 (28.0%)   14 (37.8%)   19 (40.4%)   15 (33.3%)   24 (42.9%)   10 (30.3%)   14 (35.0%)   15 (35.7%)   14 (28.0%)\ncl C.2                                                                                                                                                                         \n  Total number of patients with at least one adverse event   18 (36.0%)   8 (21.6%)    9 (19.1%)    15 (33.3%)   22 (39.3%)   11 (33.3%)   18 (45.0%)   17 (40.5%)   20 (40.0%)\n  Total number of events                                         27           9            12           18           23           12           20           20           25    \n  dcd C.2.1.2.1                                              18 (36.0%)   8 (21.6%)    9 (19.1%)    15 (33.3%)   22 (39.3%)   11 (33.3%)   18 (45.0%)   17 (40.5%)   20 (40.0%)\ncl C.1                                                                                                                                                                         \n  Total number of patients with at least one adverse event   17 (34.0%)   14 (37.8%)   12 (25.5%)   17 (37.8%)   17 (30.4%)   12 (36.4%)   12 (30.0%)   17 (40.5%)   14 (28.0%)\n  Total number of events                                         21           19           15           24           23           16           18           29           17    \n  dcd C.1.1.1.3                                              17 (34.0%)   14 (37.8%)   12 (25.5%)   17 (37.8%)   17 (30.4%)   12 (36.4%)   12 (30.0%)   17 (40.5%)   14 (28.0%)\n\n\n\n\n\nCodesplit_fun <- drop_split_levels\n\nlyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ARM\") %>%\n  split_cols_by(\"AVALCAT1\") %>%\n  analyze_num_patients(\n    vars = \"USUBJID\",\n    .stats = c(\"unique\", \"nonunique\"),\n    .labels = c(\n      unique = \"Total number of patients with at least one adverse event\",\n      nonunique = \"Overall total number of events\"\n    )\n  ) %>%\n  split_rows_by(\n    \"AEBODSYS\",\n    child_labels = \"visible\",\n    nested = FALSE,\n    split_fun = split_fun,\n    label_pos = \"topleft\",\n    split_label = obj_label(adae$AEBODSYS)\n  ) %>%\n  summarize_num_patients(\n    var = \"USUBJID\",\n    .stats = c(\"unique\", \"nonunique\"),\n    .labels = c(\n      unique = \"Total number of patients with at least one adverse event\",\n      nonunique = \"Total number of events\"\n    )\n  ) %>%\n  count_occurrences(vars = \"AEDECOD\", .indent_mods = -1L) %>%\n  append_varlabels(adae, \"AEDECOD\", indent = 1L)\n\nresult <- build_table(\n  lyt = lyt,\n  df = adae,\n  alt_counts_df = adsl\n) %>%\n  prune_table() %>%\n  # Sorted by decreasing frequency across all groups by System Organ Class and Preferred Term.\n  sort_at_path(\n    path = c(\"AEBODSYS\"),\n    scorefun = cont_n_allcols\n  ) %>%\n  sort_at_path(\n    path = c(\"AEBODSYS\", \"*\", \"AEDECOD\"),\n    scorefun = score_occurrences\n  )\n\nresult\n\nBody System or Organ Class                                                       A: Drug X                                          B: Placebo                                         C: Combination                  \n  Dictionary-Derived Term                                      <18.5      18.5 - 24.9   25 - 29.9      >30         <18.5      18.5 - 24.9   25 - 29.9      >30         <18.5      18.5 - 24.9   25 - 29.9       >30    \n                                                               (N=44)       (N=17)       (N=11)       (N=62)       (N=37)       (N=18)       (N=10)       (N=69)       (N=28)       (N=20)        (N=18)       (N=66)  \n———————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————\nTotal number of patients with at least one adverse event     41 (93.2%)   14 (82.4%)    11 (100%)   56 (90.3%)   35 (94.6%)   16 (88.9%)    9 (90.0%)   63 (91.3%)   25 (89.3%)   19 (95.0%)    15 (83.3%)   61 (92.4%)\nOverall total number of events                                  186           80           66          277          174           89           47          312          137           129          100          337    \ncl A.1                                                                                                                                                                                                                 \n  Total number of patients with at least one adverse event   23 (52.3%)   12 (70.6%)    7 (63.6%)   36 (58.1%)   19 (51.4%)   10 (55.6%)    6 (60.0%)   40 (58.0%)   16 (57.1%)   13 (65.0%)    14 (77.8%)   46 (69.7%)\n  Total number of events                                         38           22           13           59           35           22            6           67           30           23            30           77    \n  dcd A.1.1.1.1                                              14 (31.8%)    7 (41.2%)    3 (27.3%)   26 (41.9%)   12 (32.4%)    6 (33.3%)    4 (40.0%)   23 (33.3%)   12 (42.9%)    7 (35.0%)    13 (72.2%)   31 (47.0%)\n  dcd A.1.1.1.2                                              15 (34.1%)    8 (47.1%)    5 (45.5%)   20 (32.3%)   12 (32.4%)    8 (44.4%)    2 (20.0%)   26 (37.7%)   9 (32.1%)     7 (35.0%)    7 (38.9%)    27 (40.9%)\ncl B.2                                                                                                                                                                                                                 \n  Total number of patients with at least one adverse event   23 (52.3%)   10 (58.8%)    8 (72.7%)   38 (61.3%)   21 (56.8%)    8 (44.4%)    7 (70.0%)   38 (55.1%)   16 (57.1%)   16 (80.0%)    12 (66.7%)   41 (62.1%)\n  Total number of events                                         37           19           12           61           41           18           12           67           28           28            18           69    \n  dcd B.2.2.3.1                                              13 (29.5%)    7 (41.2%)    6 (54.5%)   22 (35.5%)   14 (37.8%)    7 (38.9%)    6 (60.0%)   27 (39.1%)   7 (25.0%)    13 (65.0%)    5 (27.8%)    26 (39.4%)\n  dcd B.2.1.2.1                                              14 (31.8%)    8 (47.1%)    4 (36.4%)   23 (37.1%)   14 (37.8%)    6 (33.3%)    4 (40.0%)   20 (29.0%)   13 (46.4%)    8 (40.0%)    8 (44.4%)    23 (34.8%)\ncl D.1                                                                                                                                                                                                                 \n  Total number of patients with at least one adverse event   24 (54.5%)    9 (52.9%)    8 (72.7%)   38 (61.3%)   18 (48.6%)    5 (27.8%)    7 (70.0%)   37 (53.6%)   15 (53.6%)   12 (60.0%)    11 (61.1%)   42 (63.6%)\n  Total number of events                                         38           11           17           61           30           11           14           51           30           23            16           66    \n  dcd D.1.1.1.1                                              13 (29.5%)    7 (41.2%)    7 (63.6%)   23 (37.1%)   13 (35.1%)    3 (16.7%)    4 (40.0%)   22 (31.9%)   12 (42.9%)    6 (30.0%)    8 (44.4%)    25 (37.9%)\n  dcd D.1.1.4.2                                              16 (36.4%)    4 (23.5%)    6 (54.5%)   22 (35.5%)   10 (27.0%)    4 (22.2%)    5 (50.0%)   23 (33.3%)   10 (35.7%)    9 (45.0%)    6 (33.3%)    25 (37.9%)\ncl D.2                                                                                                                                                                                                                 \n  Total number of patients with at least one adverse event   14 (31.8%)    7 (41.2%)    5 (45.5%)   21 (33.9%)   14 (37.8%)   10 (55.6%)    4 (40.0%)   30 (43.5%)   13 (46.4%)   10 (50.0%)    7 (38.9%)    27 (40.9%)\n  Total number of events                                         20            7           10           25           17           14            5           36           18           15            10           31    \n  dcd D.2.1.5.3                                              14 (31.8%)    7 (41.2%)    5 (45.5%)   21 (33.9%)   14 (37.8%)   10 (55.6%)    4 (40.0%)   30 (43.5%)   13 (46.4%)   10 (50.0%)    7 (38.9%)    27 (40.9%)\ncl B.1                                                                                                                                                                                                                 \n  Total number of patients with at least one adverse event   17 (38.6%)    5 (29.4%)    7 (63.6%)   18 (29.0%)   14 (37.8%)    8 (44.4%)    4 (40.0%)   23 (33.3%)   7 (25.0%)    10 (50.0%)    7 (38.9%)    19 (28.8%)\n  Total number of events                                         22            5            7           22           16           11            4           29           11           12            8            31    \n  dcd B.1.1.1.1                                              17 (38.6%)    5 (29.4%)    7 (63.6%)   18 (29.0%)   14 (37.8%)    8 (44.4%)    4 (40.0%)   23 (33.3%)   7 (25.0%)    10 (50.0%)    7 (38.9%)    19 (28.8%)\ncl C.2                                                                                                                                                                                                                 \n  Total number of patients with at least one adverse event   14 (31.8%)    4 (23.5%)    2 (18.2%)   15 (24.2%)   15 (40.5%)    5 (27.8%)    4 (40.0%)   24 (34.8%)   10 (35.7%)   13 (65.0%)    8 (44.4%)    24 (36.4%)\n  Total number of events                                         17            9            3           19           15            6            5           27           12           16            9            28    \n  dcd C.2.1.2.1                                              14 (31.8%)    4 (23.5%)    2 (18.2%)   15 (24.2%)   15 (40.5%)    5 (27.8%)    4 (40.0%)   24 (34.8%)   10 (35.7%)   13 (65.0%)    8 (44.4%)    24 (36.4%)\ncl C.1                                                                                                                                                                                                                 \n  Total number of patients with at least one adverse event   11 (25.0%)    4 (23.5%)    4 (36.4%)   24 (38.7%)   13 (35.1%)    6 (33.3%)    1 (10.0%)   26 (37.7%)   6 (21.4%)     7 (35.0%)    6 (33.3%)    24 (36.4%)\n  Total number of events                                         14            7            4           30           20            7            1           35           8            12            9            35    \n  dcd C.1.1.1.3                                              11 (25.0%)    4 (23.5%)    4 (36.4%)   24 (38.7%)   13 (35.1%)    6 (33.3%)    1 (10.0%)   26 (37.7%)   6 (21.4%)     7 (35.0%)    6 (33.3%)    24 (36.4%)\n\n\n\n\n\nCodesplit_fun <- drop_split_levels\n\nlyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ARM\") %>%\n  split_cols_by(\"RACE1\") %>%\n  analyze_num_patients(\n    vars = \"USUBJID\",\n    .stats = c(\"unique\", \"nonunique\"),\n    .labels = c(\n      unique = \"Total number of patients with at least one adverse event\",\n      nonunique = \"Overall total number of events\"\n    )\n  ) %>%\n  split_rows_by(\n    \"AEBODSYS\",\n    child_labels = \"visible\",\n    nested = FALSE,\n    split_fun = split_fun,\n    label_pos = \"topleft\",\n    split_label = obj_label(adae$AEBODSYS)\n  ) %>%\n  summarize_num_patients(\n    var = \"USUBJID\",\n    .stats = c(\"unique\", \"nonunique\"),\n    .labels = c(\n      unique = \"Total number of patients with at least one adverse event\",\n      nonunique = \"Total number of events\"\n    )\n  ) %>%\n  count_occurrences(vars = \"AEDECOD\", .indent_mods = -1L) %>%\n  append_varlabels(adae, \"AEDECOD\", indent = 1L)\n\nresult <- build_table(\n  lyt = lyt,\n  df = adae,\n  alt_counts_df = adsl\n) %>%\n  prune_table() %>%\n  prune_table() %>%\n  # Sorted by decreasing frequency across all groups by System Organ Class and Preferred Term.\n  sort_at_path(\n    path = c(\"AEBODSYS\"),\n    scorefun = cont_n_allcols\n  ) %>%\n  sort_at_path(\n    path = c(\"AEBODSYS\", \"*\", \"AEDECOD\"),\n    scorefun = score_occurrences\n  )\n\nresult\n\nBody System or Organ Class                                          A: Drug X                B: Placebo              C: Combination     \n  Dictionary-Derived Term                                      WHITE      NON-WHITE      WHITE      NON-WHITE      WHITE      NON-WHITE \n                                                               (N=27)      (N=107)       (N=26)      (N=108)       (N=21)      (N=111)  \n————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————\nTotal number of patients with at least one adverse event     26 (96.3%)   96 (89.7%)   25 (96.2%)   98 (90.7%)   21 (100%)    99 (89.2%)\nOverall total number of events                                  109          500          144          478          114          589    \ncl A.1                                                                                                                                  \n  Total number of patients with at least one adverse event   16 (59.3%)   62 (57.9%)   21 (80.8%)   54 (50.0%)   15 (71.4%)   74 (66.7%)\n  Total number of events                                         30          102           37           93           25          135    \n  dcd A.1.1.1.1                                              9 (33.3%)    41 (38.3%)   14 (53.8%)   31 (28.7%)   10 (47.6%)   53 (47.7%)\n  dcd A.1.1.1.2                                              11 (40.7%)   37 (34.6%)   13 (50.0%)   35 (32.4%)   9 (42.9%)    41 (36.9%)\ncl B.2                                                                                                                                  \n  Total number of patients with at least one adverse event   15 (55.6%)   64 (59.8%)   16 (61.5%)   58 (53.7%)   12 (57.1%)   73 (65.8%)\n  Total number of events                                         18          111           28          110           17          126    \n  dcd B.2.2.3.1                                              4 (14.8%)    44 (41.1%)   10 (38.5%)   44 (40.7%)   5 (23.8%)    46 (41.4%)\n  dcd B.2.1.2.1                                              12 (44.4%)   37 (34.6%)   9 (34.6%)    35 (32.4%)   7 (33.3%)    45 (40.5%)\ncl D.1                                                                                                                                  \n  Total number of patients with at least one adverse event   18 (66.7%)   61 (57.0%)   15 (57.7%)   52 (48.1%)   14 (66.7%)   66 (59.5%)\n  Total number of events                                         27          100           23           83           27          108    \n  dcd D.1.1.1.1                                              11 (40.7%)   39 (36.4%)   14 (53.8%)   28 (25.9%)   12 (57.1%)   39 (35.1%)\n  dcd D.1.1.4.2                                              11 (40.7%)   37 (34.6%)   7 (26.9%)    35 (32.4%)   9 (42.9%)    41 (36.9%)\ncl D.2                                                                                                                                  \n  Total number of patients with at least one adverse event   6 (22.2%)    41 (38.3%)   15 (57.7%)   43 (39.8%)   9 (42.9%)    48 (43.2%)\n  Total number of events                                         6            56           18           54           12           62    \n  dcd D.2.1.5.3                                              6 (22.2%)    41 (38.3%)   15 (57.7%)   43 (39.8%)   9 (42.9%)    48 (43.2%)\ncl B.1                                                                                                                                  \n  Total number of patients with at least one adverse event   12 (44.4%)   35 (32.7%)   7 (26.9%)    42 (38.9%)   6 (28.6%)    37 (33.3%)\n  Total number of events                                         15           41           8            52           8            54    \n  dcd B.1.1.1.1                                              12 (44.4%)   35 (32.7%)   7 (26.9%)    42 (38.9%)   6 (28.6%)    37 (33.3%)\ncl C.2                                                                                                                                  \n  Total number of patients with at least one adverse event   5 (18.5%)    30 (28.0%)   11 (42.3%)   37 (34.3%)   11 (52.4%)   44 (39.6%)\n  Total number of events                                         8            40           12           41           12           53    \n  dcd C.2.1.2.1                                              5 (18.5%)    30 (28.0%)   11 (42.3%)   37 (34.3%)   11 (52.4%)   44 (39.6%)\ncl C.1                                                                                                                                  \n  Total number of patients with at least one adverse event   5 (18.5%)    38 (35.5%)   13 (50.0%)   33 (30.6%)   8 (38.1%)    35 (31.5%)\n  Total number of events                                         5            50           18           45           13           51    \n  dcd C.1.1.1.3                                              5 (18.5%)    38 (35.5%)   13 (50.0%)   33 (30.6%)   8 (38.1%)    35 (31.5%)\n\n\n\n\n\nCodesplit_fun <- drop_split_levels\n\nlyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ARM\") %>%\n  split_cols_by(\"SEX\") %>%\n  analyze_num_patients(\n    vars = \"USUBJID\",\n    .stats = c(\"unique\", \"nonunique\"),\n    .labels = c(\n      unique = \"Total number of patients with at least one adverse event\",\n      nonunique = \"Overall total number of events\"\n    )\n  ) %>%\n  split_rows_by(\n    \"AEBODSYS\",\n    child_labels = \"visible\",\n    nested = FALSE,\n    split_fun = split_fun,\n    label_pos = \"topleft\",\n    split_label = obj_label(adae$AEBODSYS)\n  ) %>%\n  summarize_num_patients(\n    var = \"USUBJID\",\n    .stats = c(\"unique\", \"nonunique\"),\n    .labels = c(\n      unique = \"Total number of patients with at least one adverse event\",\n      nonunique = \"Total number of events\"\n    )\n  ) %>%\n  split_rows_by(\n    \"AEHLT\",\n    child_labels = \"visible\",\n    indent_mod = -1L,\n    split_fun = split_fun,\n    label_pos = \"topleft\",\n    split_label = obj_label(adae$AEHLT)\n  ) %>%\n  summarize_num_patients(\n    var = \"USUBJID\",\n    .stats = c(\"unique\", \"nonunique\"),\n    .labels = c(\n      unique = \"Total number of patients with at least one adverse event\",\n      nonunique = \"Total number of events\"\n    )\n  ) %>%\n  count_occurrences(\"AEDECOD\", .indent_mods = -1L) %>%\n  append_varlabels(adae, \"AEDECOD\", indent = 2L)\n\nresult <- build_table(\n  lyt = lyt,\n  df = adae,\n  alt_counts_df = adsl\n) %>%\n  prune_table() %>%\n  # Sorted by decreasing frequency across all groups by System Organ Class, High-Level Term and Preferred Term.\n  sort_at_path(\n    path = c(\"AEBODSYS\"),\n    scorefun = cont_n_allcols\n  ) %>%\n  sort_at_path(\n    path = c(\"AEBODSYS\", \"*\", \"AEHLT\"),\n    scorefun = cont_n_allcols\n  ) %>%\n  sort_at_path(\n    path = c(\"AEBODSYS\", \"*\", \"AEHLT\", \"*\", \"AEDECOD\"),\n    scorefun = score_occurrences\n  )\n\nresult\n\nBody System or Organ Class                                            A: Drug X                B: Placebo              C: Combination     \n  High Level Term                                                  F            M            F            M            F            M     \n    Dictionary-Derived Term                                      (N=79)       (N=55)       (N=82)       (N=52)       (N=70)       (N=62)  \n——————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————\nTotal number of patients with at least one adverse event       72 (91.1%)   50 (90.9%)   77 (93.9%)   46 (88.5%)   65 (92.9%)   55 (88.7%)\nOverall total number of events                                    377          232          419          203          378          325    \ncl A.1                                                                                                                                    \n  Total number of patients with at least one adverse event     53 (67.1%)   25 (45.5%)   51 (62.2%)   24 (46.2%)   43 (61.4%)   46 (74.2%)\n  Total number of events                                           85           47           93           37           86           74    \n  hlt A.1.1.1                                                                                                                             \n    Total number of patients with at least one adverse event   53 (67.1%)   25 (45.5%)   51 (62.2%)   24 (46.2%)   43 (61.4%)   46 (74.2%)\n    Total number of events                                         85           47           93           37           86           74    \n    dcd A.1.1.1.1                                              34 (43.0%)   16 (29.1%)   31 (37.8%)   14 (26.9%)   33 (47.1%)   30 (48.4%)\n    dcd A.1.1.1.2                                              32 (40.5%)   16 (29.1%)   33 (40.2%)   15 (28.8%)   24 (34.3%)   26 (41.9%)\ncl B.2                                                                                                                                    \n  Total number of patients with at least one adverse event     46 (58.2%)   33 (60.0%)   45 (54.9%)   29 (55.8%)   44 (62.9%)   41 (66.1%)\n  Total number of events                                           81           48           86           52           64           79    \n  hlt B.2.2.3                                                                                                                             \n    Total number of patients with at least one adverse event   30 (38.0%)   18 (32.7%)   32 (39.0%)   22 (42.3%)   26 (37.1%)   25 (40.3%)\n    Total number of events                                         40           24           43           33           37           40    \n    dcd B.2.2.3.1                                              30 (38.0%)   18 (32.7%)   32 (39.0%)   22 (42.3%)   26 (37.1%)   25 (40.3%)\n  hlt B.2.1.2                                                                                                                             \n    Total number of patients with at least one adverse event   29 (36.7%)   20 (36.4%)   30 (36.6%)   14 (26.9%)   22 (31.4%)   30 (48.4%)\n    Total number of events                                         41           24           43           19           27           39    \n    dcd B.2.1.2.1                                              29 (36.7%)   20 (36.4%)   30 (36.6%)   14 (26.9%)   22 (31.4%)   30 (48.4%)\ncl D.1                                                                                                                                    \n  Total number of patients with at least one adverse event     45 (57.0%)   34 (61.8%)   40 (48.8%)   27 (51.9%)   41 (58.6%)   39 (62.9%)\n  Total number of events                                           72           55           64           42           73           62    \n  hlt D.1.1.1                                                                                                                             \n    Total number of patients with at least one adverse event   25 (31.6%)   25 (45.5%)   29 (35.4%)   13 (25.0%)   27 (38.6%)   24 (38.7%)\n    Total number of events                                         32           29           36           15           39           32    \n    dcd D.1.1.1.1                                              25 (31.6%)   25 (45.5%)   29 (35.4%)   13 (25.0%)   27 (38.6%)   24 (38.7%)\n  hlt D.1.1.4                                                                                                                             \n    Total number of patients with at least one adverse event   30 (38.0%)   18 (32.7%)   22 (26.8%)   20 (38.5%)   27 (38.6%)   23 (37.1%)\n    Total number of events                                         40           26           28           27           34           30    \n    dcd D.1.1.4.2                                              30 (38.0%)   18 (32.7%)   22 (26.8%)   20 (38.5%)   27 (38.6%)   23 (37.1%)\ncl D.2                                                                                                                                    \n  Total number of patients with at least one adverse event     26 (32.9%)   21 (38.2%)   40 (48.8%)   18 (34.6%)   34 (48.6%)   23 (37.1%)\n  Total number of events                                           35           27           49           23           43           31    \n  hlt D.2.1.5                                                                                                                             \n    Total number of patients with at least one adverse event   26 (32.9%)   21 (38.2%)   40 (48.8%)   18 (34.6%)   34 (48.6%)   23 (37.1%)\n    Total number of events                                         35           27           49           23           43           31    \n    dcd D.2.1.5.3                                              26 (32.9%)   21 (38.2%)   40 (48.8%)   18 (34.6%)   34 (48.6%)   23 (37.1%)\ncl B.1                                                                                                                                    \n  Total number of patients with at least one adverse event     28 (35.4%)   19 (34.5%)   33 (40.2%)   16 (30.8%)   24 (34.3%)   19 (30.6%)\n  Total number of events                                           33           23           36           24           35           27    \n  hlt B.1.1.1                                                                                                                             \n    Total number of patients with at least one adverse event   28 (35.4%)   19 (34.5%)   33 (40.2%)   16 (30.8%)   24 (34.3%)   19 (30.6%)\n    Total number of events                                         33           23           36           24           35           27    \n    dcd B.1.1.1.1                                              28 (35.4%)   19 (34.5%)   33 (40.2%)   16 (30.8%)   24 (34.3%)   19 (30.6%)\ncl C.2                                                                                                                                    \n  Total number of patients with at least one adverse event     23 (29.1%)   12 (21.8%)   36 (43.9%)   12 (23.1%)   30 (42.9%)   25 (40.3%)\n  Total number of events                                           32           16           39           14           33           32    \n  hlt C.2.1.2                                                                                                                             \n    Total number of patients with at least one adverse event   23 (29.1%)   12 (21.8%)   36 (43.9%)   12 (23.1%)   30 (42.9%)   25 (40.3%)\n    Total number of events                                         32           16           39           14           33           32    \n    dcd C.2.1.2.1                                              23 (29.1%)   12 (21.8%)   36 (43.9%)   12 (23.1%)   30 (42.9%)   25 (40.3%)\ncl C.1                                                                                                                                    \n  Total number of patients with at least one adverse event     30 (38.0%)   13 (23.6%)   36 (43.9%)   10 (19.2%)   27 (38.6%)   16 (25.8%)\n  Total number of events                                           39           16           52           11           44           20    \n  hlt C.1.1.1                                                                                                                             \n    Total number of patients with at least one adverse event   30 (38.0%)   13 (23.6%)   36 (43.9%)   10 (19.2%)   27 (38.6%)   16 (25.8%)\n    Total number of events                                         39           16           52           11           44           20    \n    dcd C.1.1.1.3                                              30 (38.0%)   13 (23.6%)   36 (43.9%)   10 (19.2%)   27 (38.6%)   16 (25.8%)\n\n\n\n\n\nCodelibrary(teal.modules.clinical)\nlibrary(dplyr)\nlibrary(scda)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadae <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adae\")\n\n# Ensure character variables are converted to factors and empty strings and NAs are explicit missing levels.\nadsl <- df_explicit_na(adsl)\nadae <- df_explicit_na(adae)\n\napp <- teal::init(\n  data = cdisc_data(\n    cdisc_dataset(\"ADSL\", adsl, code = 'ADSL <- df_explicit_na(synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\"))'),\n    cdisc_dataset(\"ADAE\", adae, code = 'ADAE <- df_explicit_na(synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adae\"))'),\n    check = TRUE\n  ),\n  modules = modules(\n    tm_t_events(\n      label = \"Adverse Event Table\",\n      dataname = \"ADAE\",\n      arm_var = choices_selected(c(\"ARM\", \"ARMCD\", \"SEX\"), c(\"ARM\", \"SEX\")),\n      llt = choices_selected(\n        choices = variable_choices(adae, c(\"AETERM\", \"AEDECOD\")),\n        selected = c(\"AEDECOD\")\n      ),\n      hlt = choices_selected(\n        choices = variable_choices(adae, c(\"AEBODSYS\", \"AESOC\")),\n        selected = \"AEBODSYS\"\n      ),\n      add_total = TRUE,\n      event_type = \"adverse event\"\n    )\n  )\n)\n\n[INFO] 2023-03-10 05:20:30.5770 pid:2916 token:[] teal.modules.clinical Initializing tm_t_events\n\nCodeshinyApp(app$ui, app$server)\n\n\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n [1] teal.modules.clinical_0.8.14.9026 teal_0.12.0.9023                 \n [3] teal.transform_0.2.0.9011         teal.data_0.1.2.9013             \n [5] shiny_1.7.4                       scda_0.1.5.9009                  \n [7] tern_0.7.10.9056                  rtables_0.6.0.1                  \n [9] formatters_0.4.0                  magrittr_2.0.3                   \n[11] dplyr_1.1.0                      \n\nloaded via a namespace (and not attached):\n [1] sass_0.4.5               tidyr_1.3.0              jsonlite_1.8.4          \n [4] splines_4.2.2            R.utils_2.12.2           bslib_0.4.2             \n [7] teal.slice_0.2.0.9026    Rdpack_2.4               assertthat_0.2.1        \n[10] teal.code_0.3.0.9001     tern.gee_0.1.0.9002      yaml_2.3.7              \n[13] pillar_1.8.1             backports_1.4.1          lattice_0.20-45         \n[16] glue_1.6.2               teal.widgets_0.2.0.9024  digest_0.6.31           \n[19] promises_1.2.0.1         rbibutils_2.2.13         checkmate_2.1.0         \n[22] colorspace_2.1-0         R.oo_1.25.0              htmltools_0.5.4         \n[25] httpuv_1.6.9             Matrix_1.5-3             pkgconfig_2.0.3         \n[28] broom_1.0.3              logger_0.2.2             purrr_1.0.1             \n[31] xtable_1.8-4             mvtnorm_1.1-3            webshot_0.5.4           \n[34] scales_1.2.1             processx_3.8.0           fontawesome_0.5.0       \n[37] later_1.3.0              emmeans_1.8.4-1          tibble_3.1.8            \n[40] styler_1.9.1             generics_0.1.3           ggplot2_3.4.1           \n[43] ellipsis_0.3.2           shinyvalidate_0.1.2      cachem_1.0.7            \n[46] withr_2.5.0              shinyjs_2.1.0            geepack_1.3.9           \n[49] cli_3.6.0                survival_3.5-3           mime_0.12               \n[52] memoise_2.0.1            ps_1.7.2                 estimability_1.4.1      \n[55] evaluate_0.20            R.methodsS3_1.8.2        fansi_1.0.4             \n[58] R.cache_0.16.0           nlme_3.1-162             MASS_7.3-58.3           \n[61] forcats_1.0.0            teal.reporter_0.1.1.9013 tools_4.2.2             \n[64] lifecycle_1.0.3          munsell_0.5.0            callr_3.7.3             \n[67] compiler_4.2.2           jquerylib_0.1.4          rlang_1.0.6             \n[70] grid_4.2.2               htmlwidgets_1.6.1        rmarkdown_2.20          \n[73] shinyWidgets_0.7.6       gtable_0.3.1             codetools_0.2-19        \n[76] teal.logger_0.1.1.9004   R6_2.5.1                 knitr_1.42              \n[79] fastmap_1.1.1            utf8_1.2.3               Rcpp_1.0.10             \n[82] vctrs_0.5.2              tidyselect_1.2.0         xfun_0.37               \n[85] coda_0.19-4             \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R                       [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/tables/adverse-events/aet06.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "tables/adverse-events/aet10.html",
    "href": "tables/adverse-events/aet10.html",
    "title": "AET10",
    "section": "",
    "text": "Data Setup\nStandard Table\nMost Common (\\(\\geq\\) 35%) Adverse Events (setting threshold)\nTeal\nSession Info\n\n\n\n\nCodelibrary(tern)\nlibrary(dplyr)\nlibrary(scda)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadae <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adae\")\n\n# Ensure character variables are converted to factors and empty strings and NAs are explicit missing levels.\nadsl <- df_explicit_na(adsl)\nadae <- df_explicit_na(adae)\n\n\n\n\nThe “All Patients” column is not required in this table but for illustrative purposes we include it to show correct sorting.\n\nCodelyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\n    var = \"ARM\",\n    split_fun = add_overall_level(\"All Patients\", first = FALSE)\n  ) %>%\n  count_occurrences(vars = \"AEDECOD\")\n\ntbl1 <- build_table(\n  lyt = lyt,\n  df = adae,\n  alt_counts_df = adsl\n)\n\ntbl2 <- prune_table(\n  tt = tbl1,\n  prune_func = keep_rows(\n    has_fraction_in_any_col(\n      atleast = 0.05, # specify threshold\n      col_names = levels(adsl$ARM)\n    )\n  )\n)\n\nresult <- sort_at_path(\n  tbl2,\n  path = c(\"AEDECOD\"),\n  scorefun = score_occurrences\n)\n\nresult\n\n                A: Drug X    B: Placebo   C: Combination   All Patients\n                 (N=134)      (N=134)        (N=132)         (N=400)   \n———————————————————————————————————————————————————————————————————————\ndcd D.2.1.5.3   47 (35.1%)   58 (43.3%)     57 (43.2%)     162 (40.5%) \ndcd A.1.1.1.1   50 (37.3%)   45 (33.6%)     63 (47.7%)     158 (39.5%) \ndcd B.2.2.3.1   48 (35.8%)   54 (40.3%)     51 (38.6%)     153 (38.2%) \ndcd A.1.1.1.2   48 (35.8%)   48 (35.8%)     50 (37.9%)     146 (36.5%) \ndcd B.2.1.2.1   49 (36.6%)   44 (32.8%)     52 (39.4%)     145 (36.2%) \ndcd D.1.1.1.1   50 (37.3%)   42 (31.3%)     51 (38.6%)     143 (35.8%) \ndcd D.1.1.4.2   48 (35.8%)   42 (31.3%)     50 (37.9%)     140 (35.0%) \ndcd B.1.1.1.1   47 (35.1%)   49 (36.6%)     43 (32.6%)     139 (34.8%) \ndcd C.2.1.2.1   35 (26.1%)   48 (35.8%)     55 (41.7%)     138 (34.5%) \ndcd C.1.1.1.3   43 (32.1%)   46 (34.3%)     43 (32.6%)     132 (33.0%) \n\n\n\n\n\nCodelyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\n    var = \"ARM\",\n    split_fun = add_overall_level(\"All Patients\", first = FALSE)\n  ) %>%\n  count_occurrences(vars = \"AEDECOD\")\n\ntbl1 <- build_table(\n  lyt = lyt,\n  df = adae,\n  alt_counts_df = adsl\n)\n\ntbl2 <- prune_table(\n  tt = tbl1,\n  prune_func = keep_rows(\n    has_fraction_in_any_col(\n      atleast = 0.35, # specify threshold\n      col_names = levels(adsl$ARM)\n    )\n  )\n)\n\nresult <- sort_at_path(\n  tbl2,\n  path = c(\"AEDECOD\"),\n  scorefun = score_occurrences\n)\n\nresult\n\n                A: Drug X    B: Placebo   C: Combination   All Patients\n                 (N=134)      (N=134)        (N=132)         (N=400)   \n———————————————————————————————————————————————————————————————————————\ndcd D.2.1.5.3   47 (35.1%)   58 (43.3%)     57 (43.2%)     162 (40.5%) \ndcd A.1.1.1.1   50 (37.3%)   45 (33.6%)     63 (47.7%)     158 (39.5%) \ndcd B.2.2.3.1   48 (35.8%)   54 (40.3%)     51 (38.6%)     153 (38.2%) \ndcd A.1.1.1.2   48 (35.8%)   48 (35.8%)     50 (37.9%)     146 (36.5%) \ndcd B.2.1.2.1   49 (36.6%)   44 (32.8%)     52 (39.4%)     145 (36.2%) \ndcd D.1.1.1.1   50 (37.3%)   42 (31.3%)     51 (38.6%)     143 (35.8%) \ndcd D.1.1.4.2   48 (35.8%)   42 (31.3%)     50 (37.9%)     140 (35.0%) \ndcd B.1.1.1.1   47 (35.1%)   49 (36.6%)     43 (32.6%)     139 (34.8%) \ndcd C.2.1.2.1   35 (26.1%)   48 (35.8%)     55 (41.7%)     138 (34.5%) \n\n\n\n\nThe desired frequency is specified in prune_freq. For illustration, frequency is set to \\(\\geq\\) 35%.\n\nCodelibrary(dplyr)\nlibrary(scda)\nlibrary(teal.modules.clinical)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadae <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adae\")\n\n# Ensure character variables are converted to factors and empty strings and NAs are explicit missing levels.\nadsl <- df_explicit_na(adsl)\nadae <- df_explicit_na(adae)\n\napp <- teal::init(\n  data = cdisc_data(\n    cdisc_dataset(\"ADSL\", adsl, code = 'ADSL <- df_explicit_na(synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\"))'),\n    cdisc_dataset(\"ADAE\", adae, code = 'ADAE <- df_explicit_na(synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adae\"))'),\n    check = TRUE\n  ),\n  modules = modules(\n    tm_t_events(\n      label = \"Adverse Event Table\",\n      dataname = \"ADAE\",\n      arm_var = choices_selected(c(\"ARM\", \"ARMCD\"), \"ARM\"),\n      llt = choices_selected(\n        choices = variable_choices(adae, c(\"AETERM\", \"AEDECOD\")),\n        selected = c(\"AEDECOD\")\n      ),\n      hlt = choices_selected(\n        choices = variable_choices(adae, c(\"AEBODSYS\", \"AESOC\")),\n        selected = NULL\n      ),\n      add_total = TRUE,\n      event_type = \"adverse event\",\n      prune_freq = 35,\n    )\n  )\n)\n\n[INFO] 2023-03-10 05:20:54.7645 pid:2994 token:[] teal.modules.clinical Initializing tm_t_events\n\nCodeshinyApp(app$ui, app$server)\n\n\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n [1] teal.modules.clinical_0.8.14.9026 teal_0.12.0.9023                 \n [3] teal.transform_0.2.0.9011         teal.data_0.1.2.9013             \n [5] shiny_1.7.4                       scda_0.1.5.9009                  \n [7] dplyr_1.1.0                       tern_0.7.10.9056                 \n [9] rtables_0.6.0.1                   formatters_0.4.0                 \n[11] magrittr_2.0.3                   \n\nloaded via a namespace (and not attached):\n [1] sass_0.4.5               tidyr_1.3.0              jsonlite_1.8.4          \n [4] splines_4.2.2            R.utils_2.12.2           bslib_0.4.2             \n [7] teal.slice_0.2.0.9026    Rdpack_2.4               assertthat_0.2.1        \n[10] teal.code_0.3.0.9001     tern.gee_0.1.0.9002      yaml_2.3.7              \n[13] pillar_1.8.1             backports_1.4.1          lattice_0.20-45         \n[16] glue_1.6.2               teal.widgets_0.2.0.9024  digest_0.6.31           \n[19] promises_1.2.0.1         rbibutils_2.2.13         checkmate_2.1.0         \n[22] colorspace_2.1-0         R.oo_1.25.0              htmltools_0.5.4         \n[25] httpuv_1.6.9             Matrix_1.5-3             pkgconfig_2.0.3         \n[28] broom_1.0.3              logger_0.2.2             purrr_1.0.1             \n[31] xtable_1.8-4             mvtnorm_1.1-3            scales_1.2.1            \n[34] webshot_0.5.4            processx_3.8.0           fontawesome_0.5.0       \n[37] later_1.3.0              emmeans_1.8.4-1          tibble_3.1.8            \n[40] styler_1.9.1             generics_0.1.3           ggplot2_3.4.1           \n[43] ellipsis_0.3.2           withr_2.5.0              shinyvalidate_0.1.2     \n[46] cachem_1.0.7             shinyjs_2.1.0            geepack_1.3.9           \n[49] cli_3.6.0                survival_3.5-3           mime_0.12               \n[52] memoise_2.0.1            ps_1.7.2                 estimability_1.4.1      \n[55] evaluate_0.20            R.methodsS3_1.8.2        fansi_1.0.4             \n[58] R.cache_0.16.0           nlme_3.1-162             MASS_7.3-58.3           \n[61] forcats_1.0.0            teal.reporter_0.1.1.9013 tools_4.2.2             \n[64] lifecycle_1.0.3          munsell_0.5.0            callr_3.7.3             \n[67] compiler_4.2.2           jquerylib_0.1.4          rlang_1.0.6             \n[70] grid_4.2.2               htmlwidgets_1.6.1        rmarkdown_2.20          \n[73] shinyWidgets_0.7.6       gtable_0.3.1             codetools_0.2-19        \n[76] teal.logger_0.1.1.9004   R6_2.5.1                 knitr_1.42              \n[79] fastmap_1.1.1            utf8_1.2.3               Rcpp_1.0.10             \n[82] vctrs_0.5.2              tidyselect_1.2.0         xfun_0.37               \n[85] coda_0.19-4             \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R                       [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/tables/adverse-events/aet10.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "tables/adverse-events/aet05_all.html",
    "href": "tables/adverse-events/aet05_all.html",
    "title": "AET05_ALL",
    "section": "",
    "text": "Data Setup\nStandard Table\nTable Setting Type of Confidence Interval\nTeal\nSession Info\n\n\n\n\nCodelibrary(tern)\nlibrary(scda)\nlibrary(dplyr)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadaette <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adaette\")\n\n# Ensure character variables are converted to factors and empty strings and NAs are explicit missing levels.\nadsl <- df_explicit_na(adsl)\nadaette <- df_explicit_na(adaette)\n\n# Create analysis dataset anl from the 2 parameters AEREPTTE & AETOT1\nanl_events <- adaette %>%\n  filter(PARAMCD == \"AETOT1\") %>%\n  select(USUBJID, ARM, ARMCD, n_events = AVAL) %>%\n  mutate(n_events = as.integer(n_events))\n\nanl_tte <- adaette %>%\n  filter(PARAMCD == \"AEREPTTE\") %>%\n  select(USUBJID, ARM, ARMCD, AVAL)\n\nanl <- full_join(anl_tte, anl_events, by = c(\"USUBJID\", \"ARM\", \"ARMCD\"))\n\n\n\n\n\nCodelyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ARM\") %>%\n  estimate_incidence_rate(\n    vars = \"AVAL\",\n    n_events = \"n_events\",\n    control = control_incidence_rate(time_unit_output = 100)\n  )\n\nresult <- build_table(lyt, anl, alt_counts_df = adsl)\nresult\n\n                                       A: Drug X         B: Placebo       C: Combination \n                                        (N=134)           (N=134)            (N=132)     \n—————————————————————————————————————————————————————————————————————————————————————————\nTotal patient-years at risk              337.9             331.9              341.6      \nNumber of adverse events observed         343               380                397       \nAE rate per 100 patient-years           101.51             114.51             116.23     \n95% CI                              (90.77, 112.26)   (102.99, 126.02)   (104.79, 127.66)\n\n\n\n\nThe type of confidence interval can be specified through the conf_type argument.\n\nCodelyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ARM\") %>%\n  estimate_incidence_rate(\n    vars = \"AVAL\",\n    n_events = \"n_events\",\n    control = control_incidence_rate(conf_type = \"exact\", time_unit_output = 100)\n  )\n\nresult <- build_table(lyt, anl, alt_counts_df = adsl)\nresult\n\n                                       A: Drug X         B: Placebo       C: Combination \n                                        (N=134)           (N=134)            (N=132)     \n—————————————————————————————————————————————————————————————————————————————————————————\nTotal patient-years at risk              337.9             331.9              341.6      \nNumber of adverse events observed         343               380                397       \nAE rate per 100 patient-years           101.51             114.51             116.23     \n95% CI                              (91.05, 112.85)   (103.28, 126.62)   (105.07, 128.24)\n\n\n\n\n\nCodelibrary(teal)\nlibrary(scda)\nlibrary(teal.modules.clinical)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadaette <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adaette\")\n\n# Ensure character variables are converted to factors and empty strings and NAs are explicit missing levels.\nadsl <- df_explicit_na(adsl)\nadaette <- df_explicit_na(adaette)\n\n# Create analysis dataset anl from the 2 parameters AEREPTTE & AETOT1\nanl_events <- adaette %>%\n  filter(PARAMCD %in% c(\"AETOT1\", \"AETOT2\", \"AETOT3\")) %>%\n  select(USUBJID, STUDYID, PARAMCD, ARM, ARMCD, n_events = AVAL) %>%\n  mutate(n_events = as.integer(n_events))\n\nanl_tte <- adaette %>%\n  filter(PARAMCD == \"AEREPTTE\") %>%\n  select(USUBJID, STUDYID, ARM, ARMCD, AVAL, AVALU)\n\nadaette <- full_join(anl_tte, anl_events, by = c(\"USUBJID\", \"STUDYID\", \"ARM\", \"ARMCD\"))\n\nWarning in full_join(anl_tte, anl_events, by = c(\"USUBJID\", \"STUDYID\", \"ARM\", : Each row in `x` is expected to match at most 1 row in `y`.\nℹ Row 1 of `x` matches multiple rows.\nℹ If multiple matches are expected, set `multiple = \"all\"` to silence this\n  warning.\n\nCodeapp <- init(\n  data = cdisc_data(\n    cdisc_dataset(\"ADSL\", adsl),\n    cdisc_dataset(\"ADAETTE\", adaette),\n    code =\n      'ADSL <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\n      ADAETTE <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adaette\")\n      ADSL <- df_explicit_na(ADSL)\n      ADAETTE <- df_explicit_na(ADAETTE)\n      anl_events <- ADAETTE %>%\n        filter(PARAMCD %in%  c(\"AETOT1\", \"AETOT2\", \"AETOT3\")) %>%\n        select(USUBJID, STUDYID, PARAMCD, ARM, ARMCD, n_events = AVAL) %>%\n        mutate(n_events = as.integer(n_events))\n      anl_tte <- ADAETTE %>%\n        filter(PARAMCD == \"AEREPTTE\") %>%\n        select(USUBJID, STUDYID, ARM, ARMCD, AVAL, AVALU)\n      ADAETTE <- full_join(anl_tte, anl_events, by = c(\"USUBJID\", \"STUDYID\", \"ARM\", \"ARMCD\"))',\n    check = TRUE\n  ),\n  modules = modules(\n    tm_t_events_patyear(\n      label = \"AE Rate Adjusted for Patient-Years at Risk - All Occurrences Table\",\n      dataname = \"ADAETTE\",\n      arm_var = choices_selected(\n        choices = variable_choices(adsl, c(\"ARM\", \"ARMCD\")),\n        selected = \"ARMCD\"\n      ),\n      paramcd = choices_selected(\n        choices = value_choices(adaette, \"PARAMCD\"),\n        selected = \"AETOT1\"\n      ),\n      events_var = choices_selected(\n        choices = variable_choices(adaette, \"n_events\"),\n        selected = \"n_events\",\n        fixed = TRUE\n      )\n    )\n  )\n)\n\n[INFO] 2023-03-10 05:21:26.6653 pid:3072 token:[] teal.modules.clinical Initializing tm_t_events_patyear\n\nCodeshinyApp(app$ui, app$server)\n\n\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n [1] teal.modules.clinical_0.8.14.9026 teal_0.12.0.9023                 \n [3] teal.transform_0.2.0.9011         teal.data_0.1.2.9013             \n [5] shiny_1.7.4                       dplyr_1.1.0                      \n [7] scda_0.1.5.9009                   tern_0.7.10.9056                 \n [9] rtables_0.6.0.1                   formatters_0.4.0                 \n[11] magrittr_2.0.3                   \n\nloaded via a namespace (and not attached):\n [1] sass_0.4.5               tidyr_1.3.0              jsonlite_1.8.4          \n [4] splines_4.2.2            R.utils_2.12.2           bslib_0.4.2             \n [7] teal.slice_0.2.0.9026    Rdpack_2.4               assertthat_0.2.1        \n[10] teal.code_0.3.0.9001     tern.gee_0.1.0.9002      yaml_2.3.7              \n[13] pillar_1.8.1             backports_1.4.1          lattice_0.20-45         \n[16] glue_1.6.2               teal.widgets_0.2.0.9024  digest_0.6.31           \n[19] promises_1.2.0.1         rbibutils_2.2.13         checkmate_2.1.0         \n[22] colorspace_2.1-0         R.oo_1.25.0              htmltools_0.5.4         \n[25] httpuv_1.6.9             Matrix_1.5-3             pkgconfig_2.0.3         \n[28] broom_1.0.3              logger_0.2.2             purrr_1.0.1             \n[31] xtable_1.8-4             mvtnorm_1.1-3            scales_1.2.1            \n[34] webshot_0.5.4            processx_3.8.0           fontawesome_0.5.0       \n[37] later_1.3.0              emmeans_1.8.4-1          tibble_3.1.8            \n[40] styler_1.9.1             generics_0.1.3           ggplot2_3.4.1           \n[43] ellipsis_0.3.2           shinyvalidate_0.1.2      cachem_1.0.7            \n[46] withr_2.5.0              shinyjs_2.1.0            geepack_1.3.9           \n[49] cli_3.6.0                survival_3.5-3           mime_0.12               \n[52] memoise_2.0.1            ps_1.7.2                 estimability_1.4.1      \n[55] evaluate_0.20            R.methodsS3_1.8.2        fansi_1.0.4             \n[58] R.cache_0.16.0           nlme_3.1-162             MASS_7.3-58.3           \n[61] forcats_1.0.0            teal.reporter_0.1.1.9013 tools_4.2.2             \n[64] lifecycle_1.0.3          munsell_0.5.0            callr_3.7.3             \n[67] compiler_4.2.2           jquerylib_0.1.4          rlang_1.0.6             \n[70] grid_4.2.2               htmlwidgets_1.6.1        rmarkdown_2.20          \n[73] shinyWidgets_0.7.6       gtable_0.3.1             codetools_0.2-19        \n[76] teal.logger_0.1.1.9004   R6_2.5.1                 knitr_1.42              \n[79] fastmap_1.1.1            utf8_1.2.3               Rcpp_1.0.10             \n[82] vctrs_0.5.2              tidyselect_1.2.0         xfun_0.37               \n[85] coda_0.19-4             \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R                       [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/tables/adverse-events/aet05_all.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "tables/adverse-events/aet03.html",
    "href": "tables/adverse-events/aet03.html",
    "title": "AET03",
    "section": "",
    "text": "Data Setup\nStandard Table\nTeal\nSession Info\n\n\n\n\nCodelibrary(tern)\nlibrary(dplyr)\nlibrary(scda)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadae <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adae\")\n\n# Ensure character variables are converted to factors and empty strings and NAs are explicit missing levels.\nadsl <- df_explicit_na(adsl)\nadae <- df_explicit_na(adae)\n\n\nFor illustrative purposes, we will create a new factor variable in ADAE, ASEV, with all intensity levels including \"LIFE THREATENING\".\n\nCodeadae <- adae %>%\n  mutate(\n    ASEV = as.character(AESEV)\n  )\n\nadae$ASEV[1:15] <- \"LIFE THREATENING\"\n\nadae <- adae %>%\n  mutate(\n    ASEV = factor(\n      ASEV,\n      levels = c(\"MILD\", \"MODERATE\", \"SEVERE\", \"LIFE THREATENING\")\n    )\n  )\n\n\n\n\n\nCodegrade_groups <- list(\n  \"- Any Intensity -\" = c(\"MILD\", \"MODERATE\", \"SEVERE\", \"LIFE THREATENING\")\n)\n\nsplit_fun <- trim_levels_in_group\n\nlyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ACTARM\") %>%\n  count_occurrences_by_grade(\n    var = \"ASEV\",\n    grade_groups = grade_groups\n  ) %>%\n  split_rows_by(\n    \"AEBODSYS\",\n    child_labels = \"visible\",\n    nested = TRUE,\n    split_fun = split_fun(\"ASEV\"),\n    label_pos = \"topleft\",\n    split_label = obj_label(adae$AEBODSYS)\n  ) %>%\n  summarize_occurrences_by_grade(\n    var = \"ASEV\",\n    grade_groups = grade_groups\n  ) %>%\n  split_rows_by(\n    \"AEDECOD\",\n    child_labels = \"visible\",\n    nested = TRUE,\n    indent_mod = -1L,\n    split_fun = split_fun(\"ASEV\"),\n    label_pos = \"topleft\",\n    split_label = obj_label(adae$AEDECOD)\n  ) %>%\n  summarize_num_patients(\n    var = \"USUBJID\",\n    .stats = \"unique\",\n    .labels = c(\"- Any Intensity -\")\n  ) %>%\n  count_occurrences_by_grade(\n    var = \"ASEV\",\n    .indent_mods = -1L\n  ) %>%\n  append_varlabels(adae, \"AESEV\", indent = 2L)\n\nresult <- lyt %>%\n  build_table(\n    adae,\n    alt_counts_df = adsl\n  ) %>%\n  sort_at_path(\n    path = \"AEBODSYS\",\n    scorefun = cont_n_allcols,\n    decreasing = TRUE\n  ) %>%\n  sort_at_path(\n    path = c(\"AEBODSYS\", \"*\", \"AEDECOD\"),\n    scorefun = cont_n_allcols,\n    decreasing = TRUE\n  )\n\nresult\n\nBody System or Organ Class                                             \n  Dictionary-Derived Term     A: Drug X    B: Placebo    C: Combination\n    Severity/Intensity         (N=134)       (N=134)        (N=132)    \n———————————————————————————————————————————————————————————————————————\n- Any Intensity -            122 (91.0%)   123 (91.8%)    120 (90.9%)  \nMILD                          7 (5.2%)      9 (6.7%)        4 (3.0%)   \nMODERATE                     23 (17.2%)    24 (17.9%)      23 (17.4%)  \nSEVERE                       91 (67.9%)    89 (66.4%)      91 (68.9%)  \nLIFE THREATENING              1 (0.7%)      1 (0.7%)        2 (1.5%)   \ncl A.1                                                                 \n  - Any Intensity -          78 (58.2%)    75 (56.0%)      89 (67.4%)  \n  MILD                       30 (22.4%)    27 (20.1%)      39 (29.5%)  \n  MODERATE                   47 (35.1%)    48 (35.8%)      49 (37.1%)  \n  LIFE THREATENING            1 (0.7%)          0           1 (0.8%)   \n  dcd A.1.1.1.1                                                        \n    - Any Intensity -        50 (37.3%)    45 (33.6%)      63 (47.7%)  \n    MILD                     50 (37.3%)    45 (33.6%)      62 (47.0%)  \n    LIFE THREATENING              0             0           1 (0.8%)   \n  dcd A.1.1.1.2                                                        \n    - Any Intensity -        48 (35.8%)    48 (35.8%)      50 (37.9%)  \n    MODERATE                 47 (35.1%)    48 (35.8%)      49 (37.1%)  \n    LIFE THREATENING          1 (0.7%)          0           1 (0.8%)   \ncl B.2                                                                 \n  - Any Intensity -          79 (59.0%)    74 (55.2%)      85 (64.4%)  \n  MILD                       30 (22.4%)    30 (22.4%)      33 (25.0%)  \n  MODERATE                   48 (35.8%)    44 (32.8%)      51 (38.6%)  \n  LIFE THREATENING            1 (0.7%)          0           1 (0.8%)   \n  dcd B.2.2.3.1                                                        \n    - Any Intensity -        48 (35.8%)    54 (40.3%)      51 (38.6%)  \n    MILD                     48 (35.8%)    54 (40.3%)      51 (38.6%)  \n  dcd B.2.1.2.1                                                        \n    - Any Intensity -        49 (36.6%)    44 (32.8%)      52 (39.4%)  \n    MODERATE                 48 (35.8%)    44 (32.8%)      51 (38.6%)  \n    LIFE THREATENING          1 (0.7%)          0           1 (0.8%)   \ncl D.1                                                                 \n  - Any Intensity -          79 (59.0%)    67 (50.0%)      80 (60.6%)  \n  MODERATE                   28 (20.9%)    25 (18.7%)      29 (22.0%)  \n  SEVERE                     50 (37.3%)    42 (31.3%)      49 (37.1%)  \n  LIFE THREATENING            1 (0.7%)          0           2 (1.5%)   \n  dcd D.1.1.1.1                                                        \n    - Any Intensity -        50 (37.3%)    42 (31.3%)      51 (38.6%)  \n    SEVERE                   50 (37.3%)    42 (31.3%)      50 (37.9%)  \n    LIFE THREATENING              0             0           1 (0.8%)   \n  dcd D.1.1.4.2                                                        \n    - Any Intensity -        48 (35.8%)    42 (31.3%)      50 (37.9%)  \n    MODERATE                 47 (35.1%)    42 (31.3%)      49 (37.1%)  \n    LIFE THREATENING          1 (0.7%)          0           1 (0.8%)   \ncl D.2                                                                 \n  - Any Intensity -          47 (35.1%)    58 (43.3%)      57 (43.2%)  \n  MILD                       47 (35.1%)    58 (43.3%)      56 (42.4%)  \n  LIFE THREATENING                0             0           1 (0.8%)   \n  dcd D.2.1.5.3                                                        \n    - Any Intensity -        47 (35.1%)    58 (43.3%)      57 (43.2%)  \n    MILD                     47 (35.1%)    58 (43.3%)      56 (42.4%)  \n    LIFE THREATENING              0             0           1 (0.8%)   \ncl B.1                                                                 \n  - Any Intensity -          47 (35.1%)    49 (36.6%)      43 (32.6%)  \n  SEVERE                     47 (35.1%)    48 (35.8%)      43 (32.6%)  \n  LIFE THREATENING                0         1 (0.7%)           0       \n  dcd B.1.1.1.1                                                        \n    - Any Intensity -        47 (35.1%)    49 (36.6%)      43 (32.6%)  \n    SEVERE                   47 (35.1%)    48 (35.8%)      43 (32.6%)  \n    LIFE THREATENING              0         1 (0.7%)           0       \ncl C.2                                                                 \n  - Any Intensity -          35 (26.1%)    48 (35.8%)      55 (41.7%)  \n  MODERATE                   35 (26.1%)    48 (35.8%)      54 (40.9%)  \n  LIFE THREATENING                0             0           1 (0.8%)   \n  dcd C.2.1.2.1                                                        \n    - Any Intensity -        35 (26.1%)    48 (35.8%)      55 (41.7%)  \n    MODERATE                 35 (26.1%)    48 (35.8%)      54 (40.9%)  \n    LIFE THREATENING              0             0           1 (0.8%)   \ncl C.1                                                                 \n  - Any Intensity -          43 (32.1%)    46 (34.3%)      43 (32.6%)  \n  SEVERE                     43 (32.1%)    46 (34.3%)      43 (32.6%)  \n  dcd C.1.1.1.3                                                        \n    - Any Intensity -        43 (32.1%)    46 (34.3%)      43 (32.6%)  \n    SEVERE                   43 (32.1%)    46 (34.3%)      43 (32.6%)  \n\n\n\n\n\nCodelibrary(teal.modules.clinical)\nlibrary(scda)\nlibrary(dplyr)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadae <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adae\")\n\napp <- init(\n  data = cdisc_data(\n    cdisc_dataset(\"ADSL\", adsl),\n    cdisc_dataset(\"ADAE\", adae),\n    code =\n      'ADSL <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\n      ADAE <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adae\")',\n    check = TRUE\n  ),\n  modules = modules(\n    tm_t_events_by_grade(\n      label = \"Adverse Events by Grade Table\",\n      dataname = \"ADAE\",\n      arm_var = choices_selected(c(\"ARM\", \"ARMCD\"), \"ARM\"),\n      llt = choices_selected(\n        choices = variable_choices(adae, c(\"AETERM\", \"AEDECOD\")),\n        selected = c(\"AEDECOD\")\n      ),\n      hlt = choices_selected(\n        choices = variable_choices(adae, c(\"AEBODSYS\", \"AESOC\")),\n        selected = \"AEBODSYS\"\n      ),\n      grade = choices_selected(\n        choices = variable_choices(adae, c(\"AETOXGR\", \"AESEV\")),\n        selected = \"AESEV\"\n      )\n    )\n  )\n)\n\n[INFO] 2023-03-10 05:21:49.7843 pid:3150 token:[] teal.modules.clinical Initializing tm_t_events_by_grade\n\nCodeshinyApp(app$ui, app$server)\n\n\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n [1] teal.modules.clinical_0.8.14.9026 teal_0.12.0.9023                 \n [3] teal.transform_0.2.0.9011         teal.data_0.1.2.9013             \n [5] shiny_1.7.4                       scda_0.1.5.9009                  \n [7] dplyr_1.1.0                       tern_0.7.10.9056                 \n [9] rtables_0.6.0.1                   formatters_0.4.0                 \n[11] magrittr_2.0.3                   \n\nloaded via a namespace (and not attached):\n [1] sass_0.4.5               tidyr_1.3.0              jsonlite_1.8.4          \n [4] splines_4.2.2            R.utils_2.12.2           bslib_0.4.2             \n [7] teal.slice_0.2.0.9026    Rdpack_2.4               assertthat_0.2.1        \n[10] teal.code_0.3.0.9001     tern.gee_0.1.0.9002      yaml_2.3.7              \n[13] pillar_1.8.1             backports_1.4.1          lattice_0.20-45         \n[16] glue_1.6.2               teal.widgets_0.2.0.9024  digest_0.6.31           \n[19] promises_1.2.0.1         rbibutils_2.2.13         checkmate_2.1.0         \n[22] colorspace_2.1-0         R.oo_1.25.0              htmltools_0.5.4         \n[25] httpuv_1.6.9             Matrix_1.5-3             pkgconfig_2.0.3         \n[28] broom_1.0.3              logger_0.2.2             purrr_1.0.1             \n[31] xtable_1.8-4             mvtnorm_1.1-3            scales_1.2.1            \n[34] webshot_0.5.4            processx_3.8.0           fontawesome_0.5.0       \n[37] later_1.3.0              emmeans_1.8.4-1          tibble_3.1.8            \n[40] styler_1.9.1             generics_0.1.3           ggplot2_3.4.1           \n[43] ellipsis_0.3.2           shinyvalidate_0.1.2      cachem_1.0.7            \n[46] withr_2.5.0              shinyjs_2.1.0            geepack_1.3.9           \n[49] cli_3.6.0                survival_3.5-3           mime_0.12               \n[52] memoise_2.0.1            ps_1.7.2                 estimability_1.4.1      \n[55] evaluate_0.20            R.methodsS3_1.8.2        fansi_1.0.4             \n[58] R.cache_0.16.0           nlme_3.1-162             MASS_7.3-58.3           \n[61] forcats_1.0.0            teal.reporter_0.1.1.9013 tools_4.2.2             \n[64] lifecycle_1.0.3          munsell_0.5.0            callr_3.7.3             \n[67] compiler_4.2.2           jquerylib_0.1.4          rlang_1.0.6             \n[70] grid_4.2.2               htmlwidgets_1.6.1        rmarkdown_2.20          \n[73] shinyWidgets_0.7.6       gtable_0.3.1             codetools_0.2-19        \n[76] teal.logger_0.1.1.9004   R6_2.5.1                 knitr_1.42              \n[79] fastmap_1.1.1            utf8_1.2.3               Rcpp_1.0.10             \n[82] vctrs_0.5.2              tidyselect_1.2.0         xfun_0.37               \n[85] coda_0.19-4             \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R                       [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/tables/adverse-events/aet03.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "tables/adverse-events/aet04.html",
    "href": "tables/adverse-events/aet04.html",
    "title": "AET04",
    "section": "",
    "text": "Data Setup\nStandard Table\nTable with Fill-In  of Treatment Groups\nTable with Fill-In  of Grades\nTable with Collapsing  of Grades\nTable Using Worst Grade  Flags from ADAE\nTable with an Incidence Rate \\(\\geq\\) 40%, Totals Restricted\nTable with an Incidence Rate \\(\\geq\\) X%, Totals Unrestricted\nTable with an Incidence  Rate \\(\\geq\\) 58 Patients\nTable with a Difference in  Incidence Rate \\(\\geq\\) 10%\nTable with an Incidence Rate \\(\\geq\\) 5%, SOCs < 5% Removed\nTable with an Incidence Rate \\(\\geq\\) 40%,  All SOCs w/o Preferred Terms Removed\nTeal\nSession Info\n\n\n\n\nCodelibrary(dplyr)\nlibrary(tern)\nlibrary(scda)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadae <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adae\")\n\n# Ensure character variables are converted to factors and empty strings and NAs are explicit missing levels.\nadsl <- df_explicit_na(adsl) %>% dplyr::filter(TRT01A != \"<Missing>\")\nadae <- df_explicit_na(adae) %>% dplyr::filter(ANL01FL == \"Y\")\n\n# Pre-Processing\n\ngr_grp <- list(\n  \"- Any Grade -\" = c(\"1\", \"2\", \"3\", \"4\", \"5\"),\n  \"Grade 1-2\" = c(\"1\", \"2\"),\n  \"Grade 3-4\" = c(\"3\", \"4\"),\n  \"Grade 5\" = \"5\"\n)\n\n# Raw table used by variant 8/10\nraw_table <- basic_table() %>%\n  split_cols_by(\"ACTARM\") %>%\n  add_colcounts() %>%\n  count_occurrences_by_grade(\n    var = \"AETOXGR\",\n    grade_groups = gr_grp\n  ) %>%\n  split_rows_by(\"AEBODSYS\",\n    split_fun = trim_levels_in_group(\"AETOXGR\"),\n    child_labels = \"visible\", nested = TRUE\n  ) %>%\n  summarize_occurrences_by_grade(\n    var = \"AETOXGR\",\n    grade_groups = gr_grp\n  ) %>%\n  split_rows_by(\"AEDECOD\",\n    split_fun = trim_levels_in_group(\"AETOXGR\"),\n    child_labels = \"visible\", nested = TRUE\n  ) %>%\n  summarize_num_patients(\n    var = \"USUBJID\",\n    .stats = \"unique\",\n    .labels = \"- Any Grade -\"\n  ) %>%\n  count_occurrences_by_grade(\n    var = \"AETOXGR\",\n    grade_groups = gr_grp[-1],\n    .indent_mods = -1L\n  ) %>%\n  build_table(adae, alt_counts_df = adsl) %>%\n  sort_at_path(\n    path = \"AEBODSYS\",\n    scorefun = cont_n_allcols,\n    decreasing = TRUE\n  ) %>%\n  sort_at_path(\n    path = c(\"AEBODSYS\", \"*\", \"AEDECOD\"),\n    scorefun = cont_n_allcols,\n    decreasing = TRUE\n  )\n\n# Helper function to avoid filtering also the first part of the table, where general information is given.\nmy_row_condition <- function(row_fnc_condition) {\n  function(table_row) {\n    if (indent_mod(table_row) == 0) {\n      return(TRUE)\n    } else {\n      row_fnc_condition(table_row)\n    }\n  }\n}\n\n\n\n\n\nCodesplit_fun <- trim_levels_in_group\n\nlyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ACTARM\") %>%\n  count_occurrences_by_grade(\n    var = \"AETOXGR\",\n    grade_groups = gr_grp\n  ) %>%\n  split_rows_by(\n    \"AEBODSYS\",\n    child_labels = \"visible\",\n    nested = TRUE,\n    split_fun = split_fun(\"AETOXGR\"),\n    label_pos = \"topleft\",\n    split_label = obj_label(adae$AEBODSYS)\n  ) %>%\n  summarize_occurrences_by_grade(\n    var = \"AETOXGR\",\n    grade_groups = gr_grp\n  ) %>%\n  split_rows_by(\n    \"AEDECOD\",\n    child_labels = \"visible\",\n    nested = TRUE,\n    indent_mod = -1L,\n    split_fun = split_fun(\"AETOXGR\"),\n    label_pos = \"topleft\",\n    split_label = obj_label(adae$AEDECOD)\n  ) %>%\n  summarize_num_patients(\n    var = \"USUBJID\",\n    .stats = \"unique\",\n    .labels = \"- Any Grade -\"\n  ) %>%\n  count_occurrences_by_grade(\n    var = \"AETOXGR\",\n    grade_groups = gr_grp[-1],\n    .indent_mods = -1L\n  ) %>%\n  append_varlabels(adae, \"AETOXGR\", indent = 2L)\n\nresult <- lyt %>%\n  build_table(adae, alt_counts_df = adsl) %>%\n  sort_at_path(\n    path = \"AEBODSYS\",\n    scorefun = cont_n_allcols,\n    decreasing = TRUE\n  ) %>%\n  sort_at_path(\n    path = c(\"AEBODSYS\", \"*\", \"AEDECOD\"),\n    scorefun = cont_n_allcols,\n    decreasing = TRUE\n  )\n\nresult\n\nBody System or Organ Class                                             \n  Dictionary-Derived Term      A: Drug X    B: Placebo   C: Combination\n    Analysis Toxicity Grade     (N=134)      (N=134)        (N=132)    \n———————————————————————————————————————————————————————————————————————\n- Any Grade -                 100 (74.6%)   98 (73.1%)    103 (78.0%)  \nGrade 1-2                      10 (7.5%)    15 (11.2%)     10 (7.6%)   \n1                              5 (3.7%)      7 (5.2%)       4 (3.0%)   \n2                              5 (3.7%)      8 (6.0%)       6 (4.5%)   \nGrade 3-4                     26 (19.4%)    31 (23.1%)     29 (22.0%)  \n3                              13 (9.7%)    13 (9.7%)      14 (10.6%)  \n4                              13 (9.7%)    18 (13.4%)     15 (11.4%)  \nGrade 5                       64 (47.8%)    52 (38.8%)     64 (48.5%)  \ncl A.1                                                                 \n  - Any Grade -               68 (50.7%)    58 (43.3%)     76 (57.6%)  \n  Grade 1-2                   68 (50.7%)    58 (43.3%)     76 (57.6%)  \n  1                           27 (20.1%)    19 (14.2%)     34 (25.8%)  \n  2                           41 (30.6%)    39 (29.1%)     42 (31.8%)  \n  dcd A.1.1.1.1                                                        \n    - Any Grade -             45 (33.6%)    31 (23.1%)     52 (39.4%)  \n    Grade 1-2                 45 (33.6%)    31 (23.1%)     52 (39.4%)  \n    1                         45 (33.6%)    31 (23.1%)     52 (39.4%)  \n  dcd A.1.1.1.2                                                        \n    - Any Grade -             41 (30.6%)    39 (29.1%)     42 (31.8%)  \n    Grade 1-2                 41 (30.6%)    39 (29.1%)     42 (31.8%)  \n    2                         41 (30.6%)    39 (29.1%)     42 (31.8%)  \ncl B.2                                                                 \n  - Any Grade -               62 (46.3%)    56 (41.8%)     74 (56.1%)  \n  Grade 1-2                   23 (17.2%)    22 (16.4%)     28 (21.2%)  \n  1                           23 (17.2%)    22 (16.4%)     28 (21.2%)  \n  Grade 3-4                   39 (29.1%)    34 (25.4%)     46 (34.8%)  \n  3                           39 (29.1%)    34 (25.4%)     46 (34.8%)  \n  dcd B.2.2.3.1                                                        \n    - Any Grade -             38 (28.4%)    40 (29.9%)     45 (34.1%)  \n    Grade 1-2                 38 (28.4%)    40 (29.9%)     45 (34.1%)  \n    1                         38 (28.4%)    40 (29.9%)     45 (34.1%)  \n  dcd B.2.1.2.1                                                        \n    - Any Grade -             39 (29.1%)    34 (25.4%)     46 (34.8%)  \n    Grade 3-4                 39 (29.1%)    34 (25.4%)     46 (34.8%)  \n    3                         39 (29.1%)    34 (25.4%)     46 (34.8%)  \ncl D.1                                                                 \n  - Any Grade -               64 (47.8%)    54 (40.3%)     68 (51.5%)  \n  Grade 3-4                   22 (16.4%)    22 (16.4%)     22 (16.7%)  \n  3                           22 (16.4%)    22 (16.4%)     22 (16.7%)  \n  Grade 5                     42 (31.3%)    32 (23.9%)     46 (34.8%)  \n  dcd D.1.1.1.1                                                        \n    - Any Grade -             42 (31.3%)    32 (23.9%)     46 (34.8%)  \n    Grade 5                   42 (31.3%)    32 (23.9%)     46 (34.8%)  \n  dcd D.1.1.4.2                                                        \n    - Any Grade -             38 (28.4%)    34 (25.4%)     40 (30.3%)  \n    Grade 3-4                 38 (28.4%)    34 (25.4%)     40 (30.3%)  \n    3                         38 (28.4%)    34 (25.4%)     40 (30.3%)  \ncl D.2                                                                 \n  - Any Grade -               37 (27.6%)    46 (34.3%)     50 (37.9%)  \n  Grade 1-2                   37 (27.6%)    46 (34.3%)     50 (37.9%)  \n  1                           37 (27.6%)    46 (34.3%)     50 (37.9%)  \n  dcd D.2.1.5.3                                                        \n    - Any Grade -             37 (27.6%)    46 (34.3%)     50 (37.9%)  \n    Grade 1-2                 37 (27.6%)    46 (34.3%)     50 (37.9%)  \n    1                         37 (27.6%)    46 (34.3%)     50 (37.9%)  \ncl C.2                                                                 \n  - Any Grade -               28 (20.9%)    36 (26.9%)     48 (36.4%)  \n  Grade 1-2                   28 (20.9%)    36 (26.9%)     48 (36.4%)  \n  2                           28 (20.9%)    36 (26.9%)     48 (36.4%)  \n  dcd C.2.1.2.1                                                        \n    - Any Grade -             28 (20.9%)    36 (26.9%)     48 (36.4%)  \n    Grade 1-2                 28 (20.9%)    36 (26.9%)     48 (36.4%)  \n    2                         28 (20.9%)    36 (26.9%)     48 (36.4%)  \ncl B.1                                                                 \n  - Any Grade -               38 (28.4%)    37 (27.6%)     36 (27.3%)  \n  Grade 5                     38 (28.4%)    37 (27.6%)     36 (27.3%)  \n  dcd B.1.1.1.1                                                        \n    - Any Grade -             38 (28.4%)    37 (27.6%)     36 (27.3%)  \n    Grade 5                   38 (28.4%)    37 (27.6%)     36 (27.3%)  \ncl C.1                                                                 \n  - Any Grade -               36 (26.9%)    34 (25.4%)     36 (27.3%)  \n  Grade 3-4                   36 (26.9%)    34 (25.4%)     36 (27.3%)  \n  4                           36 (26.9%)    34 (25.4%)     36 (27.3%)  \n  dcd C.1.1.1.3                                                        \n    - Any Grade -             36 (26.9%)    34 (25.4%)     36 (27.3%)  \n    Grade 3-4                 36 (26.9%)    34 (25.4%)     36 (27.3%)  \n    4                         36 (26.9%)    34 (25.4%)     36 (27.3%)  \n\n\n\n\n\nCodeadae2 <- adae %>%\n  dplyr::filter(ACTARM == \"A: Drug X\")\n\nsplit_fun <- trim_levels_in_group\n\nlyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ACTARM\") %>%\n  count_occurrences_by_grade(\n    var = \"AETOXGR\",\n    grade_groups = gr_grp\n  ) %>%\n  split_rows_by(\n    \"AEBODSYS\",\n    child_labels = \"visible\",\n    nested = TRUE,\n    split_fun = split_fun(\"AETOXGR\"),\n    label_pos = \"topleft\",\n    split_label = obj_label(adae2$AEBODSYS)\n  ) %>%\n  summarize_occurrences_by_grade(\n    var = \"AETOXGR\",\n    grade_groups = gr_grp\n  ) %>%\n  split_rows_by(\n    \"AEDECOD\",\n    child_labels = \"visible\",\n    nested = TRUE,\n    indent_mod = -1L,\n    split_fun = split_fun(\"AETOXGR\"),\n    label_pos = \"topleft\",\n    split_label = obj_label(adae2$AEDECOD)\n  ) %>%\n  summarize_num_patients(\n    var = \"USUBJID\",\n    .stats = \"unique\",\n    .labels = \"- Any Grade -\"\n  ) %>%\n  count_occurrences_by_grade(\n    var = \"AETOXGR\",\n    grade_groups = gr_grp[-1],\n    .indent_mods = -1L\n  ) %>%\n  append_varlabels(adae, \"AETOXGR\", indent = 2L)\n\nresult <- lyt %>%\n  build_table(adae2, alt_counts_df = adsl) %>%\n  sort_at_path(\n    path = \"AEBODSYS\",\n    scorefun = cont_n_allcols,\n    decreasing = TRUE\n  ) %>%\n  sort_at_path(\n    path = c(\"AEBODSYS\", \"*\", \"AEDECOD\"),\n    scorefun = cont_n_allcols,\n    decreasing = TRUE\n  )\n\nresult\n\nBody System or Organ Class                                             \n  Dictionary-Derived Term      A: Drug X    B: Placebo   C: Combination\n    Analysis Toxicity Grade     (N=134)      (N=134)        (N=132)    \n———————————————————————————————————————————————————————————————————————\n- Any Grade -                 100 (74.6%)       0              0       \nGrade 1-2                      10 (7.5%)        0              0       \n1                              5 (3.7%)         0              0       \n2                              5 (3.7%)         0              0       \nGrade 3-4                     26 (19.4%)        0              0       \n3                              13 (9.7%)        0              0       \n4                              13 (9.7%)        0              0       \nGrade 5                       64 (47.8%)        0              0       \ncl A.1                                                                 \n  - Any Grade -               68 (50.7%)        0              0       \n  Grade 1-2                   68 (50.7%)        0              0       \n  1                           27 (20.1%)        0              0       \n  2                           41 (30.6%)        0              0       \n  dcd A.1.1.1.1                                                        \n    - Any Grade -             45 (33.6%)        0              0       \n    Grade 1-2                 45 (33.6%)        0              0       \n    1                         45 (33.6%)        0              0       \n  dcd A.1.1.1.2                                                        \n    - Any Grade -             41 (30.6%)        0              0       \n    Grade 1-2                 41 (30.6%)        0              0       \n    2                         41 (30.6%)        0              0       \ncl D.1                                                                 \n  - Any Grade -               64 (47.8%)        0              0       \n  Grade 3-4                   22 (16.4%)        0              0       \n  3                           22 (16.4%)        0              0       \n  Grade 5                     42 (31.3%)        0              0       \n  dcd D.1.1.1.1                                                        \n    - Any Grade -             42 (31.3%)        0              0       \n    Grade 5                   42 (31.3%)        0              0       \n  dcd D.1.1.4.2                                                        \n    - Any Grade -             38 (28.4%)        0              0       \n    Grade 3-4                 38 (28.4%)        0              0       \n    3                         38 (28.4%)        0              0       \ncl B.2                                                                 \n  - Any Grade -               62 (46.3%)        0              0       \n  Grade 1-2                   23 (17.2%)        0              0       \n  1                           23 (17.2%)        0              0       \n  Grade 3-4                   39 (29.1%)        0              0       \n  3                           39 (29.1%)        0              0       \n  dcd B.2.1.2.1                                                        \n    - Any Grade -             39 (29.1%)        0              0       \n    Grade 3-4                 39 (29.1%)        0              0       \n    3                         39 (29.1%)        0              0       \n  dcd B.2.2.3.1                                                        \n    - Any Grade -             38 (28.4%)        0              0       \n    Grade 1-2                 38 (28.4%)        0              0       \n    1                         38 (28.4%)        0              0       \ncl B.1                                                                 \n  - Any Grade -               38 (28.4%)        0              0       \n  Grade 5                     38 (28.4%)        0              0       \n  dcd B.1.1.1.1                                                        \n    - Any Grade -             38 (28.4%)        0              0       \n    Grade 5                   38 (28.4%)        0              0       \ncl D.2                                                                 \n  - Any Grade -               37 (27.6%)        0              0       \n  Grade 1-2                   37 (27.6%)        0              0       \n  1                           37 (27.6%)        0              0       \n  dcd D.2.1.5.3                                                        \n    - Any Grade -             37 (27.6%)        0              0       \n    Grade 1-2                 37 (27.6%)        0              0       \n    1                         37 (27.6%)        0              0       \ncl C.1                                                                 \n  - Any Grade -               36 (26.9%)        0              0       \n  Grade 3-4                   36 (26.9%)        0              0       \n  4                           36 (26.9%)        0              0       \n  dcd C.1.1.1.3                                                        \n    - Any Grade -             36 (26.9%)        0              0       \n    Grade 3-4                 36 (26.9%)        0              0       \n    4                         36 (26.9%)        0              0       \ncl C.2                                                                 \n  - Any Grade -               28 (20.9%)        0              0       \n  Grade 1-2                   28 (20.9%)        0              0       \n  2                           28 (20.9%)        0              0       \n  dcd C.2.1.2.1                                                        \n    - Any Grade -             28 (20.9%)        0              0       \n    Grade 1-2                 28 (20.9%)        0              0       \n    2                         28 (20.9%)        0              0       \n\n\n\n\n\nCodesplit_fun <- drop_split_levels\n\nlyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ACTARM\") %>%\n  count_occurrences_by_grade(\n    var = \"AETOXGR\",\n    grade_groups = gr_grp\n  ) %>%\n  split_rows_by(\n    \"AEBODSYS\",\n    child_labels = \"visible\",\n    nested = TRUE,\n    split_fun = split_fun,\n    label_pos = \"topleft\",\n    split_label = obj_label(adae$AEBODSYS)\n  ) %>%\n  summarize_occurrences_by_grade(\n    var = \"AETOXGR\",\n    grade_groups = gr_grp\n  ) %>%\n  split_rows_by(\n    \"AEDECOD\",\n    child_labels = \"visible\",\n    nested = TRUE,\n    indent_mod = -1L,\n    split_fun = split_fun,\n    label_pos = \"topleft\",\n    split_label = obj_label(adae$AEDECOD)\n  ) %>%\n  summarize_num_patients(\n    var = \"USUBJID\",\n    .stats = \"unique\",\n    .labels = \"- Any Grade -\"\n  ) %>%\n  count_occurrences_by_grade(\n    var = \"AETOXGR\",\n    grade_groups = gr_grp[-1],\n    .indent_mods = -1L\n  ) %>%\n  append_varlabels(adae, \"AETOXGR\", indent = 2L)\n\nresult <- lyt %>%\n  build_table(adae, alt_counts_df = adsl) %>%\n  sort_at_path(\n    path = \"AEBODSYS\",\n    scorefun = cont_n_allcols,\n    decreasing = TRUE\n  ) %>%\n  sort_at_path(\n    path = c(\"AEBODSYS\", \"*\", \"AEDECOD\"),\n    scorefun = cont_n_allcols,\n    decreasing = TRUE\n  )\n\nresult\n\nBody System or Organ Class                                             \n  Dictionary-Derived Term      A: Drug X    B: Placebo   C: Combination\n    Analysis Toxicity Grade     (N=134)      (N=134)        (N=132)    \n———————————————————————————————————————————————————————————————————————\n- Any Grade -                 100 (74.6%)   98 (73.1%)    103 (78.0%)  \nGrade 1-2                      10 (7.5%)    15 (11.2%)     10 (7.6%)   \n1                              5 (3.7%)      7 (5.2%)       4 (3.0%)   \n2                              5 (3.7%)      8 (6.0%)       6 (4.5%)   \nGrade 3-4                     26 (19.4%)    31 (23.1%)     29 (22.0%)  \n3                              13 (9.7%)    13 (9.7%)      14 (10.6%)  \n4                              13 (9.7%)    18 (13.4%)     15 (11.4%)  \nGrade 5                       64 (47.8%)    52 (38.8%)     64 (48.5%)  \ncl A.1                                                                 \n  - Any Grade -               68 (50.7%)    58 (43.3%)     76 (57.6%)  \n  Grade 1-2                   68 (50.7%)    58 (43.3%)     76 (57.6%)  \n  1                           27 (20.1%)    19 (14.2%)     34 (25.8%)  \n  2                           41 (30.6%)    39 (29.1%)     42 (31.8%)  \n  Grade 3-4                        0            0              0       \n  3                                0            0              0       \n  4                                0            0              0       \n  Grade 5                          0            0              0       \n  dcd A.1.1.1.1                                                        \n    - Any Grade -             45 (33.6%)    31 (23.1%)     52 (39.4%)  \n    Grade 1-2                 45 (33.6%)    31 (23.1%)     52 (39.4%)  \n    1                         45 (33.6%)    31 (23.1%)     52 (39.4%)  \n    2                              0            0              0       \n    Grade 3-4                      0            0              0       \n    3                              0            0              0       \n    4                              0            0              0       \n    Grade 5                        0            0              0       \n  dcd A.1.1.1.2                                                        \n    - Any Grade -             41 (30.6%)    39 (29.1%)     42 (31.8%)  \n    Grade 1-2                 41 (30.6%)    39 (29.1%)     42 (31.8%)  \n    1                              0            0              0       \n    2                         41 (30.6%)    39 (29.1%)     42 (31.8%)  \n    Grade 3-4                      0            0              0       \n    3                              0            0              0       \n    4                              0            0              0       \n    Grade 5                        0            0              0       \ncl B.2                                                                 \n  - Any Grade -               62 (46.3%)    56 (41.8%)     74 (56.1%)  \n  Grade 1-2                   23 (17.2%)    22 (16.4%)     28 (21.2%)  \n  1                           23 (17.2%)    22 (16.4%)     28 (21.2%)  \n  2                                0            0              0       \n  Grade 3-4                   39 (29.1%)    34 (25.4%)     46 (34.8%)  \n  3                           39 (29.1%)    34 (25.4%)     46 (34.8%)  \n  4                                0            0              0       \n  Grade 5                          0            0              0       \n  dcd B.2.2.3.1                                                        \n    - Any Grade -             38 (28.4%)    40 (29.9%)     45 (34.1%)  \n    Grade 1-2                 38 (28.4%)    40 (29.9%)     45 (34.1%)  \n    1                         38 (28.4%)    40 (29.9%)     45 (34.1%)  \n    2                              0            0              0       \n    Grade 3-4                      0            0              0       \n    3                              0            0              0       \n    4                              0            0              0       \n    Grade 5                        0            0              0       \n  dcd B.2.1.2.1                                                        \n    - Any Grade -             39 (29.1%)    34 (25.4%)     46 (34.8%)  \n    Grade 1-2                      0            0              0       \n    1                              0            0              0       \n    2                              0            0              0       \n    Grade 3-4                 39 (29.1%)    34 (25.4%)     46 (34.8%)  \n    3                         39 (29.1%)    34 (25.4%)     46 (34.8%)  \n    4                              0            0              0       \n    Grade 5                        0            0              0       \ncl D.1                                                                 \n  - Any Grade -               64 (47.8%)    54 (40.3%)     68 (51.5%)  \n  Grade 1-2                        0            0              0       \n  1                                0            0              0       \n  2                                0            0              0       \n  Grade 3-4                   22 (16.4%)    22 (16.4%)     22 (16.7%)  \n  3                           22 (16.4%)    22 (16.4%)     22 (16.7%)  \n  4                                0            0              0       \n  Grade 5                     42 (31.3%)    32 (23.9%)     46 (34.8%)  \n  dcd D.1.1.1.1                                                        \n    - Any Grade -             42 (31.3%)    32 (23.9%)     46 (34.8%)  \n    Grade 1-2                      0            0              0       \n    1                              0            0              0       \n    2                              0            0              0       \n    Grade 3-4                      0            0              0       \n    3                              0            0              0       \n    4                              0            0              0       \n    Grade 5                   42 (31.3%)    32 (23.9%)     46 (34.8%)  \n  dcd D.1.1.4.2                                                        \n    - Any Grade -             38 (28.4%)    34 (25.4%)     40 (30.3%)  \n    Grade 1-2                      0            0              0       \n    1                              0            0              0       \n    2                              0            0              0       \n    Grade 3-4                 38 (28.4%)    34 (25.4%)     40 (30.3%)  \n    3                         38 (28.4%)    34 (25.4%)     40 (30.3%)  \n    4                              0            0              0       \n    Grade 5                        0            0              0       \ncl D.2                                                                 \n  - Any Grade -               37 (27.6%)    46 (34.3%)     50 (37.9%)  \n  Grade 1-2                   37 (27.6%)    46 (34.3%)     50 (37.9%)  \n  1                           37 (27.6%)    46 (34.3%)     50 (37.9%)  \n  2                                0            0              0       \n  Grade 3-4                        0            0              0       \n  3                                0            0              0       \n  4                                0            0              0       \n  Grade 5                          0            0              0       \n  dcd D.2.1.5.3                                                        \n    - Any Grade -             37 (27.6%)    46 (34.3%)     50 (37.9%)  \n    Grade 1-2                 37 (27.6%)    46 (34.3%)     50 (37.9%)  \n    1                         37 (27.6%)    46 (34.3%)     50 (37.9%)  \n    2                              0            0              0       \n    Grade 3-4                      0            0              0       \n    3                              0            0              0       \n    4                              0            0              0       \n    Grade 5                        0            0              0       \ncl C.2                                                                 \n  - Any Grade -               28 (20.9%)    36 (26.9%)     48 (36.4%)  \n  Grade 1-2                   28 (20.9%)    36 (26.9%)     48 (36.4%)  \n  1                                0            0              0       \n  2                           28 (20.9%)    36 (26.9%)     48 (36.4%)  \n  Grade 3-4                        0            0              0       \n  3                                0            0              0       \n  4                                0            0              0       \n  Grade 5                          0            0              0       \n  dcd C.2.1.2.1                                                        \n    - Any Grade -             28 (20.9%)    36 (26.9%)     48 (36.4%)  \n    Grade 1-2                 28 (20.9%)    36 (26.9%)     48 (36.4%)  \n    1                              0            0              0       \n    2                         28 (20.9%)    36 (26.9%)     48 (36.4%)  \n    Grade 3-4                      0            0              0       \n    3                              0            0              0       \n    4                              0            0              0       \n    Grade 5                        0            0              0       \ncl B.1                                                                 \n  - Any Grade -               38 (28.4%)    37 (27.6%)     36 (27.3%)  \n  Grade 1-2                        0            0              0       \n  1                                0            0              0       \n  2                                0            0              0       \n  Grade 3-4                        0            0              0       \n  3                                0            0              0       \n  4                                0            0              0       \n  Grade 5                     38 (28.4%)    37 (27.6%)     36 (27.3%)  \n  dcd B.1.1.1.1                                                        \n    - Any Grade -             38 (28.4%)    37 (27.6%)     36 (27.3%)  \n    Grade 1-2                      0            0              0       \n    1                              0            0              0       \n    2                              0            0              0       \n    Grade 3-4                      0            0              0       \n    3                              0            0              0       \n    4                              0            0              0       \n    Grade 5                   38 (28.4%)    37 (27.6%)     36 (27.3%)  \ncl C.1                                                                 \n  - Any Grade -               36 (26.9%)    34 (25.4%)     36 (27.3%)  \n  Grade 1-2                        0            0              0       \n  1                                0            0              0       \n  2                                0            0              0       \n  Grade 3-4                   36 (26.9%)    34 (25.4%)     36 (27.3%)  \n  3                                0            0              0       \n  4                           36 (26.9%)    34 (25.4%)     36 (27.3%)  \n  Grade 5                          0            0              0       \n  dcd C.1.1.1.3                                                        \n    - Any Grade -             36 (26.9%)    34 (25.4%)     36 (27.3%)  \n    Grade 1-2                      0            0              0       \n    1                              0            0              0       \n    2                              0            0              0       \n    Grade 3-4                 36 (26.9%)    34 (25.4%)     36 (27.3%)  \n    3                              0            0              0       \n    4                         36 (26.9%)    34 (25.4%)     36 (27.3%)  \n    Grade 5                        0            0              0       \n\n\n\n\n\nCodegr_grp1 <- list(\n  \"- Any Grade -\" = c(\"1\", \"2\", \"3\", \"4\", \"5\"),\n  \"Grade 1-2\" = c(\"1\", \"2\"),\n  \"Grade 3-5\" = c(\"3\", \"4\", \"5\")\n)\n\nsplit_fun <- trim_levels_in_group\n\nlyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ACTARM\") %>%\n  count_occurrences_by_grade(\n    var = \"AETOXGR\",\n    grade_groups = gr_grp1\n  ) %>%\n  split_rows_by(\n    \"AEBODSYS\",\n    child_labels = \"visible\",\n    nested = TRUE,\n    split_fun = split_fun(\"AETOXGR\"),\n    label_pos = \"topleft\",\n    split_label = obj_label(adae$AEBODSYS)\n  ) %>%\n  summarize_occurrences_by_grade(\n    var = \"AETOXGR\",\n    grade_groups = gr_grp1\n  ) %>%\n  split_rows_by(\n    \"AEDECOD\",\n    child_labels = \"visible\",\n    nested = TRUE,\n    indent_mod = -1L,\n    split_fun = split_fun(\"AETOXGR\"),\n    label_pos = \"topleft\",\n    split_label = obj_label(adae$AEDECOD)\n  ) %>%\n  summarize_num_patients(\n    var = \"USUBJID\",\n    .stats = \"unique\",\n    .labels = \"- Any Grade -\"\n  ) %>%\n  count_occurrences_by_grade(\n    var = \"AETOXGR\",\n    grade_groups = gr_grp1[-1],\n    .indent_mods = -1L\n  ) %>%\n  append_varlabels(adae, \"AETOXGR\", indent = 2L)\n\nresult <- lyt %>%\n  build_table(adae, alt_counts_df = adsl) %>%\n  prune_table() %>%\n  sort_at_path(\n    path = \"AEBODSYS\",\n    scorefun = cont_n_allcols,\n    decreasing = TRUE\n  ) %>%\n  sort_at_path(\n    path = c(\"AEBODSYS\", \"*\", \"AEDECOD\"),\n    scorefun = cont_n_allcols,\n    decreasing = TRUE\n  )\n\nresult\n\nBody System or Organ Class                                             \n  Dictionary-Derived Term      A: Drug X    B: Placebo   C: Combination\n    Analysis Toxicity Grade     (N=134)      (N=134)        (N=132)    \n———————————————————————————————————————————————————————————————————————\n- Any Grade -                 100 (74.6%)   98 (73.1%)    103 (78.0%)  \nGrade 1-2                      10 (7.5%)    15 (11.2%)     10 (7.6%)   \n1                              5 (3.7%)      7 (5.2%)       4 (3.0%)   \n2                              5 (3.7%)      8 (6.0%)       6 (4.5%)   \nGrade 3-5                     90 (67.2%)    83 (61.9%)     93 (70.5%)  \n3                              13 (9.7%)    13 (9.7%)      14 (10.6%)  \n4                              13 (9.7%)    18 (13.4%)     15 (11.4%)  \n5                             64 (47.8%)    52 (38.8%)     64 (48.5%)  \ncl A.1                                                                 \n  - Any Grade -               68 (50.7%)    58 (43.3%)     76 (57.6%)  \n  Grade 1-2                   68 (50.7%)    58 (43.3%)     76 (57.6%)  \n  1                           27 (20.1%)    19 (14.2%)     34 (25.8%)  \n  2                           41 (30.6%)    39 (29.1%)     42 (31.8%)  \n  dcd A.1.1.1.1                                                        \n    - Any Grade -             45 (33.6%)    31 (23.1%)     52 (39.4%)  \n    Grade 1-2                 45 (33.6%)    31 (23.1%)     52 (39.4%)  \n    1                         45 (33.6%)    31 (23.1%)     52 (39.4%)  \n  dcd A.1.1.1.2                                                        \n    - Any Grade -             41 (30.6%)    39 (29.1%)     42 (31.8%)  \n    Grade 1-2                 41 (30.6%)    39 (29.1%)     42 (31.8%)  \n    2                         41 (30.6%)    39 (29.1%)     42 (31.8%)  \ncl B.2                                                                 \n  - Any Grade -               62 (46.3%)    56 (41.8%)     74 (56.1%)  \n  Grade 1-2                   23 (17.2%)    22 (16.4%)     28 (21.2%)  \n  1                           23 (17.2%)    22 (16.4%)     28 (21.2%)  \n  Grade 3-5                   39 (29.1%)    34 (25.4%)     46 (34.8%)  \n  3                           39 (29.1%)    34 (25.4%)     46 (34.8%)  \n  dcd B.2.2.3.1                                                        \n    - Any Grade -             38 (28.4%)    40 (29.9%)     45 (34.1%)  \n    Grade 1-2                 38 (28.4%)    40 (29.9%)     45 (34.1%)  \n    1                         38 (28.4%)    40 (29.9%)     45 (34.1%)  \n  dcd B.2.1.2.1                                                        \n    - Any Grade -             39 (29.1%)    34 (25.4%)     46 (34.8%)  \n    Grade 3-5                 39 (29.1%)    34 (25.4%)     46 (34.8%)  \n    3                         39 (29.1%)    34 (25.4%)     46 (34.8%)  \ncl D.1                                                                 \n  - Any Grade -               64 (47.8%)    54 (40.3%)     68 (51.5%)  \n  Grade 3-5                   64 (47.8%)    54 (40.3%)     68 (51.5%)  \n  3                           22 (16.4%)    22 (16.4%)     22 (16.7%)  \n  5                           42 (31.3%)    32 (23.9%)     46 (34.8%)  \n  dcd D.1.1.1.1                                                        \n    - Any Grade -             42 (31.3%)    32 (23.9%)     46 (34.8%)  \n    Grade 3-5                 42 (31.3%)    32 (23.9%)     46 (34.8%)  \n    5                         42 (31.3%)    32 (23.9%)     46 (34.8%)  \n  dcd D.1.1.4.2                                                        \n    - Any Grade -             38 (28.4%)    34 (25.4%)     40 (30.3%)  \n    Grade 3-5                 38 (28.4%)    34 (25.4%)     40 (30.3%)  \n    3                         38 (28.4%)    34 (25.4%)     40 (30.3%)  \ncl D.2                                                                 \n  - Any Grade -               37 (27.6%)    46 (34.3%)     50 (37.9%)  \n  Grade 1-2                   37 (27.6%)    46 (34.3%)     50 (37.9%)  \n  1                           37 (27.6%)    46 (34.3%)     50 (37.9%)  \n  dcd D.2.1.5.3                                                        \n    - Any Grade -             37 (27.6%)    46 (34.3%)     50 (37.9%)  \n    Grade 1-2                 37 (27.6%)    46 (34.3%)     50 (37.9%)  \n    1                         37 (27.6%)    46 (34.3%)     50 (37.9%)  \ncl C.2                                                                 \n  - Any Grade -               28 (20.9%)    36 (26.9%)     48 (36.4%)  \n  Grade 1-2                   28 (20.9%)    36 (26.9%)     48 (36.4%)  \n  2                           28 (20.9%)    36 (26.9%)     48 (36.4%)  \n  dcd C.2.1.2.1                                                        \n    - Any Grade -             28 (20.9%)    36 (26.9%)     48 (36.4%)  \n    Grade 1-2                 28 (20.9%)    36 (26.9%)     48 (36.4%)  \n    2                         28 (20.9%)    36 (26.9%)     48 (36.4%)  \ncl B.1                                                                 \n  - Any Grade -               38 (28.4%)    37 (27.6%)     36 (27.3%)  \n  Grade 3-5                   38 (28.4%)    37 (27.6%)     36 (27.3%)  \n  5                           38 (28.4%)    37 (27.6%)     36 (27.3%)  \n  dcd B.1.1.1.1                                                        \n    - Any Grade -             38 (28.4%)    37 (27.6%)     36 (27.3%)  \n    Grade 3-5                 38 (28.4%)    37 (27.6%)     36 (27.3%)  \n    5                         38 (28.4%)    37 (27.6%)     36 (27.3%)  \ncl C.1                                                                 \n  - Any Grade -               36 (26.9%)    34 (25.4%)     36 (27.3%)  \n  Grade 3-5                   36 (26.9%)    34 (25.4%)     36 (27.3%)  \n  4                           36 (26.9%)    34 (25.4%)     36 (27.3%)  \n  dcd C.1.1.1.3                                                        \n    - Any Grade -             36 (26.9%)    34 (25.4%)     36 (27.3%)  \n    Grade 3-5                 36 (26.9%)    34 (25.4%)     36 (27.3%)  \n    4                         36 (26.9%)    34 (25.4%)     36 (27.3%)  \n\n\n\n\n\nCode# No Worst Grade Flags found in the ADAE data set.\n\n\n\n\n\nCode# Simple wrapper to return subset ADAE to a threshold of xx%.\nget_adae_trimmed <- function(adsl, adae, cutoff_rate) {\n  n_per_arm <- adsl %>%\n    dplyr::count(ACTARM)\n\n  anl_terms <- adae %>%\n    dplyr::group_by(ACTARM, AEBODSYS, AEDECOD) %>%\n    dplyr::count(\n      unique_terms = n_distinct(USUBJID)\n    ) %>%\n    dplyr::select(-n) %>%\n    dplyr::ungroup()\n\n  anl_terms <- dplyr::left_join(\n    anl_terms,\n    n_per_arm,\n    by = \"ACTARM\"\n  ) %>%\n    dplyr::mutate(\n      ae_rate = unique_terms / n\n    ) %>%\n    dplyr::filter(ae_rate >= cutoff_rate) %>%\n    dplyr::select(AEDECOD) %>%\n    unique()\n\n  anl <- dplyr::left_join(\n    anl_terms,\n    adae,\n    by = \"AEDECOD\"\n  )\n  anl\n}\n\nadae6 <- get_adae_trimmed(adsl, adae, cutoff_rate = 0.4)\n\nWarning in dplyr::left_join(anl_terms, adae, by = \"AEDECOD\"): Each row in `x` is expected to match at most 1 row in `y`.\nℹ Row 1 of `x` matches multiple rows.\nℹ If multiple matches are expected, set `multiple = \"all\"` to silence this\n  warning.\n\nCodesplit_fun <- trim_levels_in_group\n\nlyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ACTARM\") %>%\n  count_occurrences_by_grade(\n    var = \"AETOXGR\",\n    grade_groups = gr_grp\n  ) %>%\n  split_rows_by(\n    \"AEBODSYS\",\n    child_labels = \"visible\",\n    nested = TRUE,\n    split_fun = split_fun(\"AETOXGR\"),\n    label_pos = \"topleft\",\n    split_label = obj_label(adae6$AEBODSYS)\n  ) %>%\n  summarize_occurrences_by_grade(\n    var = \"AETOXGR\",\n    grade_groups = gr_grp\n  ) %>%\n  split_rows_by(\n    \"AEDECOD\",\n    child_labels = \"visible\",\n    nested = TRUE,\n    indent_mod = -1L,\n    split_fun = split_fun(\"AETOXGR\"),\n    label_pos = \"topleft\",\n    split_label = obj_label(adae6$AEDECOD)\n  ) %>%\n  summarize_num_patients(\n    var = \"USUBJID\",\n    .stats = \"unique\",\n    .labels = \"- Any Grade -\"\n  ) %>%\n  count_occurrences_by_grade(\n    var = \"AETOXGR\",\n    grade_groups = gr_grp[-1],\n    .indent_mods = -1L\n  ) %>%\n  append_varlabels(adae, \"AETOXGR\", indent = 2L)\n\nresult <- lyt %>%\n  build_table(adae6, alt_counts_df = adsl) %>%\n  prune_table() %>%\n  sort_at_path(\n    path = \"AEBODSYS\",\n    scorefun = cont_n_allcols,\n    decreasing = TRUE\n  ) %>%\n  sort_at_path(\n    path = c(\"AEBODSYS\", \"*\", \"AEDECOD\"),\n    scorefun = cont_n_allcols,\n    decreasing = TRUE\n  )\n\nresult\n\nBody System or Organ Class                                             \n  Dictionary-Derived Term      A: Drug X    B: Placebo   C: Combination\n    Analysis Toxicity Grade     (N=134)      (N=134)        (N=132)    \n———————————————————————————————————————————————————————————————————————\n- Any Grade -                 100 (74.6%)   98 (73.1%)    103 (78.0%)  \nGrade 1-2                      10 (7.5%)    15 (11.2%)     10 (7.6%)   \n1                              5 (3.7%)      7 (5.2%)       4 (3.0%)   \n2                              5 (3.7%)      8 (6.0%)       6 (4.5%)   \nGrade 3-4                     26 (19.4%)    31 (23.1%)     29 (22.0%)  \n3                              13 (9.7%)    13 (9.7%)      14 (10.6%)  \n4                              13 (9.7%)    18 (13.4%)     15 (11.4%)  \nGrade 5                       64 (47.8%)    52 (38.8%)     64 (48.5%)  \ncl A.1                                                                 \n  - Any Grade -               68 (50.7%)    58 (43.3%)     76 (57.6%)  \n  Grade 1-2                   68 (50.7%)    58 (43.3%)     76 (57.6%)  \n  1                           27 (20.1%)    19 (14.2%)     34 (25.8%)  \n  2                           41 (30.6%)    39 (29.1%)     42 (31.8%)  \n  dcd A.1.1.1.1                                                        \n    - Any Grade -             45 (33.6%)    31 (23.1%)     52 (39.4%)  \n    Grade 1-2                 45 (33.6%)    31 (23.1%)     52 (39.4%)  \n    1                         45 (33.6%)    31 (23.1%)     52 (39.4%)  \n  dcd A.1.1.1.2                                                        \n    - Any Grade -             41 (30.6%)    39 (29.1%)     42 (31.8%)  \n    Grade 1-2                 41 (30.6%)    39 (29.1%)     42 (31.8%)  \n    2                         41 (30.6%)    39 (29.1%)     42 (31.8%)  \ncl B.2                                                                 \n  - Any Grade -               62 (46.3%)    56 (41.8%)     74 (56.1%)  \n  Grade 1-2                   23 (17.2%)    22 (16.4%)     28 (21.2%)  \n  1                           23 (17.2%)    22 (16.4%)     28 (21.2%)  \n  Grade 3-4                   39 (29.1%)    34 (25.4%)     46 (34.8%)  \n  3                           39 (29.1%)    34 (25.4%)     46 (34.8%)  \n  dcd B.2.2.3.1                                                        \n    - Any Grade -             38 (28.4%)    40 (29.9%)     45 (34.1%)  \n    Grade 1-2                 38 (28.4%)    40 (29.9%)     45 (34.1%)  \n    1                         38 (28.4%)    40 (29.9%)     45 (34.1%)  \n  dcd B.2.1.2.1                                                        \n    - Any Grade -             39 (29.1%)    34 (25.4%)     46 (34.8%)  \n    Grade 3-4                 39 (29.1%)    34 (25.4%)     46 (34.8%)  \n    3                         39 (29.1%)    34 (25.4%)     46 (34.8%)  \ncl D.1                                                                 \n  - Any Grade -               64 (47.8%)    54 (40.3%)     68 (51.5%)  \n  Grade 3-4                   22 (16.4%)    22 (16.4%)     22 (16.7%)  \n  3                           22 (16.4%)    22 (16.4%)     22 (16.7%)  \n  Grade 5                     42 (31.3%)    32 (23.9%)     46 (34.8%)  \n  dcd D.1.1.1.1                                                        \n    - Any Grade -             42 (31.3%)    32 (23.9%)     46 (34.8%)  \n    Grade 5                   42 (31.3%)    32 (23.9%)     46 (34.8%)  \n  dcd D.1.1.4.2                                                        \n    - Any Grade -             38 (28.4%)    34 (25.4%)     40 (30.3%)  \n    Grade 3-4                 38 (28.4%)    34 (25.4%)     40 (30.3%)  \n    3                         38 (28.4%)    34 (25.4%)     40 (30.3%)  \ncl D.2                                                                 \n  - Any Grade -               37 (27.6%)    46 (34.3%)     50 (37.9%)  \n  Grade 1-2                   37 (27.6%)    46 (34.3%)     50 (37.9%)  \n  1                           37 (27.6%)    46 (34.3%)     50 (37.9%)  \n  dcd D.2.1.5.3                                                        \n    - Any Grade -             37 (27.6%)    46 (34.3%)     50 (37.9%)  \n    Grade 1-2                 37 (27.6%)    46 (34.3%)     50 (37.9%)  \n    1                         37 (27.6%)    46 (34.3%)     50 (37.9%)  \ncl C.2                                                                 \n  - Any Grade -               28 (20.9%)    36 (26.9%)     48 (36.4%)  \n  Grade 1-2                   28 (20.9%)    36 (26.9%)     48 (36.4%)  \n  2                           28 (20.9%)    36 (26.9%)     48 (36.4%)  \n  dcd C.2.1.2.1                                                        \n    - Any Grade -             28 (20.9%)    36 (26.9%)     48 (36.4%)  \n    Grade 1-2                 28 (20.9%)    36 (26.9%)     48 (36.4%)  \n    2                         28 (20.9%)    36 (26.9%)     48 (36.4%)  \ncl B.1                                                                 \n  - Any Grade -               38 (28.4%)    37 (27.6%)     36 (27.3%)  \n  Grade 5                     38 (28.4%)    37 (27.6%)     36 (27.3%)  \n  dcd B.1.1.1.1                                                        \n    - Any Grade -             38 (28.4%)    37 (27.6%)     36 (27.3%)  \n    Grade 5                   38 (28.4%)    37 (27.6%)     36 (27.3%)  \ncl C.1                                                                 \n  - Any Grade -               36 (26.9%)    34 (25.4%)     36 (27.3%)  \n  Grade 3-4                   36 (26.9%)    34 (25.4%)     36 (27.3%)  \n  4                           36 (26.9%)    34 (25.4%)     36 (27.3%)  \n  dcd C.1.1.1.3                                                        \n    - Any Grade -             36 (26.9%)    34 (25.4%)     36 (27.3%)  \n    Grade 3-4                 36 (26.9%)    34 (25.4%)     36 (27.3%)  \n    4                         36 (26.9%)    34 (25.4%)     36 (27.3%)  \n\n\n\n\n\nCode# Variant 7 was not created.\n# With this variant, the SOC level is not trimmed (even if there are no terms left).\n\n\n\n\n\nCodecutoff <- 58L\nrow_condition <- has_count_in_any_col(atleast = cutoff, col_names = levels(adsl$ACTARM))\n\nresult <- prune_table(raw_table, keep_content_rows(my_row_condition(row_condition)))\n\nresult\n\n                       A: Drug X    B: Placebo   C: Combination\n                        (N=134)      (N=134)        (N=132)    \n———————————————————————————————————————————————————————————————\n- Any Grade -         100 (74.6%)   98 (73.1%)    103 (78.0%)  \nGrade 1-2              10 (7.5%)    15 (11.2%)     10 (7.6%)   \n1                      5 (3.7%)      7 (5.2%)       4 (3.0%)   \n2                      5 (3.7%)      8 (6.0%)       6 (4.5%)   \nGrade 3-4             26 (19.4%)    31 (23.1%)     29 (22.0%)  \n3                      13 (9.7%)    13 (9.7%)      14 (10.6%)  \n4                      13 (9.7%)    18 (13.4%)     15 (11.4%)  \nGrade 5               64 (47.8%)    52 (38.8%)     64 (48.5%)  \ncl A.1                                                         \n  - Any Grade -       68 (50.7%)    58 (43.3%)     76 (57.6%)  \n  Grade 1-2           68 (50.7%)    58 (43.3%)     76 (57.6%)  \n  1                   27 (20.1%)    19 (14.2%)     34 (25.8%)  \n  2                   41 (30.6%)    39 (29.1%)     42 (31.8%)  \n    dcd A.1.1.1.1                                              \n      - Any Grade -   45 (33.6%)    31 (23.1%)     52 (39.4%)  \n      Grade 1-2       45 (33.6%)    31 (23.1%)     52 (39.4%)  \n      1               45 (33.6%)    31 (23.1%)     52 (39.4%)  \n    dcd A.1.1.1.2                                              \n      - Any Grade -   41 (30.6%)    39 (29.1%)     42 (31.8%)  \n      Grade 1-2       41 (30.6%)    39 (29.1%)     42 (31.8%)  \n      2               41 (30.6%)    39 (29.1%)     42 (31.8%)  \ncl B.2                                                         \n  - Any Grade -       62 (46.3%)    56 (41.8%)     74 (56.1%)  \n  Grade 1-2           23 (17.2%)    22 (16.4%)     28 (21.2%)  \n  1                   23 (17.2%)    22 (16.4%)     28 (21.2%)  \n  Grade 3-4           39 (29.1%)    34 (25.4%)     46 (34.8%)  \n  3                   39 (29.1%)    34 (25.4%)     46 (34.8%)  \n    dcd B.2.2.3.1                                              \n      - Any Grade -   38 (28.4%)    40 (29.9%)     45 (34.1%)  \n      Grade 1-2       38 (28.4%)    40 (29.9%)     45 (34.1%)  \n      1               38 (28.4%)    40 (29.9%)     45 (34.1%)  \n    dcd B.2.1.2.1                                              \n      - Any Grade -   39 (29.1%)    34 (25.4%)     46 (34.8%)  \n      Grade 3-4       39 (29.1%)    34 (25.4%)     46 (34.8%)  \n      3               39 (29.1%)    34 (25.4%)     46 (34.8%)  \ncl D.1                                                         \n  - Any Grade -       64 (47.8%)    54 (40.3%)     68 (51.5%)  \n  Grade 3-4           22 (16.4%)    22 (16.4%)     22 (16.7%)  \n  3                   22 (16.4%)    22 (16.4%)     22 (16.7%)  \n  Grade 5             42 (31.3%)    32 (23.9%)     46 (34.8%)  \n    dcd D.1.1.1.1                                              \n      - Any Grade -   42 (31.3%)    32 (23.9%)     46 (34.8%)  \n      Grade 5         42 (31.3%)    32 (23.9%)     46 (34.8%)  \n    dcd D.1.1.4.2                                              \n      - Any Grade -   38 (28.4%)    34 (25.4%)     40 (30.3%)  \n      Grade 3-4       38 (28.4%)    34 (25.4%)     40 (30.3%)  \n      3               38 (28.4%)    34 (25.4%)     40 (30.3%)  \ncl D.2                                                         \n  - Any Grade -       37 (27.6%)    46 (34.3%)     50 (37.9%)  \n  Grade 1-2           37 (27.6%)    46 (34.3%)     50 (37.9%)  \n  1                   37 (27.6%)    46 (34.3%)     50 (37.9%)  \n    dcd D.2.1.5.3                                              \n      - Any Grade -   37 (27.6%)    46 (34.3%)     50 (37.9%)  \n      Grade 1-2       37 (27.6%)    46 (34.3%)     50 (37.9%)  \n      1               37 (27.6%)    46 (34.3%)     50 (37.9%)  \ncl C.2                                                         \n  - Any Grade -       28 (20.9%)    36 (26.9%)     48 (36.4%)  \n  Grade 1-2           28 (20.9%)    36 (26.9%)     48 (36.4%)  \n  2                   28 (20.9%)    36 (26.9%)     48 (36.4%)  \n    dcd C.2.1.2.1                                              \n      - Any Grade -   28 (20.9%)    36 (26.9%)     48 (36.4%)  \n      Grade 1-2       28 (20.9%)    36 (26.9%)     48 (36.4%)  \n      2               28 (20.9%)    36 (26.9%)     48 (36.4%)  \ncl B.1                                                         \n  - Any Grade -       38 (28.4%)    37 (27.6%)     36 (27.3%)  \n  Grade 5             38 (28.4%)    37 (27.6%)     36 (27.3%)  \n    dcd B.1.1.1.1                                              \n      - Any Grade -   38 (28.4%)    37 (27.6%)     36 (27.3%)  \n      Grade 5         38 (28.4%)    37 (27.6%)     36 (27.3%)  \ncl C.1                                                         \n  - Any Grade -       36 (26.9%)    34 (25.4%)     36 (27.3%)  \n  Grade 3-4           36 (26.9%)    34 (25.4%)     36 (27.3%)  \n  4                   36 (26.9%)    34 (25.4%)     36 (27.3%)  \n    dcd C.1.1.1.3                                              \n      - Any Grade -   36 (26.9%)    34 (25.4%)     36 (27.3%)  \n      Grade 3-4       36 (26.9%)    34 (25.4%)     36 (27.3%)  \n      4               36 (26.9%)    34 (25.4%)     36 (27.3%)  \n\n\n\n\n\nCodecutoff <- 0.1\nrow_condition <- has_fractions_difference(atleast = cutoff, col_names = levels(adsl$ACTARM))\n\nresult <- prune_table(raw_table, keep_content_rows(my_row_condition(row_condition)))\n\nresult\n\n                       A: Drug X    B: Placebo   C: Combination\n                        (N=134)      (N=134)        (N=132)    \n———————————————————————————————————————————————————————————————\n- Any Grade -         100 (74.6%)   98 (73.1%)    103 (78.0%)  \nGrade 1-2              10 (7.5%)    15 (11.2%)     10 (7.6%)   \n1                      5 (3.7%)      7 (5.2%)       4 (3.0%)   \n2                      5 (3.7%)      8 (6.0%)       6 (4.5%)   \nGrade 3-4             26 (19.4%)    31 (23.1%)     29 (22.0%)  \n3                      13 (9.7%)    13 (9.7%)      14 (10.6%)  \n4                      13 (9.7%)    18 (13.4%)     15 (11.4%)  \nGrade 5               64 (47.8%)    52 (38.8%)     64 (48.5%)  \ncl A.1                                                         \n  - Any Grade -       68 (50.7%)    58 (43.3%)     76 (57.6%)  \n  Grade 1-2           68 (50.7%)    58 (43.3%)     76 (57.6%)  \n  1                   27 (20.1%)    19 (14.2%)     34 (25.8%)  \n  2                   41 (30.6%)    39 (29.1%)     42 (31.8%)  \n    dcd A.1.1.1.1                                              \n      - Any Grade -   45 (33.6%)    31 (23.1%)     52 (39.4%)  \n      Grade 1-2       45 (33.6%)    31 (23.1%)     52 (39.4%)  \n      1               45 (33.6%)    31 (23.1%)     52 (39.4%)  \n    dcd A.1.1.1.2                                              \n      - Any Grade -   41 (30.6%)    39 (29.1%)     42 (31.8%)  \n      Grade 1-2       41 (30.6%)    39 (29.1%)     42 (31.8%)  \n      2               41 (30.6%)    39 (29.1%)     42 (31.8%)  \ncl B.2                                                         \n  - Any Grade -       62 (46.3%)    56 (41.8%)     74 (56.1%)  \n  Grade 1-2           23 (17.2%)    22 (16.4%)     28 (21.2%)  \n  1                   23 (17.2%)    22 (16.4%)     28 (21.2%)  \n  Grade 3-4           39 (29.1%)    34 (25.4%)     46 (34.8%)  \n  3                   39 (29.1%)    34 (25.4%)     46 (34.8%)  \n    dcd B.2.2.3.1                                              \n      - Any Grade -   38 (28.4%)    40 (29.9%)     45 (34.1%)  \n      Grade 1-2       38 (28.4%)    40 (29.9%)     45 (34.1%)  \n      1               38 (28.4%)    40 (29.9%)     45 (34.1%)  \n    dcd B.2.1.2.1                                              \n      - Any Grade -   39 (29.1%)    34 (25.4%)     46 (34.8%)  \n      Grade 3-4       39 (29.1%)    34 (25.4%)     46 (34.8%)  \n      3               39 (29.1%)    34 (25.4%)     46 (34.8%)  \ncl D.1                                                         \n  - Any Grade -       64 (47.8%)    54 (40.3%)     68 (51.5%)  \n  Grade 3-4           22 (16.4%)    22 (16.4%)     22 (16.7%)  \n  3                   22 (16.4%)    22 (16.4%)     22 (16.7%)  \n  Grade 5             42 (31.3%)    32 (23.9%)     46 (34.8%)  \n    dcd D.1.1.1.1                                              \n      - Any Grade -   42 (31.3%)    32 (23.9%)     46 (34.8%)  \n      Grade 5         42 (31.3%)    32 (23.9%)     46 (34.8%)  \n    dcd D.1.1.4.2                                              \n      - Any Grade -   38 (28.4%)    34 (25.4%)     40 (30.3%)  \n      Grade 3-4       38 (28.4%)    34 (25.4%)     40 (30.3%)  \n      3               38 (28.4%)    34 (25.4%)     40 (30.3%)  \ncl D.2                                                         \n  - Any Grade -       37 (27.6%)    46 (34.3%)     50 (37.9%)  \n  Grade 1-2           37 (27.6%)    46 (34.3%)     50 (37.9%)  \n  1                   37 (27.6%)    46 (34.3%)     50 (37.9%)  \n    dcd D.2.1.5.3                                              \n      - Any Grade -   37 (27.6%)    46 (34.3%)     50 (37.9%)  \n      Grade 1-2       37 (27.6%)    46 (34.3%)     50 (37.9%)  \n      1               37 (27.6%)    46 (34.3%)     50 (37.9%)  \ncl C.2                                                         \n  - Any Grade -       28 (20.9%)    36 (26.9%)     48 (36.4%)  \n  Grade 1-2           28 (20.9%)    36 (26.9%)     48 (36.4%)  \n  2                   28 (20.9%)    36 (26.9%)     48 (36.4%)  \n    dcd C.2.1.2.1                                              \n      - Any Grade -   28 (20.9%)    36 (26.9%)     48 (36.4%)  \n      Grade 1-2       28 (20.9%)    36 (26.9%)     48 (36.4%)  \n      2               28 (20.9%)    36 (26.9%)     48 (36.4%)  \ncl B.1                                                         \n  - Any Grade -       38 (28.4%)    37 (27.6%)     36 (27.3%)  \n  Grade 5             38 (28.4%)    37 (27.6%)     36 (27.3%)  \n    dcd B.1.1.1.1                                              \n      - Any Grade -   38 (28.4%)    37 (27.6%)     36 (27.3%)  \n      Grade 5         38 (28.4%)    37 (27.6%)     36 (27.3%)  \ncl C.1                                                         \n  - Any Grade -       36 (26.9%)    34 (25.4%)     36 (27.3%)  \n  Grade 3-4           36 (26.9%)    34 (25.4%)     36 (27.3%)  \n  4                   36 (26.9%)    34 (25.4%)     36 (27.3%)  \n    dcd C.1.1.1.3                                              \n      - Any Grade -   36 (26.9%)    34 (25.4%)     36 (27.3%)  \n      Grade 3-4       36 (26.9%)    34 (25.4%)     36 (27.3%)  \n      4               36 (26.9%)    34 (25.4%)     36 (27.3%)  \n\n\n\n\n\nCode# Variant 10 was not done\n# With this variant, SOC levels above the threshold are still in the table even if\n# there are no terms left.\n\n\n\n\n\nCodecutoff <- 0.4\nrow_condition <- has_fraction_in_any_col(atleast = cutoff, col_names = levels(adsl$ACTARM))\n\nresult <- prune_table(raw_table, keep_content_rows(my_row_condition(row_condition)))\n\nresult\n\n                       A: Drug X    B: Placebo   C: Combination\n                        (N=134)      (N=134)        (N=132)    \n———————————————————————————————————————————————————————————————\n- Any Grade -         100 (74.6%)   98 (73.1%)    103 (78.0%)  \nGrade 1-2              10 (7.5%)    15 (11.2%)     10 (7.6%)   \n1                      5 (3.7%)      7 (5.2%)       4 (3.0%)   \n2                      5 (3.7%)      8 (6.0%)       6 (4.5%)   \nGrade 3-4             26 (19.4%)    31 (23.1%)     29 (22.0%)  \n3                      13 (9.7%)    13 (9.7%)      14 (10.6%)  \n4                      13 (9.7%)    18 (13.4%)     15 (11.4%)  \nGrade 5               64 (47.8%)    52 (38.8%)     64 (48.5%)  \ncl A.1                                                         \n  - Any Grade -       68 (50.7%)    58 (43.3%)     76 (57.6%)  \n  Grade 1-2           68 (50.7%)    58 (43.3%)     76 (57.6%)  \n  1                   27 (20.1%)    19 (14.2%)     34 (25.8%)  \n  2                   41 (30.6%)    39 (29.1%)     42 (31.8%)  \n    dcd A.1.1.1.1                                              \n      - Any Grade -   45 (33.6%)    31 (23.1%)     52 (39.4%)  \n      Grade 1-2       45 (33.6%)    31 (23.1%)     52 (39.4%)  \n      1               45 (33.6%)    31 (23.1%)     52 (39.4%)  \n    dcd A.1.1.1.2                                              \n      - Any Grade -   41 (30.6%)    39 (29.1%)     42 (31.8%)  \n      Grade 1-2       41 (30.6%)    39 (29.1%)     42 (31.8%)  \n      2               41 (30.6%)    39 (29.1%)     42 (31.8%)  \ncl B.2                                                         \n  - Any Grade -       62 (46.3%)    56 (41.8%)     74 (56.1%)  \n  Grade 1-2           23 (17.2%)    22 (16.4%)     28 (21.2%)  \n  1                   23 (17.2%)    22 (16.4%)     28 (21.2%)  \n  Grade 3-4           39 (29.1%)    34 (25.4%)     46 (34.8%)  \n  3                   39 (29.1%)    34 (25.4%)     46 (34.8%)  \n    dcd B.2.2.3.1                                              \n      - Any Grade -   38 (28.4%)    40 (29.9%)     45 (34.1%)  \n      Grade 1-2       38 (28.4%)    40 (29.9%)     45 (34.1%)  \n      1               38 (28.4%)    40 (29.9%)     45 (34.1%)  \n    dcd B.2.1.2.1                                              \n      - Any Grade -   39 (29.1%)    34 (25.4%)     46 (34.8%)  \n      Grade 3-4       39 (29.1%)    34 (25.4%)     46 (34.8%)  \n      3               39 (29.1%)    34 (25.4%)     46 (34.8%)  \ncl D.1                                                         \n  - Any Grade -       64 (47.8%)    54 (40.3%)     68 (51.5%)  \n  Grade 3-4           22 (16.4%)    22 (16.4%)     22 (16.7%)  \n  3                   22 (16.4%)    22 (16.4%)     22 (16.7%)  \n  Grade 5             42 (31.3%)    32 (23.9%)     46 (34.8%)  \n    dcd D.1.1.1.1                                              \n      - Any Grade -   42 (31.3%)    32 (23.9%)     46 (34.8%)  \n      Grade 5         42 (31.3%)    32 (23.9%)     46 (34.8%)  \n    dcd D.1.1.4.2                                              \n      - Any Grade -   38 (28.4%)    34 (25.4%)     40 (30.3%)  \n      Grade 3-4       38 (28.4%)    34 (25.4%)     40 (30.3%)  \n      3               38 (28.4%)    34 (25.4%)     40 (30.3%)  \ncl D.2                                                         \n  - Any Grade -       37 (27.6%)    46 (34.3%)     50 (37.9%)  \n  Grade 1-2           37 (27.6%)    46 (34.3%)     50 (37.9%)  \n  1                   37 (27.6%)    46 (34.3%)     50 (37.9%)  \n    dcd D.2.1.5.3                                              \n      - Any Grade -   37 (27.6%)    46 (34.3%)     50 (37.9%)  \n      Grade 1-2       37 (27.6%)    46 (34.3%)     50 (37.9%)  \n      1               37 (27.6%)    46 (34.3%)     50 (37.9%)  \ncl C.2                                                         \n  - Any Grade -       28 (20.9%)    36 (26.9%)     48 (36.4%)  \n  Grade 1-2           28 (20.9%)    36 (26.9%)     48 (36.4%)  \n  2                   28 (20.9%)    36 (26.9%)     48 (36.4%)  \n    dcd C.2.1.2.1                                              \n      - Any Grade -   28 (20.9%)    36 (26.9%)     48 (36.4%)  \n      Grade 1-2       28 (20.9%)    36 (26.9%)     48 (36.4%)  \n      2               28 (20.9%)    36 (26.9%)     48 (36.4%)  \ncl B.1                                                         \n  - Any Grade -       38 (28.4%)    37 (27.6%)     36 (27.3%)  \n  Grade 5             38 (28.4%)    37 (27.6%)     36 (27.3%)  \n    dcd B.1.1.1.1                                              \n      - Any Grade -   38 (28.4%)    37 (27.6%)     36 (27.3%)  \n      Grade 5         38 (28.4%)    37 (27.6%)     36 (27.3%)  \ncl C.1                                                         \n  - Any Grade -       36 (26.9%)    34 (25.4%)     36 (27.3%)  \n  Grade 3-4           36 (26.9%)    34 (25.4%)     36 (27.3%)  \n  4                   36 (26.9%)    34 (25.4%)     36 (27.3%)  \n    dcd C.1.1.1.3                                              \n      - Any Grade -   36 (26.9%)    34 (25.4%)     36 (27.3%)  \n      Grade 3-4       36 (26.9%)    34 (25.4%)     36 (27.3%)  \n      4               36 (26.9%)    34 (25.4%)     36 (27.3%)  \n\n\n\n\n\nCodelibrary(dplyr)\nlibrary(scda)\nlibrary(teal.modules.clinical)\nlibrary(tern)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadae <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adae\")\n\napp <- init(\n  data = cdisc_data(\n    cdisc_dataset(\"ADSL\", adsl),\n    cdisc_dataset(\"ADAE\", adae),\n    code = 'ADSL <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\n    ADAE <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adae\")',\n    check = TRUE\n  ),\n  modules = modules(\n    tm_t_events_by_grade(\n      label = \"Adverse Events by Grade Table\",\n      dataname = \"ADAE\",\n      arm_var = choices_selected(c(\"ARM\", \"ARMCD\"), \"ARM\"),\n      llt = choices_selected(\n        choices = variable_choices(adae, c(\"AETERM\", \"AEDECOD\")),\n        selected = c(\"AEDECOD\")\n      ),\n      hlt = choices_selected(\n        choices = variable_choices(adae, c(\"AEBODSYS\", \"AESOC\")),\n        selected = \"AEBODSYS\"\n      ),\n      grade = choices_selected(\n        choices = variable_choices(adae, c(\"AETOXGR\", \"AESEV\")),\n        selected = \"AETOXGR\"\n      )\n    )\n  )\n)\n\n[INFO] 2023-03-10 05:22:31.5458 pid:3226 token:[] teal.modules.clinical Initializing tm_t_events_by_grade\n\nCodeshinyApp(app$ui, app$server)\n\n\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n [1] teal.modules.clinical_0.8.14.9026 teal_0.12.0.9023                 \n [3] teal.transform_0.2.0.9011         teal.data_0.1.2.9013             \n [5] shiny_1.7.4                       scda_0.1.5.9009                  \n [7] tern_0.7.10.9056                  rtables_0.6.0.1                  \n [9] formatters_0.4.0                  magrittr_2.0.3                   \n[11] dplyr_1.1.0                      \n\nloaded via a namespace (and not attached):\n [1] sass_0.4.5               tidyr_1.3.0              jsonlite_1.8.4          \n [4] splines_4.2.2            R.utils_2.12.2           bslib_0.4.2             \n [7] teal.slice_0.2.0.9026    Rdpack_2.4               assertthat_0.2.1        \n[10] teal.code_0.3.0.9001     tern.gee_0.1.0.9002      yaml_2.3.7              \n[13] pillar_1.8.1             backports_1.4.1          lattice_0.20-45         \n[16] glue_1.6.2               teal.widgets_0.2.0.9024  digest_0.6.31           \n[19] promises_1.2.0.1         rbibutils_2.2.13         checkmate_2.1.0         \n[22] colorspace_2.1-0         R.oo_1.25.0              htmltools_0.5.4         \n[25] httpuv_1.6.9             Matrix_1.5-3             pkgconfig_2.0.3         \n[28] broom_1.0.3              logger_0.2.2             purrr_1.0.1             \n[31] xtable_1.8-4             mvtnorm_1.1-3            webshot_0.5.4           \n[34] scales_1.2.1             processx_3.8.0           fontawesome_0.5.0       \n[37] later_1.3.0              emmeans_1.8.4-1          tibble_3.1.8            \n[40] styler_1.9.1             generics_0.1.3           ggplot2_3.4.1           \n[43] ellipsis_0.3.2           shinyvalidate_0.1.2      cachem_1.0.7            \n[46] withr_2.5.0              shinyjs_2.1.0            geepack_1.3.9           \n[49] cli_3.6.0                survival_3.5-3           mime_0.12               \n[52] memoise_2.0.1            ps_1.7.2                 estimability_1.4.1      \n[55] evaluate_0.20            R.methodsS3_1.8.2        fansi_1.0.4             \n[58] R.cache_0.16.0           nlme_3.1-162             MASS_7.3-58.3           \n[61] forcats_1.0.0            teal.reporter_0.1.1.9013 tools_4.2.2             \n[64] lifecycle_1.0.3          munsell_0.5.0            callr_3.7.3             \n[67] compiler_4.2.2           jquerylib_0.1.4          rlang_1.0.6             \n[70] grid_4.2.2               htmlwidgets_1.6.1        rmarkdown_2.20          \n[73] shinyWidgets_0.7.6       gtable_0.3.1             codetools_0.2-19        \n[76] teal.logger_0.1.1.9004   R6_2.5.1                 knitr_1.42              \n[79] fastmap_1.1.1            utf8_1.2.3               Rcpp_1.0.10             \n[82] vctrs_0.5.2              tidyselect_1.2.0         xfun_0.37               \n[85] coda_0.19-4             \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R                       [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/tables/adverse-events/aet04.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "tables/adverse-events/aet02.html",
    "href": "tables/adverse-events/aet02.html",
    "title": "AET02",
    "section": "",
    "text": "Data Setup\nStandard Table\nTable with  Event Totals\nTable with  High-Level Term\nTable with Preferred  Terms Only\nTable with Fill-In of  Treatment Groups\nTable of AEs with an Incidence Rate \\(\\geq\\) 5% in Any Treatment Group (subsetting  preferred terms based on frequency)\nTable of AEs with an Incidence Rate \\(\\geq\\) 5% in  Any Treatment Group (subsetting preferred terms  based on frequency with high-level terms)\nTable of AEs with an Incidence Rate \\(\\geq\\) 10%  in Any Treatment Group (subsetting  preferred terms based on frequency)\nTable of AEs with an Incidence Rate \\(\\geq\\) 3  Patients in Any Treatment Group (subsetting  preferred terms based on number of patients)\nTable of AEs with a Difference in Incidence Rate \\(\\geq\\) 5%  Between Any Treatment (subsetting preferred terms based  on difference in percentage between treatment groups)\nTable of AEs with an Incidence Rate \\(\\geq\\) 5%  in B: Placebo (subsetting preferred terms based  on frequency for a particular treatment group)\nTable of AEs with a Difference in Incidence Rate \\(\\geq\\) 5% Between  Arm A and Arm B or Arm C (displaying preferred terms with a  difference of at least x% between selected treatment groups)\nTeal\nSession Info\n\n\n\n\nCodelibrary(dplyr)\nlibrary(tern)\nlibrary(scda)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadae <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adae\")\n\n# Ensure character variables are converted to factors and empty strings and NAs are explicit missing levels.\nadsl <- df_explicit_na(adsl)\nadae <- df_explicit_na(adae)\n\n# Define the split function\nsplit_fun <- drop_split_levels\n\n\n\n\n\nCodelyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(var = \"ARM\") %>%\n  add_overall_col(label = \"All Patients\") %>%\n  analyze_num_patients(\n    vars = \"USUBJID\",\n    .stats = c(\"unique\", \"nonunique\"),\n    .labels = c(\n      unique = \"Total number of patients with at least one adverse event\",\n      nonunique = \"Overall total number of events\"\n    )\n  ) %>%\n  split_rows_by(\n    \"AEBODSYS\",\n    child_labels = \"visible\",\n    nested = FALSE,\n    split_fun = split_fun,\n    label_pos = \"topleft\",\n    split_label = obj_label(adae$AEBODSYS)\n  ) %>%\n  summarize_num_patients(\n    var = \"USUBJID\",\n    .stats = c(\"unique\", \"nonunique\"),\n    .labels = c(\n      unique = \"Total number of patients with at least one adverse event\",\n      nonunique = \"Total number of events\"\n    )\n  ) %>%\n  count_occurrences(\n    vars = \"AEDECOD\",\n    .indent_mods = -1L\n  ) %>%\n  append_varlabels(adae, \"AEDECOD\", indent = 1L)\n\nresult <- build_table(\n  lyt,\n  df = adae,\n  alt_counts_df = adsl\n)\n\n\nThe variable result corresponds to the adverse events table. However, it includes many empty rows accounting for events which were not reported. The table can be post-processed to prune empty rows and to sort rows, for example by occurrence.\n\nCoderesult <- result %>%\n  prune_table() %>%\n  sort_at_path(\n    path = c(\"AEBODSYS\"),\n    scorefun = cont_n_onecol(4)\n  ) %>%\n  sort_at_path(\n    path = c(\"AEBODSYS\", \"*\", \"AEDECOD\"),\n    scorefun = score_occurrences\n  )\nresult\n\nBody System or Organ Class                                    A: Drug X    B: Placebo    C: Combination   All Patients\n  Dictionary-Derived Term                                      (N=134)       (N=134)        (N=132)         (N=400)   \n——————————————————————————————————————————————————————————————————————————————————————————————————————————————————————\nTotal number of patients with at least one adverse event     122 (91.0%)   123 (91.8%)    120 (90.9%)     365 (91.2%) \nOverall total number of events                                   609           622            703             1934    \ncl A.1                                                                                                                \n  Total number of patients with at least one adverse event   78 (58.2%)    75 (56.0%)      89 (67.4%)     242 (60.5%) \n  Total number of events                                         132           130            160             422     \n  dcd A.1.1.1.1                                              50 (37.3%)    45 (33.6%)      63 (47.7%)     158 (39.5%) \n  dcd A.1.1.1.2                                              48 (35.8%)    48 (35.8%)      50 (37.9%)     146 (36.5%) \ncl B.2                                                                                                                \n  Total number of patients with at least one adverse event   79 (59.0%)    74 (55.2%)      85 (64.4%)     238 (59.5%) \n  Total number of events                                         129           138            143             410     \n  dcd B.2.2.3.1                                              48 (35.8%)    54 (40.3%)      51 (38.6%)     153 (38.2%) \n  dcd B.2.1.2.1                                              49 (36.6%)    44 (32.8%)      52 (39.4%)     145 (36.2%) \ncl D.1                                                                                                                \n  Total number of patients with at least one adverse event   79 (59.0%)    67 (50.0%)      80 (60.6%)     226 (56.5%) \n  Total number of events                                         127           106            135             368     \n  dcd D.1.1.1.1                                              50 (37.3%)    42 (31.3%)      51 (38.6%)     143 (35.8%) \n  dcd D.1.1.4.2                                              48 (35.8%)    42 (31.3%)      50 (37.9%)     140 (35.0%) \ncl D.2                                                                                                                \n  Total number of patients with at least one adverse event   47 (35.1%)    58 (43.3%)      57 (43.2%)     162 (40.5%) \n  Total number of events                                         62            72              74             208     \n  dcd D.2.1.5.3                                              47 (35.1%)    58 (43.3%)      57 (43.2%)     162 (40.5%) \ncl B.1                                                                                                                \n  Total number of patients with at least one adverse event   47 (35.1%)    49 (36.6%)      43 (32.6%)     139 (34.8%) \n  Total number of events                                         56            60              62             178     \n  dcd B.1.1.1.1                                              47 (35.1%)    49 (36.6%)      43 (32.6%)     139 (34.8%) \ncl C.2                                                                                                                \n  Total number of patients with at least one adverse event   35 (26.1%)    48 (35.8%)      55 (41.7%)     138 (34.5%) \n  Total number of events                                         48            53              65             166     \n  dcd C.2.1.2.1                                              35 (26.1%)    48 (35.8%)      55 (41.7%)     138 (34.5%) \ncl C.1                                                                                                                \n  Total number of patients with at least one adverse event   43 (32.1%)    46 (34.3%)      43 (32.6%)     132 (33.0%) \n  Total number of events                                         55            63              64             182     \n  dcd C.1.1.1.3                                              43 (32.1%)    46 (34.3%)      43 (32.6%)     132 (33.0%) \n\n\n\n\n\nCodelyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(var = \"ARM\") %>%\n  add_overall_col(label = \"All Patients\") %>%\n  analyze_num_patients(\n    vars = \"USUBJID\",\n    .stats = c(\"unique\", \"nonunique\"),\n    .labels = c(\n      unique = \"Total number of patients with at least one adverse event\",\n      nonunique = \"Overall total number of events\"\n    )\n  ) %>%\n  split_rows_by(\n    \"AEBODSYS\",\n    child_labels = \"visible\",\n    nested = FALSE,\n    split_fun = split_fun,\n    label_pos = \"topleft\",\n    split_label = obj_label(adae$AEBODSYS)\n  ) %>%\n  summarize_num_patients(\n    var = \"USUBJID\",\n    .stats = c(\"unique\"),\n    .labels = c(\n      unique = \"Total number of patients with at least one adverse event\"\n    )\n  ) %>%\n  count_occurrences(vars = \"AEDECOD\", .indent_mods = -1L) %>%\n  append_varlabels(adae, \"AEDECOD\", indent = 1L) %>%\n  count_values(\n    \"STUDYID\",\n    values = as.character(unique(adae$STUDYID)),\n    .stats = \"count\",\n    .labels = c(count = \"Total number of events\"),\n    .indent_mods = c(count = -1L)\n  )\n\nresult <- build_table(\n  lyt,\n  df = adae,\n  # col_count = c(table(adsl$ARM), sum(table(adsl$ARM)))\n  alt_counts_df = adsl\n) %>%\n  prune_table() %>%\n  sort_at_path(\n    path = c(\"AEBODSYS\", \"*\", \"AEDECOD\"),\n    scorefun = score_occurrences\n  ) %>%\n  sort_at_path(\n    path = c(\"AEBODSYS\"),\n    scorefun = cont_n_onecol(4)\n  )\n\nresult\n\nBody System or Organ Class                                    A: Drug X    B: Placebo    C: Combination   All Patients\n  Dictionary-Derived Term                                      (N=134)       (N=134)        (N=132)         (N=400)   \n——————————————————————————————————————————————————————————————————————————————————————————————————————————————————————\nTotal number of patients with at least one adverse event     122 (91.0%)   123 (91.8%)    120 (90.9%)     365 (91.2%) \nOverall total number of events                                   609           622            703             1934    \ncl A.1                                                                                                                \n  Total number of patients with at least one adverse event   78 (58.2%)    75 (56.0%)      89 (67.4%)     242 (60.5%) \n  dcd A.1.1.1.1                                              50 (37.3%)    45 (33.6%)      63 (47.7%)     158 (39.5%) \n  dcd A.1.1.1.2                                              48 (35.8%)    48 (35.8%)      50 (37.9%)     146 (36.5%) \n  Total number of events                                         132           130            160             422     \ncl B.2                                                                                                                \n  Total number of patients with at least one adverse event   79 (59.0%)    74 (55.2%)      85 (64.4%)     238 (59.5%) \n  dcd B.2.2.3.1                                              48 (35.8%)    54 (40.3%)      51 (38.6%)     153 (38.2%) \n  dcd B.2.1.2.1                                              49 (36.6%)    44 (32.8%)      52 (39.4%)     145 (36.2%) \n  Total number of events                                         129           138            143             410     \ncl D.1                                                                                                                \n  Total number of patients with at least one adverse event   79 (59.0%)    67 (50.0%)      80 (60.6%)     226 (56.5%) \n  dcd D.1.1.1.1                                              50 (37.3%)    42 (31.3%)      51 (38.6%)     143 (35.8%) \n  dcd D.1.1.4.2                                              48 (35.8%)    42 (31.3%)      50 (37.9%)     140 (35.0%) \n  Total number of events                                         127           106            135             368     \ncl D.2                                                                                                                \n  Total number of patients with at least one adverse event   47 (35.1%)    58 (43.3%)      57 (43.2%)     162 (40.5%) \n  dcd D.2.1.5.3                                              47 (35.1%)    58 (43.3%)      57 (43.2%)     162 (40.5%) \n  Total number of events                                         62            72              74             208     \ncl B.1                                                                                                                \n  Total number of patients with at least one adverse event   47 (35.1%)    49 (36.6%)      43 (32.6%)     139 (34.8%) \n  dcd B.1.1.1.1                                              47 (35.1%)    49 (36.6%)      43 (32.6%)     139 (34.8%) \n  Total number of events                                         56            60              62             178     \ncl C.2                                                                                                                \n  Total number of patients with at least one adverse event   35 (26.1%)    48 (35.8%)      55 (41.7%)     138 (34.5%) \n  dcd C.2.1.2.1                                              35 (26.1%)    48 (35.8%)      55 (41.7%)     138 (34.5%) \n  Total number of events                                         48            53              65             166     \ncl C.1                                                                                                                \n  Total number of patients with at least one adverse event   43 (32.1%)    46 (34.3%)      43 (32.6%)     132 (33.0%) \n  dcd C.1.1.1.3                                              43 (32.1%)    46 (34.3%)      43 (32.6%)     132 (33.0%) \n  Total number of events                                         55            63              64             182     \n\n\n\n\n\nCodelyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(var = \"ARM\") %>%\n  analyze_num_patients(\n    vars = \"USUBJID\",\n    .stats = c(\"unique\", \"nonunique\"),\n    .labels = c(\n      unique = \"Total number of patients with at least one adverse event\",\n      nonunique = \"Overall total number of events\"\n    )\n  ) %>%\n  split_rows_by(\n    \"AEBODSYS\",\n    child_labels = \"visible\",\n    nested = FALSE,\n    split_fun = split_fun,\n    label_pos = \"topleft\",\n    split_label = obj_label(adae$AEBODSYS)\n  ) %>%\n  summarize_num_patients(\n    var = \"USUBJID\",\n    .stats = c(\"unique\", \"nonunique\"),\n    .labels = c(\n      unique = \"Total number of patients with at least one adverse event\",\n      nonunique = \"Total number of events\"\n    )\n  ) %>%\n  split_rows_by(\n    \"AEHLT\",\n    child_labels = \"visible\",\n    nested = TRUE,\n    split_fun = split_fun,\n    indent_mod = -1L,\n    label_pos = \"topleft\",\n    split_label = obj_label(adae$AEHLT)\n  ) %>%\n  summarize_num_patients(\n    var = \"USUBJID\",\n    .stats = c(\"unique\", \"nonunique\"),\n    .labels = c(\n      unique = \"Total number of patients with at least one adverse event\",\n      nonunique = \"Total number of events\"\n    )\n  ) %>%\n  count_occurrences(vars = \"AEDECOD\", .indent_mods = c(count_fraction = -1L)) %>%\n  append_varlabels(adae, c(\"AEDECOD\"), indent = 2L)\n\nresult <- build_table(\n  lyt,\n  df = adae,\n  alt_counts_df = adsl\n) %>%\n  prune_table() %>%\n  sort_at_path(\n    path = c(\"AEBODSYS\"),\n    scorefun = cont_n_allcols\n  ) %>%\n  sort_at_path(\n    path = c(\"AEBODSYS\", \"*\", \"AEHLT\"),\n    scorefun = cont_n_allcols\n  ) %>%\n  sort_at_path(\n    path = c(\"AEBODSYS\", \"*\", \"AEHLT\", \"*\", \"AEDECOD\"),\n    scorefun = score_occurrences\n  )\n\nresult\n\nBody System or Organ Class                                                                               \n  High Level Term                                               A: Drug X    B: Placebo    C: Combination\n    Dictionary-Derived Term                                      (N=134)       (N=134)        (N=132)    \n—————————————————————————————————————————————————————————————————————————————————————————————————————————\nTotal number of patients with at least one adverse event       122 (91.0%)   123 (91.8%)    120 (90.9%)  \nOverall total number of events                                     609           622            703      \ncl A.1                                                                                                   \n  Total number of patients with at least one adverse event     78 (58.2%)    75 (56.0%)      89 (67.4%)  \n  Total number of events                                           132           130            160      \n  hlt A.1.1.1                                                                                            \n    Total number of patients with at least one adverse event   78 (58.2%)    75 (56.0%)      89 (67.4%)  \n    Total number of events                                         132           130            160      \n    dcd A.1.1.1.1                                              50 (37.3%)    45 (33.6%)      63 (47.7%)  \n    dcd A.1.1.1.2                                              48 (35.8%)    48 (35.8%)      50 (37.9%)  \ncl B.2                                                                                                   \n  Total number of patients with at least one adverse event     79 (59.0%)    74 (55.2%)      85 (64.4%)  \n  Total number of events                                           129           138            143      \n  hlt B.2.2.3                                                                                            \n    Total number of patients with at least one adverse event   48 (35.8%)    54 (40.3%)      51 (38.6%)  \n    Total number of events                                         64            76              77      \n    dcd B.2.2.3.1                                              48 (35.8%)    54 (40.3%)      51 (38.6%)  \n  hlt B.2.1.2                                                                                            \n    Total number of patients with at least one adverse event   49 (36.6%)    44 (32.8%)      52 (39.4%)  \n    Total number of events                                         65            62              66      \n    dcd B.2.1.2.1                                              49 (36.6%)    44 (32.8%)      52 (39.4%)  \ncl D.1                                                                                                   \n  Total number of patients with at least one adverse event     79 (59.0%)    67 (50.0%)      80 (60.6%)  \n  Total number of events                                           127           106            135      \n  hlt D.1.1.1                                                                                            \n    Total number of patients with at least one adverse event   50 (37.3%)    42 (31.3%)      51 (38.6%)  \n    Total number of events                                         61            51              71      \n    dcd D.1.1.1.1                                              50 (37.3%)    42 (31.3%)      51 (38.6%)  \n  hlt D.1.1.4                                                                                            \n    Total number of patients with at least one adverse event   48 (35.8%)    42 (31.3%)      50 (37.9%)  \n    Total number of events                                         66            55              64      \n    dcd D.1.1.4.2                                              48 (35.8%)    42 (31.3%)      50 (37.9%)  \ncl D.2                                                                                                   \n  Total number of patients with at least one adverse event     47 (35.1%)    58 (43.3%)      57 (43.2%)  \n  Total number of events                                           62            72              74      \n  hlt D.2.1.5                                                                                            \n    Total number of patients with at least one adverse event   47 (35.1%)    58 (43.3%)      57 (43.2%)  \n    Total number of events                                         62            72              74      \n    dcd D.2.1.5.3                                              47 (35.1%)    58 (43.3%)      57 (43.2%)  \ncl B.1                                                                                                   \n  Total number of patients with at least one adverse event     47 (35.1%)    49 (36.6%)      43 (32.6%)  \n  Total number of events                                           56            60              62      \n  hlt B.1.1.1                                                                                            \n    Total number of patients with at least one adverse event   47 (35.1%)    49 (36.6%)      43 (32.6%)  \n    Total number of events                                         56            60              62      \n    dcd B.1.1.1.1                                              47 (35.1%)    49 (36.6%)      43 (32.6%)  \ncl C.2                                                                                                   \n  Total number of patients with at least one adverse event     35 (26.1%)    48 (35.8%)      55 (41.7%)  \n  Total number of events                                           48            53              65      \n  hlt C.2.1.2                                                                                            \n    Total number of patients with at least one adverse event   35 (26.1%)    48 (35.8%)      55 (41.7%)  \n    Total number of events                                         48            53              65      \n    dcd C.2.1.2.1                                              35 (26.1%)    48 (35.8%)      55 (41.7%)  \ncl C.1                                                                                                   \n  Total number of patients with at least one adverse event     43 (32.1%)    46 (34.3%)      43 (32.6%)  \n  Total number of events                                           55            63              64      \n  hlt C.1.1.1                                                                                            \n    Total number of patients with at least one adverse event   43 (32.1%)    46 (34.3%)      43 (32.6%)  \n    Total number of events                                         55            63              64      \n    dcd C.1.1.1.3                                              43 (32.1%)    46 (34.3%)      43 (32.6%)  \n\n\n\n\n\nCodelyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(var = \"ARM\") %>%\n  summarize_num_patients(\n    var = \"USUBJID\",\n    .stats = c(\"unique\", \"nonunique\"),\n    .labels = c(\n      unique = \"Total number of patients with at least one adverse event\",\n      nonunique = \"Total number of events\"\n    )\n  ) %>%\n  count_occurrences(vars = \"AEDECOD\", .indent_mods = c(count_fraction = -1L)) %>%\n  append_varlabels(adae, \"AEDECOD\")\n\nresult <- build_table(\n  lyt,\n  df = adae,\n  alt_counts_df = adsl\n) %>%\n  sort_at_path(\n    path = c(\"AEDECOD\"), scorefun = score_occurrences\n  )\n\nresult\n\nDictionary-Derived Term                                     A: Drug X    B: Placebo    C: Combination\n                                                             (N=134)       (N=134)        (N=132)    \n—————————————————————————————————————————————————————————————————————————————————————————————————————\nTotal number of patients with at least one adverse event   122 (91.0%)   123 (91.8%)    120 (90.9%)  \nTotal number of events                                         609           622            703      \ndcd D.2.1.5.3                                              47 (35.1%)    58 (43.3%)      57 (43.2%)  \ndcd A.1.1.1.1                                              50 (37.3%)    45 (33.6%)      63 (47.7%)  \ndcd B.2.2.3.1                                              48 (35.8%)    54 (40.3%)      51 (38.6%)  \ndcd A.1.1.1.2                                              48 (35.8%)    48 (35.8%)      50 (37.9%)  \ndcd B.2.1.2.1                                              49 (36.6%)    44 (32.8%)      52 (39.4%)  \ndcd D.1.1.1.1                                              50 (37.3%)    42 (31.3%)      51 (38.6%)  \ndcd D.1.1.4.2                                              48 (35.8%)    42 (31.3%)      50 (37.9%)  \ndcd B.1.1.1.1                                              47 (35.1%)    49 (36.6%)      43 (32.6%)  \ndcd C.2.1.2.1                                              35 (26.1%)    48 (35.8%)      55 (41.7%)  \ndcd C.1.1.1.3                                              43 (32.1%)    46 (34.3%)      43 (32.6%)  \n\n\n\n\n\nCodeadae_5 <- adae %>% dplyr::filter(ARM != \"C: Combination\")\n\nlyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(var = \"ARM\") %>%\n  analyze_num_patients(\n    vars = \"USUBJID\",\n    .stats = c(\"unique\", \"nonunique\"),\n    .labels = c(\n      unique = \"Total number of patients with at least one adverse event\",\n      nonunique = \"Overall total number of events\"\n    )\n  ) %>%\n  split_rows_by(\n    \"AEBODSYS\",\n    child_labels = \"visible\",\n    nested = FALSE,\n    split_fun = split_fun,\n    label_pos = \"topleft\",\n    split_label = obj_label(adae$AEBODSYS)\n  ) %>%\n  summarize_num_patients(\n    var = \"USUBJID\",\n    .stats = c(\"unique\", \"nonunique\"),\n    .labels = c(\n      unique = \"Total number of patients with at least one adverse event\",\n      nonunique = \"Total number of events\"\n    )\n  ) %>%\n  count_occurrences(vars = \"AEDECOD\", .indent_mods = c(count_fraction = -1L)) %>%\n  append_varlabels(adae, \"AEDECOD\", indent = 1L)\n\nresult <- build_table(\n  lyt,\n  df = adae_5,\n  alt_counts_df = adsl\n) %>%\n  prune_table() %>%\n  sort_at_path(\n    path = c(\"AEBODSYS\"),\n    scorefun = cont_n_allcols\n  ) %>%\n  sort_at_path(\n    path = c(\"AEBODSYS\", \"*\", \"AEDECOD\"),\n    scorefun = score_occurrences\n  )\n\nresult\n\nBody System or Organ Class                                    A: Drug X    B: Placebo    C: Combination\n  Dictionary-Derived Term                                      (N=134)       (N=134)        (N=132)    \n———————————————————————————————————————————————————————————————————————————————————————————————————————\nTotal number of patients with at least one adverse event     122 (91.0%)   123 (91.8%)         0       \nOverall total number of events                                   609           622             0       \ncl A.1                                                                                                 \n  Total number of patients with at least one adverse event   78 (58.2%)    75 (56.0%)          0       \n  Total number of events                                         132           130             0       \n  dcd A.1.1.1.2                                              48 (35.8%)    48 (35.8%)          0       \n  dcd A.1.1.1.1                                              50 (37.3%)    45 (33.6%)          0       \ncl B.2                                                                                                 \n  Total number of patients with at least one adverse event   79 (59.0%)    74 (55.2%)          0       \n  Total number of events                                         129           138             0       \n  dcd B.2.2.3.1                                              48 (35.8%)    54 (40.3%)          0       \n  dcd B.2.1.2.1                                              49 (36.6%)    44 (32.8%)          0       \ncl D.1                                                                                                 \n  Total number of patients with at least one adverse event   79 (59.0%)    67 (50.0%)          0       \n  Total number of events                                         127           106             0       \n  dcd D.1.1.1.1                                              50 (37.3%)    42 (31.3%)          0       \n  dcd D.1.1.4.2                                              48 (35.8%)    42 (31.3%)          0       \ncl D.2                                                                                                 \n  Total number of patients with at least one adverse event   47 (35.1%)    58 (43.3%)          0       \n  Total number of events                                         62            72              0       \n  dcd D.2.1.5.3                                              47 (35.1%)    58 (43.3%)          0       \ncl B.1                                                                                                 \n  Total number of patients with at least one adverse event   47 (35.1%)    49 (36.6%)          0       \n  Total number of events                                         56            60              0       \n  dcd B.1.1.1.1                                              47 (35.1%)    49 (36.6%)          0       \ncl C.1                                                                                                 \n  Total number of patients with at least one adverse event   43 (32.1%)    46 (34.3%)          0       \n  Total number of events                                         55            63              0       \n  dcd C.1.1.1.3                                              43 (32.1%)    46 (34.3%)          0       \ncl C.2                                                                                                 \n  Total number of patients with at least one adverse event   35 (26.1%)    48 (35.8%)          0       \n  Total number of events                                         48            53              0       \n  dcd C.2.1.2.1                                              35 (26.1%)    48 (35.8%)          0       \n\n\n\n\n\nCodelyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(var = \"ARM\") %>%\n  split_rows_by(\n    \"AEBODSYS\",\n    child_labels = \"visible\",\n    nested = FALSE,\n    indent_mod = -1L,\n    split_fun = split_fun,\n    label_pos = \"topleft\",\n    split_label = obj_label(adae$AEBODSYS)\n  ) %>%\n  summarize_num_patients(\n    var = \"USUBJID\",\n    .stats = \"unique\",\n    .labels = \"Total number of patients with at least one adverse event\"\n  ) %>%\n  count_occurrences(\n    vars = \"AEDECOD\",\n    .indent_mods = c(count_fraction = 1L)\n  ) %>%\n  append_varlabels(adae, \"AEDECOD\", indent = 1L)\n\nresult <- build_table(\n  lyt,\n  df = adae,\n  alt_counts_df = adsl\n) %>%\n  prune_table() %>%\n  sort_at_path(\n    path = c(\"AEBODSYS\"),\n    scorefun = cont_n_allcols\n  ) %>%\n  sort_at_path(\n    path = c(\"AEBODSYS\", \"*\", \"AEDECOD\"),\n    scorefun = score_occurrences\n  )\n\ncriteria_fun <- function(tr) is(tr, \"ContentRow\")\nresult <- trim_rows(result, criteria = criteria_fun)\n\nrow_condition <- has_fraction_in_any_col(\n  atleast = 0.05,\n  col_names = names(table(adsl$ARM))\n)\nresult <- prune_table(result, keep_rows(row_condition))\n\nresult\n\nBody System or Organ Class   A: Drug X    B: Placebo   C: Combination\n  Dictionary-Derived Term     (N=134)      (N=134)        (N=132)    \n—————————————————————————————————————————————————————————————————————\ncl A.1                                                               \n  dcd A.1.1.1.1              50 (37.3%)   45 (33.6%)     63 (47.7%)  \n  dcd A.1.1.1.2              48 (35.8%)   48 (35.8%)     50 (37.9%)  \ncl B.2                                                               \n  dcd B.2.2.3.1              48 (35.8%)   54 (40.3%)     51 (38.6%)  \n  dcd B.2.1.2.1              49 (36.6%)   44 (32.8%)     52 (39.4%)  \ncl D.1                                                               \n  dcd D.1.1.1.1              50 (37.3%)   42 (31.3%)     51 (38.6%)  \n  dcd D.1.1.4.2              48 (35.8%)   42 (31.3%)     50 (37.9%)  \ncl D.2                                                               \n  dcd D.2.1.5.3              47 (35.1%)   58 (43.3%)     57 (43.2%)  \ncl B.1                                                               \n  dcd B.1.1.1.1              47 (35.1%)   49 (36.6%)     43 (32.6%)  \ncl C.2                                                               \n  dcd C.2.1.2.1              35 (26.1%)   48 (35.8%)     55 (41.7%)  \ncl C.1                                                               \n  dcd C.1.1.1.3              43 (32.1%)   46 (34.3%)     43 (32.6%)  \n\n\n\n\n\nCodelyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(var = \"ARM\") %>%\n  split_rows_by(\n    \"AEBODSYS\",\n    child_labels = \"visible\",\n    nested = TRUE,\n    split_fun = split_fun,\n    label_pos = \"topleft\",\n    split_label = obj_label(adae$AEBODSYS)\n  ) %>%\n  summarize_num_patients(\n    var = \"USUBJID\",\n    .stats = \"unique\",\n    .labels = \"Total number of patients with at least one adverse event\"\n  ) %>%\n  split_rows_by(\n    \"AEHLT\",\n    child_labels = \"visible\",\n    nested = TRUE,\n    split_fun = split_fun,\n    label_pos = \"topleft\",\n    split_label = obj_label(adae$AEHLT)\n  ) %>%\n  summarize_num_patients(\n    var = \"USUBJID\",\n    .stats = \"unique\",\n    .labels = \"Total number of patients with at least one adverse event\"\n  ) %>%\n  count_occurrences(vars = \"AEDECOD\") %>%\n  append_varlabels(adae, c(\"AEDECOD\"), indent = 2L)\n\nresult <- build_table(lyt, adae, alt_counts_df = adsl) %>%\n  prune_table() %>%\n  sort_at_path(\n    path = c(\"AEBODSYS\"),\n    scorefun = cont_n_allcols,\n    decreasing = TRUE\n  ) %>%\n  sort_at_path(\n    path = c(\"AEBODSYS\", \"*\", \"AEHLT\"),\n    scorefun = cont_n_allcols,\n    decreasing = TRUE\n  ) %>%\n  sort_at_path(\n    path = c(\"AEBODSYS\", \"*\", \"AEHLT\", \"*\", \"AEDECOD\"),\n    scorefun = score_occurrences,\n    decreasing = TRUE\n  )\n\ncriteria_fun <- function(tr) is(tr, \"ContentRow\")\nresult <- trim_rows(result, criteria = criteria_fun)\n\nrow_condition <- has_fraction_in_any_col(\n  atleast = 0.05,\n  col_names = names(table(adsl$ARM))\n)\nresult <- prune_table(result, keep_rows(row_condition))\n\nresult\n\nBody System or Organ Class                                            \n  High Level Term             A: Drug X    B: Placebo   C: Combination\n    Dictionary-Derived Term    (N=134)      (N=134)        (N=132)    \n——————————————————————————————————————————————————————————————————————\ncl A.1                                                                \n  hlt A.1.1.1                                                         \n    dcd A.1.1.1.1             50 (37.3%)   45 (33.6%)     63 (47.7%)  \n    dcd A.1.1.1.2             48 (35.8%)   48 (35.8%)     50 (37.9%)  \ncl B.2                                                                \n  hlt B.2.2.3                                                         \n    dcd B.2.2.3.1             48 (35.8%)   54 (40.3%)     51 (38.6%)  \n  hlt B.2.1.2                                                         \n    dcd B.2.1.2.1             49 (36.6%)   44 (32.8%)     52 (39.4%)  \ncl D.1                                                                \n  hlt D.1.1.1                                                         \n    dcd D.1.1.1.1             50 (37.3%)   42 (31.3%)     51 (38.6%)  \n  hlt D.1.1.4                                                         \n    dcd D.1.1.4.2             48 (35.8%)   42 (31.3%)     50 (37.9%)  \ncl D.2                                                                \n  hlt D.2.1.5                                                         \n    dcd D.2.1.5.3             47 (35.1%)   58 (43.3%)     57 (43.2%)  \ncl B.1                                                                \n  hlt B.1.1.1                                                         \n    dcd B.1.1.1.1             47 (35.1%)   49 (36.6%)     43 (32.6%)  \ncl C.2                                                                \n  hlt C.2.1.2                                                         \n    dcd C.2.1.2.1             35 (26.1%)   48 (35.8%)     55 (41.7%)  \ncl C.1                                                                \n  hlt C.1.1.1                                                         \n    dcd C.1.1.1.3             43 (32.1%)   46 (34.3%)     43 (32.6%)  \n\n\n\n\n\nCodelyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(var = \"ARM\") %>%\n  split_rows_by(\n    \"AEBODSYS\",\n    child_labels = \"visible\",\n    nested = FALSE,\n    indent_mod = -1L,\n    split_fun = split_fun,\n    label_pos = \"topleft\",\n    split_label = obj_label(adae$AEBODSYS)\n  ) %>%\n  summarize_num_patients(\n    var = \"USUBJID\",\n    .stats = \"unique\",\n    .labels = \"Total number of patients with at least one adverse event\"\n  ) %>%\n  count_occurrences(\n    vars = \"AEDECOD\",\n    .indent_mods = c(count_fraction = 1L)\n  ) %>%\n  append_varlabels(adae, \"AEDECOD\", indent = 1L)\n\nresult <- build_table(\n  lyt,\n  df = adae,\n  alt_counts_df = adsl\n) %>%\n  prune_table() %>%\n  sort_at_path(\n    path = c(\"AEBODSYS\"),\n    scorefun = cont_n_allcols\n  ) %>%\n  sort_at_path(\n    path = c(\"AEBODSYS\", \"*\", \"AEDECOD\"),\n    scorefun = score_occurrences\n  )\n\ncriteria_fun <- function(tr) is(tr, \"ContentRow\")\nresult <- trim_rows(result, criteria = criteria_fun)\n\nrow_condition <- has_fraction_in_any_col(\n  atleast = 0.10,\n  col_names = names(table(adsl$ARM))\n)\nresult <- prune_table(result, keep_rows(row_condition))\n\nresult\n\nBody System or Organ Class   A: Drug X    B: Placebo   C: Combination\n  Dictionary-Derived Term     (N=134)      (N=134)        (N=132)    \n—————————————————————————————————————————————————————————————————————\ncl A.1                                                               \n  dcd A.1.1.1.1              50 (37.3%)   45 (33.6%)     63 (47.7%)  \n  dcd A.1.1.1.2              48 (35.8%)   48 (35.8%)     50 (37.9%)  \ncl B.2                                                               \n  dcd B.2.2.3.1              48 (35.8%)   54 (40.3%)     51 (38.6%)  \n  dcd B.2.1.2.1              49 (36.6%)   44 (32.8%)     52 (39.4%)  \ncl D.1                                                               \n  dcd D.1.1.1.1              50 (37.3%)   42 (31.3%)     51 (38.6%)  \n  dcd D.1.1.4.2              48 (35.8%)   42 (31.3%)     50 (37.9%)  \ncl D.2                                                               \n  dcd D.2.1.5.3              47 (35.1%)   58 (43.3%)     57 (43.2%)  \ncl B.1                                                               \n  dcd B.1.1.1.1              47 (35.1%)   49 (36.6%)     43 (32.6%)  \ncl C.2                                                               \n  dcd C.2.1.2.1              35 (26.1%)   48 (35.8%)     55 (41.7%)  \ncl C.1                                                               \n  dcd C.1.1.1.3              43 (32.1%)   46 (34.3%)     43 (32.6%)  \n\n\n\n\n\nCodelyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(var = \"ARM\") %>%\n  split_rows_by(\n    \"AEBODSYS\",\n    child_labels = \"visible\",\n    nested = FALSE,\n    indent_mod = -1L,\n    split_fun = split_fun,\n    split_label = obj_label(adae$AEBODSYS),\n    label_pos = \"topleft\"\n  ) %>%\n  summarize_num_patients(\n    var = \"USUBJID\",\n    .stats = \"unique\",\n    .labels = \"Total number of patients with at least one adverse event\"\n  ) %>%\n  count_occurrences(\n    vars = \"AEDECOD\",\n    .indent_mods = c(count_fraction = 1L)\n  ) %>%\n  append_varlabels(adae, \"AEDECOD\", indent = 1L)\n\nresult <- build_table(\n  lyt,\n  df = adae,\n  alt_counts_df = adsl\n) %>%\n  prune_table() %>%\n  sort_at_path(\n    path = c(\"AEBODSYS\"),\n    scorefun = cont_n_allcols\n  ) %>%\n  sort_at_path(\n    path = c(\"AEBODSYS\", \"*\", \"AEDECOD\"),\n    scorefun = score_occurrences\n  )\n\ncriteria_fun <- function(tr) is(tr, \"ContentRow\")\nresult <- trim_rows(result, criteria = criteria_fun)\n\nrow_condition <- has_count_in_any_col(\n  atleast = 3,\n  col_names = names(table(adsl$ARM))\n)\nresult <- prune_table(result, keep_rows(row_condition))\n\nresult\n\nBody System or Organ Class   A: Drug X    B: Placebo   C: Combination\n  Dictionary-Derived Term     (N=134)      (N=134)        (N=132)    \n—————————————————————————————————————————————————————————————————————\ncl A.1                                                               \n  dcd A.1.1.1.1              50 (37.3%)   45 (33.6%)     63 (47.7%)  \n  dcd A.1.1.1.2              48 (35.8%)   48 (35.8%)     50 (37.9%)  \ncl B.2                                                               \n  dcd B.2.2.3.1              48 (35.8%)   54 (40.3%)     51 (38.6%)  \n  dcd B.2.1.2.1              49 (36.6%)   44 (32.8%)     52 (39.4%)  \ncl D.1                                                               \n  dcd D.1.1.1.1              50 (37.3%)   42 (31.3%)     51 (38.6%)  \n  dcd D.1.1.4.2              48 (35.8%)   42 (31.3%)     50 (37.9%)  \ncl D.2                                                               \n  dcd D.2.1.5.3              47 (35.1%)   58 (43.3%)     57 (43.2%)  \ncl B.1                                                               \n  dcd B.1.1.1.1              47 (35.1%)   49 (36.6%)     43 (32.6%)  \ncl C.2                                                               \n  dcd C.2.1.2.1              35 (26.1%)   48 (35.8%)     55 (41.7%)  \ncl C.1                                                               \n  dcd C.1.1.1.3              43 (32.1%)   46 (34.3%)     43 (32.6%)  \n\n\n\n\n\nCodelyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(var = \"ARM\") %>%\n  split_rows_by(\n    \"AEBODSYS\",\n    child_labels = \"visible\",\n    nested = FALSE,\n    indent_mod = -1L,\n    split_fun = split_fun,\n    label_pos = \"topleft\",\n    split_label = obj_label(adae$AEBODSYS)\n  ) %>%\n  summarize_num_patients(\n    var = \"USUBJID\",\n    .stats = \"unique\",\n    .labels = \"Total number of patients with at least one adverse event\"\n  ) %>%\n  count_occurrences(\n    vars = \"AEDECOD\",\n    .indent_mods = c(count_fraction = 1L)\n  ) %>%\n  append_varlabels(adae, \"AEDECOD\", indent = 1L)\n\nresult <- build_table(\n  lyt,\n  df = adae,\n  alt_counts_df = adsl\n) %>%\n  prune_table() %>%\n  sort_at_path(\n    path = c(\"AEBODSYS\"),\n    scorefun = cont_n_allcols\n  ) %>%\n  sort_at_path(\n    path = c(\"AEBODSYS\", \"*\", \"AEDECOD\"),\n    scorefun = score_occurrences\n  )\n\ncriteria_fun <- function(tr) is(tr, \"ContentRow\")\nresult <- trim_rows(result, criteria = criteria_fun)\n\nrow_condition <- has_fractions_difference(\n  atleast = 0.05,\n  col_names = levels(adsl$ARM)\n)\nresult <- prune_table(result, keep_rows(row_condition))\nresult\n\nBody System or Organ Class   A: Drug X    B: Placebo   C: Combination\n  Dictionary-Derived Term     (N=134)      (N=134)        (N=132)    \n—————————————————————————————————————————————————————————————————————\ncl A.1                                                               \n  dcd A.1.1.1.1              50 (37.3%)   45 (33.6%)     63 (47.7%)  \ncl B.2                                                               \n  dcd B.2.1.2.1              49 (36.6%)   44 (32.8%)     52 (39.4%)  \ncl D.1                                                               \n  dcd D.1.1.1.1              50 (37.3%)   42 (31.3%)     51 (38.6%)  \n  dcd D.1.1.4.2              48 (35.8%)   42 (31.3%)     50 (37.9%)  \ncl D.2                                                               \n  dcd D.2.1.5.3              47 (35.1%)   58 (43.3%)     57 (43.2%)  \ncl C.2                                                               \n  dcd C.2.1.2.1              35 (26.1%)   48 (35.8%)     55 (41.7%)  \n\n\n\n\n\nCodelyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(var = \"ARM\") %>%\n  split_rows_by(\n    \"AEBODSYS\",\n    child_labels = \"visible\",\n    nested = FALSE,\n    indent_mod = -1L,\n    split_fun = split_fun,\n    label_pos = \"topleft\",\n    split_label = obj_label(adae$AEBODSYS)\n  ) %>%\n  summarize_num_patients(\n    var = \"USUBJID\",\n    .stats = \"unique\",\n    .labels = \"Total number of patients with at least one adverse event\"\n  ) %>%\n  count_occurrences(\n    vars = \"AEDECOD\",\n    .indent_mods = c(count_fraction = 1L)\n  ) %>%\n  append_varlabels(adae, \"AEDECOD\", indent = 1L)\nresult <- build_table(\n  lyt,\n  df = adae,\n  alt_counts_df = adsl\n) %>%\n  prune_table() %>%\n  sort_at_path(\n    path = c(\"AEBODSYS\"),\n    scorefun = cont_n_allcols\n  ) %>%\n  sort_at_path(\n    path = c(\"AEBODSYS\", \"*\", \"AEDECOD\"),\n    scorefun = score_occurrences\n  )\ncriteria_fun <- function(tr) is(tr, \"ContentRow\")\nresult <- trim_rows(result, criteria = criteria_fun)\nrow_condition <- has_fraction_in_cols(\n  atleast = 0.05,\n  col_names = c(\"B: Placebo\")\n)\nresult <- prune_table(result, keep_rows(row_condition))\nresult\n\nBody System or Organ Class   A: Drug X    B: Placebo   C: Combination\n  Dictionary-Derived Term     (N=134)      (N=134)        (N=132)    \n—————————————————————————————————————————————————————————————————————\ncl A.1                                                               \n  dcd A.1.1.1.1              50 (37.3%)   45 (33.6%)     63 (47.7%)  \n  dcd A.1.1.1.2              48 (35.8%)   48 (35.8%)     50 (37.9%)  \ncl B.2                                                               \n  dcd B.2.2.3.1              48 (35.8%)   54 (40.3%)     51 (38.6%)  \n  dcd B.2.1.2.1              49 (36.6%)   44 (32.8%)     52 (39.4%)  \ncl D.1                                                               \n  dcd D.1.1.1.1              50 (37.3%)   42 (31.3%)     51 (38.6%)  \n  dcd D.1.1.4.2              48 (35.8%)   42 (31.3%)     50 (37.9%)  \ncl D.2                                                               \n  dcd D.2.1.5.3              47 (35.1%)   58 (43.3%)     57 (43.2%)  \ncl B.1                                                               \n  dcd B.1.1.1.1              47 (35.1%)   49 (36.6%)     43 (32.6%)  \ncl C.2                                                               \n  dcd C.2.1.2.1              35 (26.1%)   48 (35.8%)     55 (41.7%)  \ncl C.1                                                               \n  dcd C.1.1.1.3              43 (32.1%)   46 (34.3%)     43 (32.6%)  \n\n\n\n\n\nCodelyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(var = \"ARM\") %>%\n  split_rows_by(\n    \"AEBODSYS\",\n    child_labels = \"visible\",\n    nested = FALSE,\n    indent_mod = -1L,\n    split_fun = split_fun,\n    label_pos = \"topleft\",\n    split_label = obj_label(adae$AEBODSYS)\n  ) %>%\n  summarize_num_patients(\n    var = \"USUBJID\",\n    .stats = \"unique\",\n    .labels = \"Total number of patients with at least one adverse event\"\n  ) %>%\n  count_occurrences(\n    vars = \"AEDECOD\",\n    .indent_mods = c(count_fraction = 1L)\n  ) %>%\n  append_varlabels(adae, \"AEDECOD\", indent = 1L)\n\nresult <- build_table(\n  lyt,\n  df = adae,\n  alt_counts_df = adsl\n) %>%\n  prune_table() %>%\n  sort_at_path(\n    path = c(\"AEBODSYS\"),\n    scorefun = cont_n_allcols\n  ) %>%\n  sort_at_path(\n    path = c(\"AEBODSYS\", \"*\", \"AEDECOD\"),\n    scorefun = score_occurrences\n  )\n\ncriteria_fun <- function(tr) is(tr, \"ContentRow\")\nresult <- trim_rows(result, criteria = criteria_fun)\n\nrow_condition1 <- has_fractions_difference(atleast = 0.05, col_names = c(\"A: Drug X\", \"B: Placebo\"))\nrow_condition2 <- has_fractions_difference(atleast = 0.05, col_names = c(\"A: Drug X\", \"C: Combination\"))\nrow_condition <- row_condition1 | row_condition2\n\nresult <- prune_table(result, keep_rows(row_condition))\nresult\n\nBody System or Organ Class   A: Drug X    B: Placebo   C: Combination\n  Dictionary-Derived Term     (N=134)      (N=134)        (N=132)    \n—————————————————————————————————————————————————————————————————————\ncl A.1                                                               \n  dcd A.1.1.1.1              50 (37.3%)   45 (33.6%)     63 (47.7%)  \ncl D.1                                                               \n  dcd D.1.1.1.1              50 (37.3%)   42 (31.3%)     51 (38.6%)  \ncl D.2                                                               \n  dcd D.2.1.5.3              47 (35.1%)   58 (43.3%)     57 (43.2%)  \ncl C.2                                                               \n  dcd C.2.1.2.1              35 (26.1%)   48 (35.8%)     55 (41.7%)  \n\n\n\n\n\nCodelibrary(teal.modules.clinical)\nlibrary(dplyr)\nlibrary(scda)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadae <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adae\")\n\n# Ensure character variables are converted to factors and empty strings and NAs are explicit missing levels.\nadsl <- df_explicit_na(adsl)\nadae <- df_explicit_na(adae)\n\napp <- teal::init(\n  data = cdisc_data(\n    cdisc_dataset(\"ADSL\", adsl, code = 'ADSL <- df_explicit_na(synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\"))'),\n    cdisc_dataset(\"ADAE\", adae, code = 'ADAE <- df_explicit_na(synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adae\"))'),\n    check = TRUE\n  ),\n  modules = modules(\n    tm_t_events(\n      label = \"Adverse Event Table\",\n      dataname = \"ADAE\",\n      arm_var = choices_selected(c(\"ARM\", \"ARMCD\"), \"ARM\"),\n      llt = choices_selected(\n        choices = variable_choices(adae, c(\"AETERM\", \"AEDECOD\")),\n        selected = c(\"AEDECOD\")\n      ),\n      hlt = choices_selected(\n        choices = variable_choices(adae, c(\"AEBODSYS\", \"AESOC\")),\n        selected = \"AEBODSYS\"\n      ),\n      add_total = TRUE,\n      event_type = \"adverse event\"\n    )\n  )\n)\n\n[INFO] 2023-03-10 05:23:04.5094 pid:3302 token:[] teal.modules.clinical Initializing tm_t_events\n\nCodeshinyApp(app$ui, app$server)\n\n\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n [1] teal.modules.clinical_0.8.14.9026 teal_0.12.0.9023                 \n [3] teal.transform_0.2.0.9011         teal.data_0.1.2.9013             \n [5] shiny_1.7.4                       scda_0.1.5.9009                  \n [7] tern_0.7.10.9056                  rtables_0.6.0.1                  \n [9] formatters_0.4.0                  magrittr_2.0.3                   \n[11] dplyr_1.1.0                      \n\nloaded via a namespace (and not attached):\n [1] sass_0.4.5               tidyr_1.3.0              jsonlite_1.8.4          \n [4] splines_4.2.2            R.utils_2.12.2           bslib_0.4.2             \n [7] teal.slice_0.2.0.9026    Rdpack_2.4               assertthat_0.2.1        \n[10] teal.code_0.3.0.9001     tern.gee_0.1.0.9002      yaml_2.3.7              \n[13] pillar_1.8.1             backports_1.4.1          lattice_0.20-45         \n[16] glue_1.6.2               teal.widgets_0.2.0.9024  digest_0.6.31           \n[19] promises_1.2.0.1         rbibutils_2.2.13         checkmate_2.1.0         \n[22] colorspace_2.1-0         R.oo_1.25.0              htmltools_0.5.4         \n[25] httpuv_1.6.9             Matrix_1.5-3             pkgconfig_2.0.3         \n[28] broom_1.0.3              logger_0.2.2             purrr_1.0.1             \n[31] xtable_1.8-4             mvtnorm_1.1-3            webshot_0.5.4           \n[34] scales_1.2.1             processx_3.8.0           fontawesome_0.5.0       \n[37] later_1.3.0              emmeans_1.8.4-1          tibble_3.1.8            \n[40] styler_1.9.1             generics_0.1.3           ggplot2_3.4.1           \n[43] ellipsis_0.3.2           shinyvalidate_0.1.2      cachem_1.0.7            \n[46] withr_2.5.0              shinyjs_2.1.0            geepack_1.3.9           \n[49] cli_3.6.0                survival_3.5-3           mime_0.12               \n[52] memoise_2.0.1            ps_1.7.2                 estimability_1.4.1      \n[55] evaluate_0.20            R.methodsS3_1.8.2        fansi_1.0.4             \n[58] R.cache_0.16.0           nlme_3.1-162             MASS_7.3-58.3           \n[61] forcats_1.0.0            teal.reporter_0.1.1.9013 tools_4.2.2             \n[64] lifecycle_1.0.3          munsell_0.5.0            callr_3.7.3             \n[67] compiler_4.2.2           jquerylib_0.1.4          rlang_1.0.6             \n[70] grid_4.2.2               htmlwidgets_1.6.1        rmarkdown_2.20          \n[73] shinyWidgets_0.7.6       gtable_0.3.1             codetools_0.2-19        \n[76] teal.logger_0.1.1.9004   R6_2.5.1                 knitr_1.42              \n[79] fastmap_1.1.1            utf8_1.2.3               Rcpp_1.0.10             \n[82] vctrs_0.5.2              tidyselect_1.2.0         xfun_0.37               \n[85] coda_0.19-4             \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R                       [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/tables/adverse-events/aet02.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "tables/adverse-events/aet05.html",
    "href": "tables/adverse-events/aet05.html",
    "title": "AET05",
    "section": "",
    "text": "Data Setup\nStandard Table\nTable Setting Type of Confidence Interval\nTeal\nSession Info\n\n\n\n\nCodelibrary(dplyr)\nlibrary(scda)\nlibrary(tern)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadaette <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adaette\")\n\n# Ensure character variables are converted to factors and empty strings and NAs are explicit missing levels.\nadsl <- df_explicit_na(adsl)\nadaette <- df_explicit_na(adaette)\n\nanl <- adaette %>%\n  dplyr::filter(PARAM == \"Time to first occurrence of any adverse event\") %>%\n  dplyr::mutate(is_event = CNSR == 0) %>%\n  dplyr::mutate(n_events = as.integer(is_event))\n\n\n\n\n\nCodelyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ARM\") %>%\n  estimate_incidence_rate(\n    vars = \"AVAL\",\n    n_events = \"n_events\",\n    control = control_incidence_rate(time_unit_output = 100)\n  )\n\nresult <- build_table(\n  lyt,\n  anl,\n  alt_counts_df = adsl\n)\n\nresult\n\n                                      A: Drug X        B: Placebo      C: Combination\n                                       (N=134)           (N=134)          (N=132)    \n—————————————————————————————————————————————————————————————————————————————————————\nTotal patient-years at risk             162.4             103.9            172.6     \nNumber of adverse events observed         78               104               67      \nAE rate per 100 patient-years           48.03            100.14            38.82     \n95% CI                              (37.37, 58.69)   (80.89, 119.39)   (29.53, 48.12)\n\n\n\n\nThe type of confidence interval can be specified through the conf_type argument.\n\nCodelyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ARM\") %>%\n  estimate_incidence_rate(\n    vars = \"AVAL\",\n    n_events = \"n_events\",\n    control = control_incidence_rate(\n      conf_level = 0.95,\n      conf_type = \"exact\",\n      time_unit_output = 100\n    )\n  )\n\nresult <- build_table(\n  lyt,\n  anl,\n  alt_counts_df = adsl\n)\n\nresult\n\n                                      A: Drug X        B: Placebo      C: Combination\n                                       (N=134)           (N=134)          (N=132)    \n—————————————————————————————————————————————————————————————————————————————————————\nTotal patient-years at risk             162.4             103.9            172.6     \nNumber of adverse events observed         78               104               67      \nAE rate per 100 patient-years           48.03            100.14            38.82     \n95% CI                              (37.97, 59.95)   (81.82, 121.34)   (30.09, 49.30)\n\n\n\n\n\nCodelibrary(scda)\nlibrary(teal.modules.clinical)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadaette <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adaette\")\n\n# Ensure character variables are converted to factors and empty strings and NAs are explicit missing levels.\nadsl <- df_explicit_na(adsl)\nadaette <- df_explicit_na(adaette)\n\nadaette <- adaette %>%\n  dplyr::filter(PARAMCD %in% c(\"AETTE1\", \"AETTE2\", \"AETTE3\")) %>%\n  dplyr::mutate(is_event = CNSR == 0) %>%\n  dplyr::mutate(n_events = as.integer(is_event))\n\napp <- init(\n  data = cdisc_data(\n    cdisc_dataset(\"ADSL\", adsl),\n    cdisc_dataset(\"ADAETTE\", adaette),\n    code =\n      'ADSL <- df_explicit_na(synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\"))\n       ADAETTE <- df_explicit_na(synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adaette\"))\n       ADAETTE <- ADAETTE %>%\n  dplyr::filter(PARAMCD %in% c(\"AETTE1\", \"AETTE2\", \"AETTE3\")) %>%\n  dplyr::mutate(is_event = CNSR == 0) %>%\n  dplyr::mutate(n_events = as.integer(is_event))',\n    check = TRUE\n  ),\n  modules = modules(\n    tm_t_events_patyear(\n      label = \"AE rate adjusted for patient-years at risk Table\",\n      dataname = \"ADAETTE\",\n      arm_var = choices_selected(\n        choices = variable_choices(adsl, c(\"ARM\", \"ARMCD\")),\n        selected = \"ARMCD\"\n      ),\n      paramcd = choices_selected(\n        choices = value_choices(adaette, \"PARAMCD\", \"PARAM\"),\n        selected = \"AETTE1\"\n      ),\n      events_var = choices_selected(\n        choices = variable_choices(adaette, \"n_events\"),\n        selected = \"n_events\",\n        fixed = TRUE\n      )\n    )\n  )\n)\n\n[INFO] 2023-03-10 05:23:28.7327 pid:3380 token:[] teal.modules.clinical Initializing tm_t_events_patyear\n\nCodeshinyApp(app$ui, app$server)\n\n\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n [1] teal.modules.clinical_0.8.14.9026 teal_0.12.0.9023                 \n [3] teal.transform_0.2.0.9011         teal.data_0.1.2.9013             \n [5] shiny_1.7.4                       tern_0.7.10.9056                 \n [7] rtables_0.6.0.1                   formatters_0.4.0                 \n [9] magrittr_2.0.3                    scda_0.1.5.9009                  \n[11] dplyr_1.1.0                      \n\nloaded via a namespace (and not attached):\n [1] sass_0.4.5               tidyr_1.3.0              jsonlite_1.8.4          \n [4] splines_4.2.2            R.utils_2.12.2           bslib_0.4.2             \n [7] teal.slice_0.2.0.9026    Rdpack_2.4               assertthat_0.2.1        \n[10] teal.code_0.3.0.9001     tern.gee_0.1.0.9002      yaml_2.3.7              \n[13] pillar_1.8.1             backports_1.4.1          lattice_0.20-45         \n[16] glue_1.6.2               teal.widgets_0.2.0.9024  digest_0.6.31           \n[19] promises_1.2.0.1         rbibutils_2.2.13         checkmate_2.1.0         \n[22] colorspace_2.1-0         R.oo_1.25.0              htmltools_0.5.4         \n[25] httpuv_1.6.9             Matrix_1.5-3             pkgconfig_2.0.3         \n[28] broom_1.0.3              logger_0.2.2             purrr_1.0.1             \n[31] xtable_1.8-4             mvtnorm_1.1-3            webshot_0.5.4           \n[34] scales_1.2.1             processx_3.8.0           fontawesome_0.5.0       \n[37] later_1.3.0              emmeans_1.8.4-1          tibble_3.1.8            \n[40] styler_1.9.1             generics_0.1.3           ggplot2_3.4.1           \n[43] ellipsis_0.3.2           shinyvalidate_0.1.2      cachem_1.0.7            \n[46] withr_2.5.0              shinyjs_2.1.0            geepack_1.3.9           \n[49] cli_3.6.0                survival_3.5-3           mime_0.12               \n[52] memoise_2.0.1            ps_1.7.2                 estimability_1.4.1      \n[55] evaluate_0.20            R.methodsS3_1.8.2        fansi_1.0.4             \n[58] R.cache_0.16.0           nlme_3.1-162             MASS_7.3-58.3           \n[61] forcats_1.0.0            teal.reporter_0.1.1.9013 tools_4.2.2             \n[64] lifecycle_1.0.3          munsell_0.5.0            callr_3.7.3             \n[67] compiler_4.2.2           jquerylib_0.1.4          rlang_1.0.6             \n[70] grid_4.2.2               htmlwidgets_1.6.1        rmarkdown_2.20          \n[73] shinyWidgets_0.7.6       gtable_0.3.1             codetools_0.2-19        \n[76] teal.logger_0.1.1.9004   R6_2.5.1                 knitr_1.42              \n[79] fastmap_1.1.1            utf8_1.2.3               Rcpp_1.0.10             \n[82] vctrs_0.5.2              tidyselect_1.2.0         xfun_0.37               \n[85] coda_0.19-4             \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R                       [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/tables/adverse-events/aet05.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "tables/adverse-events/aet06_smq.html",
    "href": "tables/adverse-events/aet06_smq.html",
    "title": "AET06_SMQ",
    "section": "",
    "text": "Data Setup\nAdverse Events by Sex,  by SMQ and Preferred Term\nAdverse Events by Sex, by SMQ and  Preferred Term (with Customized Queries)\nAdverse Events by Other Baseline  Characteristics (e.g. Age Group)\nTeal\nSession Info\n\n\n\n\nCodelibrary(dplyr)\nlibrary(tern)\nlibrary(scda)\nlibrary(stringr)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadae <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adae\")\n\nadsl_labels <- var_labels(adsl)\nadae_labels <- var_labels(adae)\n\nadsl <- adsl %>%\n  mutate(\n    AGE65 = case_when(\n      AGE >= 65 ~ \">= 65\",\n      TRUE ~ \"< 65\"\n    ),\n    AGE65 = factor(\n      AGE65,\n      levels = c(\"< 65\", \">= 65\")\n    )\n  )\n\nadae <- adae %>%\n  mutate(\n    AGE65 = case_when(\n      AGE >= 65 ~ \">= 65\",\n      TRUE ~ \"< 65\"\n    ),\n    AGE65 = factor(\n      AGE65,\n      levels = c(\"< 65\", \">= 65\")\n    )\n  )\n\n# Ensure character variables are converted to factors and empty strings and NAs are explicit missing\n# levels. For details, refer to Teal and Study Data article.\nadsl <- df_explicit_na(adsl)\nadae <- df_explicit_na(adae)\n\n# Simulate a random AAG dataset.\naag <- data.frame(\n  NAMVAR = c(\"SMQ01NAM\", \"SMQ01NAM\", \"SMQ02NAM\", \"CQ01NAM\", \"CQ01NAM\"),\n  SRCVAR = rep(\"AEDECOD\", 5),\n  GRPTYPE = c(\"SMQ\", \"SMQ\", \"SMQ\", \"CUSTOM\", \"CUSTOM\"),\n  REFID = c(1, 1, 2, 3, 3),\n  REFNAME = c(rep(\"C.1.1.1.3/B.2.2.3.1 AESI\", 2), \"non observed SMQ02NAM level\", rep(\"D.2.1.5.3/A.1.1.1.1 AESI\", 2)),\n  SCOPE = c(\"BROAD\", \"BROAD\", \"BROAD\", \"\", \"\"),\n  REFTERM = c(\"C.1.1.1.3\", \"B.2.2.3.1\", \"Z.9.9.9.9\", \"D.2.1.5.3\", \"A.1.1.1.1\"),\n  stringsAsFactors = FALSE\n)\n\n# Create summary AAG dataset (used for labelling).\n# Note it's important to incorporate SCOPE into the basket names for SMQs so as to\n# match the flags present in ADAE.\naag_summary <- aag %>%\n  select(NAMVAR, REFNAME, SCOPE) %>%\n  unique() %>%\n  mutate(\n    REFNAME_SCOPE = ifelse(SCOPE == \"\", REFNAME, paste0(REFNAME, \"(\", SCOPE, \")\"))\n  ) %>%\n  rename(basket = NAMVAR, basket_name = REFNAME_SCOPE) %>%\n  select(basket, basket_name)\n\n# Make a summary of the full ADAE based on AAG by using h_stack_by_baskets helper function\nadae_smq_all <- h_stack_by_baskets(\n  df = adae,\n  aag_summary = aag_summary,\n  keys = c(\"STUDYID\", \"USUBJID\", \"ACTARMCD\", \"AEDECOD\", \"SEX\", \"AGE65\")\n)\n# Post-process adae_smq_all to keep only certain baskets of interest for variant 1\n# Not need to drop baskets for variant 2 as all baskets will be considered.\nbaskets_to_drop_variant <- aag_summary$basket_name[!aag_summary$basket %in% c(\"SMQ01NAM\")]\n\n# Adjust the analysis dataset based on basket subset for variant 1.\nadae_smq_1 <- adae_smq_all %>%\n  filter(!adae_smq_all$SMQ %in% baskets_to_drop_variant) %>%\n  mutate(\n    SMQ = tern::fct_discard(SMQ, discard = baskets_to_drop_variant)\n  )\n\n\n\n\n\nCodecriteria_fun <- function(tr) !is(tr, \"ContentRow\") && all_zero_or_na(tr)\n\nlyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ACTARMCD\") %>%\n  split_cols_by(\"SEX\") %>%\n  analyze_num_patients(\n    vars = \"USUBJID\",\n    .stats = c(\"unique\"),\n    .labels = c(unique = \"Total number of patients with at least one adverse event\")\n  ) %>%\n  split_rows_by(\n    \"SMQ\",\n    child_labels = \"visible\",\n    nested = FALSE,\n    split_fun = trim_levels_in_group(\"AEDECOD\", drop_outlevs = FALSE),\n    label_pos = \"topleft\",\n    split_label = \"Standardized MedDRA Query\"\n  ) %>%\n  summarize_num_patients(\n    var = \"USUBJID\",\n    .stats = c(\"unique\", \"nonunique\"),\n    .labels = c(\n      unique = \"Total number of patients with at least one adverse event\",\n      nonunique = \"Total number of events\"\n    )\n  ) %>%\n  count_occurrences(vars = \"AEDECOD\", drop = FALSE) %>%\n  append_varlabels(adae_smq_1, \"AEDECOD\", indent = 1L)\n\nresult <- build_table(\n  lyt = lyt,\n  df = adae_smq_1,\n  alt_counts_df = adsl\n) %>%\n  sort_at_path(path = c(\"SMQ\"), scorefun = cont_n_allcols) %>%\n  sort_at_path(path = c(\"SMQ\", \"*\", \"AEDECOD\"), scorefun = score_occurrences, na.pos = \"last\") %>%\n  trim_rows(criteria = criteria_fun)\n\nresult\n\nStandardized MedDRA Query                                             ARM A                     ARM B                     ARM C         \n  Dictionary-Derived Term                                        F            M            F            M            F            M     \n                                                               (N=79)       (N=55)       (N=82)       (N=52)       (N=70)       (N=62)  \n————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————\nTotal number of patients with at least one adverse event     47 (59.5%)   25 (45.5%)   51 (62.2%)   28 (53.8%)   42 (60.0%)   33 (53.2%)\nC.1.1.1.3/B.2.2.3.1 AESI(BROAD)                                                                                                         \n  Total number of patients with at least one adverse event   47 (59.5%)   25 (45.5%)   51 (62.2%)   28 (53.8%)   42 (60.0%)   33 (53.2%)\n  Total number of events                                         79           40           95           44           81           60    \n    dcd B.2.2.3.1                                            30 (38.0%)   18 (32.7%)   32 (39.0%)   22 (42.3%)   26 (37.1%)   25 (40.3%)\n    dcd C.1.1.1.3                                            30 (38.0%)   13 (23.6%)   36 (43.9%)   10 (19.2%)   27 (38.6%)   16 (25.8%)\n\n\n\n\n\nCodecriteria_fun <- function(tr) !is(tr, \"ContentRow\") && all_zero_or_na(tr)\n\nlyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ACTARMCD\") %>%\n  split_cols_by(\"SEX\") %>%\n  analyze_num_patients(\n    vars = \"USUBJID\",\n    .stats = c(\"unique\"),\n    .labels = c(unique = \"Total number of patients with at least one adverse event\")\n  ) %>%\n  split_rows_by(\n    \"SMQ\",\n    child_labels = \"visible\",\n    nested = FALSE,\n    split_fun = trim_levels_in_group(\"AEDECOD\", drop_outlevs = FALSE),\n    label_pos = \"topleft\",\n    split_label = \"Standardized MedDRA Query\"\n  ) %>%\n  summarize_num_patients(\n    var = \"USUBJID\",\n    .stats = c(\"unique\", \"nonunique\"),\n    .labels = c(\n      unique = \"Total number of patients with at least one adverse event\",\n      nonunique = \"Total number of events\"\n    )\n  ) %>%\n  count_occurrences(vars = \"AEDECOD\", drop = FALSE) %>%\n  append_varlabels(adae_smq_all, \"AEDECOD\", indent = 1L)\n\nresult <- build_table(\n  lyt = lyt,\n  df = adae_smq_all,\n  alt_counts_df = adsl\n) %>%\n  sort_at_path(path = c(\"SMQ\"), scorefun = cont_n_allcols) %>%\n  sort_at_path(path = c(\"SMQ\", \"*\", \"AEDECOD\"), scorefun = score_occurrences, na.pos = \"last\") %>%\n  trim_rows(criteria = criteria_fun)\n\nresult\n\nStandardized MedDRA Query                                             ARM A                     ARM B                     ARM C         \n  Dictionary-Derived Term                                        F            M            F            M            F            M     \n                                                               (N=79)       (N=55)       (N=82)       (N=52)       (N=70)       (N=62)  \n————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————\nTotal number of patients with at least one adverse event     59 (74.7%)   36 (65.5%)   68 (82.9%)   35 (67.3%)   61 (87.1%)   47 (75.8%)\nD.2.1.5.3/A.1.1.1.1 AESI                                                                                                                \n  Total number of patients with at least one adverse event   45 (57.0%)   29 (52.7%)   54 (65.9%)   26 (50.0%)   50 (71.4%)   37 (59.7%)\n  Total number of events                                         78           48           91           43           88           74    \n    dcd D.2.1.5.3                                            26 (32.9%)   21 (38.2%)   40 (48.8%)   18 (34.6%)   34 (48.6%)   23 (37.1%)\n    dcd A.1.1.1.1                                            34 (43.0%)   16 (29.1%)   31 (37.8%)   14 (26.9%)   33 (47.1%)   30 (48.4%)\nC.1.1.1.3/B.2.2.3.1 AESI(BROAD)                                                                                                         \n  Total number of patients with at least one adverse event   47 (59.5%)   25 (45.5%)   51 (62.2%)   28 (53.8%)   42 (60.0%)   33 (53.2%)\n  Total number of events                                         79           40           95           44           81           60    \n    dcd B.2.2.3.1                                            30 (38.0%)   18 (32.7%)   32 (39.0%)   22 (42.3%)   26 (37.1%)   25 (40.3%)\n    dcd C.1.1.1.3                                            30 (38.0%)   13 (23.6%)   36 (43.9%)   10 (19.2%)   27 (38.6%)   16 (25.8%)\nnon observed SMQ02NAM level(BROAD)                                                                                                      \n  Total number of patients with at least one adverse event       0            0            0            0            0            0     \n  Total number of events                                         0            0            0            0            0            0     \n\n\n\n\n\nCodecriteria_fun <- function(tr) !is(tr, \"ContentRow\") && all_zero_or_na(tr)\n\nlyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ACTARMCD\") %>%\n  split_cols_by(\"AGE65\") %>%\n  analyze_num_patients(\n    vars = \"USUBJID\",\n    .stats = c(\"unique\"),\n    .labels = c(unique = \"Total number of patients with at least one adverse event\")\n  ) %>%\n  split_rows_by(\n    \"SMQ\",\n    child_labels = \"visible\",\n    nested = FALSE,\n    split_fun = trim_levels_in_group(\"AEDECOD\", drop_outlevs = FALSE),\n    label_pos = \"topleft\",\n    split_label = \"Standardized MedDRA Query\"\n  ) %>%\n  summarize_num_patients(\n    var = \"USUBJID\",\n    .stats = c(\"unique\", \"nonunique\"),\n    .labels = c(\n      unique = \"Total number of patients with at least one adverse event\",\n      nonunique = \"Total number of events\"\n    )\n  ) %>%\n  count_occurrences(vars = \"AEDECOD\", drop = FALSE) %>%\n  append_varlabels(adae_smq_1, \"AEDECOD\", indent = 1L)\n\nresult <- build_table(\n  lyt = lyt,\n  df = adae_smq_1,\n  alt_counts_df = adsl\n) %>%\n  sort_at_path(path = c(\"SMQ\"), scorefun = cont_n_allcols) %>%\n  sort_at_path(path = c(\"SMQ\", \"*\", \"AEDECOD\"), scorefun = score_occurrences, na.pos = \"last\") %>%\n  trim_rows(criteria = criteria_fun)\n\nresult\n\nStandardized MedDRA Query                                          ARM A                ARM B                ARM C       \n  Dictionary-Derived Term                                       < 65      >= 65      < 65      >= 65      < 65      >= 65\n                                                              (N=134)     (N=0)    (N=134)     (N=0)    (N=131)     (N=1)\n—————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————\nTotal number of patients with at least one adverse event     72 (53.7%)     0     79 (59.0%)     0     75 (57.3%)     0  \nC.1.1.1.3/B.2.2.3.1 AESI(BROAD)                                                                                          \n  Total number of patients with at least one adverse event   72 (53.7%)     0     79 (59.0%)     0     75 (57.3%)     0  \n  Total number of events                                        119         0        139         0        141         0  \n    dcd B.2.2.3.1                                            48 (35.8%)     0     54 (40.3%)     0     51 (38.9%)     0  \n    dcd C.1.1.1.3                                            43 (32.1%)     0     46 (34.3%)     0     43 (32.8%)     0  \n\n\n\n\n\nCodelibrary(scda)\nlibrary(teal.modules.clinical)\nlibrary(dplyr)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\") %>%\n  mutate(\n    AGE65 = case_when(\n      AGE >= 65 ~ \">= 65\",\n      TRUE ~ \"< 65\"\n    ),\n    AGE65 = factor(\n      AGE65,\n      levels = c(\"< 65\", \">= 65\")\n    )\n  )\nadae <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adae\") %>%\n  mutate(\n    AGE65 = case_when(\n      AGE >= 65 ~ \">= 65\",\n      TRUE ~ \"< 65\"\n    ),\n    AGE65 = factor(\n      AGE65,\n      levels = c(\"< 65\", \">= 65\")\n    )\n  )\n\nnames_baskets <- grep(\"^(SMQ|CQ).*NAM$\", names(adae), value = TRUE)\nnames_scopes <- grep(\"^SMQ.*SC$\", names(adae), value = TRUE)\n\ncs_baskets <- choices_selected(\n  choices = variable_choices(adae, subset = names_baskets),\n  selected = names_baskets\n)\ncs_scopes <- choices_selected(\n  choices = variable_choices(adae, subset = names_scopes),\n  selected = names_scopes,\n  fixed = TRUE\n)\n\napp <- init(\n  data = cdisc_data(\n    cdisc_dataset(\"ADSL\", adsl,\n      code = 'ADSL <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\") %>%\n    mutate(\n      AGE65 = case_when(\n        AGE >= 65 ~ \">= 65\",\n        TRUE ~ \"< 65\"\n      ),\n      AGE65 = factor(\n        AGE65,\n      levels = c(\"< 65\", \">= 65\")\n        )\n    )'\n    ),\n    cdisc_dataset(\"ADAE\", adae,\n      code = 'ADAE <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adae\") %>%\n    mutate(\n      AGE65 = case_when(\n        AGE >= 65 ~ \">= 65\",\n        TRUE ~ \"< 65\"\n      ),\n      AGE65 = factor(\n        AGE65,\n      levels = c(\"< 65\", \">= 65\")\n        )\n    )'\n    ),\n    check = TRUE\n  ),\n  modules = modules(\n    tm_t_smq(\n      label = \"Adverse events by `SMQ` Table\",\n      dataname = \"ADAE\",\n      arm_var = choices_selected(\n        choices = variable_choices(adsl, subset = c(\"ARM\", \"SEX\", \"AGE65\")),\n        selected = c(\"ARM\", \"SEX\")\n      ),\n      add_total = FALSE,\n      baskets = cs_baskets,\n      scopes = cs_scopes,\n      llt = choices_selected(\n        choices = variable_choices(adae, subset = c(\"AEDECOD\")),\n        selected = \"AEDECOD\"\n      )\n    )\n  )\n)\n\n[INFO] 2023-03-10 05:23:48.3612 pid:3458 token:[] teal.modules.clinical Initializing tm_t_smq\n\nCodeshinyApp(app$ui, app$server)\n\n\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n [1] teal.modules.clinical_0.8.14.9026 teal_0.12.0.9023                 \n [3] teal.transform_0.2.0.9011         teal.data_0.1.2.9013             \n [5] shiny_1.7.4                       stringr_1.5.0                    \n [7] scda_0.1.5.9009                   tern_0.7.10.9056                 \n [9] rtables_0.6.0.1                   formatters_0.4.0                 \n[11] magrittr_2.0.3                    dplyr_1.1.0                      \n\nloaded via a namespace (and not attached):\n [1] sass_0.4.5               tidyr_1.3.0              jsonlite_1.8.4          \n [4] splines_4.2.2            R.utils_2.12.2           bslib_0.4.2             \n [7] teal.slice_0.2.0.9026    Rdpack_2.4               assertthat_0.2.1        \n[10] teal.code_0.3.0.9001     tern.gee_0.1.0.9002      yaml_2.3.7              \n[13] pillar_1.8.1             backports_1.4.1          lattice_0.20-45         \n[16] glue_1.6.2               teal.widgets_0.2.0.9024  digest_0.6.31           \n[19] promises_1.2.0.1         rbibutils_2.2.13         checkmate_2.1.0         \n[22] colorspace_2.1-0         R.oo_1.25.0              htmltools_0.5.4         \n[25] httpuv_1.6.9             Matrix_1.5-3             pkgconfig_2.0.3         \n[28] broom_1.0.3              logger_0.2.2             purrr_1.0.1             \n[31] xtable_1.8-4             mvtnorm_1.1-3            webshot_0.5.4           \n[34] scales_1.2.1             processx_3.8.0           fontawesome_0.5.0       \n[37] later_1.3.0              emmeans_1.8.4-1          tibble_3.1.8            \n[40] styler_1.9.1             generics_0.1.3           ggplot2_3.4.1           \n[43] ellipsis_0.3.2           shinyvalidate_0.1.2      cachem_1.0.7            \n[46] withr_2.5.0              shinyjs_2.1.0            geepack_1.3.9           \n[49] cli_3.6.0                survival_3.5-3           mime_0.12               \n[52] memoise_2.0.1            ps_1.7.2                 estimability_1.4.1      \n[55] evaluate_0.20            R.methodsS3_1.8.2        fansi_1.0.4             \n[58] R.cache_0.16.0           nlme_3.1-162             MASS_7.3-58.3           \n[61] forcats_1.0.0            teal.reporter_0.1.1.9013 tools_4.2.2             \n[64] lifecycle_1.0.3          munsell_0.5.0            callr_3.7.3             \n[67] jquerylib_0.1.4          compiler_4.2.2           rlang_1.0.6             \n[70] grid_4.2.2               htmlwidgets_1.6.1        rmarkdown_2.20          \n[73] shinyWidgets_0.7.6       gtable_0.3.1             codetools_0.2-19        \n[76] teal.logger_0.1.1.9004   R6_2.5.1                 knitr_1.42              \n[79] fastmap_1.1.1            utf8_1.2.3               stringi_1.7.12          \n[82] Rcpp_1.0.10              vctrs_0.5.2              tidyselect_1.2.0        \n[85] xfun_0.37                coda_0.19-4             \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R                       [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/tables/adverse-events/aet06_smq.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "tables/adverse-events/aet04_pi.html",
    "href": "tables/adverse-events/aet04_pi.html",
    "title": "AET04_PI",
    "section": "",
    "text": "Data Setup\nStandard Table\nTable with Patients Treated with a Particular Treatment by Highest NCI  CTCAE Grade (specifying a treatment for selecting preferred terms)\nAdverse Events Reported in \\(\\geq\\) 5% of Patients by  Highest NCI CTCAE Grade (changing the threshold)\nAdverse Events Reported in \\(\\geq\\) 5% of Patients and \\(\\geq\\) 2% Difference Between Treatments by Highest  NCI CTCAE Grade (using more than one condition)\nAdverse Events Reported in \\(\\geq\\) 10% of Patients for Any Grade  or \\(\\geq\\) 5% of Patients for Grade 3-4 by Highest NCI CTCAE  Grade (using different condition depending on the grade)\nStandard Table with  Modified Grade Grouping\nStandard Table with  Overlapping Grade Groupings\nStandard Table without SOCs\nTeal\nSession Info\n\n\n\n\nCodelibrary(scda)\nlibrary(dplyr)\nlibrary(tern)\n\npreprocess_adae <- function(adae) {\n  adae %>%\n    dplyr::group_by(ACTARM, USUBJID, AEBODSYS, AEDECOD) %>%\n    dplyr::summarize(\n      MAXAETOXGR = max(as.numeric(AETOXGR)),\n      .groups = \"drop\"\n    ) %>%\n    dplyr::ungroup() %>%\n    dplyr::mutate(\n      MAXAETOXGR = factor(MAXAETOXGR),\n      AEDECOD = droplevels(as.factor(AEDECOD))\n    )\n}\n\nfull_table_aet04_pi <- function(adsl, adae_max) {\n  grade_groups <- list(\n    \"Any Grade (%)\" = c(\"1\", \"2\", \"3\", \"4\", \"5\"),\n    \"Grade 3-4 (%)\" = c(\"3\", \"4\"),\n    \"Grade 5 (%)\" = \"5\"\n  )\n\n  col_counts <- rep(table(adsl$ACTARM), each = length(grade_groups))\n  basic_table() %>%\n    split_cols_by(\"ACTARM\") %>%\n    split_cols_by_groups(\"MAXAETOXGR\", groups = grade_groups) %>%\n    split_rows_by(\"AEBODSYS\",\n      child_labels = \"visible\", nested = FALSE, indent_mod = -1L,\n      split_fun = trim_levels_in_group(\"AEDECOD\")\n    ) %>%\n    append_topleft(\"MedDRA System Organ Class\") %>%\n    summarize_num_patients(\n      var = \"USUBJID\",\n      .stats = \"unique\",\n      .labels = \"Total number of patients with at least one adverse event\"\n    ) %>%\n    summarize_vars(\n      \"AEDECOD\",\n      na.rm = FALSE,\n      denom = \"N_col\",\n      .stats = \"count_fraction\",\n      .formats = c(count_fraction = format_fraction_threshold(0.01))\n    ) %>%\n    append_topleft(\"  MedDRA Preferred Term\") %>%\n    build_table(adae_max, col_counts = col_counts)\n}\n\ncriteria_fun <- function(tr) {\n  is(tr, \"ContentRow\")\n}\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadae_max <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adae\") %>%\n  preprocess_adae() %>%\n  df_explicit_na()\n\n\n\n\n\nCodefull_table <- full_table_aet04_pi(adsl, adae_max) %>%\n  sort_at_path(\n    path = c(\"AEBODSYS\"),\n    scorefun = score_occurrences_cont_cols(col_indices = c(1, 4, 7)),\n    decreasing = TRUE\n  ) %>%\n  sort_at_path(\n    path = c(\"AEBODSYS\", \"*\", \"AEDECOD\"),\n    scorefun = score_occurrences_cols(col_indices = c(1, 4, 7)),\n    decreasing = TRUE\n  )\n\nat_least_10percent_any <- has_fraction_in_any_col(atleast = 0.1, col_indices = c(1, 4, 7))\n\nresult <- full_table %>%\n  trim_rows(criteria = criteria_fun) %>%\n  prune_table(keep_rows(at_least_10percent_any))\n\nresult\n\nMedDRA System Organ Class                    A: Drug X                                    B: Placebo                                  C: Combination               \n  MedDRA Preferred Term     Any Grade (%)   Grade 3-4 (%)   Grade 5 (%)   Any Grade (%)   Grade 3-4 (%)   Grade 5 (%)   Any Grade (%)   Grade 3-4 (%)   Grade 5 (%)\n                               (N=134)         (N=134)        (N=134)        (N=134)         (N=134)        (N=134)        (N=132)         (N=132)        (N=132)  \n———————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————\ncl A.1                                                                                                                                                             \ndcd A.1.1.1.1                    37               0              0             34               0              0             48               0              0     \ndcd A.1.1.1.2                    36               0              0             36               0              0             38               0              0     \ncl B.2                                                                                                                                                             \ndcd B.2.2.3.1                    36               0              0             40               0              0             39               0              0     \ndcd B.2.1.2.1                    37              37              0             33              33              0             39              39              0     \ncl D.1                                                                                                                                                             \ndcd D.1.1.1.1                    37               0             37             31               0             31             39               0             39     \ndcd D.1.1.4.2                    36              36              0             31              31              0             38              38              0     \ncl D.2                                                                                                                                                             \ndcd D.2.1.5.3                    35               0              0             43               0              0             43               0              0     \ncl B.1                                                                                                                                                             \ndcd B.1.1.1.1                    35               0             35             37               0             37             33               0             33     \ncl C.2                                                                                                                                                             \ndcd C.2.1.2.1                    26               0              0             36               0              0             42               0              0     \ncl C.1                                                                                                                                                             \ndcd C.1.1.1.3                    32              32              0             34              34              0             33              33              0     \n\n\n\n\nNote: User needs to specify the column index for filtering the table. The current example uses the “Any Grade” column for treatment A: Drug X with a filtering threshold at 0.37; AEs reported in greater than 37% of patients in treatment A: Drug X are shown. This can be changed by varying the parameter values in the has_fraction_in_cols function.\n\nCodefull_table <- full_table_aet04_pi(adsl, adae_max) %>%\n  sort_at_path(\n    path = c(\"AEBODSYS\"),\n    scorefun = score_occurrences_cont_cols(col_indices = c(1, 4, 7)),\n    decreasing = TRUE\n  ) %>%\n  sort_at_path(\n    path = c(\"AEBODSYS\", \"*\", \"AEDECOD\"),\n    scorefun = score_occurrences_cols(col_indices = c(1, 4, 7)),\n    decreasing = TRUE\n  )\n\nat_least_37percent_any_drugx <- has_fraction_in_cols(atleast = 0.37, col_indices = 1)\n\nresult <- full_table %>%\n  trim_rows(criteria = criteria_fun) %>%\n  prune_table(keep_rows(at_least_37percent_any_drugx))\n\nresult\n\nMedDRA System Organ Class                    A: Drug X                                    B: Placebo                                  C: Combination               \n  MedDRA Preferred Term     Any Grade (%)   Grade 3-4 (%)   Grade 5 (%)   Any Grade (%)   Grade 3-4 (%)   Grade 5 (%)   Any Grade (%)   Grade 3-4 (%)   Grade 5 (%)\n                               (N=134)         (N=134)        (N=134)        (N=134)         (N=134)        (N=134)        (N=132)         (N=132)        (N=132)  \n———————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————\ncl A.1                                                                                                                                                             \ndcd A.1.1.1.1                    37               0              0             34               0              0             48               0              0     \ncl D.1                                                                                                                                                             \ndcd D.1.1.1.1                    37               0             37             31               0             31             39               0             39     \n\n\n\n\nNote: User needs to specify the column index for filtering the table. The current example uses column indices 1, 4, and 7 with a filtering threshold at 0.40 to demonstrate the filtering ability; AEs reported in greater than 40% of patients are shown. This can be changed by varying the parameter values in the has_fraction_in_any_col function.\n\nCodefull_table <- full_table_aet04_pi(adsl, adae_max) %>%\n  sort_at_path(\n    path = c(\"AEBODSYS\"),\n    scorefun = score_occurrences_cont_cols(col_indices = c(1, 4, 7)),\n    decreasing = TRUE\n  ) %>%\n  sort_at_path(\n    path = c(\"AEBODSYS\", \"*\", \"AEDECOD\"),\n    scorefun = score_occurrences_cols(col_indices = c(1, 4, 7)),\n    decreasing = TRUE\n  )\n\nat_least_40percent_any <- has_fraction_in_any_col(atleast = 0.40, col_indices = c(1, 4, 7))\n\nresult <- full_table %>%\n  trim_rows(criteria = criteria_fun) %>%\n  prune_table(keep_rows(at_least_40percent_any))\n\nresult\n\nMedDRA System Organ Class                    A: Drug X                                    B: Placebo                                  C: Combination               \n  MedDRA Preferred Term     Any Grade (%)   Grade 3-4 (%)   Grade 5 (%)   Any Grade (%)   Grade 3-4 (%)   Grade 5 (%)   Any Grade (%)   Grade 3-4 (%)   Grade 5 (%)\n                               (N=134)         (N=134)        (N=134)        (N=134)         (N=134)        (N=134)        (N=132)         (N=132)        (N=132)  \n———————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————\ncl A.1                                                                                                                                                             \ndcd A.1.1.1.1                    37               0              0             34               0              0             48               0              0     \ncl B.2                                                                                                                                                             \ndcd B.2.2.3.1                    36               0              0             40               0              0             39               0              0     \ncl D.2                                                                                                                                                             \ndcd D.2.1.5.3                    35               0              0             43               0              0             43               0              0     \ncl C.2                                                                                                                                                             \ndcd C.2.1.2.1                    26               0              0             36               0              0             42               0              0     \n\n\n\n\nNote: User needs to specify the column index for filtering the table. The current example uses column indices 1, 4, and 7 to filter for AEs reported in \\(\\geq\\) 30% of patients and AEs reported with a \\(\\geq\\) 15% difference between treatments to demonstrate the filtering ability; this can be changed by varying the parameter values in the has_fraction_in_any_col and has_fractions_difference functions.\n\nCodefull_table <- full_table_aet04_pi(adsl, adae_max) %>%\n  sort_at_path(\n    path = c(\"AEBODSYS\"),\n    scorefun = score_occurrences_cont_cols(col_indices = c(1, 4, 7)),\n    decreasing = TRUE\n  ) %>%\n  sort_at_path(\n    path = c(\"AEBODSYS\", \"*\", \"AEDECOD\"),\n    scorefun = score_occurrences_cols(col_indices = c(1, 4, 7)),\n    decreasing = TRUE\n  )\n\nat_least_30percent_any <- has_fraction_in_any_col(atleast = 0.3, col_indices = c(1, 4, 7))\n\nat_least_15percent_diff <- has_fractions_difference(atleast = 0.15, col_indices = c(1, 4, 7))\n\nresult <- full_table %>%\n  trim_rows(criteria = criteria_fun) %>%\n  prune_table(keep_rows(at_least_30percent_any & at_least_15percent_diff))\n\nresult\n\nMedDRA System Organ Class                    A: Drug X                                    B: Placebo                                  C: Combination               \n  MedDRA Preferred Term     Any Grade (%)   Grade 3-4 (%)   Grade 5 (%)   Any Grade (%)   Grade 3-4 (%)   Grade 5 (%)   Any Grade (%)   Grade 3-4 (%)   Grade 5 (%)\n                               (N=134)         (N=134)        (N=134)        (N=134)         (N=134)        (N=134)        (N=132)         (N=132)        (N=132)  \n———————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————\ncl C.2                                                                                                                                                             \ndcd C.2.1.2.1                    26               0              0             36               0              0             42               0              0     \n\n\n\n\nNote: User needs to specify the column index for filtering the table. The current example filters using column indices 1, 4, and 7 to include AEs reported in \\(\\geq\\) 40% of patients and using column indices 2, 5, and 8 to include grade 3-4 AEs reported in \\(\\geq\\) 20% of patients. These thresholds are chosen to demonstrate the filtering ability; they can be changed by varying parameter values in the has_fraction_in_any_col function.\n\nCodefull_table <- full_table_aet04_pi(adsl, adae_max) %>%\n  sort_at_path(\n    path = c(\"AEBODSYS\"),\n    scorefun = score_occurrences_cont_cols(col_indices = c(1, 4, 7)),\n    decreasing = TRUE\n  ) %>%\n  sort_at_path(\n    path = c(\"AEBODSYS\", \"*\", \"AEDECOD\"),\n    scorefun = score_occurrences_cols(col_indices = c(1, 4, 7)),\n    decreasing = TRUE\n  )\n\nat_least_40percent_any <- has_fraction_in_any_col(atleast = 0.4, col_indices = c(1, 4, 7))\n\nat_least_20percent_g34 <- has_fraction_in_any_col(atleast = 0.20, col_indices = c(2, 5, 8))\n\nresult <- full_table %>%\n  trim_rows(criteria = criteria_fun) %>%\n  prune_table(keep_rows(at_least_40percent_any | at_least_20percent_g34))\n\nresult\n\nMedDRA System Organ Class                    A: Drug X                                    B: Placebo                                  C: Combination               \n  MedDRA Preferred Term     Any Grade (%)   Grade 3-4 (%)   Grade 5 (%)   Any Grade (%)   Grade 3-4 (%)   Grade 5 (%)   Any Grade (%)   Grade 3-4 (%)   Grade 5 (%)\n                               (N=134)         (N=134)        (N=134)        (N=134)         (N=134)        (N=134)        (N=132)         (N=132)        (N=132)  \n———————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————\ncl A.1                                                                                                                                                             \ndcd A.1.1.1.1                    37               0              0             34               0              0             48               0              0     \ncl B.2                                                                                                                                                             \ndcd B.2.2.3.1                    36               0              0             40               0              0             39               0              0     \ndcd B.2.1.2.1                    37              37              0             33              33              0             39              39              0     \ncl D.1                                                                                                                                                             \ndcd D.1.1.4.2                    36              36              0             31              31              0             38              38              0     \ncl D.2                                                                                                                                                             \ndcd D.2.1.5.3                    35               0              0             43               0              0             43               0              0     \ncl C.2                                                                                                                                                             \ndcd C.2.1.2.1                    26               0              0             36               0              0             42               0              0     \ncl C.1                                                                                                                                                             \ndcd C.1.1.1.3                    32              32              0             34              34              0             33              33              0     \n\n\n\n\nNote: User can specify/modify the grouping of grades, as shown in this example. In addition, the user needs to specify the column index for filtering the table. The current example uses the “Any Grade” columns with a filtering threshold at 0.40; this can be changed by varying the parameter values in the has_fraction_in_any_col function.\n\nCodegrade_groups <- list(\n  \"Any Grade (%)\" = c(\"1\", \"2\", \"3\", \"4\", \"5\"),\n  \"Grade 1-2 (%)\" = c(\"1\", \"2\"),\n  \"Grade 3-4 (%)\" = c(\"3\", \"4\"),\n  \"Grade 5 (%)\" = \"5\"\n)\n\ncol_counts <- rep(table(adsl$ACTARM), each = length(grade_groups))\n\nfull_table <- basic_table() %>%\n  split_cols_by(\"ACTARM\") %>%\n  split_cols_by_groups(\"MAXAETOXGR\", groups = grade_groups) %>%\n  split_rows_by(\"AEBODSYS\",\n    child_labels = \"visible\", nested = FALSE, indent_mod = -1L,\n    split_fun = trim_levels_in_group(\"AEDECOD\")\n  ) %>%\n  append_topleft(\"MedDRA System Organ Class\") %>%\n  summarize_num_patients(\n    var = \"USUBJID\",\n    .stats = \"unique\",\n    .labels = \"Total number of patients with at least one adverse event\"\n  ) %>%\n  summarize_vars(\n    \"AEDECOD\",\n    na.rm = FALSE,\n    denom = \"N_col\",\n    .stats = \"count_fraction\",\n    .formats = c(count_fraction = format_fraction_threshold(0.01))\n  ) %>%\n  append_topleft(\"  MedDRA Preferred Term\") %>%\n  build_table(adae_max, col_counts = col_counts) %>%\n  sort_at_path(\n    path = c(\"AEBODSYS\"),\n    scorefun = score_occurrences_cont_cols(col_indices = c(1, 5, 9)),\n    decreasing = TRUE\n  ) %>%\n  sort_at_path(\n    path = c(\"AEBODSYS\", \"*\", \"AEDECOD\"),\n    scorefun = score_occurrences_cols(col_indices = c(1, 5, 9)),\n    decreasing = TRUE\n  )\n\nat_least_40percent_any <- has_fraction_in_any_col(atleast = 0.4, col_indices = c(1, 5, 9))\n\nresult <- full_table %>%\n  trim_rows(criteria = criteria_fun) %>%\n  prune_table(keep_rows(at_least_40percent_any))\n\nresult\n\nMedDRA System Organ Class                            A: Drug X                                                    B: Placebo                                                  C: Combination                       \n  MedDRA Preferred Term     Any Grade (%)   Grade 1-2 (%)   Grade 3-4 (%)   Grade 5 (%)   Any Grade (%)   Grade 1-2 (%)   Grade 3-4 (%)   Grade 5 (%)   Any Grade (%)   Grade 1-2 (%)   Grade 3-4 (%)   Grade 5 (%)\n                               (N=134)         (N=134)         (N=134)        (N=134)        (N=134)         (N=134)         (N=134)        (N=134)        (N=132)         (N=132)         (N=132)        (N=132)  \n———————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————\ncl A.1                                                                                                                                                                                                             \ndcd A.1.1.1.1                    37              37               0              0             34              34               0              0             48              48               0              0     \ncl B.2                                                                                                                                                                                                             \ndcd B.2.2.3.1                    36              36               0              0             40              40               0              0             39              39               0              0     \ncl D.2                                                                                                                                                                                                             \ndcd D.2.1.5.3                    35              35               0              0             43              43               0              0             43              43               0              0     \ncl C.2                                                                                                                                                                                                             \ndcd C.2.1.2.1                    26              26               0              0             36              36               0              0             42              42               0              0     \n\n\n\n\nNote: User needs to specify the column index for filtering the table. The current example uses column indices 1, 5, and 9 with a filtering threshold at 0.40 to demonstrate the filtering ability; any grade AEs reported in greater than 40% of patients are shown. This can be changed by varying the parameter values in the has_fraction_in_any_col function.\n\nCodegrade_groups <- list(\n  \"Any Grade (%)\" = c(\"1\", \"2\", \"3\", \"4\", \"5\"),\n  \"Grade 3-4 (%)\" = c(\"3\", \"4\"),\n  \"Grade 3-5 (%)\" = c(\"3\", \"4\", \"5\"),\n  \"Grade 5 (%)\" = \"5\"\n)\n\ncol_counts <- rep(table(adsl$ACTARM), each = length(grade_groups))\nfull_table <- basic_table() %>%\n  split_cols_by(\"ACTARM\") %>%\n  split_cols_by_groups(\"MAXAETOXGR\", groups = grade_groups) %>%\n  split_rows_by(\"AEBODSYS\",\n    child_labels = \"visible\", nested = FALSE, indent_mod = -1L,\n    split_fun = trim_levels_in_group(\"AEDECOD\")\n  ) %>%\n  append_topleft(\"MedDRA System Organ Class\") %>%\n  summarize_num_patients(\n    var = \"USUBJID\",\n    .stats = \"unique\",\n    .labels = \"Total number of patients with at least one adverse event\"\n  ) %>%\n  summarize_vars(\n    \"AEDECOD\",\n    na.rm = FALSE,\n    denom = \"N_col\",\n    .stats = \"count_fraction\",\n    .formats = c(count_fraction = format_fraction_threshold(0.01))\n  ) %>%\n  append_topleft(\"  MedDRA Preferred Term\") %>%\n  build_table(adae_max, col_counts = col_counts) %>%\n  sort_at_path(\n    path = c(\"AEBODSYS\"),\n    scorefun = score_occurrences_cont_cols(col_indices = c(1, 5, 9)),\n    decreasing = TRUE\n  ) %>%\n  sort_at_path(\n    path = c(\"AEBODSYS\", \"*\", \"AEDECOD\"),\n    scorefun = score_occurrences_cols(col_indices = c(1, 5, 9)),\n    decreasing = TRUE\n  )\n\nat_least_40percent_any <- has_fraction_in_any_col(atleast = 0.4, col_indices = c(1, 5, 9))\n\nresult <- full_table %>%\n  trim_rows(criteria = criteria_fun) %>%\n  prune_table(keep_rows(at_least_40percent_any))\n\nresult\n\nMedDRA System Organ Class                            A: Drug X                                                    B: Placebo                                                  C: Combination                       \n  MedDRA Preferred Term     Any Grade (%)   Grade 3-4 (%)   Grade 3-5 (%)   Grade 5 (%)   Any Grade (%)   Grade 3-4 (%)   Grade 3-5 (%)   Grade 5 (%)   Any Grade (%)   Grade 3-4 (%)   Grade 3-5 (%)   Grade 5 (%)\n                               (N=134)         (N=134)         (N=134)        (N=134)        (N=134)         (N=134)         (N=134)        (N=134)        (N=132)         (N=132)         (N=132)        (N=132)  \n———————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————\ncl A.1                                                                                                                                                                                                             \ndcd A.1.1.1.1                    37               0               0              0             34               0               0              0             48               0               0              0     \ncl B.2                                                                                                                                                                                                             \ndcd B.2.2.3.1                    36               0               0              0             40               0               0              0             39               0               0              0     \ncl D.2                                                                                                                                                                                                             \ndcd D.2.1.5.3                    35               0               0              0             43               0               0              0             43               0               0              0     \ncl C.2                                                                                                                                                                                                             \ndcd C.2.1.2.1                    26               0               0              0             36               0               0              0             42               0               0              0     \n\n\n\n\nNote: User needs to specify the column index for filtering the table. The current example uses column indices 1, 4, and 7 with a filtering threshold at 0.20 to demonstrate the filtering ability; any grade AEs (Preferred Terms Only) reported in greater than 20% of patients are shown. This can be changed by varying the parameter values in the has_fraction_in_any_col function.\n\nCodegrade_groups <- list(\n  \"Any Grade (%)\" = c(\"1\", \"2\", \"3\", \"4\", \"5\"),\n  \"Grade 3-4 (%)\" = c(\"3\", \"4\"),\n  \"Grade 5 (%)\" = \"5\"\n)\n\ncol_counts <- rep(table(adsl$ACTARM), each = length(grade_groups))\n\nfull_table <- basic_table() %>%\n  split_cols_by(\"ACTARM\") %>%\n  split_cols_by_groups(\"MAXAETOXGR\", groups = grade_groups) %>%\n  summarize_vars(\n    \"AEDECOD\",\n    na.rm = FALSE,\n    denom = \"N_col\",\n    .stats = \"count_fraction\",\n    .formats = c(count_fraction = format_fraction_threshold(0.01))\n  ) %>%\n  append_topleft(\"MedDRA Preferred Term\") %>%\n  build_table(adae_max, col_counts = col_counts)\n\nat_least_20percent_any <- has_fraction_in_any_col(atleast = 0.2, col_indices = c(1, 4, 7))\n\nresult <- full_table %>%\n  prune_table(keep_rows(at_least_20percent_any)) %>%\n  sort_at_path(\n    path = c(\"AEDECOD\"),\n    scorefun = score_occurrences_cols(col_indices = c(1, 4, 7)),\n    decreasing = TRUE\n  )\n\nresult\n\nMedDRA Preferred Term                    A: Drug X                                    B: Placebo                                  C: Combination               \n                        Any Grade (%)   Grade 3-4 (%)   Grade 5 (%)   Any Grade (%)   Grade 3-4 (%)   Grade 5 (%)   Any Grade (%)   Grade 3-4 (%)   Grade 5 (%)\n                           (N=134)         (N=134)        (N=134)        (N=134)         (N=134)        (N=134)        (N=132)         (N=132)        (N=132)  \n———————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————\ndcd D.2.1.5.3                35               0              0             43               0              0             43               0              0     \ndcd A.1.1.1.1                37               0              0             34               0              0             48               0              0     \ndcd B.2.2.3.1                36               0              0             40               0              0             39               0              0     \ndcd A.1.1.1.2                36               0              0             36               0              0             38               0              0     \ndcd B.2.1.2.1                37              37              0             33              33              0             39              39              0     \ndcd D.1.1.1.1                37               0             37             31               0             31             39               0             39     \ndcd D.1.1.4.2                36              36              0             31              31              0             38              38              0     \ndcd B.1.1.1.1                35               0             35             37               0             37             33               0             33     \ndcd C.2.1.2.1                26               0              0             36               0              0             42               0              0     \ndcd C.1.1.1.3                32              32              0             34              34              0             33              33              0     \n\n\n\n\n\nCodelibrary(dplyr)\nlibrary(scda)\nlibrary(teal.modules.clinical)\nlibrary(tern)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadae <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adae\")\n\napp <- init(\n  data = cdisc_data(\n    cdisc_dataset(\"ADSL\", adsl),\n    cdisc_dataset(\"ADAE\", adae),\n    code = 'ADSL <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\n    ADAE <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adae\")',\n    check = TRUE\n  ),\n  modules = modules(\n    tm_t_events_by_grade(\n      label = \"Adverse Events by Grade Table\",\n      dataname = \"ADAE\",\n      arm_var = choices_selected(c(\"ARM\", \"ARMCD\"), \"ARM\"),\n      col_by_grade = TRUE,\n      llt = choices_selected(\n        choices = variable_choices(adae, c(\"AETERM\", \"AEDECOD\")),\n        selected = c(\"AEDECOD\")\n      ),\n      hlt = choices_selected(\n        choices = variable_choices(adae, c(\"AEBODSYS\", \"AESOC\")),\n        selected = \"AEBODSYS\"\n      ),\n      grade = choices_selected(\n        choices = variable_choices(adae, c(\"AETOXGR\", \"AESEV\")),\n        selected = \"AETOXGR\"\n      ),\n      # List of column groups for grades used when `col_by_grade` = TRUE.\n      grading_groups = list(\n        `Any Grade (%)` = c(\"1\", \"2\", \"3\", \"4\", \"5\"),\n        `Grade 3-4 (%)` = c(\"3\", \"4\"),\n        `Grade 5 (%)` = \"5\"\n      )\n    )\n  )\n)\n\n[INFO] 2023-03-10 05:24:28.9529 pid:3536 token:[] teal.modules.clinical Initializing tm_t_events_by_grade\n\nCodeshinyApp(app$ui, app$server)\n\n\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n [1] teal.modules.clinical_0.8.14.9026 teal_0.12.0.9023                 \n [3] teal.transform_0.2.0.9011         teal.data_0.1.2.9013             \n [5] shiny_1.7.4                       tern_0.7.10.9056                 \n [7] rtables_0.6.0.1                   formatters_0.4.0                 \n [9] magrittr_2.0.3                    dplyr_1.1.0                      \n[11] scda_0.1.5.9009                  \n\nloaded via a namespace (and not attached):\n [1] sass_0.4.5               tidyr_1.3.0              jsonlite_1.8.4          \n [4] splines_4.2.2            R.utils_2.12.2           bslib_0.4.2             \n [7] teal.slice_0.2.0.9026    Rdpack_2.4               assertthat_0.2.1        \n[10] teal.code_0.3.0.9001     tern.gee_0.1.0.9002      yaml_2.3.7              \n[13] pillar_1.8.1             backports_1.4.1          lattice_0.20-45         \n[16] glue_1.6.2               teal.widgets_0.2.0.9024  digest_0.6.31           \n[19] promises_1.2.0.1         rbibutils_2.2.13         checkmate_2.1.0         \n[22] colorspace_2.1-0         R.oo_1.25.0              htmltools_0.5.4         \n[25] httpuv_1.6.9             Matrix_1.5-3             pkgconfig_2.0.3         \n[28] broom_1.0.3              logger_0.2.2             purrr_1.0.1             \n[31] xtable_1.8-4             mvtnorm_1.1-3            webshot_0.5.4           \n[34] scales_1.2.1             processx_3.8.0           fontawesome_0.5.0       \n[37] later_1.3.0              emmeans_1.8.4-1          tibble_3.1.8            \n[40] styler_1.9.1             generics_0.1.3           ggplot2_3.4.1           \n[43] ellipsis_0.3.2           shinyvalidate_0.1.2      cachem_1.0.7            \n[46] withr_2.5.0              shinyjs_2.1.0            geepack_1.3.9           \n[49] cli_3.6.0                survival_3.5-3           mime_0.12               \n[52] memoise_2.0.1            ps_1.7.2                 estimability_1.4.1      \n[55] evaluate_0.20            R.methodsS3_1.8.2        fansi_1.0.4             \n[58] R.cache_0.16.0           nlme_3.1-162             MASS_7.3-58.3           \n[61] forcats_1.0.0            teal.reporter_0.1.1.9013 tools_4.2.2             \n[64] lifecycle_1.0.3          munsell_0.5.0            callr_3.7.3             \n[67] compiler_4.2.2           jquerylib_0.1.4          rlang_1.0.6             \n[70] grid_4.2.2               htmlwidgets_1.6.1        rmarkdown_2.20          \n[73] shinyWidgets_0.7.6       gtable_0.3.1             codetools_0.2-19        \n[76] teal.logger_0.1.1.9004   R6_2.5.1                 knitr_1.42              \n[79] fastmap_1.1.1            utf8_1.2.3               Rcpp_1.0.10             \n[82] vctrs_0.5.2              tidyselect_1.2.0         xfun_0.37               \n[85] coda_0.19-4             \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R                       [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/tables/adverse-events/aet04_pi.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "tables/adverse-events/aet07.html",
    "href": "tables/adverse-events/aet07.html",
    "title": "AET07",
    "section": "",
    "text": "Data Setup\nStandard Table\nTable with Fill-In of Treatment Groups without Deaths\nTeal\nSession Info\n\n\n\nFor illustrative purposes, we will pre-process AESDTH in ADAE so there are no deaths in arm A and concatenate AEBODSYS and AEDECOD as per GDSR output standards for AET07.\n\nCodelibrary(dplyr)\nlibrary(tern)\nlibrary(scda)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadae <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adae\")\n\n# Ensure character variables are converted to factors and empty strings and NAs are explicit missing levels.\nadsl <- df_explicit_na(adsl)\nadae <- df_explicit_na(adae)\n\nadae_f <- adae %>%\n  mutate(\n    AESDTH = as.character(AESDTH), # characterizing AESDTH for next step\n    AESDTH = case_when(\n      ARM == \"A: Drug X\" ~ NA_character_, # For demonstration purpose only,\n      TRUE ~ AESDTH\n    ), # make \"A: Drug X\" as the arm without AE leading to death\n    AESDTH = as.factor(AESDTH),\n    SOC_PT = factor(paste(AEBODSYS, \"/\", AEDECOD))\n  ) %>%\n  filter(AESDTH == \"Y\") %>%\n  mutate(ARM = droplevels(ARM))\n\n\n\n\n\nCode# Define the split function\nsplit_fun <- drop_split_levels\n\nlyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ACTARM\", split_fun = drop_split_levels) %>%\n  analyze_num_patients(\n    var = \"USUBJID\",\n    .stats = \"unique\",\n    .labels = c(unique = \"Total number of deaths\"),\n    indent_mod = -1L,\n    show_labels = \"hidden\"\n  ) %>%\n  count_occurrences(\n    vars = \"SOC_PT\"\n  ) %>%\n  append_topleft(\"MedDRA SOC and Preferred Term\")\n\nresult <- build_table(\n  lyt = lyt,\n  df = adae_f,\n  alt_counts_df = adsl\n) %>%\n  prune_table() %>%\n  sort_at_path(\n    path = \"SOC_PT\",\n    scorefun = score_occurrences,\n    decreasing = TRUE\n  )\n\nresult\n\nMedDRA SOC and Preferred Term   B: Placebo   C: Combination\n                                 (N=134)        (N=132)    \n———————————————————————————————————————————————————————————\nTotal number of deaths          70 (52.2%)     75 (56.8%)  \ncl D.1 / dcd D.1.1.1.1          42 (31.3%)     51 (38.6%)  \ncl B.1 / dcd B.1.1.1.1          49 (36.6%)     43 (32.6%)  \n\n\n\n\n\nCodelyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ACTARM\") %>%\n  analyze_num_patients(\n    var = \"USUBJID\",\n    .stats = \"unique\",\n    .labels = c(unique = \"Total number of deaths\"),\n    indent_mod = -1L,\n    show_labels = \"hidden\"\n  ) %>%\n  count_occurrences(\n    vars = \"SOC_PT\"\n  ) %>%\n  append_topleft(\"MedDRA SOC and Preferred Term\")\n\nresult <- build_table(\n  lyt = lyt,\n  df = adae_f,\n  alt_counts_df = adsl\n) %>%\n  prune_table() %>%\n  sort_at_path(\n    path = \"SOC_PT\",\n    scorefun = score_occurrences,\n    decreasing = TRUE\n  )\n\nresult\n\nMedDRA SOC and Preferred Term   A: Drug X   B: Placebo   C: Combination\n                                 (N=134)     (N=134)        (N=132)    \n———————————————————————————————————————————————————————————————————————\nTotal number of deaths              0       70 (52.2%)     75 (56.8%)  \ncl D.1 / dcd D.1.1.1.1              0       42 (31.3%)     51 (38.6%)  \ncl B.1 / dcd B.1.1.1.1              0       49 (36.6%)     43 (32.6%)  \n\n\n\n\n\nCodelibrary(dplyr)\nlibrary(scda)\nlibrary(teal.modules.clinical)\nlibrary(tern)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadae <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adae\")\n\n# Ensure character variables are converted to factors and empty strings and NAs are explicit missing levels.\nadsl <- df_explicit_na(adsl)\nadae <- df_explicit_na(adae)\n\nadsl <- adsl %>%\n  mutate(\n    DTHFL = case_when(\n      !is.na(DTHDT) ~ \"Y\",\n      TRUE ~ \"\"\n    )\n  ) %>%\n  var_relabel(\n    DTHFL = \"Subject Death Flag\"\n  )\n\nadae <- adae %>%\n  mutate(\n    AESDTH = as.character(AESDTH), # characterizing AESDTH for next step\n    AESDTH = case_when(\n      ARM == \"A: Drug X\" ~ NA_character_, # For demonstration purpose only,\n      TRUE ~ AESDTH\n    ), # make \"A: Drug X\" as the arm without AE leading to death\n    AESDTH = as.factor(AESDTH),\n    SOC_PT = factor(paste(AEBODSYS, \"/\", AEDECOD))\n  ) %>%\n  filter(AESDTH == \"Y\") %>%\n  mutate(ARM = droplevels(ARM)) %>%\n  var_relabel(SOC_PT = \"MedDRA SOC and Preferred Term\")\n\napp <- teal::init(\n  data = cdisc_data(\n    cdisc_dataset(\"ADSL\", adsl, code = '\n                  ADSL <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\") %>%\n                    df_explicit_na() %>%\n                    mutate(\n                      DTHFL = case_when(\n                        !is.na(DTHDT) ~ \"Y\",\n                        TRUE ~ \"\"\n                      )\n                    ) %>%\n                    var_relabel(\n                      DTHFL = \"Subject Death Flag\"\n                    )\n                  '),\n    cdisc_dataset(\"ADAE\", adae, code = '\n                  ADAE <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adae\") %>%\n                    df_explicit_na() %>%\n                    mutate(\n                      AESDTH = as.character(AESDTH),\n                      AESDTH = case_when(\n                        ARM == \"A: Drug X\" ~ NA_character_,\n                        TRUE ~ AESDTH),\n                      AESDTH = as.factor(AESDTH),\n                      SOC_PT = factor(paste(AEBODSYS, \"/\", AEDECOD))\n                    ) %>%\n                    filter(AESDTH == \"Y\") %>%\n                    mutate(ARM = droplevels(ARM)) %>%\n                    var_relabel(SOC_PT = \"MedDRA SOC and Preferred Term\")\n                  '),\n    check = TRUE\n  ),\n  modules = modules(\n    tm_t_events(\n      label = \"Adverse Event Table\",\n      dataname = \"ADAE\",\n      arm_var = choices_selected(c(\"ARM\", \"ARMCD\"), \"ARM\"),\n      llt = choices_selected(\n        choices = variable_choices(adae, c(\"AETERM\", \"AEDECOD\", \"SOC_PT\")),\n        selected = c(\"SOC_PT\")\n      ),\n      hlt = choices_selected(\n        choices = variable_choices(adae, c(\"AETERM\", \"AEDECOD\", \"SOC_PT\")),\n        selected = NULL\n      ),\n      add_total = FALSE,\n      event_type = \"adverse event\"\n    )\n  )\n)\n\n[INFO] 2023-03-10 05:24:52.0593 pid:3612 token:[] teal.modules.clinical Initializing tm_t_events\n\nCodeshinyApp(app$ui, app$server)\n\n\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n [1] teal.modules.clinical_0.8.14.9026 teal_0.12.0.9023                 \n [3] teal.transform_0.2.0.9011         teal.data_0.1.2.9013             \n [5] shiny_1.7.4                       scda_0.1.5.9009                  \n [7] tern_0.7.10.9056                  rtables_0.6.0.1                  \n [9] formatters_0.4.0                  magrittr_2.0.3                   \n[11] dplyr_1.1.0                      \n\nloaded via a namespace (and not attached):\n [1] sass_0.4.5               tidyr_1.3.0              jsonlite_1.8.4          \n [4] splines_4.2.2            R.utils_2.12.2           bslib_0.4.2             \n [7] teal.slice_0.2.0.9026    Rdpack_2.4               assertthat_0.2.1        \n[10] teal.code_0.3.0.9001     tern.gee_0.1.0.9002      yaml_2.3.7              \n[13] pillar_1.8.1             backports_1.4.1          lattice_0.20-45         \n[16] glue_1.6.2               teal.widgets_0.2.0.9024  digest_0.6.31           \n[19] promises_1.2.0.1         rbibutils_2.2.13         checkmate_2.1.0         \n[22] colorspace_2.1-0         R.oo_1.25.0              htmltools_0.5.4         \n[25] httpuv_1.6.9             Matrix_1.5-3             pkgconfig_2.0.3         \n[28] broom_1.0.3              logger_0.2.2             purrr_1.0.1             \n[31] xtable_1.8-4             mvtnorm_1.1-3            webshot_0.5.4           \n[34] scales_1.2.1             processx_3.8.0           fontawesome_0.5.0       \n[37] later_1.3.0              emmeans_1.8.4-1          tibble_3.1.8            \n[40] styler_1.9.1             generics_0.1.3           ggplot2_3.4.1           \n[43] ellipsis_0.3.2           shinyvalidate_0.1.2      cachem_1.0.7            \n[46] withr_2.5.0              shinyjs_2.1.0            geepack_1.3.9           \n[49] cli_3.6.0                survival_3.5-3           mime_0.12               \n[52] memoise_2.0.1            ps_1.7.2                 estimability_1.4.1      \n[55] evaluate_0.20            R.methodsS3_1.8.2        fansi_1.0.4             \n[58] R.cache_0.16.0           nlme_3.1-162             MASS_7.3-58.3           \n[61] forcats_1.0.0            teal.reporter_0.1.1.9013 tools_4.2.2             \n[64] lifecycle_1.0.3          munsell_0.5.0            callr_3.7.3             \n[67] compiler_4.2.2           jquerylib_0.1.4          rlang_1.0.6             \n[70] grid_4.2.2               htmlwidgets_1.6.1        rmarkdown_2.20          \n[73] shinyWidgets_0.7.6       gtable_0.3.1             codetools_0.2-19        \n[76] teal.logger_0.1.1.9004   R6_2.5.1                 knitr_1.42              \n[79] fastmap_1.1.1            utf8_1.2.3               Rcpp_1.0.10             \n[82] vctrs_0.5.2              tidyselect_1.2.0         xfun_0.37               \n[85] coda_0.19-4             \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R                       [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/tables/adverse-events/aet07.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "tables/adverse-events/aet09_smq.html",
    "href": "tables/adverse-events/aet09_smq.html",
    "title": "AET09_SMQ",
    "section": "",
    "text": "Data Setup\nStandard Table\nTable with Customized Queries\nTeal\nSession Info\n\n\n\n\nCodelibrary(dplyr)\nlibrary(tern)\nlibrary(scda)\nlibrary(stringr)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadae <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adae\")\n\n# Ensure character variables are converted to factors and empty strings and NAs are explicit missing\n# levels. For details, refer to Teal and Study Data article.\nadsl <- df_explicit_na(adsl)\nadae <- df_explicit_na(adae)\n\n# AEs are filtered for relatedness to study drug.\nadae_rel <- adae %>% filter(AEREL == \"Y\")\n\n# Simulate a random AAG dataset.\naag <- data.frame(\n  NAMVAR = c(\"SMQ01NAM\", \"SMQ01NAM\", \"SMQ02NAM\", \"CQ01NAM\", \"CQ01NAM\"),\n  SRCVAR = rep(\"AEDECOD\", 5),\n  GRPTYPE = c(\"SMQ\", \"SMQ\", \"SMQ\", \"CUSTOM\", \"CUSTOM\"),\n  REFID = c(1, 1, 2, 3, 3),\n  REFNAME = c(rep(\"C.1.1.1.3/B.2.2.3.1 AESI\", 2), \"non observed SMQ02NAM level\", rep(\"D.2.1.5.3/A.1.1.1.1 AESI\", 2)),\n  SCOPE = c(\"BROAD\", \"BROAD\", \"BROAD\", \"\", \"\"),\n  REFTERM = c(\"C.1.1.1.3\", \"B.2.2.3.1\", \"Z.9.9.9.9\", \"D.2.1.5.3\", \"A.1.1.1.1\"),\n  stringsAsFactors = FALSE\n)\n\n# Create summary AAG dataset (used for labelling).\n# Note it's important to incorporate SCOPE into the basket names for SMQs so as to\n# match the flags present in ADAE.\naag_summary <- aag %>%\n  select(NAMVAR, REFNAME, SCOPE) %>%\n  unique() %>%\n  mutate(\n    REFNAME_SCOPE = ifelse(SCOPE == \"\", REFNAME, paste0(REFNAME, \"(\", SCOPE, \")\"))\n  ) %>%\n  rename(basket = NAMVAR, basket_name = REFNAME_SCOPE) %>%\n  select(basket, basket_name)\n\n# Make a summary of the full ADAE based on AAG by using h_stack_by_baskets helper function\nadae_smq_all <- h_stack_by_baskets(df = adae_rel, aag_summary = aag_summary, keys = c(\"STUDYID\", \"USUBJID\", \"ACTARMCD\", \"AEDECOD\"))\n\n# Post-process adae_smq_all to keep only certain baskets of interest for variant 1\n# Not need to drop baskets for variant 2 as all baskets will be considered.\nbaskets_to_drop_variant <- aag_summary$basket_name[!aag_summary$basket %in% c(\"SMQ01NAM\")]\n\n# Adjust the analysis dataset based on basket subset for variant 1.\nadae_smq_1 <- adae_smq_all %>%\n  filter(!adae_smq_all$SMQ %in% baskets_to_drop_variant) %>%\n  mutate(\n    SMQ = tern::fct_discard(SMQ, discard = baskets_to_drop_variant)\n  )\n\n\n\n\n\nCodecriteria_fun <- function(tr) !is(tr, \"ContentRow\") && all_zero_or_na(tr)\n\nlyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ACTARMCD\") %>%\n  analyze_num_patients(\n    vars = \"USUBJID\",\n    .stats = c(\"unique\"),\n    .labels = c(\n      unique = \"Total number of patients with at least one adverse event\"\n    )\n  ) %>%\n  split_rows_by(\n    \"SMQ\",\n    child_labels = \"visible\",\n    nested = FALSE,\n    split_fun = trim_levels_in_group(\"AEDECOD\", drop_outlevs = FALSE),\n    label_pos = \"topleft\",\n    split_label = \"Standardized MedDRA Query\"\n  ) %>%\n  summarize_num_patients(\n    var = \"USUBJID\",\n    .stats = c(\"unique\", \"nonunique\"),\n    .labels = c(\n      unique = \"Total number of patients with at least one adverse event\",\n      nonunique = \"Total number of events\"\n    )\n  ) %>%\n  count_occurrences(\n    vars = \"AEDECOD\",\n    .indent_mods = -1L,\n    drop = FALSE\n  ) %>%\n  append_varlabels(adae, \"AEDECOD\", indent = 1L)\n\nresult <- build_table(\n  lyt,\n  df = adae_smq_1,\n  alt_counts_df = adsl\n) %>%\n  sort_at_path(path = c(\"SMQ\"), scorefun = cont_n_allcols) %>%\n  sort_at_path(path = c(\"SMQ\", \"*\", \"AEDECOD\"), scorefun = score_occurrences, na.pos = \"last\") %>%\n  trim_rows(criteria = criteria_fun)\n\nresult\n\nStandardized MedDRA Query                                      ARM A        ARM B        ARM C   \n  Dictionary-Derived Term                                     (N=134)      (N=134)      (N=132)  \n—————————————————————————————————————————————————————————————————————————————————————————————————\nTotal number of patients with at least one adverse event     43 (32.1%)   46 (34.3%)   43 (32.6%)\nC.1.1.1.3/B.2.2.3.1 AESI(BROAD)                                                                  \n  Total number of patients with at least one adverse event   43 (32.1%)   46 (34.3%)   43 (32.6%)\n  Total number of events                                         55           63           64    \n  dcd C.1.1.1.3                                              43 (32.1%)   46 (34.3%)   43 (32.6%)\n\n\n\n\n\nCodecriteria_fun <- function(tr) !is(tr, \"ContentRow\") && all_zero_or_na(tr)\n\nlyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ACTARMCD\") %>%\n  analyze_num_patients(\n    vars = \"USUBJID\",\n    .stats = c(\"unique\"),\n    .labels = c(\n      unique = \"Total number of patients with at least one adverse event\"\n    )\n  ) %>%\n  split_rows_by(\n    \"SMQ\",\n    child_labels = \"visible\",\n    nested = FALSE,\n    split_fun = trim_levels_in_group(\"AEDECOD\", drop_outlevs = FALSE),\n    label_pos = \"topleft\",\n    split_label = \"Standardized MedDRA Query\"\n  ) %>%\n  summarize_num_patients(\n    var = \"USUBJID\",\n    .stats = c(\"unique\", \"nonunique\"),\n    .labels = c(\n      unique = \"Total number of patients with at least one adverse event\",\n      nonunique = \"Total number of events\"\n    )\n  ) %>%\n  count_occurrences(\n    vars = \"AEDECOD\",\n    .indent_mods = -1L,\n    drop = FALSE\n  ) %>%\n  append_varlabels(adae, \"AEDECOD\", indent = 1L)\n\nresult <- build_table(\n  lyt,\n  df = adae_smq_all,\n  alt_counts_df = adsl\n) %>%\n  sort_at_path(path = c(\"SMQ\"), scorefun = cont_n_allcols) %>%\n  sort_at_path(path = c(\"SMQ\", \"*\", \"AEDECOD\"), scorefun = score_occurrences, na.pos = \"last\") %>%\n  trim_rows(criteria = criteria_fun)\n\nresult\n\nStandardized MedDRA Query                                      ARM A        ARM B        ARM C   \n  Dictionary-Derived Term                                     (N=134)      (N=134)      (N=132)  \n—————————————————————————————————————————————————————————————————————————————————————————————————\nTotal number of patients with at least one adverse event     69 (51.5%)   78 (58.2%)   77 (58.3%)\nD.2.1.5.3/A.1.1.1.1 AESI                                                                         \n  Total number of patients with at least one adverse event   47 (35.1%)   58 (43.3%)   57 (43.2%)\n  Total number of events                                         62           72           74    \n  dcd D.2.1.5.3                                              47 (35.1%)   58 (43.3%)   57 (43.2%)\nC.1.1.1.3/B.2.2.3.1 AESI(BROAD)                                                                  \n  Total number of patients with at least one adverse event   43 (32.1%)   46 (34.3%)   43 (32.6%)\n  Total number of events                                         55           63           64    \n  dcd C.1.1.1.3                                              43 (32.1%)   46 (34.3%)   43 (32.6%)\nnon observed SMQ02NAM level(BROAD)                                                               \n  Total number of patients with at least one adverse event       0            0            0     \n  Total number of events                                         0            0            0     \n\n\n\n\nNote that filtering AEs for relatedness to study drug is not a necessary data pre-processing step for the module. It can be achieved using the teal module filter panel. The example here pre-sets the filters using AEREL = \"Y\" in adae.\n\nCodelibrary(scda)\nlibrary(teal.modules.clinical)\nlibrary(dplyr)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadae <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adae\")\n\nnames_baskets <- grep(\"^(SMQ|CQ).*NAM$\", names(adae), value = TRUE)\nnames_scopes <- grep(\"^SMQ.*SC$\", names(adae), value = TRUE)\n\ncs_baskets <- choices_selected(\n  choices = variable_choices(adae, subset = names_baskets),\n  selected = names_baskets\n)\ncs_scopes <- choices_selected(\n  choices = variable_choices(adae, subset = names_scopes),\n  selected = names_scopes,\n  fixed = TRUE\n)\n\napp <- init(\n  data = cdisc_data(\n    cdisc_dataset(\"ADSL\", adsl,\n      code = 'ADSL <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")'\n    ),\n    cdisc_dataset(\"ADAE\", adae,\n      code = 'ADAE <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adae\")'\n    ),\n    check = TRUE\n  ),\n  modules = modules(\n    tm_t_smq(\n      label = \"Adverse Events by SMQ Table\",\n      dataname = \"ADAE\",\n      arm_var = choices_selected(\n        choices = variable_choices(adsl, subset = c(\"ARM\", \"SEX\")),\n        selected = \"ARM\"\n      ),\n      add_total = FALSE,\n      baskets = cs_baskets,\n      scopes = cs_scopes,\n      llt = choices_selected(\n        choices = variable_choices(adae, subset = c(\"AEDECOD\")),\n        selected = \"AEDECOD\"\n      )\n    )\n  ),\n  filter = list(ADAE = list(AEREL = \"Y\"))\n)\n\n[INFO] 2023-03-10 05:25:11.9798 pid:3690 token:[] teal.modules.clinical Initializing tm_t_smq\n\nCodeshinyApp(app$ui, app$server)\n\n\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n [1] teal.modules.clinical_0.8.14.9026 teal_0.12.0.9023                 \n [3] teal.transform_0.2.0.9011         teal.data_0.1.2.9013             \n [5] shiny_1.7.4                       stringr_1.5.0                    \n [7] scda_0.1.5.9009                   tern_0.7.10.9056                 \n [9] rtables_0.6.0.1                   formatters_0.4.0                 \n[11] magrittr_2.0.3                    dplyr_1.1.0                      \n\nloaded via a namespace (and not attached):\n [1] sass_0.4.5               tidyr_1.3.0              jsonlite_1.8.4          \n [4] splines_4.2.2            R.utils_2.12.2           bslib_0.4.2             \n [7] teal.slice_0.2.0.9026    Rdpack_2.4               assertthat_0.2.1        \n[10] teal.code_0.3.0.9001     tern.gee_0.1.0.9002      yaml_2.3.7              \n[13] pillar_1.8.1             backports_1.4.1          lattice_0.20-45         \n[16] glue_1.6.2               teal.widgets_0.2.0.9024  digest_0.6.31           \n[19] promises_1.2.0.1         rbibutils_2.2.13         checkmate_2.1.0         \n[22] colorspace_2.1-0         R.oo_1.25.0              htmltools_0.5.4         \n[25] httpuv_1.6.9             Matrix_1.5-3             pkgconfig_2.0.3         \n[28] broom_1.0.3              logger_0.2.2             purrr_1.0.1             \n[31] xtable_1.8-4             mvtnorm_1.1-3            webshot_0.5.4           \n[34] scales_1.2.1             processx_3.8.0           fontawesome_0.5.0       \n[37] later_1.3.0              emmeans_1.8.4-1          tibble_3.1.8            \n[40] styler_1.9.1             generics_0.1.3           ggplot2_3.4.1           \n[43] ellipsis_0.3.2           shinyvalidate_0.1.2      cachem_1.0.7            \n[46] withr_2.5.0              shinyjs_2.1.0            geepack_1.3.9           \n[49] cli_3.6.0                survival_3.5-3           mime_0.12               \n[52] memoise_2.0.1            ps_1.7.2                 estimability_1.4.1      \n[55] evaluate_0.20            R.methodsS3_1.8.2        fansi_1.0.4             \n[58] R.cache_0.16.0           nlme_3.1-162             MASS_7.3-58.3           \n[61] forcats_1.0.0            teal.reporter_0.1.1.9013 tools_4.2.2             \n[64] lifecycle_1.0.3          munsell_0.5.0            callr_3.7.3             \n[67] jquerylib_0.1.4          compiler_4.2.2           rlang_1.0.6             \n[70] grid_4.2.2               htmlwidgets_1.6.1        rmarkdown_2.20          \n[73] shinyWidgets_0.7.6       gtable_0.3.1             codetools_0.2-19        \n[76] teal.logger_0.1.1.9004   R6_2.5.1                 knitr_1.42              \n[79] fastmap_1.1.1            utf8_1.2.3               stringi_1.7.12          \n[82] Rcpp_1.0.10              vctrs_0.5.2              tidyselect_1.2.0        \n[85] xfun_0.37                coda_0.19-4             \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R                       [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/tables/adverse-events/aet09_smq.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "tables/adverse-events/aet09.html",
    "href": "tables/adverse-events/aet09.html",
    "title": "AET09",
    "section": "",
    "text": "Data Setup\nStandard Table\nTable Including High-Level Terms\nTeal\nSession Info\n\n\n\n\nCodelibrary(dplyr)\nlibrary(tern)\nlibrary(scda)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadae <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adae\")\n\n# Ensure character variables are converted to factors and empty strings and NAs are explicit missing levels.\nadsl <- df_explicit_na(adsl)\nadae <- df_explicit_na(adae)\n\nadae_labels <- var_labels(adae)\n\nadae_f <- adae %>%\n  filter(AEREL == \"Y\")\n\nvar_labels(adae_f) <- adae_labels\n\n\n\n\n\nCode# Define the split function\nsplit_fun <- drop_split_levels\n\nlyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(var = \"ARM\") %>%\n  add_overall_col(label = \"All Patients\") %>%\n  analyze_num_patients(\n    vars = \"USUBJID\",\n    .stats = c(\"unique\", \"nonunique\"),\n    .labels = c(\n      unique = \"Total number of patients with at least one adverse event related to study drug\",\n      nonunique = \"Overall total number of events related to study drug\"\n    )\n  ) %>%\n  split_rows_by(\n    \"AEBODSYS\",\n    child_labels = \"visible\",\n    nested = FALSE,\n    split_fun = split_fun,\n    label_pos = \"topleft\",\n    split_label = obj_label(adae_f$AEBODSYS)\n  ) %>%\n  summarize_num_patients(\n    var = \"USUBJID\",\n    .stats = c(\"unique\", \"nonunique\"),\n    .labels = c(\n      unique = \"Total number of patients with at least one adverse event related to study drug\",\n      nonunique = \"Total number of events related to study drug\"\n    )\n  ) %>%\n  count_occurrences(\n    vars = \"AEDECOD\",\n    .indent_mods = -1L\n  ) %>%\n  append_varlabels(adae_f, \"AEDECOD\", indent = 1L)\n\ntbl1 <- build_table(\n  lyt = lyt,\n  df = adae_f,\n  alt_counts_df = adsl\n) %>%\n  prune_table()\n\nresult <- tbl1 %>%\n  prune_table() %>%\n  sort_at_path(\n    path = c(\"AEBODSYS\"),\n    scorefun = cont_n_onecol(4)\n  ) %>%\n  sort_at_path(\n    path = c(\"AEBODSYS\", \"*\", \"AEDECOD\"),\n    scorefun = score_occurrences\n  )\n\nresult\n\nBody System or Organ Class                                                          A: Drug X    B: Placebo    C: Combination   All Patients\n  Dictionary-Derived Term                                                            (N=134)       (N=134)        (N=132)         (N=400)   \n————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————\nTotal number of patients with at least one adverse event related to study drug     105 (78.4%)   108 (80.6%)    109 (82.6%)     322 (80.5%) \nOverall total number of events related to study drug                                   282           299            336             917     \ncl D.2                                                                                                                                      \n  Total number of patients with at least one adverse event related to study drug   47 (35.1%)    58 (43.3%)      57 (43.2%)     162 (40.5%) \n  Total number of events related to study drug                                         62            72              74             208     \n  dcd D.2.1.5.3                                                                    47 (35.1%)    58 (43.3%)      57 (43.2%)     162 (40.5%) \ncl D.1                                                                                                                                      \n  Total number of patients with at least one adverse event related to study drug   50 (37.3%)    42 (31.3%)      51 (38.6%)     143 (35.8%) \n  Total number of events related to study drug                                         61            51              71             183     \n  dcd D.1.1.1.1                                                                    50 (37.3%)    42 (31.3%)      51 (38.6%)     143 (35.8%) \ncl B.1                                                                                                                                      \n  Total number of patients with at least one adverse event related to study drug   47 (35.1%)    49 (36.6%)      43 (32.6%)     139 (34.8%) \n  Total number of events related to study drug                                         56            60              62             178     \n  dcd B.1.1.1.1                                                                    47 (35.1%)    49 (36.6%)      43 (32.6%)     139 (34.8%) \ncl C.2                                                                                                                                      \n  Total number of patients with at least one adverse event related to study drug   35 (26.1%)    48 (35.8%)      55 (41.7%)     138 (34.5%) \n  Total number of events related to study drug                                         48            53              65             166     \n  dcd C.2.1.2.1                                                                    35 (26.1%)    48 (35.8%)      55 (41.7%)     138 (34.5%) \ncl C.1                                                                                                                                      \n  Total number of patients with at least one adverse event related to study drug   43 (32.1%)    46 (34.3%)      43 (32.6%)     132 (33.0%) \n  Total number of events related to study drug                                         55            63              64             182     \n  dcd C.1.1.1.3                                                                    43 (32.1%)    46 (34.3%)      43 (32.6%)     132 (33.0%) \n\n\n\n\n\nCodelyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(var = \"ARM\") %>%\n  analyze_num_patients(\n    vars = \"USUBJID\",\n    .stats = c(\"unique\", \"nonunique\"),\n    .labels = c(\n      unique = \"Total number of patients with at least one adverse event related to study drug\",\n      nonunique = \"Overall total number of events related to study drug\"\n    )\n  ) %>%\n  split_rows_by(\n    \"AEBODSYS\",\n    child_labels = \"visible\",\n    nested = FALSE,\n    split_fun = split_fun,\n    indent_mod = 1L,\n    label_pos = \"topleft\",\n    split_label = obj_label(adae_f$AEBODSYS)\n  ) %>%\n  summarize_num_patients(\n    var = \"USUBJID\",\n    .stats = c(\"unique\", \"nonunique\"),\n    .labels = c(\n      unique = \"Total number of patients with at least one adverse event related to study drug\",\n      nonunique = \"Total number of events related to study drug\"\n    )\n  ) %>%\n  split_rows_by(\n    \"AEHLT\",\n    child_labels = \"visible\",\n    nested = TRUE,\n    indent_mod = -1L,\n    split_fun = split_fun,\n    label_pos = \"topleft\",\n    split_label = obj_label(adae_f$AEHLT)\n  ) %>%\n  summarize_num_patients(\n    var = \"USUBJID\",\n    .stats = c(\"unique\", \"nonunique\"),\n    .labels = c(\n      unique = \"Total number of patients with at least one adverse event related to study drug\",\n      nonunique = \"Total number of events related to study drug\"\n    )\n  ) %>%\n  count_occurrences(\n    vars = \"AEDECOD\",\n    .indent_mods = c(count_fraction = -1L)\n  ) %>%\n  append_varlabels(adae_f, c(\"AEDECOD\"), indent = 2L)\n\ntbl2 <- build_table(\n  lyt = lyt,\n  df = adae_f,\n  alt_counts_df = adsl\n) %>%\n  prune_table()\n\nresult <- tbl2 %>%\n  sort_at_path(\n    path = c(\"AEBODSYS\"),\n    scorefun = cont_n_allcols\n  ) %>%\n  sort_at_path(\n    path = c(\"AEBODSYS\", \"*\", \"AEHLT\"),\n    scorefun = cont_n_allcols\n  ) %>%\n  sort_at_path(\n    path = c(\"AEBODSYS\", \"*\", \"AEHLT\", \"*\", \"AEDECOD\"),\n    scorefun = score_occurrences\n  )\n\nresult\n\nBody System or Organ Class                                                                                                       \n  High Level Term                                                                       A: Drug X    B: Placebo    C: Combination\n    Dictionary-Derived Term                                                              (N=134)       (N=134)        (N=132)    \n—————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————\nTotal number of patients with at least one adverse event related to study drug         105 (78.4%)   108 (80.6%)    109 (82.6%)  \nOverall total number of events related to study drug                                       282           299            336      \n  cl D.2                                                                                                                         \n    Total number of patients with at least one adverse event related to study drug     47 (35.1%)    58 (43.3%)      57 (43.2%)  \n    Total number of events related to study drug                                           62            72              74      \n    hlt D.2.1.5                                                                                                                  \n      Total number of patients with at least one adverse event related to study drug   47 (35.1%)    58 (43.3%)      57 (43.2%)  \n      Total number of events related to study drug                                         62            72              74      \n      dcd D.2.1.5.3                                                                    47 (35.1%)    58 (43.3%)      57 (43.2%)  \n  cl D.1                                                                                                                         \n    Total number of patients with at least one adverse event related to study drug     50 (37.3%)    42 (31.3%)      51 (38.6%)  \n    Total number of events related to study drug                                           61            51              71      \n    hlt D.1.1.1                                                                                                                  \n      Total number of patients with at least one adverse event related to study drug   50 (37.3%)    42 (31.3%)      51 (38.6%)  \n      Total number of events related to study drug                                         61            51              71      \n      dcd D.1.1.1.1                                                                    50 (37.3%)    42 (31.3%)      51 (38.6%)  \n  cl B.1                                                                                                                         \n    Total number of patients with at least one adverse event related to study drug     47 (35.1%)    49 (36.6%)      43 (32.6%)  \n    Total number of events related to study drug                                           56            60              62      \n    hlt B.1.1.1                                                                                                                  \n      Total number of patients with at least one adverse event related to study drug   47 (35.1%)    49 (36.6%)      43 (32.6%)  \n      Total number of events related to study drug                                         56            60              62      \n      dcd B.1.1.1.1                                                                    47 (35.1%)    49 (36.6%)      43 (32.6%)  \n  cl C.2                                                                                                                         \n    Total number of patients with at least one adverse event related to study drug     35 (26.1%)    48 (35.8%)      55 (41.7%)  \n    Total number of events related to study drug                                           48            53              65      \n    hlt C.2.1.2                                                                                                                  \n      Total number of patients with at least one adverse event related to study drug   35 (26.1%)    48 (35.8%)      55 (41.7%)  \n      Total number of events related to study drug                                         48            53              65      \n      dcd C.2.1.2.1                                                                    35 (26.1%)    48 (35.8%)      55 (41.7%)  \n  cl C.1                                                                                                                         \n    Total number of patients with at least one adverse event related to study drug     43 (32.1%)    46 (34.3%)      43 (32.6%)  \n    Total number of events related to study drug                                           55            63              64      \n    hlt C.1.1.1                                                                                                                  \n      Total number of patients with at least one adverse event related to study drug   43 (32.1%)    46 (34.3%)      43 (32.6%)  \n      Total number of events related to study drug                                         55            63              64      \n      dcd C.1.1.1.3                                                                    43 (32.1%)    46 (34.3%)      43 (32.6%)  \n\n\n\n\n\nCodelibrary(dplyr)\nlibrary(scda)\nlibrary(teal)\nlibrary(teal.modules.clinical)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadae <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adae\")\n\n# Ensure character variables are converted to factors and empty strings and NAs are explicit missing levels.\nadsl <- df_explicit_na(adsl)\nadae <- df_explicit_na(adae)\n\napp <- teal::init(\n  data = cdisc_data(\n    cdisc_dataset(\n      \"ADSL\",\n      adsl,\n      code = 'ADSL <- df_explicit_na(synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\"))'\n    ),\n    cdisc_dataset(\n      \"ADAE\",\n      adae,\n      code = 'ADAE <- df_explicit_na(synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adae\"))'\n    ),\n    check = TRUE\n  ),\n  modules = modules(\n    tm_t_events(\n      label = \"Adverse Events Related to Study Drug\",\n      dataname = \"ADAE\",\n      arm_var = choices_selected(c(\"ARM\", \"ARMCD\"), \"ARM\"),\n      llt = choices_selected(\n        choices = variable_choices(adae, c(\"AETERM\", \"AEDECOD\")),\n        selected = c(\"AEDECOD\")\n      ),\n      hlt = choices_selected(\n        choices = variable_choices(adae, c(\"AEBODSYS\", \"AEHLT\")),\n        selected = c(\"AEBODSYS\")\n      ),\n      add_total = FALSE,\n      event_type = \"adverse event related to study drug\", # define event type here\n    )\n  ),\n  filter = list(ADAE = list(AEREL = \"Y\")) # related AEs only\n)\n\n[INFO] 2023-03-10 05:25:37.0329 pid:3768 token:[] teal.modules.clinical Initializing tm_t_events\n\nCodeshinyApp(app$ui, app$server)\n\n\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n [1] teal.modules.clinical_0.8.14.9026 teal_0.12.0.9023                 \n [3] teal.transform_0.2.0.9011         teal.data_0.1.2.9013             \n [5] shiny_1.7.4                       scda_0.1.5.9009                  \n [7] tern_0.7.10.9056                  rtables_0.6.0.1                  \n [9] formatters_0.4.0                  magrittr_2.0.3                   \n[11] dplyr_1.1.0                      \n\nloaded via a namespace (and not attached):\n [1] sass_0.4.5               tidyr_1.3.0              jsonlite_1.8.4          \n [4] splines_4.2.2            R.utils_2.12.2           bslib_0.4.2             \n [7] teal.slice_0.2.0.9026    Rdpack_2.4               assertthat_0.2.1        \n[10] teal.code_0.3.0.9001     tern.gee_0.1.0.9002      yaml_2.3.7              \n[13] pillar_1.8.1             backports_1.4.1          lattice_0.20-45         \n[16] glue_1.6.2               teal.widgets_0.2.0.9024  digest_0.6.31           \n[19] promises_1.2.0.1         rbibutils_2.2.13         checkmate_2.1.0         \n[22] colorspace_2.1-0         R.oo_1.25.0              htmltools_0.5.4         \n[25] httpuv_1.6.9             Matrix_1.5-3             pkgconfig_2.0.3         \n[28] broom_1.0.3              logger_0.2.2             purrr_1.0.1             \n[31] xtable_1.8-4             mvtnorm_1.1-3            webshot_0.5.4           \n[34] scales_1.2.1             processx_3.8.0           fontawesome_0.5.0       \n[37] later_1.3.0              emmeans_1.8.4-1          tibble_3.1.8            \n[40] styler_1.9.1             generics_0.1.3           ggplot2_3.4.1           \n[43] ellipsis_0.3.2           shinyvalidate_0.1.2      cachem_1.0.7            \n[46] withr_2.5.0              shinyjs_2.1.0            geepack_1.3.9           \n[49] cli_3.6.0                survival_3.5-3           mime_0.12               \n[52] memoise_2.0.1            ps_1.7.2                 estimability_1.4.1      \n[55] evaluate_0.20            R.methodsS3_1.8.2        fansi_1.0.4             \n[58] R.cache_0.16.0           nlme_3.1-162             MASS_7.3-58.3           \n[61] forcats_1.0.0            teal.reporter_0.1.1.9013 tools_4.2.2             \n[64] lifecycle_1.0.3          munsell_0.5.0            callr_3.7.3             \n[67] compiler_4.2.2           jquerylib_0.1.4          rlang_1.0.6             \n[70] grid_4.2.2               htmlwidgets_1.6.1        rmarkdown_2.20          \n[73] shinyWidgets_0.7.6       gtable_0.3.1             codetools_0.2-19        \n[76] teal.logger_0.1.1.9004   R6_2.5.1                 knitr_1.42              \n[79] fastmap_1.1.1            utf8_1.2.3               Rcpp_1.0.10             \n[82] vctrs_0.5.2              tidyselect_1.2.0         xfun_0.37               \n[85] coda_0.19-4             \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R                       [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/tables/adverse-events/aet09.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "tables/adverse-events/aet02_smq.html",
    "href": "tables/adverse-events/aet02_smq.html",
    "title": "AET02_SMQ",
    "section": "",
    "text": "Data Setup\nStandard Table\nTable with Customized Queries\nTeal\nSession Info\n\n\n\n\nCodelibrary(dplyr)\nlibrary(tern)\nlibrary(scda)\nlibrary(stringr)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadae <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adae\")\n\n# Ensure character variables are converted to factors and empty strings and NAs are explicit missing levels.\nadsl <- df_explicit_na(adsl)\nadae <- df_explicit_na(adae)\n\n# Simulate a random AAG dataset.\naag <- data.frame(\n  NAMVAR = c(\"SMQ01NAM\", \"SMQ01NAM\", \"SMQ02NAM\", \"CQ01NAM\", \"CQ01NAM\"),\n  SRCVAR = rep(\"AEDECOD\", 5),\n  GRPTYPE = c(\"SMQ\", \"SMQ\", \"SMQ\", \"CUSTOM\", \"CUSTOM\"),\n  REFID = c(1, 1, 2, 3, 3),\n  REFNAME = c(rep(\"C.1.1.1.3/B.2.2.3.1 AESI\", 2), \"non observed SMQ02NAM level\", rep(\"D.2.1.5.3/A.1.1.1.1 AESI\", 2)),\n  SCOPE = c(\"BROAD\", \"BROAD\", \"BROAD\", \"\", \"\"),\n  REFTERM = c(\"C.1.1.1.3\", \"B.2.2.3.1\", \"Z.9.9.9.9\", \"D.2.1.5.3\", \"A.1.1.1.1\"),\n  stringsAsFactors = FALSE\n)\n\n# Create summary AAG dataset (used for labelling).\n# Note it's important to incorporate SCOPE into the basket names for SMQs so as to\n# match the flags present in ADAE.\naag_summary <- aag %>%\n  select(NAMVAR, REFNAME, SCOPE) %>%\n  unique() %>%\n  mutate(\n    REFNAME_SCOPE = ifelse(SCOPE == \"\", REFNAME, paste0(REFNAME, \"(\", SCOPE, \")\"))\n  ) %>%\n  rename(basket = NAMVAR, basket_name = REFNAME_SCOPE) %>%\n  select(basket, basket_name)\n\n# Make a summary of the full ADAE based on AAG by using h_stack_by_baskets helper function\nadae_smq_all <- h_stack_by_baskets(df = adae, aag_summary = aag_summary, keys = c(\"STUDYID\", \"USUBJID\", \"ACTARMCD\", \"AEDECOD\"))\n\n# Post-process adae_smq_all to keep only certain baskets of interest for variant 1\n# Not need to drop baskets for variant 2 as all baskets will be considered.\nbaskets_to_drop_variant <- aag_summary$basket_name[!aag_summary$basket %in% c(\"SMQ01NAM\")]\n\n# Adjust the analysis dataset based on basket subset for variant 1.\nadae_smq_1 <- adae_smq_all %>%\n  filter(!adae_smq_all$SMQ %in% baskets_to_drop_variant) %>%\n  mutate(\n    SMQ = tern::fct_discard(SMQ, discard = baskets_to_drop_variant)\n  )\n\n\n\n\n\nCodecriteria_fun <- function(tr) !is(tr, \"ContentRow\") && all_zero_or_na(tr)\n\nlyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ACTARMCD\") %>%\n  analyze_num_patients(\n    vars = \"USUBJID\",\n    .stats = c(\"unique\"),\n    .labels = c(\n      unique = \"Total number of patients with at least one adverse event\"\n    )\n  ) %>%\n  split_rows_by(\n    \"SMQ\",\n    child_labels = \"visible\",\n    nested = FALSE,\n    split_fun = trim_levels_in_group(\"AEDECOD\", drop_outlevs = FALSE),\n    label_pos = \"topleft\",\n    split_label = \"Standardized MedDRA Query\"\n  ) %>%\n  summarize_num_patients(\n    var = \"USUBJID\",\n    .stats = c(\"unique\", \"nonunique\"),\n    .labels = c(\n      unique = \"Total number of patients with at least one adverse event\",\n      nonunique = \"Total number of events\"\n    )\n  ) %>%\n  count_occurrences(\n    vars = \"AEDECOD\",\n    .indent_mods = -1L,\n    drop = FALSE\n  ) %>%\n  append_varlabels(adae, \"AEDECOD\", indent = 1L)\n\nresult <- build_table(\n  lyt,\n  df = adae_smq_1,\n  alt_counts_df = adsl\n) %>%\n  sort_at_path(path = c(\"SMQ\"), scorefun = cont_n_allcols) %>%\n  sort_at_path(path = c(\"SMQ\", \"*\", \"AEDECOD\"), scorefun = score_occurrences, na.pos = \"last\") %>%\n  trim_rows(criteria = criteria_fun)\n\nresult\n\nStandardized MedDRA Query                                      ARM A        ARM B        ARM C   \n  Dictionary-Derived Term                                     (N=134)      (N=134)      (N=132)  \n—————————————————————————————————————————————————————————————————————————————————————————————————\nTotal number of patients with at least one adverse event     72 (53.7%)   79 (59.0%)   75 (56.8%)\nC.1.1.1.3/B.2.2.3.1 AESI(BROAD)                                                                  \n  Total number of patients with at least one adverse event   72 (53.7%)   79 (59.0%)   75 (56.8%)\n  Total number of events                                        119          139          141    \n  dcd B.2.2.3.1                                              48 (35.8%)   54 (40.3%)   51 (38.6%)\n  dcd C.1.1.1.3                                              43 (32.1%)   46 (34.3%)   43 (32.6%)\n\n\n\n\n\nCodecriteria_fun <- function(tr) !is(tr, \"ContentRow\") && all_zero_or_na(tr)\n\nlyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ACTARMCD\") %>%\n  analyze_num_patients(\n    vars = \"USUBJID\",\n    .stats = c(\"unique\"),\n    .labels = c(\n      unique = \"Total number of patients with at least one adverse event\"\n    )\n  ) %>%\n  split_rows_by(\n    \"SMQ\",\n    child_labels = \"visible\",\n    nested = FALSE,\n    split_fun = trim_levels_in_group(\"AEDECOD\", drop_outlevs = FALSE),\n    label_pos = \"topleft\",\n    split_label = \"Standardized MedDRA Query\"\n  ) %>%\n  summarize_num_patients(\n    var = \"USUBJID\",\n    .stats = c(\"unique\", \"nonunique\"),\n    .labels = c(\n      unique = \"Total number of patients with at least one adverse event\",\n      nonunique = \"Total number of events\"\n    )\n  ) %>%\n  count_occurrences(\n    vars = \"AEDECOD\",\n    .indent_mods = -1L,\n    drop = FALSE\n  ) %>%\n  append_varlabels(adae, \"AEDECOD\", indent = 1L)\n\nresult <- build_table(\n  lyt,\n  df = adae_smq_all,\n  alt_counts_df = adsl\n) %>%\n  sort_at_path(path = c(\"SMQ\"), scorefun = cont_n_allcols) %>%\n  sort_at_path(path = c(\"SMQ\", \"*\", \"AEDECOD\"), scorefun = score_occurrences, na.pos = \"last\") %>%\n  trim_rows(criteria = criteria_fun)\n\nresult\n\nStandardized MedDRA Query                                      ARM A         ARM B         ARM C   \n  Dictionary-Derived Term                                     (N=134)       (N=134)       (N=132)  \n———————————————————————————————————————————————————————————————————————————————————————————————————\nTotal number of patients with at least one adverse event     95 (70.9%)   103 (76.9%)   108 (81.8%)\nD.2.1.5.3/A.1.1.1.1 AESI                                                                           \n  Total number of patients with at least one adverse event   74 (55.2%)   80 (59.7%)    87 (65.9%) \n  Total number of events                                        126           134           162    \n  dcd D.2.1.5.3                                              47 (35.1%)   58 (43.3%)    57 (43.2%) \n  dcd A.1.1.1.1                                              50 (37.3%)   45 (33.6%)    63 (47.7%) \nC.1.1.1.3/B.2.2.3.1 AESI(BROAD)                                                                    \n  Total number of patients with at least one adverse event   72 (53.7%)   79 (59.0%)    75 (56.8%) \n  Total number of events                                        119           139           141    \n  dcd B.2.2.3.1                                              48 (35.8%)   54 (40.3%)    51 (38.6%) \n  dcd C.1.1.1.3                                              43 (32.1%)   46 (34.3%)    43 (32.6%) \nnon observed SMQ02NAM level(BROAD)                                                                 \n  Total number of patients with at least one adverse event       0             0             0     \n  Total number of events                                         0             0             0     \n\n\n\n\n\nCodelibrary(scda)\nlibrary(teal.modules.clinical)\nlibrary(dplyr)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadae <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adae\")\n\nnames_baskets <- grep(\"^(SMQ|CQ).*NAM$\", names(adae), value = TRUE)\nnames_scopes <- grep(\"^SMQ.*SC$\", names(adae), value = TRUE)\n\ncs_baskets <- choices_selected(\n  choices = variable_choices(adae, subset = names_baskets),\n  selected = names_baskets\n)\ncs_scopes <- choices_selected(\n  choices = variable_choices(adae, subset = names_scopes),\n  selected = names_scopes,\n  fixed = TRUE\n)\n\napp <- init(\n  data = cdisc_data(\n    cdisc_dataset(\"ADSL\", adsl,\n      code = 'ADSL <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")'\n    ),\n    cdisc_dataset(\"ADAE\", adae,\n      code = 'ADAE <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adae\")'\n    ),\n    check = TRUE\n  ),\n  modules = modules(\n    tm_t_smq(\n      label = \"Adverse events by `SMQ` Table\",\n      dataname = \"ADAE\",\n      arm_var = choices_selected(\n        choices = variable_choices(adsl, subset = c(\"ARM\", \"SEX\")),\n        selected = \"ARM\"\n      ),\n      add_total = FALSE,\n      baskets = cs_baskets,\n      scopes = cs_scopes,\n      llt = choices_selected(\n        choices = variable_choices(adae, subset = c(\"AEDECOD\")),\n        selected = \"AEDECOD\"\n      )\n    )\n  )\n)\n\n[INFO] 2023-03-10 05:26:05.4902 pid:3846 token:[] teal.modules.clinical Initializing tm_t_smq\n\nCodeshinyApp(app$ui, app$server)\n\n\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n [1] teal.modules.clinical_0.8.14.9026 teal_0.12.0.9023                 \n [3] teal.transform_0.2.0.9011         teal.data_0.1.2.9013             \n [5] shiny_1.7.4                       stringr_1.5.0                    \n [7] scda_0.1.5.9009                   tern_0.7.10.9056                 \n [9] rtables_0.6.0.1                   formatters_0.4.0                 \n[11] magrittr_2.0.3                    dplyr_1.1.0                      \n\nloaded via a namespace (and not attached):\n [1] sass_0.4.5               tidyr_1.3.0              jsonlite_1.8.4          \n [4] splines_4.2.2            R.utils_2.12.2           bslib_0.4.2             \n [7] teal.slice_0.2.0.9026    Rdpack_2.4               assertthat_0.2.1        \n[10] teal.code_0.3.0.9001     tern.gee_0.1.0.9002      yaml_2.3.7              \n[13] pillar_1.8.1             backports_1.4.1          lattice_0.20-45         \n[16] glue_1.6.2               teal.widgets_0.2.0.9024  digest_0.6.31           \n[19] promises_1.2.0.1         rbibutils_2.2.13         checkmate_2.1.0         \n[22] colorspace_2.1-0         R.oo_1.25.0              htmltools_0.5.4         \n[25] httpuv_1.6.9             Matrix_1.5-3             pkgconfig_2.0.3         \n[28] broom_1.0.3              logger_0.2.2             purrr_1.0.1             \n[31] xtable_1.8-4             mvtnorm_1.1-3            webshot_0.5.4           \n[34] scales_1.2.1             processx_3.8.0           fontawesome_0.5.0       \n[37] later_1.3.0              emmeans_1.8.4-1          tibble_3.1.8            \n[40] styler_1.9.1             generics_0.1.3           ggplot2_3.4.1           \n[43] ellipsis_0.3.2           shinyvalidate_0.1.2      cachem_1.0.7            \n[46] withr_2.5.0              shinyjs_2.1.0            geepack_1.3.9           \n[49] cli_3.6.0                survival_3.5-3           mime_0.12               \n[52] memoise_2.0.1            ps_1.7.2                 estimability_1.4.1      \n[55] evaluate_0.20            R.methodsS3_1.8.2        fansi_1.0.4             \n[58] R.cache_0.16.0           nlme_3.1-162             MASS_7.3-58.3           \n[61] forcats_1.0.0            teal.reporter_0.1.1.9013 tools_4.2.2             \n[64] lifecycle_1.0.3          munsell_0.5.0            callr_3.7.3             \n[67] jquerylib_0.1.4          compiler_4.2.2           rlang_1.0.6             \n[70] grid_4.2.2               htmlwidgets_1.6.1        rmarkdown_2.20          \n[73] shinyWidgets_0.7.6       gtable_0.3.1             codetools_0.2-19        \n[76] teal.logger_0.1.1.9004   R6_2.5.1                 knitr_1.42              \n[79] fastmap_1.1.1            utf8_1.2.3               stringi_1.7.12          \n[82] Rcpp_1.0.10              vctrs_0.5.2              tidyselect_1.2.0        \n[85] xfun_0.37                coda_0.19-4             \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R                       [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/tables/adverse-events/aet02_smq.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "tables/adverse-events/aet01.html",
    "href": "tables/adverse-events/aet01.html",
    "title": "AET01",
    "section": "",
    "text": "Data Setup\nStandard Table\nTable with Medical  Concepts Section\nTable with  Modified Rows\nTable with Rows Counting  Events & Additional Sections\nTeal\nSession Info\n\n\n\nTo illustrate, additional variables such as flags (TRUE/FALSE) for select AEs of interest and select AE baskets are added to the adae dataset.\n\nCodelibrary(tern)\nlibrary(dplyr)\nlibrary(scda)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadae <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adae\")\n\n# Ensure character variables are converted to factors and empty strings and NAs are explicit missing levels.\nadsl <- df_explicit_na(adsl)\nadae <- df_explicit_na(\n  adae,\n  omit_columns = c(\"SMQ01NAM\", \"SMQ01SC\", \"SMQ02NAM\", \"SMQ02SC\", \"CQ01NAM\", \"STUDYID\", \"USUBJID\")\n)\n\nset.seed(99)\n\nadae <- adae %>%\n  mutate(\n    AEDECOD = as.character(AEDECOD),\n    AESDTH = sample(c(\"N\", \"Y\"), size = nrow(adae), replace = TRUE, prob = c(0.99, 0.01)),\n    AEACN = sample(\n      c(\"DOSE NOT CHANGED\", \"DOSE INCREASED\", \"DRUG INTERRUPTED\", \"DRUG WITHDRAWN\"),\n      size = nrow(adae),\n      replace = TRUE, prob = c(0.68, 0.02, 0.25, 0.05)\n    ),\n    FATAL = AESDTH == \"Y\",\n    SER = AESER == \"Y\",\n    SERWD = AESER == \"Y\" & AEACN == \"DRUG WITHDRAWN\",\n    SERDSM = AESER == \"Y\" & AEACN %in% c(\"DRUG INTERRUPTED\", \"DOSE INCREASED\", \"DOSE REDUCED\"),\n    RELSER = AESER == \"Y\" & AEREL == \"Y\",\n    WD = AEACN == \"DRUG WITHDRAWN\",\n    DSM = AEACN %in% c(\"DRUG INTERRUPTED\", \"DOSE INCREASED\", \"DOSE REDUCED\"),\n    REL = AEREL == \"Y\",\n    RELWD = AEREL == \"Y\" & AEACN == \"DRUG WITHDRAWN\",\n    RELDSM = AEREL == \"Y\" & AEACN %in% c(\"DRUG INTERRUPTED\", \"DOSE INCREASED\", \"DOSE REDUCED\"),\n    CTC35 = AETOXGR %in% c(\"3\", \"4\", \"5\"),\n    CTC45 = AETOXGR %in% c(\"4\", \"5\"),\n    SMQ01 = SMQ01NAM != \"\",\n    SMQ02 = SMQ02NAM != \"\",\n    CQ01 = CQ01NAM != \"\",\n    USUBJID_AESEQ = paste(USUBJID, AESEQ, sep = \"@@\") # Create unique ID per AE in dataset.\n  ) %>%\n  var_relabel(\n    AEDECOD = \"Dictionary-Derived Term\",\n    AESDTH = \"Results in Death\",\n    AEACN = \"Action Taken with Study Treatment\",\n    FATAL = \"AE with fatal outcome\",\n    SER = \"Serious AE\",\n    SERWD = \"Serious AE leading to withdrawal from treatment\",\n    SERDSM = \"Serious AE leading to dose modification/interruption\",\n    RELSER = \"Related Serious AE\",\n    WD = \"AE leading to withdrawal from treatment\",\n    DSM = \"AE leading to dose modification/interruption\",\n    REL = \"Related AE\",\n    RELWD = \"Related AE leading to withdrawal from treatment\",\n    RELDSM = \"Related AE leading to dose modification/interruption\",\n    CTC35 = \"Grade 3-5 AE\",\n    CTC45 = \"Grade 4/5 AE\",\n    SMQ01 = aesi_label(adae$SMQ01NAM, adae$SMQ01SC),\n    SMQ02 = aesi_label(adae$SMQ02NAM, adae$SMQ02SC),\n    CQ01 = aesi_label(adae$CQ01NAM)\n  )\n\n\n\n\n\nCodeaesi_vars <- c(\"FATAL\", \"SER\", \"SERWD\", \"SERDSM\", \"RELSER\", \"WD\", \"DSM\", \"REL\", \"RELWD\", \"RELDSM\", \"CTC35\")\n\n# Layout for variables from adsl dataset.\nlyt_adsl <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ACTARM\") %>%\n  count_values(\n    \"DTHFL\",\n    values = \"Y\",\n    .labels = c(count_fraction = \"Total number of deaths\"),\n    denom = \"N_col\"\n  ) %>%\n  count_values(\n    \"DCSREAS\",\n    values = \"ADVERSE EVENT\",\n    .labels = c(count_fraction = \"Total number of patients withdrawn from study due to an AE\"),\n    denom = \"N_col\"\n  )\n\nresult_adsl <- build_table(lyt_adsl, df = adsl, alt_counts_df = adsl)\n\n# Layout for variables from adae dataset.\nlyt_adae <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ACTARM\") %>%\n  count_patients_with_event(\n    vars = \"USUBJID\",\n    filters = c(\"STUDYID\" = as.character(unique(adae$STUDYID))),\n    denom = \"N_col\",\n    .labels = c(count_fraction = \"Total number of patients with at least one adverse event\")\n  ) %>%\n  count_values(\n    \"STUDYID\",\n    values = as.character(unique(adae$STUDYID)),\n    .stats = \"count\",\n    .labels = c(count = \"Total AEs\"),\n    table_names = \"total_aes\"\n  ) %>%\n  count_patients_with_flags(\n    \"USUBJID\",\n    flag_variables = var_labels(adae[, aesi_vars]),\n    denom = \"N_col\",\n    var_labels = \"Total number of patients with at least one\",\n    show_labels = \"visible\"\n  )\n\nresult_adae <- build_table(lyt_adae, df = adae, alt_counts_df = adsl)\n\n# Combine tables.\ncol_info(result_adsl) <- col_info(result_adae)\nresult <- rbind(\n  result_adae[1:2, ],\n  result_adsl,\n  result_adae[3:nrow(result_adae), ]\n)\n\nresult\n\n                                                              A: Drug X    B: Placebo    C: Combination\n                                                               (N=134)       (N=134)        (N=132)    \n———————————————————————————————————————————————————————————————————————————————————————————————————————\nTotal number of patients with at least one adverse event     122 (91.0%)   123 (91.8%)    120 (90.9%)  \nTotal AEs                                                        609           622            703      \nTotal number of deaths                                       25 (18.66%)   23 (17.16%)    22 (16.67%)  \nTotal number of patients withdrawn from study due to an AE    3 (2.24%)     6 (4.48%)      5 (3.79%)   \nTotal number of patients with at least one                                                             \n  AE with fatal outcome                                       6 (4.5%)      9 (6.7%)        6 (4.5%)   \n  Serious AE                                                 104 (77.6%)   101 (75.4%)     99 (75.0%)  \n  Serious AE leading to withdrawal from treatment             7 (5.2%)     16 (11.9%)      11 (8.3%)   \n  Serious AE leading to dose modification/interruption       43 (32.1%)    48 (35.8%)      52 (39.4%)  \n  Related Serious AE                                         76 (56.7%)    70 (52.2%)      75 (56.8%)  \n  AE leading to withdrawal from treatment                    25 (18.7%)    31 (23.1%)      31 (23.5%)  \n  AE leading to dose modification/interruption               79 (59.0%)    89 (66.4%)      90 (68.2%)  \n  Related AE                                                 105 (78.4%)   108 (80.6%)    109 (82.6%)  \n  Related AE leading to withdrawal from treatment            14 (10.4%)    14 (10.4%)      15 (11.4%)  \n  Related AE leading to dose modification/interruption       56 (41.8%)    56 (41.8%)      60 (45.5%)  \n  Grade 3-5 AE                                               109 (81.3%)   104 (77.6%)    109 (82.6%)  \n\n\n\n\n\nCodeaesi_vars <- c(\"FATAL\", \"SER\", \"SERWD\", \"SERDSM\", \"RELSER\", \"WD\", \"DSM\", \"REL\", \"RELWD\", \"RELDSM\", \"CTC35\")\nbasket_vars <- c(\"SMQ01\", \"SMQ02\", \"CQ01\")\n\n# Layout for variables from adsl dataset.\nlyt_adsl <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ACTARM\") %>%\n  count_values(\n    \"DTHFL\",\n    values = \"Y\",\n    .labels = c(count_fraction = \"Total number of deaths\"),\n    denom = \"N_col\"\n  ) %>%\n  count_values(\n    \"DCSREAS\",\n    values = \"ADVERSE EVENT\",\n    .labels = c(count_fraction = \"Total number of patients withdrawn from study due to an AE\"),\n    denom = \"N_col\"\n  )\n\nresult_adsl <- build_table(lyt_adsl, df = adsl, alt_counts_df = adsl)\n\n# Layout for variables from adae dataset.\nlyt_adae <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ACTARM\") %>%\n  count_patients_with_event(\n    vars = \"USUBJID\",\n    filters = c(\"STUDYID\" = as.character(unique(adae$STUDYID))),\n    denom = \"N_col\",\n    .labels = c(count_fraction = \"Total number of patients with at least one adverse event\")\n  ) %>%\n  count_values(\n    \"STUDYID\",\n    values = as.character(unique(adae$STUDYID)),\n    .stats = \"count\",\n    .labels = c(count = \"Total AEs\"),\n    denom = \"N_col\",\n    table_names = \"total_aes\"\n  ) %>%\n  count_patients_with_flags(\n    \"USUBJID\",\n    flag_variables = var_labels(adae[, aesi_vars]),\n    table_names = \"table_ae\",\n    denom = \"N_col\",\n    var_labels = \"Total number of patients with at least one\",\n    show_labels = \"visible\"\n  ) %>%\n  count_patients_with_flags(\n    \"USUBJID\",\n    flag_variables = var_labels(adae[, basket_vars]),\n    table_names = \"table_aesi\",\n    denom = \"N_col\",\n    var_labels = \"Total number of patients with at least one\",\n    show_labels = \"visible\"\n  )\n\nresult_adae <- build_table(lyt_adae, df = adae, alt_counts_df = adsl)\n\n# Combine tables.\ncol_info(result_adsl) <- col_info(result_adae)\nresult <- rbind(\n  result_adae[1:2, ],\n  result_adsl,\n  result_adae[3:nrow(result_adae), ]\n)\n\nresult\n\n                                                              A: Drug X    B: Placebo    C: Combination\n                                                               (N=134)       (N=134)        (N=132)    \n———————————————————————————————————————————————————————————————————————————————————————————————————————\nTotal number of patients with at least one adverse event     122 (91.0%)   123 (91.8%)    120 (90.9%)  \nTotal AEs                                                        609           622            703      \nTotal number of deaths                                       25 (18.66%)   23 (17.16%)    22 (16.67%)  \nTotal number of patients withdrawn from study due to an AE    3 (2.24%)     6 (4.48%)      5 (3.79%)   \nTotal number of patients with at least one                                                             \n  AE with fatal outcome                                       6 (4.5%)      9 (6.7%)        6 (4.5%)   \n  Serious AE                                                 104 (77.6%)   101 (75.4%)     99 (75.0%)  \n  Serious AE leading to withdrawal from treatment             7 (5.2%)     16 (11.9%)      11 (8.3%)   \n  Serious AE leading to dose modification/interruption       43 (32.1%)    48 (35.8%)      52 (39.4%)  \n  Related Serious AE                                         76 (56.7%)    70 (52.2%)      75 (56.8%)  \n  AE leading to withdrawal from treatment                    25 (18.7%)    31 (23.1%)      31 (23.5%)  \n  AE leading to dose modification/interruption               79 (59.0%)    89 (66.4%)      90 (68.2%)  \n  Related AE                                                 105 (78.4%)   108 (80.6%)    109 (82.6%)  \n  Related AE leading to withdrawal from treatment            14 (10.4%)    14 (10.4%)      15 (11.4%)  \n  Related AE leading to dose modification/interruption       56 (41.8%)    56 (41.8%)      60 (45.5%)  \n  Grade 3-5 AE                                               109 (81.3%)   104 (77.6%)    109 (82.6%)  \nTotal number of patients with at least one                                                             \n  C.1.1.1.3/B.2.2.3.1 AESI (BROAD)                           72 (53.7%)    79 (59.0%)      75 (56.8%)  \n  SMQ 02 Reference Name                                           0             0              0       \n  D.2.1.5.3/A.1.1.1.1 AESI                                   74 (55.2%)    80 (59.7%)      87 (65.9%)  \n\n\n\n\n\nCodeaesi_vars <- c(\"FATAL\", \"SER\", \"WD\", \"REL\", \"CTC35\", \"CTC45\")\n# Layout for variables from adsl dataset.\nlyt_adsl <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ACTARM\") %>%\n  count_values(\n    \"DTHFL\",\n    values = \"Y\",\n    .labels = c(count_fraction = \"Total number of deaths\"),\n    denom = \"N_col\"\n  ) %>%\n  count_values(\n    \"DCSREAS\",\n    values = \"ADVERSE EVENT\",\n    .labels = c(count_fraction = \"Total number of patients withdrawn from study due to an AE\"),\n    denom = \"N_col\",\n    table_names = \"tbl_dscsreas_ae\"\n  ) %>%\n  count_values(\n    \"DCSREAS\",\n    values = \"WITHDRAWAL BY SUBJECT\",\n    .labels = c(count_fraction = \"Total number of patients withdrawn informed consent\"),\n    denom = \"N_col\",\n    table_names = \"tbl_dscsreas_wd\"\n  )\nresult_adsl <- build_table(lyt_adsl, df = adsl, alt_counts_df = adsl)\n\n# Layout for variables from adae dataset.\nlyt_adae <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ACTARM\") %>%\n  count_patients_with_event(\n    vars = \"USUBJID\",\n    filters = c(\"STUDYID\" = as.character(unique(adae$STUDYID))),\n    denom = \"N_col\",\n    .labels = c(count_fraction = \"Total number of patients with at least one adverse event\")\n  ) %>%\n  count_values(\n    \"STUDYID\",\n    values = as.character(unique(adae$STUDYID)),\n    .stats = \"count\",\n    .labels = c(count = \"Total AEs\"),\n    denom = \"N_col\",\n    table_names = \"total_aes\"\n  ) %>%\n  count_patients_with_flags(\n    \"USUBJID\",\n    flag_variables = var_labels(adae[, aesi_vars]),\n    denom = \"N_col\",\n    var_labels = \"Total number of patients with at least one\",\n    show_labels = \"visible\"\n  )\n\nresult_adae <- build_table(lyt_adae, df = adae, alt_counts_df = adsl)\n\n# Combine tables.\ncol_info(result_adsl) <- col_info(result_adae)\nresult <- rbind(\n  result_adae[1:2, ],\n  result_adsl,\n  result_adae[3:nrow(result_adae), ]\n)\n\nresult\n\n                                                              A: Drug X    B: Placebo    C: Combination\n                                                               (N=134)       (N=134)        (N=132)    \n———————————————————————————————————————————————————————————————————————————————————————————————————————\nTotal number of patients with at least one adverse event     122 (91.0%)   123 (91.8%)    120 (90.9%)  \nTotal AEs                                                        609           622            703      \nTotal number of deaths                                       25 (18.66%)   23 (17.16%)    22 (16.67%)  \nTotal number of patients withdrawn from study due to an AE    3 (2.24%)     6 (4.48%)      5 (3.79%)   \nTotal number of patients withdrawn informed consent           1 (0.75%)     1 (0.75%)      1 (0.76%)   \nTotal number of patients with at least one                                                             \n  AE with fatal outcome                                       6 (4.5%)      9 (6.7%)        6 (4.5%)   \n  Serious AE                                                 104 (77.6%)   101 (75.4%)     99 (75.0%)  \n  AE leading to withdrawal from treatment                    25 (18.7%)    31 (23.1%)      31 (23.5%)  \n  Related AE                                                 105 (78.4%)   108 (80.6%)    109 (82.6%)  \n  Grade 3-5 AE                                               109 (81.3%)   104 (77.6%)    109 (82.6%)  \n  Grade 4/5 AE                                               91 (67.9%)    90 (67.2%)      93 (70.5%)  \n\n\n\n\n\nCodecount_subj_vars <- c(\"FATAL\", \"SER\", \"WD\", \"DSM\", \"REL\", \"CTC35\")\ncount_term_vars <- c(\"SER\", \"DSM\", \"REL\", \"CTC35\", \"CTC45\")\ncount_ae_vars <- c(\"SER\", \"DSM\", \"REL\", \"CTC35\", \"CTC45\")\n\n# Layout for variables from adsl dataset.\nlyt_adsl <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ACTARM\") %>%\n  count_values(\n    \"DTHFL\",\n    values = \"Y\",\n    .labels = c(count_fraction = \"Total number of deaths\"),\n    denom = \"N_col\"\n  ) %>%\n  count_values(\n    \"DCSREAS\",\n    values = \"ADVERSE EVENT\",\n    .labels = c(count_fraction = \"Total number of patients withdrawn from study due to an AE\"),\n    denom = \"N_col\"\n  )\n\nresult_adsl <- build_table(lyt_adsl, df = adsl, alt_counts_df = adsl)\n\n# Layout for variables from adae dataset.\nlyt_adae <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ACTARM\") %>%\n  count_patients_with_event(\n    vars = \"USUBJID\",\n    filters = c(\"STUDYID\" = as.character(unique(adae$STUDYID))),\n    denom = \"N_col\",\n    .labels = c(count_fraction = \"Total number of patients with at least one adverse event\"),\n    table_names = \"total_subj\"\n  ) %>%\n  count_values(\n    \"STUDYID\",\n    values = as.character(unique(adae$STUDYID)),\n    .stats = \"count\",\n    .labels = c(count = \"Total AEs\"),\n    denom = \"N_col\",\n    table_names = \"total_aes\"\n  ) %>%\n  count_patients_with_flags(\n    \"USUBJID\",\n    flag_variables = var_labels(adae[, count_subj_vars]),\n    denom = \"N_col\",\n    var_labels = \"Total number of patients with at least one\",\n    show_labels = \"visible\"\n  ) %>%\n  count_patients_with_flags(\n    \"AEDECOD\",\n    flag_variables = var_labels(adae[, count_term_vars]),\n    .stats = \"count\",\n    .formats = c(count = \"xx\"),\n    table_names = \"table_term\",\n    var_labels = \"Total number of unique preferred terms which are\",\n    show_labels = \"visible\"\n  ) %>%\n  count_patients_with_flags(\n    \"USUBJID_AESEQ\",\n    flag_variables = var_labels(adae[, count_ae_vars]),\n    .stats = \"count\",\n    .formats = c(count = \"xx\"),\n    table_names = \"table_ae\",\n    var_labels = \"Total number of adverse events which are\",\n    show_labels = \"visible\"\n  )\n\nresult_adae <- build_table(lyt_adae, df = adae, alt_counts_df = adsl)\n\n# Combine tables.\ncol_info(result_adsl) <- col_info(result_adae)\nresult <- rbind(\n  result_adae[1:2, ],\n  result_adsl,\n  result_adae[3:nrow(result_adae), ]\n)\n\nresult\n\n                                                              A: Drug X    B: Placebo    C: Combination\n                                                               (N=134)       (N=134)        (N=132)    \n———————————————————————————————————————————————————————————————————————————————————————————————————————\nTotal number of patients with at least one adverse event     122 (91.0%)   123 (91.8%)    120 (90.9%)  \nTotal AEs                                                        609           622            703      \nTotal number of deaths                                       25 (18.66%)   23 (17.16%)    22 (16.67%)  \nTotal number of patients withdrawn from study due to an AE    3 (2.24%)     6 (4.48%)      5 (3.79%)   \nTotal number of patients with at least one                                                             \n  AE with fatal outcome                                       6 (4.5%)      9 (6.7%)        6 (4.5%)   \n  Serious AE                                                 104 (77.6%)   101 (75.4%)     99 (75.0%)  \n  AE leading to withdrawal from treatment                    25 (18.7%)    31 (23.1%)      31 (23.5%)  \n  AE leading to dose modification/interruption               79 (59.0%)    89 (66.4%)      90 (68.2%)  \n  Related AE                                                 105 (78.4%)   108 (80.6%)    109 (82.6%)  \n  Grade 3-5 AE                                               109 (81.3%)   104 (77.6%)    109 (82.6%)  \nTotal number of unique preferred terms which are                                                       \n  Serious AE                                                      4             4              4       \n  AE leading to dose modification/interruption                   10            10              10      \n  Related AE                                                      5             5              5       \n  Grade 3-5 AE                                                    5             5              5       \n  Grade 4/5 AE                                                    3             3              3       \nTotal number of adverse events which are                                                               \n  Serious AE                                                     249           255            282      \n  AE leading to dose modification/interruption                   150           167            187      \n  Related AE                                                     282           299            336      \n  Grade 3-5 AE                                                   303           291            327      \n  Grade 4/5 AE                                                   172           174            197      \n\n\n\n\n\nCodelibrary(teal.modules.clinical)\nlibrary(scda)\nlibrary(dplyr)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadae <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adae\")\n\nadd_event_flags <- function(dat) {\n  dat %>%\n    dplyr::mutate(\n      TMPFL_SER = AESER == \"Y\",\n      TMPFL_REL = AEREL == \"Y\",\n      TMPFL_GR5 = AETOXGR == \"5\",\n      TMP_SMQ01 = !is.na(SMQ01NAM),\n      TMP_SMQ02 = !is.na(SMQ02NAM),\n      TMP_CQ01 = !is.na(CQ01NAM)\n    ) %>%\n    var_relabel(\n      TMPFL_SER = \"Serious AE\",\n      TMPFL_REL = \"Related AE\",\n      TMPFL_GR5 = \"Grade 5 AE\",\n      TMP_SMQ01 = aesi_label(dat[[\"SMQ01NAM\"]], dat[[\"SMQ01SC\"]]),\n      TMP_SMQ02 = aesi_label(dat[[\"SMQ02NAM\"]], dat[[\"SMQ02SC\"]]),\n      TMP_CQ01 = aesi_label(dat[[\"CQ01NAM\"]])\n    )\n}\n\n# Generating user-defined event flags.\nadae <- adae %>% add_event_flags()\n\nae_anl_vars <- names(adae)[startsWith(names(adae), \"TMPFL_\")]\naesi_vars <- names(adae)[startsWith(names(adae), \"TMP_\")]\n\napp <- init(\n  data = cdisc_data(\n    cdisc_dataset(\"ADSL\", adsl, code = 'ADSL <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")'),\n    cdisc_dataset(\"ADAE\", adae, code = 'ADAE <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adae\")\n      add_event_flags <- function(dat) {\n        dat %>%\n          dplyr::mutate(\n            TMPFL_SER = AESER == \"Y\",\n            TMPFL_REL = AEREL == \"Y\",\n            TMPFL_GR5 = AETOXGR == \"5\",\n            TMP_SMQ01 = !is.na(SMQ01NAM),\n            TMP_SMQ02 = !is.na(SMQ02NAM),\n            TMP_CQ01 = !is.na(CQ01NAM)\n          ) %>%\n          var_relabel(\n            TMPFL_SER = \"Serious AE\",\n            TMPFL_REL = \"Related AE\",\n            TMPFL_GR5 = \"Grade 5 AE\",\n            TMP_SMQ01 = aesi_label(dat[[\"SMQ01NAM\"]], dat[[\"SMQ01SC\"]]),\n            TMP_SMQ02 = aesi_label(dat[[\"SMQ02NAM\"]], dat[[\"SMQ02SC\"]]),\n            TMP_CQ01 = aesi_label(dat[[\"CQ01NAM\"]])\n          )\n      }\n      ADAE <- ADAE %>% add_event_flags()'),\n    check = TRUE\n  ),\n  modules = modules(\n    tm_t_events_summary(\n      label = \"Adverse Events Summary\",\n      dataname = \"ADAE\",\n      arm_var = choices_selected(\n        choices = variable_choices(\"ADSL\", c(\"ARM\", \"ARMCD\")),\n        selected = \"ARM\"\n      ),\n      flag_var_anl = choices_selected(\n        choices = variable_choices(\"ADAE\", ae_anl_vars),\n        selected = ae_anl_vars[1],\n        keep_order = TRUE,\n        fixed = FALSE\n      ),\n      flag_var_aesi = choices_selected(\n        choices = variable_choices(\"ADAE\", aesi_vars),\n        selected = aesi_vars[1],\n        keep_order = TRUE,\n        fixed = FALSE\n      ),\n      add_total = TRUE\n    )\n  )\n)\n\n[INFO] 2023-03-10 05:26:39.3055 pid:3924 token:[] teal.modules.clinical Initializing tm_t_events_summary\n\nCodeshinyApp(app$ui, app$server)\n\n\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n [1] teal.modules.clinical_0.8.14.9026 teal_0.12.0.9023                 \n [3] teal.transform_0.2.0.9011         teal.data_0.1.2.9013             \n [5] shiny_1.7.4                       scda_0.1.5.9009                  \n [7] dplyr_1.1.0                       tern_0.7.10.9056                 \n [9] rtables_0.6.0.1                   formatters_0.4.0                 \n[11] magrittr_2.0.3                   \n\nloaded via a namespace (and not attached):\n [1] sass_0.4.5               tidyr_1.3.0              jsonlite_1.8.4          \n [4] splines_4.2.2            R.utils_2.12.2           bslib_0.4.2             \n [7] teal.slice_0.2.0.9026    Rdpack_2.4               assertthat_0.2.1        \n[10] teal.code_0.3.0.9001     tern.gee_0.1.0.9002      yaml_2.3.7              \n[13] pillar_1.8.1             backports_1.4.1          lattice_0.20-45         \n[16] glue_1.6.2               teal.widgets_0.2.0.9024  digest_0.6.31           \n[19] promises_1.2.0.1         rbibutils_2.2.13         checkmate_2.1.0         \n[22] colorspace_2.1-0         R.oo_1.25.0              htmltools_0.5.4         \n[25] httpuv_1.6.9             Matrix_1.5-3             pkgconfig_2.0.3         \n[28] broom_1.0.3              logger_0.2.2             purrr_1.0.1             \n[31] xtable_1.8-4             mvtnorm_1.1-3            scales_1.2.1            \n[34] webshot_0.5.4            processx_3.8.0           fontawesome_0.5.0       \n[37] later_1.3.0              emmeans_1.8.4-1          tibble_3.1.8            \n[40] styler_1.9.1             generics_0.1.3           ggplot2_3.4.1           \n[43] ellipsis_0.3.2           shinyvalidate_0.1.2      cachem_1.0.7            \n[46] withr_2.5.0              shinyjs_2.1.0            geepack_1.3.9           \n[49] cli_3.6.0                survival_3.5-3           mime_0.12               \n[52] memoise_2.0.1            ps_1.7.2                 estimability_1.4.1      \n[55] evaluate_0.20            R.methodsS3_1.8.2        fansi_1.0.4             \n[58] R.cache_0.16.0           nlme_3.1-162             MASS_7.3-58.3           \n[61] forcats_1.0.0            teal.reporter_0.1.1.9013 tools_4.2.2             \n[64] lifecycle_1.0.3          munsell_0.5.0            callr_3.7.3             \n[67] compiler_4.2.2           jquerylib_0.1.4          rlang_1.0.6             \n[70] grid_4.2.2               htmlwidgets_1.6.1        shinyWidgets_0.7.6      \n[73] rmarkdown_2.20           gtable_0.3.1             codetools_0.2-19        \n[76] teal.logger_0.1.1.9004   R6_2.5.1                 knitr_1.42              \n[79] fastmap_1.1.1            utf8_1.2.3               Rcpp_1.0.10             \n[82] vctrs_0.5.2              tidyselect_1.2.0         xfun_0.37               \n[85] coda_0.19-4             \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R                       [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/tables/adverse-events/aet01.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "tables/adverse-events/aet01_aesi.html",
    "href": "tables/adverse-events/aet01_aesi.html",
    "title": "AET01_AESI",
    "section": "",
    "text": "Data Setup\nStandard Table\nTable with  Optional Lines\nTable For Studies  with Multiple Drugs\nTable of AEs  by SMQ\nTeal\nSession Info\n\n\n\nTo illustrate, additional variables such as flags (TRUE/FALSE) for selected AEs of interest. Please consult your SAP on how to handle missing AE grades.\n\nCodelibrary(tern)\nlibrary(dplyr)\nlibrary(stringr)\nlibrary(scda)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadae <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adae\")\n\nadsl <- filter(adsl, SAFFL == \"Y\")\nadae <- filter(adae, ANL01FL == \"Y\" & SAFFL == \"Y\")\n\nadsl <- df_explicit_na(adsl)\nadae <- df_explicit_na(adae)\n\nnot_resolved <- adae %>%\n  filter(!(AEOUT %in% c(\"RECOVERED/RESOLVED\", \"FATAL\", \"RECOVERED/RESOLVED WITH SEQUELAE\"))) %>%\n  distinct(USUBJID) %>%\n  mutate(\n    NOT_RESOLVED = \"Y\"\n  )\n\nadae <- adae %>%\n  left_join(not_resolved, by = c(\"USUBJID\")) %>%\n  mutate(\n    ALL_RESOLVED = is.na(NOT_RESOLVED),\n    NOT_RESOLVED = !is.na(NOT_RESOLVED)\n  ) %>%\n  var_relabel(\n    ALL_RESOLVED = \"Total number of patients with all non-fatal AEs resolved\",\n    NOT_RESOLVED = \"Total number of patients with at least one non-fatal unresolved or ongoing AE\"\n  )\n\nadae <- adae %>%\n  mutate(\n    AEDECOD = as.character(AEDECOD),\n    WD = AEACN == \"DRUG WITHDRAWN\",\n    DSM = AEACN %in% c(\"DRUG INTERRUPTED\", \"DOSE INCREASED\", \"DOSE REDUCED\"),\n    CONTRT = AECONTRT == \"Y\",\n    SER = AESER == \"Y\",\n    REL = AEREL == \"Y\",\n    ALL_RESOLVED_WD = WD == TRUE & ALL_RESOLVED == TRUE,\n    ALL_RESOLVED_DSM = DSM == TRUE & ALL_RESOLVED == TRUE,\n    ALL_RESOLVED_CONTRT = CONTRT == TRUE & ALL_RESOLVED == TRUE,\n    NOT_RESOLVED_WD = WD == TRUE & NOT_RESOLVED == TRUE,\n    NOT_RESOLVED_DSM = DSM == TRUE & NOT_RESOLVED == TRUE,\n    NOT_RESOLVED_CONTRT = CONTRT == TRUE & NOT_RESOLVED == TRUE,\n    SERWD = AESER == \"Y\" & AEACN == \"DRUG WITHDRAWN\",\n    SERCONTRT = AECONTRT == \"Y\" & AESER == \"Y\",\n    SERDSM = AESER == \"Y\" & AEACN %in% c(\"DRUG INTERRUPTED\", \"DOSE INCREASED\", \"DOSE REDUCED\"),\n    RELWD = AEREL == \"Y\" & AEACN == \"DRUG WITHDRAWN\",\n    RELDSM = AEREL == \"Y\" & AEACN %in% c(\"DRUG INTERRUPTED\", \"DOSE INCREASED\", \"DOSE REDUCED\"),\n    RELCONTRT = AECONTRT == \"Y\" & AEREL == \"Y\",\n    RELSER = AESER == \"Y\" & AEREL == \"Y\"\n  ) %>%\n  var_relabel(\n    WD = \"Total number of patients with study drug withdrawn due to AE\",\n    DSM = \"Total number of patients with dose modified/interrupted due to AE\",\n    CONTRT = \"Total number of patients with treatment received for AE\",\n    SER = \"Total number of patients with at least one serious AE\",\n    REL = \"Total number of patients with at least one related AE\",\n    ALL_RESOLVED_WD = \"  No. of patients with study drug withdrawn due to resolved AE\",\n    ALL_RESOLVED_DSM = \"  No. of patients with dose modified/interrupted due to resolved AE\",\n    ALL_RESOLVED_CONTRT = \"  No. of patients with treatment received for resolved AE\",\n    NOT_RESOLVED_WD = \"  No. of patients with study drug withdrawn due to unresolved or ongoing AE\",\n    NOT_RESOLVED_DSM = \"  No. of patients with dose modified/interrupted due to unresolved or ongoing AE\",\n    NOT_RESOLVED_CONTRT = \"  No. of patients with treatment received for unresolved or ongoing AE\",\n    SERWD = \"  No. of patients with study drug withdrawn due to serious AE\",\n    SERDSM = \"  No. of patients with dose modified/interrupted due to serious AE\",\n    SERCONTRT = \"  No. of patients with treatment received for serious AE\",\n    RELWD = \"  No. of patients with study drug withdrawn due to related AE\",\n    RELDSM = \"  No. of patients with dose modified/interrupted due to related AE\",\n    RELCONTRT = \"  No. of patients with treatment received for related AE\",\n    RELSER = \"  No. of patients with serious, related AE\"\n  )\n\nadae <- adae %>%\n  mutate(\n    AETOXGR = forcats::fct_recode(AETOXGR,\n      \"Grade 1\" = \"1\",\n      \"Grade 2\" = \"2\",\n      \"Grade 3\" = \"3\",\n      \"Grade 4\" = \"4\",\n      \"Grade 5 (fatal outcome)\" = \"5\"\n    )\n  )\n\n\n\n\n\nCodeaesi_vars <- c(\"WD\", \"DSM\", \"CONTRT\", \"ALL_RESOLVED\", \"NOT_RESOLVED\", \"SER\", \"REL\")\n\nlyt_adae <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ACTARM\") %>%\n  count_patients_with_event(\n    vars = \"USUBJID\",\n    filters = c(\"STUDYID\" = as.character(unique(adae$STUDYID))),\n    denom = \"N_col\",\n    .labels = c(count_fraction = \"Total number of patients with at least one AE\")\n  ) %>%\n  count_values(\n    \"STUDYID\",\n    values = as.character(unique(adae$STUDYID)),\n    .stats = \"count\",\n    .labels = c(count = \"Total number of AEs\"),\n    table_names = \"total_aes\"\n  ) %>%\n  count_occurrences_by_grade(\n    var = \"AETOXGR\",\n    var_labels = \"Total number of patients with at least one AE by worst grade\",\n    show_labels = \"visible\"\n  ) %>%\n  count_patients_with_flags(\n    \"USUBJID\",\n    flag_variables = var_labels(adae[, aesi_vars]),\n    denom = \"N_col\"\n  )\n\nresult <- build_table(lyt_adae, df = adae, alt_counts_df = adsl)\nresult\n\n                                                                                 A: Drug X    B: Placebo   C: Combination\n                                                                                  (N=134)      (N=134)        (N=132)    \n—————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————\nTotal number of patients with at least one AE                                   100 (74.6%)   98 (73.1%)    103 (78.0%)  \nTotal number of AEs                                                                 502          480            604      \nTotal number of patients with at least one AE by worst grade                                                             \n  Grade 1                                                                        5 (3.7%)      7 (5.2%)       4 (3.0%)   \n  Grade 2                                                                        5 (3.7%)      8 (6.0%)       6 (4.5%)   \n  Grade 3                                                                        13 (9.7%)    13 (9.7%)      14 (10.6%)  \n  Grade 4                                                                        13 (9.7%)    18 (13.4%)     15 (11.4%)  \n  Grade 5 (fatal outcome)                                                       64 (47.8%)    52 (38.8%)     64 (48.5%)  \nTotal number of patients with study drug withdrawn due to AE                    22 (16.4%)    21 (15.7%)     28 (21.2%)  \nTotal number of patients with dose modified/interrupted due to AE               55 (41.0%)    62 (46.3%)     64 (48.5%)  \nTotal number of patients with treatment received for AE                         80 (59.7%)    80 (59.7%)     89 (67.4%)  \nTotal number of patients with all non-fatal AEs resolved                        17 (12.7%)    12 (9.0%)      11 (8.3%)   \nTotal number of patients with at least one non-fatal unresolved or ongoing AE   83 (61.9%)    86 (64.2%)     92 (69.7%)  \nTotal number of patients with at least one serious AE                           85 (63.4%)    80 (59.7%)     87 (65.9%)  \nTotal number of patients with at least one related AE                           86 (64.2%)    85 (63.4%)     92 (69.7%)  \n\n\n\n\n\nCodeaesi_vars <- c(\n  \"WD\", \"DSM\", \"CONTRT\", \"ALL_RESOLVED\", \"ALL_RESOLVED_WD\", \"ALL_RESOLVED_DSM\", \"ALL_RESOLVED_CONTRT\", \"NOT_RESOLVED\", \"NOT_RESOLVED_WD\", \"NOT_RESOLVED_DSM\", \"NOT_RESOLVED_CONTRT\", \"SER\", \"SERWD\", \"SERDSM\", \"SERCONTRT\",\n  \"REL\", \"RELWD\", \"RELDSM\", \"RELCONTRT\", \"RELSER\"\n)\n\nlyt_adae <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ACTARM\") %>%\n  count_patients_with_event(\n    vars = \"USUBJID\",\n    filters = c(\"STUDYID\" = as.character(unique(adae$STUDYID))),\n    denom = \"N_col\",\n    .labels = c(count_fraction = \"Total number of patients with at least one AE\")\n  ) %>%\n  count_values(\n    \"STUDYID\",\n    values = as.character(unique(adae$STUDYID)),\n    .stats = \"count\",\n    .labels = c(count = \"Total number of AEs\"),\n    table_names = \"total_aes\"\n  ) %>%\n  count_occurrences_by_grade(\n    var = \"AETOXGR\",\n    var_labels = \"Total number of patients with at least one AE by worst grade\",\n    show_labels = \"visible\"\n  ) %>%\n  count_patients_with_flags(\n    \"USUBJID\",\n    flag_variables = var_labels(adae[, aesi_vars]),\n    denom = \"N_col\"\n  )\n\nresult <- build_table(lyt_adae, df = adae, alt_counts_df = adsl)\nresult\n\n                                                                                    A: Drug X    B: Placebo   C: Combination\n                                                                                     (N=134)      (N=134)        (N=132)    \n————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————\nTotal number of patients with at least one AE                                      100 (74.6%)   98 (73.1%)    103 (78.0%)  \nTotal number of AEs                                                                    502          480            604      \nTotal number of patients with at least one AE by worst grade                                                                \n  Grade 1                                                                           5 (3.7%)      7 (5.2%)       4 (3.0%)   \n  Grade 2                                                                           5 (3.7%)      8 (6.0%)       6 (4.5%)   \n  Grade 3                                                                           13 (9.7%)    13 (9.7%)      14 (10.6%)  \n  Grade 4                                                                           13 (9.7%)    18 (13.4%)     15 (11.4%)  \n  Grade 5 (fatal outcome)                                                          64 (47.8%)    52 (38.8%)     64 (48.5%)  \nTotal number of patients with study drug withdrawn due to AE                       22 (16.4%)    21 (15.7%)     28 (21.2%)  \nTotal number of patients with dose modified/interrupted due to AE                  55 (41.0%)    62 (46.3%)     64 (48.5%)  \nTotal number of patients with treatment received for AE                            80 (59.7%)    80 (59.7%)     89 (67.4%)  \nTotal number of patients with all non-fatal AEs resolved                           17 (12.7%)    12 (9.0%)      11 (8.3%)   \nNo. of patients with study drug withdrawn due to resolved AE                            0         1 (0.7%)       2 (1.5%)   \nNo. of patients with dose modified/interrupted due to resolved AE                   3 (2.2%)      4 (3.0%)       2 (1.5%)   \nNo. of patients with treatment received for resolved AE                             9 (6.7%)      7 (5.2%)       7 (5.3%)   \nTotal number of patients with at least one non-fatal unresolved or ongoing AE      83 (61.9%)    86 (64.2%)     92 (69.7%)  \nNo. of patients with study drug withdrawn due to unresolved or ongoing AE          22 (16.4%)    20 (14.9%)     26 (19.7%)  \nNo. of patients with dose modified/interrupted due to unresolved or ongoing AE     52 (38.8%)    58 (43.3%)     62 (47.0%)  \nNo. of patients with treatment received for unresolved or ongoing AE               71 (53.0%)    73 (54.5%)     82 (62.1%)  \nTotal number of patients with at least one serious AE                              85 (63.4%)    80 (59.7%)     87 (65.9%)  \nNo. of patients with study drug withdrawn due to serious AE                         9 (6.7%)      4 (3.0%)      10 (7.6%)   \nNo. of patients with dose modified/interrupted due to serious AE                   21 (15.7%)    22 (16.4%)     27 (20.5%)  \nNo. of patients with treatment received for serious AE                             59 (44.0%)    58 (43.3%)     53 (40.2%)  \nTotal number of patients with at least one related AE                              86 (64.2%)    85 (63.4%)     92 (69.7%)  \nNo. of patients with study drug withdrawn due to related AE                         5 (3.7%)     10 (7.5%)       7 (5.3%)   \nNo. of patients with dose modified/interrupted due to related AE                   24 (17.9%)    32 (23.9%)     34 (25.8%)  \nNo. of patients with treatment received for related AE                             53 (39.6%)    58 (43.3%)     60 (45.5%)  \nNo. of patients with serious, related AE                                           64 (47.8%)    52 (38.8%)     64 (48.5%)  \n\n\n\n\n\nCodeadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadae_mult <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adae\")\n\nadsl <- filter(adsl, SAFFL == \"Y\")\nadae_mult <- filter(adae_mult, ANL01FL == \"Y\" & SAFFL == \"Y\")\n\nadsl <- df_explicit_na(adsl)\nadae_mult <- df_explicit_na(adae_mult)\n\n# for illustration purposes only, create AEREL1, AEREL2, AEACN1, AEACN2 from respective variables\nadae_mult <- adae_mult %>%\n  mutate(\n    AEREL1 = AEREL,\n    AEREL2 = AEREL,\n    AEACN1 = AEACN,\n    AEACN2 = AEACN\n  )\n\nnot_resolved <- adae_mult %>%\n  filter(!(AEOUT %in% c(\"RECOVERED/RESOLVED\", \"FATAL\", \"RECOVERED/RESOLVED WITH SEQUELAE\"))) %>%\n  distinct(USUBJID) %>%\n  mutate(\n    NOT_RESOLVED = \"Y\"\n  )\n\nadae_mult <- adae_mult %>%\n  left_join(not_resolved, by = c(\"USUBJID\")) %>%\n  mutate(\n    ALL_RESOLVED = is.na(NOT_RESOLVED),\n    NOT_RESOLVED = !is.na(NOT_RESOLVED)\n  ) %>%\n  var_relabel(\n    ALL_RESOLVED = \"Total number of patients with all non-fatal AEs resolved\",\n    NOT_RESOLVED = \"Total number of patients with at least one non-fatal unresolved or ongoing AE\"\n  )\n\nadae_mult <- adae_mult %>%\n  mutate(\n    AEDECOD = as.character(AEDECOD),\n    WD1 = AEACN1 == \"DRUG WITHDRAWN\",\n    WD2 = AEACN2 == \"DRUG WITHDRAWN\",\n    DSM1 = AEACN1 %in% c(\"DRUG INTERRUPTED\", \"DOSE INCREASED\", \"DOSE REDUCED\"),\n    DSM2 = AEACN2 %in% c(\"DRUG INTERRUPTED\", \"DOSE INCREASED\", \"DOSE REDUCED\"),\n    CONTRT = AECONTRT == \"Y\",\n    SER = AESER == \"Y\",\n    REL1 = AEREL1 == \"Y\",\n    REL2 = AEREL2 == \"Y\",\n    ALL_RESOLVED_WD1 = WD1 == TRUE & ALL_RESOLVED == TRUE,\n    ALL_RESOLVED_DSM1 = DSM1 == TRUE & ALL_RESOLVED == TRUE,\n    ALL_RESOLVED_CONTRT = CONTRT == TRUE & ALL_RESOLVED == TRUE,\n    ALL_RESOLVED_WD2 = WD2 == TRUE & ALL_RESOLVED == TRUE,\n    ALL_RESOLVED_DSM2 = DSM2 == TRUE & ALL_RESOLVED == TRUE,\n    NOT_RESOLVED_WD1 = WD1 == TRUE & NOT_RESOLVED == TRUE,\n    NOT_RESOLVED_DSM1 = DSM1 == TRUE & NOT_RESOLVED == TRUE,\n    NOT_RESOLVED_CONTRT = CONTRT == TRUE & NOT_RESOLVED == TRUE,\n    NOT_RESOLVED_WD2 = WD2 == TRUE & NOT_RESOLVED == TRUE,\n    NOT_RESOLVED_DSM2 = DSM2 == TRUE & NOT_RESOLVED == TRUE,\n    SERWD1 = AESER == \"Y\" & AEACN1 == \"DRUG WITHDRAWN\",\n    SERWD2 = AESER == \"Y\" & AEACN2 == \"DRUG WITHDRAWN\",\n    SERCONTRT = AECONTRT == \"Y\" & AESER == \"Y\",\n    SERDSM1 = AESER == \"Y\" & AEACN1 %in% c(\"DRUG INTERRUPTED\", \"DOSE INCREASED\", \"DOSE REDUCED\"),\n    SERDSM2 = AESER == \"Y\" & AEACN2 %in% c(\"DRUG INTERRUPTED\", \"DOSE INCREASED\", \"DOSE REDUCED\"),\n    REL1WD1 = AEREL1 == \"Y\" & AEACN1 == \"DRUG WITHDRAWN\",\n    REL1WD2 = AEREL1 == \"Y\" & AEACN2 == \"DRUG WITHDRAWN\",\n    REL2WD1 = AEREL1 == \"Y\" & AEACN1 == \"DRUG WITHDRAWN\",\n    REL2WD2 = AEREL1 == \"Y\" & AEACN2 == \"DRUG WITHDRAWN\",\n    REL1DSM1 = AEREL1 == \"Y\" & AEACN1 %in% c(\"DRUG INTERRUPTED\", \"DOSE INCREASED\", \"DOSE REDUCED\"),\n    REL2DSM1 = AEREL2 == \"Y\" & AEACN1 %in% c(\"DRUG INTERRUPTED\", \"DOSE INCREASED\", \"DOSE REDUCED\"),\n    REL1DSM2 = AEREL1 == \"Y\" & AEACN2 %in% c(\"DRUG INTERRUPTED\", \"DOSE INCREASED\", \"DOSE REDUCED\"),\n    REL2DSM2 = AEREL2 == \"Y\" & AEACN2 %in% c(\"DRUG INTERRUPTED\", \"DOSE INCREASED\", \"DOSE REDUCED\"),\n    REL1CONTRT = AECONTRT == \"Y\" & AEREL1 == \"Y\",\n    REL2CONTRT = AECONTRT == \"Y\" & AEREL2 == \"Y\",\n    REL1SER = AESER == \"Y\" & AEREL1 == \"Y\",\n    REL2SER = AESER == \"Y\" & AEREL2 == \"Y\"\n  ) %>%\n  var_relabel(\n    WD1 = \"Total number of patients with study drug 1 withdrawn due to AE\",\n    WD2 = \"Total number of patients with study drug 2 withdrawn due to AE\",\n    DSM1 = \"Total number of patients with dose of study drug 1 modified/interrupted due to AE\",\n    DSM2 = \"Total number of patients with dose of study drug 2 modified/interrupted due to AE\",\n    CONTRT = \"Total number of patients with treatment received for AE\",\n    SER = \"Total number of patients with at least one serious AE\",\n    REL1 = \"Total number of patients with at least one AE related to study drug 1\",\n    REL2 = \"Total number of patients with at least one AE related to study drug 2\",\n    ALL_RESOLVED_WD1 = \"  No. of patients with study drug 1 withdrawn due to resolved AE\",\n    ALL_RESOLVED_DSM1 = \"  No. of patients with dose of study drug 1 modified/interrupted due to resolved AE\",\n    ALL_RESOLVED_WD2 = \"  No. of patients with study drug 2 withdrawn due to resolved AE\",\n    ALL_RESOLVED_DSM2 = \"  No. of patients with dose of study drug 2 modified/interrupted due to resolved AE\",\n    ALL_RESOLVED_CONTRT = \"  No. of patients with treatment received for resolved AE\",\n    NOT_RESOLVED_WD1 = \"  No. of patients with study drug 1 withdrawn due to unresolved or ongoing AE\",\n    NOT_RESOLVED_DSM1 = \"  No. of patients with dose of study drug 1 modified/interrupted due to unresolved or ongoing AE\",\n    NOT_RESOLVED_WD2 = \"  No. of patients with study drug 2 withdrawn due to unresolved or ongoing AE\",\n    NOT_RESOLVED_DSM2 = \"  No. of patients with dose of study drug 2 modified/interrupted due to unresolved or ongoing AE\",\n    NOT_RESOLVED_CONTRT = \"  No. of patients with treatment received for unresolved or ongoing AE\",\n    SERWD1 = \"  No. of patients with study drug 1 withdrawn due to serious AE\",\n    SERWD2 = \"  No. of patients with study drug 2 withdrawn due to serious AE\",\n    SERDSM1 = \"  No. of patients with dose of study drug 1 modified/interrupted due to serious AE\",\n    SERDSM2 = \"  No. of patients with dose of study drug 2 modified/interrupted due to serious AE\",\n    SERCONTRT = \"  No. of patients with treatment received for serious AE\",\n    REL1WD1 = \"  No. of patients with study drug 1 withdrawn due to AE related to study drug 1\",\n    REL1WD2 = \"  No. of patients with study drug 1 withdrawn due to AE related to study drug 2\",\n    REL2WD1 = \"  No. of patients with study drug 2 withdrawn due to AE related to study drug 1\",\n    REL2WD2 = \"  No. of patients with study drug 2 withdrawn due to AE related to study drug 2\",\n    REL1DSM1 = \"  No. of patients with dose of study drug 1 modified/interrupted due to AE related to study drug 1\",\n    REL1DSM2 = \"  No. of patients with dose of study drug 1 modified/interrupted due to AE related to study drug 2\",\n    REL2DSM1 = \"  No. of patients with dose of study drug 2 modified/interrupted due to AE related to study drug 1\",\n    REL2DSM2 = \"  No. of patients with dose of study drug 2 modified/interrupted due to AE related to study drug 2\",\n    REL1CONTRT = \"  No. of patients with treatment received for AE related to study drug 1\",\n    REL2CONTRT = \"  No. of patients with treatment received for AE related to study drug 2\",\n    REL1SER = \"  No. of patients with serious AE related to study drug 1\",\n    REL2SER = \"  No. of patients with serious AE related to study drug 2\"\n  )\n\nadae_mult <- adae_mult %>%\n  mutate(\n    AETOXGR = forcats::fct_recode(AETOXGR,\n      \"Grade 1\" = \"1\",\n      \"Grade 2\" = \"2\",\n      \"Grade 3\" = \"3\",\n      \"Grade 4\" = \"4\",\n      \"Grade 5 (fatal outcome)\" = \"5\"\n    )\n  )\n\naesi_vars <- c(\n  \"WD1\", \"WD2\", \"DSM1\", \"DSM2\", \"CONTRT\", \"ALL_RESOLVED\", \"ALL_RESOLVED_WD1\", \"ALL_RESOLVED_WD2\", \"ALL_RESOLVED_DSM1\", \"ALL_RESOLVED_DSM2\", \"ALL_RESOLVED_CONTRT\", \"NOT_RESOLVED\", \"NOT_RESOLVED_WD1\", \"NOT_RESOLVED_WD2\", \"NOT_RESOLVED_DSM1\", \"NOT_RESOLVED_DSM2\", \"NOT_RESOLVED_CONTRT\", \"SER\", \"SERWD1\", \"SERWD2\", \"SERDSM1\", \"SERDSM2\", \"SERCONTRT\", \"REL1\", \"REL1WD1\", \"REL1WD2\", \"REL1DSM1\", \"REL1DSM2\", \"REL1CONTRT\", \"REL1SER\",\n  \"REL2\", \"REL2WD1\", \"REL2WD2\", \"REL2DSM1\", \"REL2DSM2\", \"REL2CONTRT\", \"REL2SER\"\n)\n\nlyt_adae_mult <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ACTARM\") %>%\n  count_patients_with_event(\n    vars = \"USUBJID\",\n    filters = c(\"STUDYID\" = as.character(unique(adae_mult$STUDYID))),\n    denom = \"N_col\",\n    .labels = c(count_fraction = \"Total number of patients with at least one AE\")\n  ) %>%\n  count_values(\n    \"STUDYID\",\n    values = as.character(unique(adae_mult$STUDYID)),\n    .stats = \"count\",\n    .labels = c(count = \"Total number of AEs\"),\n    table_names = \"total_aes\"\n  ) %>%\n  count_occurrences_by_grade(\n    var = \"AETOXGR\",\n    var_labels = \"Total number of patients with at least one AE by worst grade\",\n    show_labels = \"visible\"\n  ) %>%\n  count_patients_with_flags(\n    \"USUBJID\",\n    flag_variables = var_labels(adae_mult[, aesi_vars]),\n    denom = \"N_col\"\n  )\n\nresult <- build_table(lyt_adae_mult, df = adae_mult, alt_counts_df = adsl)\nresult\n\n                                                                                                      A: Drug X    B: Placebo   C: Combination\n                                                                                                       (N=134)      (N=134)        (N=132)    \n——————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————\nTotal number of patients with at least one AE                                                        100 (74.6%)   98 (73.1%)    103 (78.0%)  \nTotal number of AEs                                                                                      502          480            604      \nTotal number of patients with at least one AE by worst grade                                                                                  \n  Grade 1                                                                                             5 (3.7%)      7 (5.2%)       4 (3.0%)   \n  Grade 2                                                                                             5 (3.7%)      8 (6.0%)       6 (4.5%)   \n  Grade 3                                                                                             13 (9.7%)    13 (9.7%)      14 (10.6%)  \n  Grade 4                                                                                             13 (9.7%)    18 (13.4%)     15 (11.4%)  \n  Grade 5 (fatal outcome)                                                                            64 (47.8%)    52 (38.8%)     64 (48.5%)  \nTotal number of patients with study drug 1 withdrawn due to AE                                       22 (16.4%)    21 (15.7%)     28 (21.2%)  \nTotal number of patients with study drug 2 withdrawn due to AE                                       22 (16.4%)    21 (15.7%)     28 (21.2%)  \nTotal number of patients with dose of study drug 1 modified/interrupted due to AE                    55 (41.0%)    62 (46.3%)     64 (48.5%)  \nTotal number of patients with dose of study drug 2 modified/interrupted due to AE                    55 (41.0%)    62 (46.3%)     64 (48.5%)  \nTotal number of patients with treatment received for AE                                              80 (59.7%)    80 (59.7%)     89 (67.4%)  \nTotal number of patients with all non-fatal AEs resolved                                             17 (12.7%)    12 (9.0%)      11 (8.3%)   \nNo. of patients with study drug 1 withdrawn due to resolved AE                                            0         1 (0.7%)       2 (1.5%)   \nNo. of patients with study drug 2 withdrawn due to resolved AE                                            0         1 (0.7%)       2 (1.5%)   \nNo. of patients with dose of study drug 1 modified/interrupted due to resolved AE                     3 (2.2%)      4 (3.0%)       2 (1.5%)   \nNo. of patients with dose of study drug 2 modified/interrupted due to resolved AE                     3 (2.2%)      4 (3.0%)       2 (1.5%)   \nNo. of patients with treatment received for resolved AE                                               9 (6.7%)      7 (5.2%)       7 (5.3%)   \nTotal number of patients with at least one non-fatal unresolved or ongoing AE                        83 (61.9%)    86 (64.2%)     92 (69.7%)  \nNo. of patients with study drug 1 withdrawn due to unresolved or ongoing AE                          22 (16.4%)    20 (14.9%)     26 (19.7%)  \nNo. of patients with study drug 2 withdrawn due to unresolved or ongoing AE                          22 (16.4%)    20 (14.9%)     26 (19.7%)  \nNo. of patients with dose of study drug 1 modified/interrupted due to unresolved or ongoing AE       52 (38.8%)    58 (43.3%)     62 (47.0%)  \nNo. of patients with dose of study drug 2 modified/interrupted due to unresolved or ongoing AE       52 (38.8%)    58 (43.3%)     62 (47.0%)  \nNo. of patients with treatment received for unresolved or ongoing AE                                 71 (53.0%)    73 (54.5%)     82 (62.1%)  \nTotal number of patients with at least one serious AE                                                85 (63.4%)    80 (59.7%)     87 (65.9%)  \nNo. of patients with study drug 1 withdrawn due to serious AE                                         9 (6.7%)      4 (3.0%)      10 (7.6%)   \nNo. of patients with study drug 2 withdrawn due to serious AE                                         9 (6.7%)      4 (3.0%)      10 (7.6%)   \nNo. of patients with dose of study drug 1 modified/interrupted due to serious AE                     21 (15.7%)    22 (16.4%)     27 (20.5%)  \nNo. of patients with dose of study drug 2 modified/interrupted due to serious AE                     21 (15.7%)    22 (16.4%)     27 (20.5%)  \nNo. of patients with treatment received for serious AE                                               59 (44.0%)    58 (43.3%)     53 (40.2%)  \nTotal number of patients with at least one AE related to study drug 1                                86 (64.2%)    85 (63.4%)     92 (69.7%)  \nNo. of patients with study drug 1 withdrawn due to AE related to study drug 1                         5 (3.7%)     10 (7.5%)       7 (5.3%)   \nNo. of patients with study drug 1 withdrawn due to AE related to study drug 2                         5 (3.7%)     10 (7.5%)       7 (5.3%)   \nNo. of patients with dose of study drug 1 modified/interrupted due to AE related to study drug 1     24 (17.9%)    32 (23.9%)     34 (25.8%)  \nNo. of patients with dose of study drug 1 modified/interrupted due to AE related to study drug 2     24 (17.9%)    32 (23.9%)     34 (25.8%)  \nNo. of patients with treatment received for AE related to study drug 1                               53 (39.6%)    58 (43.3%)     60 (45.5%)  \nNo. of patients with serious AE related to study drug 1                                              64 (47.8%)    52 (38.8%)     64 (48.5%)  \nTotal number of patients with at least one AE related to study drug 2                                86 (64.2%)    85 (63.4%)     92 (69.7%)  \nNo. of patients with study drug 2 withdrawn due to AE related to study drug 1                         5 (3.7%)     10 (7.5%)       7 (5.3%)   \nNo. of patients with study drug 2 withdrawn due to AE related to study drug 2                         5 (3.7%)     10 (7.5%)       7 (5.3%)   \nNo. of patients with dose of study drug 2 modified/interrupted due to AE related to study drug 1     24 (17.9%)    32 (23.9%)     34 (25.8%)  \nNo. of patients with dose of study drug 2 modified/interrupted due to AE related to study drug 2     24 (17.9%)    32 (23.9%)     34 (25.8%)  \nNo. of patients with treatment received for AE related to study drug 2                               53 (39.6%)    58 (43.3%)     60 (45.5%)  \nNo. of patients with serious AE related to study drug 2                                              64 (47.8%)    52 (38.8%)     64 (48.5%)  \n\n\n\n\n\nCodeadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadae <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adae\")\n\nadsl <- filter(adsl, SAFFL == \"Y\")\nadae <- filter(adae, ANL01FL == \"Y\" & SAFFL == \"Y\")\n\nadsl <- df_explicit_na(adsl)\nadae <- df_explicit_na(adae)\n\nstack_adae_by_smq <- function(adae, smq) {\n  adae_labels <- c(var_labels(adae), \"Standardized MedDRA Query\")\n  l_df <- lapply(smq, function(ae_grp) {\n    ae_scope <- str_replace(ae_grp, \"NAM\", \"SC\")\n    keep <- adae[[ae_grp]] != \"<Missing>\"\n    df <- adae[keep, ]\n    if (substr(ae_grp, 1, 3) == \"SMQ\") {\n      df[[\"SMQ\"]] <- aesi_label(as.character(df[[ae_grp]]), scope = as.character(df[[ae_scope]]))\n    } else {\n      df[[\"SMQ\"]] <- df[[ae_grp]]\n    }\n    df\n  })\n  result <- do.call(rbind, l_df)\n  var_labels(result) <- adae_labels\n  result\n}\n\nadae_smq <- stack_adae_by_smq(adae, c(\"SMQ01NAM\", \"SMQ02NAM\", \"CQ01NAM\"))\n\nnot_resolved <- adae_smq %>%\n  filter(!(AEOUT %in% c(\"RECOVERED/RESOLVED\", \"FATAL\", \"RECOVERED/RESOLVED WITH SEQUELAE\"))) %>%\n  distinct(USUBJID) %>%\n  mutate(\n    NOT_RESOLVED = \"Y\"\n  )\n\nadae_smq <- adae_smq %>%\n  left_join(not_resolved, by = c(\"USUBJID\")) %>%\n  mutate(\n    ALL_RESOLVED = is.na(NOT_RESOLVED),\n    NOT_RESOLVED = !is.na(NOT_RESOLVED)\n  ) %>%\n  var_relabel(\n    ALL_RESOLVED = \"Total number of patients with all non-fatal AEs resolved\",\n    NOT_RESOLVED = \"Total number of patients with at least one non-fatal unresolved or ongoing AE\"\n  )\n\nadae_smq <- adae_smq %>%\n  mutate(\n    AEDECOD = as.character(AEDECOD),\n    WD = AEACN == \"DRUG WITHDRAWN\",\n    DSM = AEACN %in% c(\"DRUG INTERRUPTED\", \"DOSE INCREASED\", \"DOSE REDUCED\"),\n    CONTRT = AECONTRT == \"Y\",\n    SER = AESER == \"Y\",\n    REL = AEREL == \"Y\",\n    ALL_RESOLVED_WD = WD == TRUE & ALL_RESOLVED == TRUE,\n    ALL_RESOLVED_DSM = DSM == TRUE & ALL_RESOLVED == TRUE,\n    ALL_RESOLVED_CONTRT = CONTRT == TRUE & ALL_RESOLVED == TRUE,\n    NOT_RESOLVED_WD = WD == TRUE & NOT_RESOLVED == TRUE,\n    NOT_RESOLVED_DSM = DSM == TRUE & NOT_RESOLVED == TRUE,\n    NOT_RESOLVED_CONTRT = CONTRT == TRUE & NOT_RESOLVED == TRUE,\n    SERWD = AESER == \"Y\" & AEACN == \"DRUG WITHDRAWN\",\n    SERCONTRT = AECONTRT == \"Y\" & AESER == \"Y\",\n    SERDSM = AESER == \"Y\" & AEACN %in% c(\"DRUG INTERRUPTED\", \"DOSE INCREASED\", \"DOSE REDUCED\"),\n    RELWD = AEREL == \"Y\" & AEACN == \"DRUG WITHDRAWN\",\n    RELDSM = AEREL == \"Y\" & AEACN %in% c(\"DRUG INTERRUPTED\", \"DOSE INCREASED\", \"DOSE REDUCED\"),\n    RELCONTRT = AECONTRT == \"Y\" & AEREL == \"Y\",\n    RELSER = AESER == \"Y\" & AEREL == \"Y\"\n  ) %>%\n  var_relabel(\n    WD = \"Total number of patients with study drug withdrawn due to AE\",\n    DSM = \"Total number of patients with dose modified/interrupted due to AE\",\n    CONTRT = \"Total number of patients with treatment received for AE\",\n    SER = \"Total number of patients with at least one serious AE\",\n    REL = \"Total number of patients with at least one related AE\",\n    ALL_RESOLVED_WD = \"  No. of patients with study drug withdrawn due to resolved AE\",\n    ALL_RESOLVED_DSM = \"  No. of patients with dose modified/interrupted due to resolved AE\",\n    ALL_RESOLVED_CONTRT = \"  No. of patients with treatment received for resolved AE\",\n    NOT_RESOLVED_WD = \"  No. of patients with study drug withdrawn due to unresolved or ongoing AE\",\n    NOT_RESOLVED_DSM = \"  No. of patients with dose modified/interrupted due to unresolved or ongoing AE\",\n    NOT_RESOLVED_CONTRT = \"  No. of patients with treatment received for unresolved or ongoing AE\",\n    SERWD = \"  No. of patients with study drug withdrawn due to serious AE\",\n    SERDSM = \"  No. of patients with dose modified/interrupted due to serious AE\",\n    SERCONTRT = \"  No. of patients with treatment received for serious AE\",\n    RELWD = \"  No. of patients with study drug withdrawn due to related AE\",\n    RELDSM = \"  No. of patients with dose modified/interrupted due to related AE\",\n    RELCONTRT = \"  No. of patients with treatment received for related AE\",\n    RELSER = \"  No. of patients with serious, related AE\"\n  )\n\nadae_smq <- adae_smq %>%\n  mutate(\n    AETOXGR = forcats::fct_recode(AETOXGR,\n      \"Grade 1\" = \"1\",\n      \"Grade 2\" = \"2\",\n      \"Grade 3\" = \"3\",\n      \"Grade 4\" = \"4\",\n      \"Grade 5 (fatal outcome)\" = \"5\"\n    )\n  )\n\nsplit_fun <- remove_split_levels(\"<Missing>\")\naesi_vars <- c(\"WD\", \"DSM\", \"CONTRT\", \"ALL_RESOLVED\", \"NOT_RESOLVED\", \"SER\", \"REL\")\n\nlyt_adae <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ACTARM\") %>%\n  split_rows_by(\n    \"SMQ\",\n    child_labels = \"visible\",\n    nested = FALSE,\n    indent_mod = -1L,\n    split_fun = split_fun,\n    split_label = \"Standardized MedDRA Query\",\n    label_pos = \"topleft\"\n  ) %>%\n  count_patients_with_event(\n    vars = \"USUBJID\",\n    filters = c(\"STUDYID\" = as.character(unique(adae_smq$STUDYID))),\n    denom = \"N_col\",\n    .labels = c(count_fraction = \"Total number of patients with at least one AE\")\n  ) %>%\n  count_values(\n    \"STUDYID\",\n    values = as.character(unique(adae_smq$STUDYID)),\n    .stats = \"count\",\n    .labels = c(count = \"Total number of AEs\"),\n    table_names = \"total_aes\"\n  ) %>%\n  count_occurrences_by_grade(\n    var = \"AETOXGR\",\n    var_labels = \"Total number of patients with at least one AE by worst grade\",\n    .show_labels = \"visible\"\n  ) %>%\n  count_patients_with_flags(\n    \"USUBJID\",\n    flag_variables = var_labels(adae_smq[, aesi_vars]),\n    denom = \"N_col\"\n  )\nresult <- build_table(lyt_adae, df = adae_smq, alt_counts_df = adsl)\nresult\n\nStandardized MedDRA Query                                                       A: Drug X    B: Placebo   C: Combination\n                                                                                 (N=134)      (N=134)        (N=132)    \n————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————\nC.1.1.1.3/B.2.2.3.1 AESI (BROAD)                                                                                        \nTotal number of patients with at least one AE                                   58 (43.3%)   60 (44.8%)     66 (50.0%)  \nTotal number of AEs                                                                 97          106            122      \nTotal number of patients with at least one AE by worst grade                                                            \n  Grade 1                                                                       22 (16.4%)   26 (19.4%)     30 (22.7%)  \n  Grade 2                                                                           0            0              0       \n  Grade 3                                                                           0            0              0       \n  Grade 4                                                                       36 (26.9%)   34 (25.4%)     36 (27.3%)  \n  Grade 5 (fatal outcome)                                                           0            0              0       \nTotal number of patients with study drug withdrawn due to AE                     5 (3.7%)     6 (4.5%)       9 (6.8%)   \nTotal number of patients with dose modified/interrupted due to AE               21 (15.7%)   21 (15.7%)     24 (18.2%)  \nTotal number of patients with treatment received for AE                         32 (23.9%)   35 (26.1%)     44 (33.3%)  \nTotal number of patients with all non-fatal AEs resolved                         7 (5.2%)     9 (6.7%)       8 (6.1%)   \nTotal number of patients with at least one non-fatal unresolved or ongoing AE   51 (38.1%)   51 (38.1%)     58 (43.9%)  \nTotal number of patients with at least one serious AE                           38 (28.4%)   40 (29.9%)     45 (34.1%)  \nTotal number of patients with at least one related AE                           36 (26.9%)   34 (25.4%)     36 (27.3%)  \nD.2.1.5.3/A.1.1.1.1 AESI                                                                                                \nTotal number of patients with at least one AE                                   62 (46.3%)   61 (45.5%)     76 (57.6%)  \nTotal number of AEs                                                                106          100            139      \nTotal number of patients with at least one AE by worst grade                                                            \n  Grade 1                                                                       62 (46.3%)   61 (45.5%)     76 (57.6%)  \n  Grade 2                                                                           0            0              0       \n  Grade 3                                                                           0            0              0       \n  Grade 4                                                                           0            0              0       \n  Grade 5 (fatal outcome)                                                           0            0              0       \nTotal number of patients with study drug withdrawn due to AE                     6 (4.5%)     8 (6.0%)       4 (3.0%)   \nTotal number of patients with dose modified/interrupted due to AE               23 (17.2%)   20 (14.9%)     26 (19.7%)  \nTotal number of patients with treatment received for AE                         33 (24.6%)   37 (27.6%)     33 (25.0%)  \nTotal number of patients with all non-fatal AEs resolved                         4 (3.0%)     5 (3.7%)      14 (10.6%)  \nTotal number of patients with at least one non-fatal unresolved or ongoing AE   58 (43.3%)   56 (41.8%)     62 (47.0%)  \nTotal number of patients with at least one serious AE                               0            0              0       \nTotal number of patients with at least one related AE                           37 (27.6%)   46 (34.3%)     50 (37.9%)  \n\n\n\n\n\nCodelibrary(teal.modules.clinical)\nlibrary(scda)\nlibrary(dplyr)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadae <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adae\")\nadae <- filter(adae, ANL01FL == \"Y\" & SAFFL == \"Y\")\n\nnot_resolved <- adae %>%\n  filter(!(AEOUT %in% c(\"RECOVERED/RESOLVED\", \"FATAL\", \"RECOVERED/RESOLVED WITH SEQUELAE\"))) %>%\n  distinct(USUBJID) %>%\n  mutate(\n    NOT_RESOLVED = \"Y\"\n  )\n\nadae <- adae %>%\n  left_join(not_resolved, by = c(\"USUBJID\")) %>%\n  mutate(\n    ALL_RESOLVED = is.na(NOT_RESOLVED),\n    NOT_RESOLVED = !is.na(NOT_RESOLVED)\n  ) %>%\n  var_relabel(\n    ALL_RESOLVED = \"All non-fatal AEs resolved\",\n    NOT_RESOLVED = \"At least one non-fatal unresolved or ongoing AE\"\n  )\n\nadae <- adae %>%\n  mutate(\n    AEDECOD = as.character(AEDECOD),\n    WD = AEACN == \"DRUG WITHDRAWN\",\n    DSM = AEACN %in% c(\"DRUG INTERRUPTED\", \"DOSE INCREASED\", \"DOSE REDUCED\"),\n    CONTRT = AECONTRT == \"Y\",\n    SER = AESER == \"Y\",\n    REL = AEREL == \"Y\",\n    ALL_RESOLVED_WD = WD == TRUE & ALL_RESOLVED == TRUE,\n    ALL_RESOLVED_DSM = DSM == TRUE & ALL_RESOLVED == TRUE,\n    ALL_RESOLVED_CONTRT = CONTRT == TRUE & ALL_RESOLVED == TRUE,\n    NOT_RESOLVED_WD = WD == TRUE & NOT_RESOLVED == TRUE,\n    NOT_RESOLVED_DSM = DSM == TRUE & NOT_RESOLVED == TRUE,\n    NOT_RESOLVED_CONTRT = CONTRT == TRUE & NOT_RESOLVED == TRUE,\n    SERWD = AESER == \"Y\" & AEACN == \"DRUG WITHDRAWN\",\n    SERCONTRT = AECONTRT == \"Y\" & AESER == \"Y\",\n    SERDSM = AESER == \"Y\" & AEACN %in% c(\"DRUG INTERRUPTED\", \"DOSE INCREASED\", \"DOSE REDUCED\"),\n    RELWD = AEREL == \"Y\" & AEACN == \"DRUG WITHDRAWN\",\n    RELDSM = AEREL == \"Y\" & AEACN %in% c(\"DRUG INTERRUPTED\", \"DOSE INCREASED\", \"DOSE REDUCED\"),\n    RELCONTRT = AECONTRT == \"Y\" & AEREL == \"Y\",\n    RELSER = AESER == \"Y\" & AEREL == \"Y\"\n  ) %>%\n  var_relabel(\n    WD = \"AE that led to study drug withdrawal\",\n    DSM = \"AE that led to study drug dose modified/interrupted\",\n    CONTRT = \"AE that required treatment\",\n    SER = \"Serious AE\",\n    REL = \"Related AE\",\n    ALL_RESOLVED_WD = \"Resolved AE that led to study drug withdrawal\",\n    ALL_RESOLVED_DSM = \"Resolved AE that led to study drug dose modified/interrupted\",\n    ALL_RESOLVED_CONTRT = \"Resolved AE that required treatment\",\n    NOT_RESOLVED_WD = \"Unresolved AE that led to study drug withdrawal\",\n    NOT_RESOLVED_DSM = \"Unresolved AE that led to study drug dose modified/interrupted\",\n    NOT_RESOLVED_CONTRT = \"Unresolved AE that required treatment\",\n    SERWD = \"Serious AE that led to study drug withdrawal\",\n    SERDSM = \"Serious AE that led to study drug dose modified/interrupted\",\n    SERCONTRT = \"Serious AE that required treatment\",\n    RELWD = \"Related AE that led to study drug withdrawal\",\n    RELDSM = \"Related AE that led to study drug dose modified/interrupted\",\n    RELCONTRT = \"Related AE that required treatment\",\n    RELSER = \"Serious related AE\"\n  )\n\naesi_vars <- c(\n  \"WD\", \"DSM\", \"CONTRT\", \"ALL_RESOLVED_WD\", \"ALL_RESOLVED_DSM\", \"ALL_RESOLVED_CONTRT\",\n  \"NOT_RESOLVED_WD\", \"NOT_RESOLVED_DSM\", \"NOT_RESOLVED_CONTRT\", \"SER\", \"SERWD\", \"SERDSM\",\n  \"SERCONTRT\", \"REL\", \"RELWD\", \"RELDSM\", \"RELCONTRT\", \"RELSER\"\n)\n\napp <- init(\n  data = cdisc_data(\n    cdisc_dataset(\"ADSL\", adsl, code = 'ADSL <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")'),\n    cdisc_dataset(\"ADAE\", adae, code = 'ADAE <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adae\")\n      ADAE <- filter(ADAE, ANL01FL == \"Y\" & SAFFL == \"Y\")\n      not_resolved <- ADAE %>%\n      filter(!(AEOUT %in% c(\"RECOVERED/RESOLVED\", \"FATAL\", \"RECOVERED/RESOLVED WITH SEQUELAE\"))) %>%\n      distinct(USUBJID) %>% mutate(\n        NOT_RESOLVED = \"Y\"\n      )\n\n    ADAE <- ADAE %>%\n      left_join(not_resolved, by = c(\"USUBJID\")) %>%\n      mutate(\n        ALL_RESOLVED = is.na(NOT_RESOLVED),\n        NOT_RESOLVED = !is.na(NOT_RESOLVED)\n      ) %>%\n       var_relabel(\n        ALL_RESOLVED = \"All non-fatal AEs resolved\",\n        NOT_RESOLVED = \"At least one non-fatal unresolved or ongoing AE\"\n      )\n\n    ADAE <- ADAE %>%\n      mutate(\n        AEDECOD = as.character(AEDECOD),\n        WD = AEACN == \"DRUG WITHDRAWN\",\n        DSM = AEACN %in% c(\"DRUG INTERRUPTED\", \"DOSE INCREASED\", \"DOSE REDUCED\"),\n        CONTRT = AECONTRT == \"Y\",\n        SER = AESER == \"Y\",\n        REL = AEREL == \"Y\",\n        ALL_RESOLVED_WD = WD == TRUE & ALL_RESOLVED == TRUE,\n        ALL_RESOLVED_DSM = DSM == TRUE & ALL_RESOLVED == TRUE,\n        ALL_RESOLVED_CONTRT = CONTRT == TRUE & ALL_RESOLVED == TRUE,\n        NOT_RESOLVED_WD = WD == TRUE & NOT_RESOLVED == TRUE,\n        NOT_RESOLVED_DSM = DSM == TRUE & NOT_RESOLVED == TRUE,\n        NOT_RESOLVED_CONTRT = CONTRT == TRUE & NOT_RESOLVED == TRUE,\n        SERWD = AESER == \"Y\" & AEACN == \"DRUG WITHDRAWN\",\n        SERCONTRT = AECONTRT == \"Y\" & AESER == \"Y\",\n        SERDSM = AESER == \"Y\" & AEACN %in% c(\"DRUG INTERRUPTED\", \"DOSE INCREASED\", \"DOSE REDUCED\"),\n        RELWD = AEREL == \"Y\" & AEACN == \"DRUG WITHDRAWN\",\n        RELDSM = AEREL == \"Y\" & AEACN %in% c(\"DRUG INTERRUPTED\", \"DOSE INCREASED\", \"DOSE REDUCED\"),\n        RELCONTRT = AECONTRT == \"Y\" & AEREL == \"Y\",\n        RELSER = AESER == \"Y\" & AEREL == \"Y\"\n      ) %>%\n      var_relabel(\n        WD = \"AE that led to study drug withdrawal\",\n        DSM = \"AE that led to study drug dose modified/interrupted\",\n        CONTRT = \"AE that required treatment\",\n        SER = \"Serious AE\",\n        REL = \"Related AE\",\n        ALL_RESOLVED_WD = \"Resolved AE that led to study drug withdrawal\",\n        ALL_RESOLVED_DSM = \"Resolved AE that led to study drug dose modified/interrupted\",\n        ALL_RESOLVED_CONTRT = \"Resolved AE that required treatment\",\n        NOT_RESOLVED_WD = \"Unresolved AE that led to study drug withdrawal\",\n        NOT_RESOLVED_DSM = \"Unresolved AE that led to study drug dose modified/interrupted\",\n        NOT_RESOLVED_CONTRT = \"Unresolved AE that required treatment\",\n        SERWD = \"Serious AE that led to study drug withdrawal\",\n        SERDSM = \"Serious AE that led to study drug dose modified/interrupted\",\n        SERCONTRT = \"Serious AE that required treatment\",\n        RELWD = \"Related AE that led to study drug withdrawal\",\n        RELDSM = \"Related AE that led to study drug dose modified/interrupted\",\n        RELCONTRT = \"Related AE that required treatment\",\n        RELSER = \"Serious related AE\"\n      )'),\n    check = TRUE\n  ),\n  modules = modules(\n    tm_t_events_summary(\n      label = \"Adverse Events Summary\",\n      dataname = \"ADAE\",\n      arm_var = choices_selected(\n        choices = variable_choices(\"ADSL\", c(\"ARM\", \"ARMCD\")),\n        selected = \"ARM\"\n      ),\n      flag_var_anl = choices_selected(\n        choices = variable_choices(\"ADAE\", aesi_vars),\n        selected = aesi_vars[1],\n        keep_order = TRUE,\n        fixed = FALSE\n      ),\n      add_total = TRUE\n    )\n  )\n)\n\n[INFO] 2023-03-10 05:27:06.0220 pid:4000 token:[] teal.modules.clinical Initializing tm_t_events_summary\n\nCodeshinyApp(app$ui, app$server)\n\n\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n [1] teal.modules.clinical_0.8.14.9026 teal_0.12.0.9023                 \n [3] teal.transform_0.2.0.9011         teal.data_0.1.2.9013             \n [5] shiny_1.7.4                       scda_0.1.5.9009                  \n [7] stringr_1.5.0                     dplyr_1.1.0                      \n [9] tern_0.7.10.9056                  rtables_0.6.0.1                  \n[11] formatters_0.4.0                  magrittr_2.0.3                   \n\nloaded via a namespace (and not attached):\n [1] sass_0.4.5               tidyr_1.3.0              jsonlite_1.8.4          \n [4] splines_4.2.2            R.utils_2.12.2           bslib_0.4.2             \n [7] teal.slice_0.2.0.9026    Rdpack_2.4               assertthat_0.2.1        \n[10] teal.code_0.3.0.9001     tern.gee_0.1.0.9002      yaml_2.3.7              \n[13] pillar_1.8.1             backports_1.4.1          lattice_0.20-45         \n[16] glue_1.6.2               teal.widgets_0.2.0.9024  digest_0.6.31           \n[19] promises_1.2.0.1         rbibutils_2.2.13         checkmate_2.1.0         \n[22] colorspace_2.1-0         R.oo_1.25.0              htmltools_0.5.4         \n[25] httpuv_1.6.9             Matrix_1.5-3             pkgconfig_2.0.3         \n[28] broom_1.0.3              logger_0.2.2             purrr_1.0.1             \n[31] xtable_1.8-4             mvtnorm_1.1-3            webshot_0.5.4           \n[34] scales_1.2.1             processx_3.8.0           fontawesome_0.5.0       \n[37] later_1.3.0              emmeans_1.8.4-1          tibble_3.1.8            \n[40] styler_1.9.1             generics_0.1.3           ggplot2_3.4.1           \n[43] ellipsis_0.3.2           shinyvalidate_0.1.2      cachem_1.0.7            \n[46] withr_2.5.0              shinyjs_2.1.0            geepack_1.3.9           \n[49] cli_3.6.0                survival_3.5-3           mime_0.12               \n[52] memoise_2.0.1            ps_1.7.2                 estimability_1.4.1      \n[55] evaluate_0.20            R.methodsS3_1.8.2        fansi_1.0.4             \n[58] R.cache_0.16.0           nlme_3.1-162             MASS_7.3-58.3           \n[61] forcats_1.0.0            teal.reporter_0.1.1.9013 tools_4.2.2             \n[64] lifecycle_1.0.3          munsell_0.5.0            callr_3.7.3             \n[67] compiler_4.2.2           jquerylib_0.1.4          rlang_1.0.6             \n[70] grid_4.2.2               htmlwidgets_1.6.1        shinyWidgets_0.7.6      \n[73] rmarkdown_2.20           gtable_0.3.1             codetools_0.2-19        \n[76] teal.logger_0.1.1.9004   R6_2.5.1                 knitr_1.42              \n[79] fastmap_1.1.1            utf8_1.2.3               stringi_1.7.12          \n[82] Rcpp_1.0.10              vctrs_0.5.2              tidyselect_1.2.0        \n[85] xfun_0.37                coda_0.19-4             \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R                       [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/tables/adverse-events/aet01_aesi.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "tables/safety/egt05_qtcat.html",
    "href": "tables/safety/egt05_qtcat.html",
    "title": "EGT05_QTCAT",
    "section": "",
    "text": "Data Setup\nStandard Table\nTeal\nSession Info\n\n\n\n\nCodelibrary(tern)\nlibrary(scda)\nlibrary(dplyr)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadeg <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adeg\")\n\n# Ensure character variables are converted to factors and empty strings and NAs are explicit missing levels.\nadsl <- df_explicit_na(adsl)\nadeg <- df_explicit_na(adeg)\nadeg_labels <- var_labels(adeg)\nadeg_f <- adeg %>%\n  filter(\n    PARAMCD == \"QT\",\n    ANL01FL == \"Y\"\n  ) %>%\n  mutate(\n    AVALCAT1 = case_when(\n      AVAL <= 450 ~ \"<=450 msec\",\n      AVAL <= 480 ~ \">450 to <=480 msec\",\n      AVAL <= 500 ~ \">480 to <= 500 msec\",\n      AVAL > 500 ~ \">500 msec\",\n      is.na(AVAL) ~ \"<Missing>\"\n    ),\n    CHGCAT1 = case_when(\n      CHG <= 30 ~ \"<=30 msec\",\n      CHG <= 60 ~ \">30 to <=60 msec\",\n      CHG > 60 ~ \">60 msec\",\n      is.na(CHG) ~ \"<Missing>\"\n    )\n  ) %>%\n  mutate(\n    AVALCAT1 = factor(\n      AVALCAT1,\n      levels = c(\n        \"<=450 msec\",\n        \">450 to <=480 msec\",\n        \">480 to <= 500 msec\",\n        \">500 msec\",\n        \"<Missing>\"\n      )\n    ),\n    CHGCAT1 = factor(\n      CHGCAT1,\n      levels = c(\n        \"<=30 msec\",\n        \">30 to <=60 msec\",\n        \">60 msec\",\n        \"<Missing>\"\n      )\n    )\n  )\nvar_labels(adeg_f) <- c(\n  adeg_labels,\n  \"AVALCAT1\" = \"Value at Visit\",\n  \"CHGCAT1\" = \"Change from Baseline\"\n)\n\n\n\n\n\nCodesplit_fun <- drop_split_levels\n\nresult <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ARM\") %>%\n  split_rows_by(\n    \"AVISIT\",\n    split_label = obj_label(adeg_f$AVISIT),\n    split_fun = split_fun,\n    child_labels = \"default\",\n    label_pos = \"topleft\"\n  ) %>%\n  summarize_vars(\n    vars = c(\"AVALCAT1\", \"CHGCAT1\"),\n    var_labels = c(\"Value at Visit\", \"Change from Baseline\")\n  ) %>%\n  append_topleft(\"  Category\") %>%\n  build_table(\n    df = adeg_f,\n    alt_counts_df = adsl\n  )\nresult\n\nAnalysis Visit             A: Drug X    B: Placebo    C: Combination\n  Category                  (N=134)       (N=134)        (N=132)    \n————————————————————————————————————————————————————————————————————\nBASELINE                                                            \n  Value at Visit                                                    \n    n                         134           134            132      \n    <=450 msec            115 (85.8%)   117 (87.3%)    104 (78.8%)  \n    >450 to <=480 msec     6 (4.5%)      10 (7.5%)       9 (6.8%)   \n    >480 to <= 500 msec     4 (3%)       3 (2.2%)        6 (4.5%)   \n    >500 msec              9 (6.7%)       4 (3%)        13 (9.8%)   \n  Change from Baseline                                              \n    n                          0             0              0       \n    <=30 msec                  0             0              0       \n    >30 to <=60 msec           0             0              0       \n    >60 msec                   0             0              0       \nWEEK 1 DAY 8                                                        \n  Value at Visit                                                    \n    n                         134           134            132      \n    <=450 msec            113 (84.3%)   106 (79.1%)    106 (80.3%)  \n    >450 to <=480 msec     10 (7.5%)     10 (7.5%)      11 (8.3%)   \n    >480 to <= 500 msec     4 (3%)        4 (3%)         3 (2.3%)   \n    >500 msec              7 (5.2%)     14 (10.4%)      12 (9.1%)   \n  Change from Baseline                                              \n    n                         134           134            132      \n    <=30 msec             76 (56.7%)     75 (56%)       75 (56.8%)  \n    >30 to <=60 msec       7 (5.2%)      13 (9.7%)      11 (8.3%)   \n    >60 msec              51 (38.1%)    46 (34.3%)      46 (34.8%)  \nWEEK 2 DAY 15                                                       \n  Value at Visit                                                    \n    n                         134           134            132      \n    <=450 msec            111 (82.8%)   114 (85.1%)    112 (84.8%)  \n    >450 to <=480 msec     10 (7.5%)     9 (6.7%)        9 (6.8%)   \n    >480 to <= 500 msec    7 (5.2%)      2 (1.5%)        5 (3.8%)   \n    >500 msec              6 (4.5%)      9 (6.7%)        6 (4.5%)   \n  Change from Baseline                                              \n    n                         134           134            132      \n    <=30 msec              71 (53%)     87 (64.9%)      89 (67.4%)  \n    >30 to <=60 msec       11 (8.2%)     9 (6.7%)        9 (6.8%)   \n    >60 msec              52 (38.8%)    38 (28.4%)      34 (25.8%)  \nWEEK 3 DAY 22                                                       \n  Value at Visit                                                    \n    n                         134           134            132      \n    <=450 msec            106 (79.1%)   112 (83.6%)    118 (89.4%)  \n    >450 to <=480 msec     13 (9.7%)     7 (5.2%)        3 (2.3%)   \n    >480 to <= 500 msec     4 (3%)       5 (3.7%)        2 (1.5%)   \n    >500 msec              11 (8.2%)     10 (7.5%)       9 (6.8%)   \n  Change from Baseline                                              \n    n                         134           134            132      \n    <=30 msec              63 (47%)     80 (59.7%)      81 (61.4%)  \n    >30 to <=60 msec      14 (10.4%)      8 (6%)        11 (8.3%)   \n    >60 msec              57 (42.5%)    46 (34.3%)      40 (30.3%)  \nWEEK 4 DAY 29                                                       \n  Value at Visit                                                    \n    n                         134           134            132      \n    <=450 msec            117 (87.3%)   103 (76.9%)    114 (86.4%)  \n    >450 to <=480 msec     7 (5.2%)     14 (10.4%)       6 (4.5%)   \n    >480 to <= 500 msec     4 (3%)       7 (5.2%)        3 (2.3%)   \n    >500 msec              6 (4.5%)      10 (7.5%)       9 (6.8%)   \n  Change from Baseline                                              \n    n                         134           134            132      \n    <=30 msec              79 (59%)     80 (59.7%)      79 (59.8%)  \n    >30 to <=60 msec       11 (8.2%)     7 (5.2%)       10 (7.6%)   \n    >60 msec              44 (32.8%)    47 (35.1%)      43 (32.6%)  \nWEEK 5 DAY 36                                                       \n  Value at Visit                                                    \n    n                         134           134            132      \n    <=450 msec            107 (79.9%)   117 (87.3%)    112 (84.8%)  \n    >450 to <=480 msec    16 (11.9%)     5 (3.7%)       13 (9.8%)   \n    >480 to <= 500 msec    5 (3.7%)      9 (6.7%)        3 (2.3%)   \n    >500 msec              6 (4.5%)      3 (2.2%)         4 (3%)    \n  Change from Baseline                                              \n    n                         134           134            132      \n    <=30 msec             72 (53.7%)    82 (61.2%)      73 (55.3%)  \n    >30 to <=60 msec       10 (7.5%)     11 (8.2%)      11 (8.3%)   \n    >60 msec              52 (38.8%)    41 (30.6%)      48 (36.4%)  \n\n\n\n\n\nCodelibrary(teal.modules.clinical)\nlibrary(scda)\nlibrary(dplyr)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadeg <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adeg\")\nadsl <- df_explicit_na(adsl)\nadeg <- df_explicit_na(adeg)\nadeg_labels <- var_labels(adeg)\n\nadeg_f <- adeg %>%\n  filter(\n    ANL01FL == \"Y\" # no need to filter for PARAMCD here\n  ) %>%\n  mutate(\n    AVALCAT1 = case_when(\n      AVAL <= 450 ~ \"<=450 msec\",\n      AVAL <= 480 ~ \">450 to <=480 msec\",\n      AVAL <= 500 ~ \">480 to <= 500 msec\",\n      AVAL > 500 ~ \">500 msec\",\n      is.na(AVAL) ~ \"<Missing>\"\n    ),\n    CHGCAT1 = case_when(\n      CHG <= 30 ~ \"<=30 msec\",\n      CHG <= 60 ~ \">30 to <=60 msec\",\n      CHG > 60 ~ \">60 msec\",\n      is.na(CHG) ~ \"<Missing>\"\n    )\n  ) %>%\n  mutate(\n    AVALCAT1 = factor(\n      AVALCAT1,\n      levels = c(\n        \"<=450 msec\",\n        \">450 to <=480 msec\",\n        \">480 to <= 500 msec\",\n        \">500 msec\",\n        \"<Missing>\"\n      )\n    ),\n    CHGCAT1 = factor(\n      CHGCAT1,\n      levels = c(\n        \"<=30 msec\",\n        \">30 to <=60 msec\",\n        \">60 msec\",\n        \"<Missing>\"\n      )\n    )\n  )\nvar_labels(adeg_f) <- c(\n  adeg_labels,\n  \"AVALCAT1\" = \"Value at Visit\",\n  \"CHGCAT1\" = \"Change from Baseline\"\n)\napp <- init(\n  data = cdisc_data(\n    cdisc_dataset(\"ADSL\",\n      adsl,\n      code = 'ADSL <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\n                  ADSL <- df_explicit_na(ADSL)'\n    ),\n    cdisc_dataset(\"ADEG\",\n      adeg_f,\n      code = 'ADEG <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adeg\")\n                  ADEG <- df_explicit_na(ADEG)\n                  ADEG_labels <- var_labels(ADEG)\n\n                  ADEG <- ADEG %>%\n                    filter(\n                      ANL01FL == \"Y\"\n                    ) %>%\n                     mutate(\n                      AVALCAT1 = case_when(\n                        AVAL <= 450 ~ \"<=450 msec\",\n                        AVAL <= 480 ~ \">450 to <=480 msec\",\n                        AVAL <= 500 ~ \">480 to <= 500 msec\",\n                        AVAL > 500 ~ \">500 msec\",\n                        is.na(AVAL) ~ \"<Missing>\"),\n                      CHGCAT1 = case_when(\n                        CHG <= 30 ~ \"<=30 msec\",\n                        CHG <= 60 ~ \">30 to <=60 msec\",\n                        CHG > 60 ~ \">60 msec\",\n                        is.na(CHG) ~ \"<Missing>\")\n                    ) %>% mutate(\n                      AVALCAT1 = factor(\n                        AVALCAT1,\n                        levels = c(\n                          \"<=450 msec\",\n                          \">450 to <=480 msec\",\n                          \">480 to <= 500 msec\",\n                          \">500 msec\",\n                          \"<Missing>\"\n                        )\n                      ),\n                      CHGCAT1 = factor(\n                        CHGCAT1,\n                        levels = c(\n                          \"<=30 msec\",\n                          \">30 to <=60 msec\",\n                          \">60 msec\",\n                          \"<Missing>\"\n                        )\n                      )\n                    )\n                  var_labels(ADEG) <- c(\n                    ADEG_labels,\n                    \"AVALCAT1\" = \"Value at Visit\",\n                    \"CHGCAT1\" = \"Change from Baseline\"\n                  )'\n    ),\n    check = TRUE\n  ),\n  modules = modules(\n    tm_t_summary_by(\n      label = \"ECG Actual Values and Changes from Baseline by Visit\",\n      dataname = \"ADEG\",\n      arm_var = choices_selected(\n        choices = variable_choices(adsl, c(\"ARM\", \"ARMCD\")),\n        selected = \"ARM\"\n      ),\n      by_vars = choices_selected(\n        choices = variable_choices(adeg_f, c(\"PARAM\", \"AVISIT\")),\n        selected = c(\"AVISIT\")\n      ),\n      summarize_vars = choices_selected(\n        choices = variable_choices(adeg_f, c(\"AVALCAT1\", \"CHGCAT1\")),\n        selected = c(\"AVALCAT1\", \"CHGCAT1\")\n      ),\n      useNA = \"ifany\",\n      paramcd = choices_selected(\n        choices = value_choices(adeg_f, \"PARAMCD\", \"PARAM\"),\n        selected = \"QT\"\n      )\n    )\n  )\n)\n\n[INFO] 2023-03-10 05:27:31.3510 pid:4076 token:[] teal.modules.clinical Initializing tm_t_summary_by\n\nCodeshinyApp(app$ui, app$server)\n\n\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n [1] teal.modules.clinical_0.8.14.9026 teal_0.12.0.9023                 \n [3] teal.transform_0.2.0.9011         teal.data_0.1.2.9013             \n [5] shiny_1.7.4                       dplyr_1.1.0                      \n [7] scda_0.1.5.9009                   tern_0.7.10.9056                 \n [9] rtables_0.6.0.1                   formatters_0.4.0                 \n[11] magrittr_2.0.3                   \n\nloaded via a namespace (and not attached):\n [1] sass_0.4.5               tidyr_1.3.0              jsonlite_1.8.4          \n [4] splines_4.2.2            R.utils_2.12.2           bslib_0.4.2             \n [7] teal.slice_0.2.0.9026    Rdpack_2.4               assertthat_0.2.1        \n[10] teal.code_0.3.0.9001     tern.gee_0.1.0.9002      yaml_2.3.7              \n[13] pillar_1.8.1             backports_1.4.1          lattice_0.20-45         \n[16] glue_1.6.2               teal.widgets_0.2.0.9024  digest_0.6.31           \n[19] promises_1.2.0.1         rbibutils_2.2.13         checkmate_2.1.0         \n[22] colorspace_2.1-0         R.oo_1.25.0              htmltools_0.5.4         \n[25] httpuv_1.6.9             Matrix_1.5-3             pkgconfig_2.0.3         \n[28] broom_1.0.3              logger_0.2.2             purrr_1.0.1             \n[31] xtable_1.8-4             mvtnorm_1.1-3            scales_1.2.1            \n[34] webshot_0.5.4            processx_3.8.0           fontawesome_0.5.0       \n[37] later_1.3.0              emmeans_1.8.4-1          tibble_3.1.8            \n[40] styler_1.9.1             generics_0.1.3           ggplot2_3.4.1           \n[43] ellipsis_0.3.2           shinyvalidate_0.1.2      cachem_1.0.7            \n[46] withr_2.5.0              shinyjs_2.1.0            geepack_1.3.9           \n[49] cli_3.6.0                survival_3.5-3           mime_0.12               \n[52] memoise_2.0.1            ps_1.7.2                 estimability_1.4.1      \n[55] evaluate_0.20            R.methodsS3_1.8.2        fansi_1.0.4             \n[58] R.cache_0.16.0           nlme_3.1-162             MASS_7.3-58.3           \n[61] forcats_1.0.0            teal.reporter_0.1.1.9013 tools_4.2.2             \n[64] lifecycle_1.0.3          munsell_0.5.0            callr_3.7.3             \n[67] compiler_4.2.2           jquerylib_0.1.4          rlang_1.0.6             \n[70] grid_4.2.2               htmlwidgets_1.6.1        rmarkdown_2.20          \n[73] shinyWidgets_0.7.6       gtable_0.3.1             codetools_0.2-19        \n[76] teal.logger_0.1.1.9004   R6_2.5.1                 knitr_1.42              \n[79] fastmap_1.1.1            utf8_1.2.3               Rcpp_1.0.10             \n[82] vctrs_0.5.2              tidyselect_1.2.0         xfun_0.37               \n[85] coda_0.19-4             \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R                       [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/tables/safety/egt05_qtcat.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "tables/safety/cmt01.html",
    "href": "tables/safety/cmt01.html",
    "title": "CMT01",
    "section": "",
    "text": "Data Setup\nStandard Table\nTable Showing Medications Prior  to the Start of the Study\nTable Sorted by Total Column Showing  Additional “All Patients” Column\nTeal\nSession Info\n\n\n\n\nCodelibrary(dplyr)\nlibrary(tern)\nlibrary(scda)\n\n# The following tables require ADCM data structure that follows the legacy concomitant medication coding. WHO coding is not used.\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadcm <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adcm\")\n\n# Below step is to set up example data based on legacy standard.\nadcm <- adcm %>%\n  select(-starts_with(\"ATC\")) %>%\n  unique()\n\n# Ensure character variables are converted to factors and empty strings and NAs are explicit missing levels.\nadsl <- df_explicit_na(adsl)\nadcm <- df_explicit_na(adcm)\n\nadcm_con <- adcm %>%\n  filter(ATIREL == \"CONCOMITANT\")\n\nadcm_prior <- adcm %>%\n  filter(ATIREL == \"PRIOR\")\n\n\n\n\n\nCode# Define the split function\nsplit_fun <- drop_split_levels\n\nlyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(var = \"ARM\") %>%\n  analyze_num_patients(\n    vars = \"USUBJID\",\n    .stats = c(\"unique\", \"nonunique\"),\n    .labels = c(\n      unique = \"Total number of patients with at least one treatment\",\n      nonunique = \"Total number of treatments\"\n    )\n  ) %>%\n  split_rows_by(\"CMCLAS\",\n    split_fun = split_fun,\n    child_labels = \"visible\",\n    nested = FALSE,\n    indent_mod = 1L,\n    label_pos = \"topleft\",\n    split_label = obj_label(adcm_con$CMCLAS)\n  ) %>%\n  summarize_num_patients(\n    var = \"USUBJID\",\n    .stats = c(\"unique\", \"nonunique\"),\n    .labels = c(\n      unique = \"Total number of patients with at least one treatment\",\n      nonunique = \"Total number of treatments\"\n    )\n  ) %>%\n  count_occurrences(vars = \"CMDECOD\", .indent_mods = -1L) %>%\n  append_varlabels(adcm_con, \"CMDECOD\", indent = 1L)\n\nresult <- build_table(\n  lyt = lyt,\n  df = adcm_con,\n  alt_counts_df = adsl\n) %>%\n  prune_table() %>%\n  sort_at_path(\n    path = c(\"CMCLAS\", \"*\", \"CMDECOD\"),\n    scorefun = score_occurrences\n  )\n\nresult\n\nMedication Class                                            A: Drug X    B: Placebo    C: Combination\n  Standardized Medication Name                               (N=134)       (N=134)        (N=132)    \n—————————————————————————————————————————————————————————————————————————————————————————————————————\nTotal number of patients with at least one treatment       117 (87.3%)   116 (86.6%)    116 (87.9%)  \nTotal number of treatments                                     415           414            460      \n  medcl A                                                                                            \n    Total number of patients with at least one treatment   75 (56.0%)    79 (59.0%)      81 (61.4%)  \n    Total number of treatments                                 134           137            143      \n    medname A_2/3                                          53 (39.6%)    50 (37.3%)      56 (42.4%)  \n    medname A_3/3                                          45 (33.6%)    54 (40.3%)      48 (36.4%)  \n  medcl B                                                                                            \n    Total number of patients with at least one treatment   83 (61.9%)    74 (55.2%)      88 (66.7%)  \n    Total number of treatments                                 141           137            162      \n    medname B_1/4                                          52 (38.8%)    57 (42.5%)      59 (44.7%)  \n    medname B_4/4                                          50 (37.3%)    45 (33.6%)      55 (41.7%)  \n  medcl C                                                                                            \n    Total number of patients with at least one treatment   82 (61.2%)    84 (62.7%)      89 (67.4%)  \n    Total number of treatments                                 140           140            155      \n    medname C_2/2                                          52 (38.8%)    58 (43.3%)      60 (45.5%)  \n    medname C_1/2                                          51 (38.1%)    50 (37.3%)      56 (42.4%)  \n\n\n\n\n\nCodelyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(var = \"ARM\") %>%\n  analyze_num_patients(\n    vars = \"USUBJID\",\n    .stats = c(\"unique\", \"nonunique\"),\n    .labels = c(\n      unique = \"Total number of patients with at least one treatment\",\n      nonunique = \"Total number of treatments\"\n    )\n  ) %>%\n  split_rows_by(\"CMCLAS\",\n    split_fun = split_fun,\n    child_labels = \"visible\",\n    nested = FALSE,\n    label_pos = \"topleft\",\n    split_label = obj_label(adcm_con$CMCLAS)\n  ) %>%\n  summarize_num_patients(\n    var = \"USUBJID\",\n    .stats = c(\"unique\", \"nonunique\"),\n    .labels = c(\n      unique = \"Total number of patients with at least one treatment\",\n      nonunique = \"Total number of treatments\"\n    )\n  ) %>%\n  count_occurrences(vars = \"CMDECOD\", .indent_mods = -1L) %>%\n  append_varlabels(adcm_prior, \"CMDECOD\", indent = 1L)\n\nresult <- build_table(\n  lyt = lyt,\n  df = adcm_prior,\n  alt_counts_df = adsl\n) %>%\n  prune_table() %>%\n  sort_at_path(\n    path = c(\"CMCLAS\", \"*\", \"CMDECOD\"),\n    scorefun = score_occurrences\n  )\n\nresult\n\nMedication Class                                         A: Drug X    B: Placebo   C: Combination\n  Standardized Medication Name                            (N=134)      (N=134)        (N=132)    \n—————————————————————————————————————————————————————————————————————————————————————————————————\nTotal number of patients with at least one treatment     89 (66.4%)   95 (70.9%)    106 (80.3%)  \nTotal number of treatments                                  194          208            243      \nmedcl A                                                                                          \n  Total number of patients with at least one treatment   54 (40.3%)   49 (36.6%)     69 (52.3%)  \n  Total number of treatments                                 71           70             99      \n  medname A_1/3                                          54 (40.3%)   49 (36.6%)     69 (52.3%)  \nmedcl B                                                                                          \n  Total number of patients with at least one treatment   76 (56.7%)   80 (59.7%)     81 (61.4%)  \n  Total number of treatments                                123          138            144      \n  medname B_2/4                                          52 (38.8%)   55 (41.0%)     56 (42.4%)  \n  medname B_3/4                                          47 (35.1%)   47 (35.1%)     52 (39.4%)  \n\n\nTable with Subtotal Per  Medication Class Suppressed\n\nCodelyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(var = \"ARM\") %>%\n  analyze_num_patients(\n    var = \"USUBJID\",\n    .stats = c(\"unique\", \"nonunique\"),\n    .labels = c(\n      unique = \"Total number of patients with at least one treatment\",\n      nonunique = \"Total number of treatments\"\n    )\n  ) %>%\n  split_rows_by(\"CMCLAS\",\n    split_fun = split_fun, child_labels = \"visible\",\n    nested = FALSE,\n    label_pos = \"topleft\",\n    split_label = obj_label(adcm_con$CMCLAS)\n  ) %>%\n  summarize_num_patients(\n    var = \"USUBJID\",\n    .labels = c(unique = \"Total number of patients with at least one treatment\"),\n    .stats = \"unique\"\n  ) %>%\n  count_occurrences(vars = \"CMDECOD\", .indent_mods = -1L) %>%\n  append_varlabels(adcm_con, \"CMDECOD\", indent = 1L)\n\nresult <- build_table(\n  lyt = lyt,\n  df = adcm_con,\n  alt_counts_df = adsl\n) %>%\n  prune_table() %>%\n  sort_at_path(\n    path = c(\"CMCLAS\", \"*\", \"CMDECOD\"),\n    scorefun = score_occurrences\n  )\n\nresult\n\nMedication Class                                          A: Drug X    B: Placebo    C: Combination\n  Standardized Medication Name                             (N=134)       (N=134)        (N=132)    \n———————————————————————————————————————————————————————————————————————————————————————————————————\nTotal number of patients with at least one treatment     117 (87.3%)   116 (86.6%)    116 (87.9%)  \nTotal number of treatments                                   415           414            460      \nmedcl A                                                                                            \n  Total number of patients with at least one treatment   75 (56.0%)    79 (59.0%)      81 (61.4%)  \n  medname A_2/3                                          53 (39.6%)    50 (37.3%)      56 (42.4%)  \n  medname A_3/3                                          45 (33.6%)    54 (40.3%)      48 (36.4%)  \nmedcl B                                                                                            \n  Total number of patients with at least one treatment   83 (61.9%)    74 (55.2%)      88 (66.7%)  \n  medname B_1/4                                          52 (38.8%)    57 (42.5%)      59 (44.7%)  \n  medname B_4/4                                          50 (37.3%)    45 (33.6%)      55 (41.7%)  \nmedcl C                                                                                            \n  Total number of patients with at least one treatment   82 (61.2%)    84 (62.7%)      89 (67.4%)  \n  medname C_2/2                                          52 (38.8%)    58 (43.3%)      60 (45.5%)  \n  medname C_1/2                                          51 (38.1%)    50 (37.3%)      56 (42.4%)  \n\n\n\n\n\nCodelyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(var = \"ARM\") %>%\n  add_overall_col(\"All Patients\") %>%\n  analyze_num_patients(\n    vars = \"USUBJID\",\n    .stats = c(\"unique\", \"nonunique\"),\n    .labels = c(\n      \"Total number of patients with at least one treatment (%)\",\n      \"Total number of treatments\"\n    )\n  ) %>%\n  split_rows_by(\n    \"CMCLAS\",\n    split_fun = split_fun,\n    child_labels = \"visible\",\n    nested = FALSE,\n    label_pos = \"topleft\",\n    split_label = obj_label(adcm_con$CMCLAS)\n  ) %>%\n  summarize_num_patients(\n    var = \"USUBJID\",\n    .stats = c(\"unique\", \"nonunique\"),\n    .labels = c(\n      \"Total number of patients with at least one treatment (%)\",\n      \"Total number of treatments\"\n    )\n  ) %>%\n  count_occurrences(vars = \"CMDECOD\", .indent_mods = -1L) %>%\n  append_varlabels(adcm_con, \"CMDECOD\", indent = 1L)\n\nresult <- build_table(\n  lyt = lyt,\n  df = adcm_con,\n  alt_counts_df = adsl\n) %>%\n  prune_table() %>%\n  sort_at_path(\n    path = c(\"CMCLAS\", \"*\", \"CMDECOD\"),\n    scorefun = score_occurrences,\n    decreasing = TRUE\n  ) %>%\n  sort_at_path(\n    path = c(\"CMCLAS\"),\n    scorefun = cont_n_onecol(4),\n    decreasing = TRUE\n  )\n\nresult\n\nMedication Class                                              A: Drug X    B: Placebo    C: Combination   All Patients\n  Standardized Medication Name                                 (N=134)       (N=134)        (N=132)         (N=400)   \n——————————————————————————————————————————————————————————————————————————————————————————————————————————————————————\nTotal number of patients with at least one treatment (%)     117 (87.3%)   116 (86.6%)    116 (87.9%)     349 (87.2%) \nTotal number of treatments                                       415           414            460             1289    \nmedcl C                                                                                                               \n  Total number of patients with at least one treatment (%)   82 (61.2%)    84 (62.7%)      89 (67.4%)     255 (63.7%) \n  Total number of treatments                                     140           140            155             435     \n  medname C_2/2                                              52 (38.8%)    58 (43.3%)      60 (45.5%)     170 (42.5%) \n  medname C_1/2                                              51 (38.1%)    50 (37.3%)      56 (42.4%)     157 (39.2%) \nmedcl B                                                                                                               \n  Total number of patients with at least one treatment (%)   83 (61.9%)    74 (55.2%)      88 (66.7%)     245 (61.3%) \n  Total number of treatments                                     141           137            162             440     \n  medname B_1/4                                              52 (38.8%)    57 (42.5%)      59 (44.7%)     168 (42.0%) \n  medname B_4/4                                              50 (37.3%)    45 (33.6%)      55 (41.7%)     150 (37.5%) \nmedcl A                                                                                                               \n  Total number of patients with at least one treatment (%)   75 (56.0%)    79 (59.0%)      81 (61.4%)     235 (58.8%) \n  Total number of treatments                                     134           137            143             414     \n  medname A_2/3                                              53 (39.6%)    50 (37.3%)      56 (42.4%)     159 (39.8%) \n  medname A_3/3                                              45 (33.6%)    54 (40.3%)      48 (36.4%)     147 (36.8%) \n\n\n\n\nHere, adcm is processed to keep only one path per treatment.\n\nCodelibrary(teal.modules.clinical)\nlibrary(scda)\nlibrary(dplyr)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadcm <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adcm\")\n\n# Ensure character variables are converted to factors and empty strings and NAs are explicit missing levels.\nadsl <- df_explicit_na(adsl)\nadcm <- df_explicit_na(adcm)\n\nadcm <- adcm %>%\n  group_by(STUDYID, USUBJID, CMDECOD) %>%\n  slice(1) %>%\n  ungroup()\n\napp <- teal::init(\n  data = cdisc_data(\n    cdisc_dataset(\n      \"ADSL\",\n      adsl,\n      code = 'ADSL <- df_explicit_na(synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\"))'\n    ),\n    cdisc_dataset(\n      \"ADCM\",\n      adcm,\n      code = 'ADCM <- df_explicit_na(\n      synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adcm\")\n      ) %>%\n        group_by(STUDYID, USUBJID, CMDECOD) %>%\n        slice(1) %>%\n        ungroup',\n      keys = c(\"STUDYID\", \"USUBJID\", \"ASTDTM\", \"CMSEQ\", \"CMDECOD\")\n    )\n  ),\n  modules = modules(\n    tm_t_events(\n      label = \"Concomitant Medication Table\",\n      dataname = \"ADCM\",\n      arm_var = choices_selected(c(\"ARM\", \"ARMCD\"), \"ARM\"),\n      llt = choices_selected(\n        choices = variable_choices(adcm, \"CMDECOD\"),\n        selected = \"CMDECOD\"\n      ),\n      hlt = choices_selected(\n        choices = variable_choices(adcm, \"CMCLAS\"),\n        selected = c(\"CMCLAS\")\n      ),\n      add_total = TRUE,\n      event_type = \"treatment\"\n    )\n  )\n)\n\n[INFO] 2023-03-10 05:28:09.2798 pid:4152 token:[] teal.modules.clinical Initializing tm_t_events\n\nCodeshinyApp(app$ui, app$server)\n\n\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n [1] teal.modules.clinical_0.8.14.9026 teal_0.12.0.9023                 \n [3] teal.transform_0.2.0.9011         teal.data_0.1.2.9013             \n [5] shiny_1.7.4                       scda_0.1.5.9009                  \n [7] tern_0.7.10.9056                  rtables_0.6.0.1                  \n [9] formatters_0.4.0                  magrittr_2.0.3                   \n[11] dplyr_1.1.0                      \n\nloaded via a namespace (and not attached):\n [1] sass_0.4.5               tidyr_1.3.0              jsonlite_1.8.4          \n [4] splines_4.2.2            R.utils_2.12.2           bslib_0.4.2             \n [7] teal.slice_0.2.0.9026    Rdpack_2.4               assertthat_0.2.1        \n[10] teal.code_0.3.0.9001     tern.gee_0.1.0.9002      yaml_2.3.7              \n[13] pillar_1.8.1             backports_1.4.1          lattice_0.20-45         \n[16] glue_1.6.2               teal.widgets_0.2.0.9024  digest_0.6.31           \n[19] promises_1.2.0.1         rbibutils_2.2.13         checkmate_2.1.0         \n[22] colorspace_2.1-0         R.oo_1.25.0              htmltools_0.5.4         \n[25] httpuv_1.6.9             Matrix_1.5-3             pkgconfig_2.0.3         \n[28] broom_1.0.3              logger_0.2.2             purrr_1.0.1             \n[31] xtable_1.8-4             mvtnorm_1.1-3            webshot_0.5.4           \n[34] scales_1.2.1             processx_3.8.0           fontawesome_0.5.0       \n[37] later_1.3.0              emmeans_1.8.4-1          tibble_3.1.8            \n[40] styler_1.9.1             generics_0.1.3           ggplot2_3.4.1           \n[43] ellipsis_0.3.2           shinyvalidate_0.1.2      cachem_1.0.7            \n[46] withr_2.5.0              shinyjs_2.1.0            geepack_1.3.9           \n[49] cli_3.6.0                survival_3.5-3           mime_0.12               \n[52] memoise_2.0.1            ps_1.7.2                 estimability_1.4.1      \n[55] evaluate_0.20            R.methodsS3_1.8.2        fansi_1.0.4             \n[58] R.cache_0.16.0           nlme_3.1-162             MASS_7.3-58.3           \n[61] forcats_1.0.0            teal.reporter_0.1.1.9013 tools_4.2.2             \n[64] lifecycle_1.0.3          munsell_0.5.0            callr_3.7.3             \n[67] compiler_4.2.2           jquerylib_0.1.4          rlang_1.0.6             \n[70] grid_4.2.2               htmlwidgets_1.6.1        rmarkdown_2.20          \n[73] shinyWidgets_0.7.6       gtable_0.3.1             codetools_0.2-19        \n[76] teal.logger_0.1.1.9004   R6_2.5.1                 knitr_1.42              \n[79] fastmap_1.1.1            utf8_1.2.3               Rcpp_1.0.10             \n[82] vctrs_0.5.2              tidyselect_1.2.0         xfun_0.37               \n[85] coda_0.19-4             \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R                       [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/tables/safety/cmt01.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "tables/safety/vst01.html",
    "href": "tables/safety/vst01.html",
    "title": "VST01",
    "section": "",
    "text": "Data Setup\nStandard Table\nTeal\nSession Info\n\n\n\n\nCodelibrary(tern)\nlibrary(scda)\nlibrary(dplyr)\nlibrary(teal.modules.clinical)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadvs <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"advs\")\n\n# Ensure character variables are converted to factors and empty strings and NAs are explicit missing levels.\nadsl <- df_explicit_na(adsl)\nadvs <- df_explicit_na(advs)\n\nadvs_label <- var_labels(advs)\n\nadvs <- advs %>%\n  filter(\n    PARAMCD == \"DIABP\",\n    PARAM == \"Diastolic Blood Pressure\"\n  ) %>%\n  mutate(\n    PARAMCD = droplevels(PARAMCD),\n    PARAM = droplevels(PARAM)\n  )\n\n# post-baseline\nadvs_pb <- advs %>%\n  filter(\n    ABLFL != \"Y\",\n    ABLFL2 != \"Y\"\n  )\n\nadvs_pb_max <- advs_pb %>%\n  group_by(PARAM, USUBJID) %>%\n  arrange(desc(AVAL)) %>%\n  slice(1) %>%\n  ungroup() %>%\n  mutate(AVISIT = \"Post-Baseline Maximum\")\n\nadvs_pb_min <- advs_pb %>%\n  group_by(PARAM, USUBJID) %>%\n  arrange(AVAL) %>%\n  slice(1) %>%\n  ungroup() %>%\n  mutate(AVISIT = \"Post-Baseline Minimum\")\n\nadvs_pb_last <- advs_pb %>%\n  group_by(PARAM, USUBJID) %>%\n  arrange(desc(AVISITN)) %>%\n  slice(1) %>%\n  ungroup() %>%\n  mutate(AVISIT = \"Post-Baseline Last\")\n\n# Please note that for real data, per ADaM Spec 1.1, the advs_f can be obtained by filtering on PARAMCD, then\n# ANL01FL == 'Y' or AVISIT in c('POST-BASELINE MAXIMUM', 'POST-BASELINE MINIMUM', 'POST-BASELINE LAST')\n\nadvs_f <- rbind(\n  advs,\n  advs_pb_last,\n  advs_pb_min,\n  advs_pb_max\n)\n\nadvs_f <- advs_f %>%\n  mutate(AVISIT = droplevels(AVISIT))\n\nvar_labels(advs_f) <- advs_label\n\n\n\n\n\nCodesplit_fun <- drop_split_levels\n\nlyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ARM\") %>%\n  split_rows_by(\"AVISIT\", split_fun = split_fun, label_pos = \"topleft\", split_label = obj_label(advs_f$AVISIT)) %>%\n  split_cols_by_multivar(\n    vars = c(\"AVAL\", \"CHG\"),\n    varlabels = c(\"Value at Visit\", \"Change from Baseline\")\n  ) %>%\n  summarize_colvars(.labels = c(range = \"Min - Max\"))\n\nresult <- build_table(lyt = lyt, df = advs_f, alt_counts_df = adsl)\nresult\n\nAnalysis Visit                        A: Drug X                              B: Placebo                            C: Combination            \n                        Value at Visit   Change from Baseline   Value at Visit   Change from Baseline   Value at Visit   Change from Baseline\n                           (N=134)             (N=134)             (N=134)             (N=134)             (N=132)             (N=132)       \n—————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————\nSCREENING                                                                                                                                    \n  n                          134                  0                  134                  0                  132                  0          \n  Mean (SD)               50.0 (7.2)              NA              50.8 (8.4)              NA              50.2 (7.6)              NA         \n  Median                     49.7                 NA                 50.1                 NA                 49.6                 NA         \n  Min - Max              31.7 - 71.2              NA             29.3 - 69.2              NA             26.9 - 70.0              NA         \nBASELINE                                                                                                                                     \n  n                          134                 134                 134                 134                 132                 132         \n  Mean (SD)               48.6 (8.0)          0.0 (0.0)           50.4 (7.9)          0.0 (0.0)           51.1 (7.8)          0.0 (0.0)      \n  Median                     48.4                0.0                 50.2                0.0                 50.8                0.0         \n  Min - Max              27.7 - 64.6          0.0 - 0.0          21.7 - 67.5          0.0 - 0.0          29.7 - 71.4          0.0 - 0.0      \nWEEK 1 DAY 8                                                                                                                                 \n  n                          134                 134                 134                 134                 132                 132         \n  Mean (SD)               50.3 (7.5)          1.7 (10.8)          49.7 (7.7)         -0.8 (10.9)          48.9 (7.9)         -2.3 (10.4)     \n  Median                     50.1                0.6                 49.7                -1.1                47.7                -2.2        \n  Min - Max              33.0 - 69.0         -20.4 - 29.9        33.7 - 66.5         -25.8 - 28.4        30.4 - 67.0         -22.1 - 22.4    \nWEEK 2 DAY 15                                                                                                                                \n  n                          134                 134                 134                 134                 132                 132         \n  Mean (SD)               50.8 (7.8)          2.2 (11.8)          49.7 (8.4)         -0.7 (12.4)          50.0 (8.3)         -1.1 (11.6)     \n  Median                     51.4                3.1                 50.2                -0.7                51.0                -2.3        \n  Min - Max              31.9 - 70.3         -23.9 - 39.2        30.6 - 68.1         -28.4 - 37.0        24.8 - 65.6         -29.2 - 30.7    \nWEEK 3 DAY 22                                                                                                                                \n  n                          134                 134                 134                 134                 132                 132         \n  Mean (SD)               50.7 (7.8)          2.1 (10.9)          49.1 (7.9)         -1.3 (11.1)          49.9 (7.7)         -1.2 (10.9)     \n  Median                     50.2                2.6                 49.5                -2.3                50.0                -0.6        \n  Min - Max              29.1 - 74.9         -25.8 - 30.7        24.5 - 67.1         -28.1 - 33.9        31.5 - 68.5         -29.7 - 27.0    \nWEEK 4 DAY 29                                                                                                                                \n  n                          134                 134                 134                 134                 132                 132         \n  Mean (SD)               50.1 (8.1)          1.5 (10.9)          49.6 (7.1)         -0.8 (10.6)          49.7 (8.0)         -1.4 (11.0)     \n  Median                     49.3                1.2                 49.2                -0.8                49.8                -0.2        \n  Min - Max              29.4 - 71.4         -30.9 - 24.8        32.7 - 67.0         -33.2 - 35.9        28.7 - 68.4         -35.5 - 28.4    \nWEEK 5 DAY 36                                                                                                                                \n  n                          134                 134                 134                 134                 132                 132         \n  Mean (SD)               50.6 (7.5)          2.0 (11.2)          48.4 (8.0)         -2.1 (11.7)          49.1 (7.6)         -2.0 (10.7)     \n  Median                     49.4                1.6                 47.7                -2.9                49.2                -2.2        \n  Min - Max              35.1 - 72.2         -25.2 - 31.5        30.4 - 70.6         -31.2 - 29.2        30.6 - 72.9         -30.5 - 34.6    \nPost-Baseline Last                                                                                                                           \n  n                          134                 134                 134                 134                 132                 132         \n  Mean (SD)               50.6 (7.5)          2.0 (11.2)          48.4 (8.0)         -2.1 (11.7)          49.1 (7.6)         -2.0 (10.7)     \n  Median                     49.4                1.6                 47.7                -2.9                49.2                -2.2        \n  Min - Max              35.1 - 72.2         -25.2 - 31.5        30.4 - 70.6         -31.2 - 29.2        30.6 - 72.9         -30.5 - 34.6    \nPost-Baseline Minimum                                                                                                                        \n  n                          134                 134                 134                 134                 132                 132         \n  Mean (SD)               41.6 (4.8)          -7.0 (9.6)          40.3 (5.3)         -10.1 (10.2)         40.5 (5.3)         -10.6 (9.1)     \n  Median                     42.1                -5.6                40.3               -10.7                40.5               -10.9        \n  Min - Max              29.1 - 54.2         -30.9 - 13.2        24.5 - 55.4         -33.2 - 27.7        24.8 - 54.9         -35.5 - 13.7    \nPost-Baseline Maximum                                                                                                                        \n  n                          134                 134                 134                 134                 132                 132         \n  Mean (SD)               60.0 (4.9)          11.4 (9.3)          58.5 (4.8)          8.1 (9.5)           58.6 (4.8)          7.5 (9.1)      \n  Median                     59.7                11.7                58.3                7.5                 59.0                6.8         \n  Min - Max              47.6 - 74.9         -8.6 - 39.2         47.8 - 70.6         -14.0 - 37.0        41.8 - 72.9         -17.3 - 34.6    \n\n\n\n\n\nCodelibrary(scda)\nlibrary(teal.modules.clinical)\nlibrary(dplyr)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadvs <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"advs\")\nadvs_label <- var_labels(advs)\n\n# post-baseline\nadvs_pb <- advs %>%\n  filter(\n    ABLFL != \"Y\",\n    ABLFL2 != \"Y\"\n  )\n\nadvs_pb_max <- advs_pb %>%\n  group_by(PARAM, USUBJID) %>%\n  arrange(desc(AVAL)) %>%\n  slice(1) %>%\n  ungroup() %>%\n  mutate(AVISIT = \"Post-Baseline Maximum\")\n\nadvs_pb_min <- advs_pb %>%\n  group_by(PARAM, USUBJID) %>%\n  arrange(AVAL) %>%\n  slice(1) %>%\n  ungroup() %>%\n  mutate(AVISIT = \"Post-Baseline Minimum\")\n\nadvs_pb_last <- advs_pb %>%\n  group_by(PARAM, USUBJID) %>%\n  arrange(desc(AVISITN)) %>%\n  slice(1) %>%\n  ungroup() %>%\n  mutate(AVISIT = \"Post-Baseline Last\")\n\nadvs_f <- rbind(\n  advs,\n  advs_pb_last,\n  advs_pb_min,\n  advs_pb_max\n)\n\nadvs_f <- advs_f %>%\n  mutate(AVISIT = droplevels(AVISIT))\n\nvar_labels(advs_f) <- advs_label\n\napp <- init(\n  data = cdisc_data(\n    cdisc_dataset(\"ADSL\",\n      adsl,\n      code = 'ADSL <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")'\n    ),\n    cdisc_dataset(\"ADVS\",\n      advs_f,\n      code = 'ADVS <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"advs\")\n                  ADVS_label <- var_labels(ADVS)\n\n                  # post-baseline\n                  ADVS_pb <- ADVS %>%\n                    filter(\n                      ABLFL != \"Y\",\n                      ABLFL2 != \"Y\"\n                    )\n\n                  ADVS_pb_max <- ADVS_pb %>%\n                    group_by(PARAM, USUBJID) %>%\n                    arrange(desc(AVAL)) %>%\n                    slice(1) %>%\n                    ungroup() %>%\n                    mutate(AVISIT = \"Post-Baseline Maximum\")\n\n                  ADVS_pb_min <- ADVS_pb %>%\n                    group_by(PARAM, USUBJID) %>%\n                    arrange(AVAL) %>%\n                    slice(1) %>%\n                    ungroup() %>%\n                    mutate(AVISIT = \"Post-Baseline Minimum\")\n\n                  ADVS_pb_last <- ADVS_pb %>%\n                    group_by(PARAM, USUBJID) %>%\n                    arrange(desc(AVISITN)) %>%\n                    slice(1) %>%\n                    ungroup() %>%\n                    mutate(AVISIT = \"Post-Baseline Last\")\n\n                  ADVS_f <- rbind(\n                    ADVS,\n                    ADVS_pb_last,\n                    ADVS_pb_min,\n                    ADVS_pb_max\n                  )\n\n                  ADVS <- ADVS_f %>%\n                    mutate(AVISIT = droplevels(AVISIT))\n                  var_labels(ADVS) <- ADVS_label'\n    ),\n    check = TRUE\n  ),\n  modules = modules(\n    tm_t_summary_by(\n      label = \"Vital Sign Results and Change from Baseline by Visit\",\n      dataname = \"ADVS\",\n      arm_var = choices_selected(\n        choices = variable_choices(adsl, c(\"ARM\", \"ARMCD\")),\n        selected = \"ARM\"\n      ),\n      by_vars = choices_selected(\n        choices = variable_choices(advs, c(\"PARAM\", \"AVISIT\")),\n        selected = c(\"AVISIT\", \"PARAM\")\n      ),\n      summarize_vars = choices_selected(\n        choices = variable_choices(advs, c(\"AVAL\", \"CHG\")),\n        selected = c(\"AVAL\", \"CHG\")\n      ),\n      useNA = \"ifany\",\n      paramcd = choices_selected(\n        choices = value_choices(advs, \"PARAMCD\", \"PARAM\"),\n        selected = \"DIABP\"\n      ),\n      parallel_vars = TRUE\n    )\n  ),\n  filter = list(ADVS = list(AVAL = list()))\n)\n\n[INFO] 2023-03-10 05:28:32.4182 pid:4230 token:[] teal.modules.clinical Initializing tm_t_summary_by\n\nCodeshinyApp(app$ui, app$server)\n\n\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n [1] teal.modules.clinical_0.8.14.9026 teal_0.12.0.9023                 \n [3] teal.transform_0.2.0.9011         teal.data_0.1.2.9013             \n [5] shiny_1.7.4                       dplyr_1.1.0                      \n [7] scda_0.1.5.9009                   tern_0.7.10.9056                 \n [9] rtables_0.6.0.1                   formatters_0.4.0                 \n[11] magrittr_2.0.3                   \n\nloaded via a namespace (and not attached):\n [1] sass_0.4.5               tidyr_1.3.0              jsonlite_1.8.4          \n [4] splines_4.2.2            R.utils_2.12.2           bslib_0.4.2             \n [7] teal.slice_0.2.0.9026    Rdpack_2.4               assertthat_0.2.1        \n[10] teal.code_0.3.0.9001     tern.gee_0.1.0.9002      yaml_2.3.7              \n[13] pillar_1.8.1             backports_1.4.1          lattice_0.20-45         \n[16] glue_1.6.2               teal.widgets_0.2.0.9024  digest_0.6.31           \n[19] promises_1.2.0.1         rbibutils_2.2.13         checkmate_2.1.0         \n[22] colorspace_2.1-0         R.oo_1.25.0              htmltools_0.5.4         \n[25] httpuv_1.6.9             Matrix_1.5-3             pkgconfig_2.0.3         \n[28] broom_1.0.3              logger_0.2.2             purrr_1.0.1             \n[31] xtable_1.8-4             mvtnorm_1.1-3            webshot_0.5.4           \n[34] scales_1.2.1             processx_3.8.0           fontawesome_0.5.0       \n[37] later_1.3.0              emmeans_1.8.4-1          tibble_3.1.8            \n[40] styler_1.9.1             farver_2.1.1             generics_0.1.3          \n[43] ggplot2_3.4.1            ellipsis_0.3.2           shinyvalidate_0.1.2     \n[46] cachem_1.0.7             withr_2.5.0              shinyjs_2.1.0           \n[49] geepack_1.3.9            cli_3.6.0                survival_3.5-3          \n[52] mime_0.12                memoise_2.0.1            ps_1.7.2                \n[55] estimability_1.4.1       evaluate_0.20            R.methodsS3_1.8.2       \n[58] fansi_1.0.4              R.cache_0.16.0           nlme_3.1-162            \n[61] MASS_7.3-58.3            forcats_1.0.0            textshaping_0.3.6       \n[64] teal.reporter_0.1.1.9013 tools_4.2.2              lifecycle_1.0.3         \n[67] munsell_0.5.0            callr_3.7.3              compiler_4.2.2          \n[70] jquerylib_0.1.4          systemfonts_1.0.4        rlang_1.0.6             \n[73] grid_4.2.2               htmlwidgets_1.6.1        labeling_0.4.2          \n[76] rmarkdown_2.20           shinyWidgets_0.7.6       gtable_0.3.1            \n[79] codetools_0.2-19         teal.logger_0.1.1.9004   R6_2.5.1                \n[82] knitr_1.42               fastmap_1.1.1            utf8_1.2.3              \n[85] ragg_1.2.5               Rcpp_1.0.10              vctrs_0.5.2             \n[88] tidyselect_1.2.0         xfun_0.37                coda_0.19-4             \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R                       [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/tables/safety/vst01.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "tables/safety/egt03.html",
    "href": "tables/safety/egt03.html",
    "title": "EGT03",
    "section": "",
    "text": "Data Setup\nTable of Baseline Versus  Minimum Post-Baseline\nTable of Baseline Versus  Maximum Post-Baseline\nTeal\nSession Info\n\n\n\n\nCodelibrary(scda)\nlibrary(tern)\nlibrary(dplyr)\n\nadeg <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adeg\")\n\n# Ensure character variables are converted to factors and empty strings and NAs are explicit missing levels.\nadeg <- df_explicit_na(adeg)\n\nadeg_labels <- var_labels(adeg)\n\nadeg_f_pbmin <- subset(\n  adeg,\n  PARAMCD == \"HR\" & # Heart Rate\n    SAFFL == \"Y\" & # \"Safety Population Flag\"\n    ONTRTFL == \"Y\" & # \"On Treatment Record Flag\"\n    AVISIT == \"POST-BASELINE MINIMUM\" # \"Analysis Visit\"\n)\n\nadeg_f_pbmax <- subset(\n  adeg,\n  PARAMCD == \"HR\" & # Heart Rate\n    SAFFL == \"Y\" & # \"Safety Population Flag\"\n    ONTRTFL == \"Y\" & # \"On Treatment Record Flag\"\n    AVISIT == \"POST-BASELINE MAXIMUM\" # \"Analysis Visit\"\n)\n\nvar_labels(adeg_f_pbmin) <- adeg_labels\nvar_labels(adeg_f_pbmax) <- adeg_labels\n\n\n\n\nFor the EGT03 template, data imputation should be avoided, and missing data explicit and accounted for, so the contingency table sum adds up to the group N. For illustration purposes, missing data are added to the example dataset.\n\nCodeset.seed(123, kind = \"Mersenne-Twister\")\n\nadeg_f_pbmin$BNRIND <- factor(\n  adeg_f_pbmin$BNRIND,\n  levels = c(\"LOW\", \"NORMAL\", \"HIGH\", \"Missing\"),\n  labels = c(\"LOW\", \"NORMAL\", \"HIGH\", \"Missing\")\n)\nadeg_f_pbmin$ANRIND <- factor(\n  adeg_f_pbmin$ANRIND,\n  levels = c(\"LOW\", \"NORMAL\", \"HIGH\", \"Missing\"),\n  labels = c(\"LOW\", \"NORMAL\", \"HIGH\", \"Missing\")\n)\n\nadeg_f_pbmin$BNRIND[sample(1:nrow(adeg_f_pbmin), size = 5)] <- \"Missing\"\nadeg_f_pbmin$ANRIND[sample(1:nrow(adeg_f_pbmin), size = 5)] <- \"Missing\"\n\nattr(adeg_f_pbmin$ANRIND, \"label\") <- \"Analysis Reference Range Indicator\"\nattr(adeg_f_pbmin$BNRIND, \"label\") <- \"Baseline Reference Range Indicator\"\n\n# Temporary solution for overarching column\nadeg_f_pbmin <- adeg_f_pbmin %>% mutate(min_label = \"Minimum Post-Baseline Assessment\")\n\n# Define the split function\nsplit_fun <- drop_split_levels\n\nlyt <- basic_table() %>%\n  split_cols_by(\"min_label\") %>%\n  split_cols_by(\"ANRIND\") %>%\n  split_rows_by(\"ARMCD\", split_fun = split_fun, label_pos = \"topleft\", split_label = obj_label(adeg_f_pbmin$ARMCD)) %>%\n  add_rowcounts() %>%\n  summarize_vars(\"BNRIND\", denom = \"N_row\", .stats = \"count_fraction\") %>%\n  append_varlabels(adeg_f_pbmin, c(\"BNRIND\"), indent = 1L)\n\nresult <- build_table(\n  lyt = lyt,\n  df = adeg_f_pbmin\n)\n\nresult\n\nPlanned Arm Code                           Minimum Post-Baseline Assessment     \n  Baseline Reference Range Indicator      LOW         NORMAL     HIGH   Missing \n————————————————————————————————————————————————————————————————————————————————\nARM A (N=134)                                                                   \n  LOW                                   1 (0.7%)     5 (3.7%)     0        0    \n  NORMAL                               36 (26.9%)   83 (61.9%)    0     1 (0.7%)\n  HIGH                                  2 (1.5%)      4 (3%)      0        0    \n  Missing                               1 (0.7%)        0         0     1 (0.7%)\nARM B (N=134)                                                                   \n  LOW                                   1 (0.7%)     9 (6.7%)     0        0    \n  NORMAL                               40 (29.9%)    75 (56%)     0     2 (1.5%)\n  HIGH                                  1 (0.7%)      4 (3%)      0        0    \n  Missing                               1 (0.7%)     1 (0.7%)     0        0    \nARM C (N=132)                                                                   \n  LOW                                    4 (3%)     11 (8.3%)     0        0    \n  NORMAL                               31 (23.5%)   75 (56.8%)    0        0    \n  HIGH                                  1 (0.8%)     8 (6.1%)     0     1 (0.8%)\n  Missing                               1 (0.8%)        0         0        0    \n\n\n\n\nFor the EGT03 template, data imputation should be avoided, and missing data explicit and accounted for, so the contingency table sum adds up to the group N. For illustration purpose, missing data are added to the example dataset.\n\nCodeset.seed(123, kind = \"Mersenne-Twister\")\n\nadeg_f_pbmax$BNRIND <- factor(\n  adeg_f_pbmax$BNRIND,\n  levels = c(\"LOW\", \"NORMAL\", \"HIGH\", \"Missing\"),\n  labels = c(\"LOW\", \"NORMAL\", \"HIGH\", \"Missing\")\n)\nadeg_f_pbmax$ANRIND <- factor(\n  adeg_f_pbmax$ANRIND,\n  levels = c(\"LOW\", \"NORMAL\", \"HIGH\", \"Missing\"),\n  labels = c(\"LOW\", \"NORMAL\", \"HIGH\", \"Missing\")\n)\n\nadeg_f_pbmax$BNRIND[sample(1:nrow(adeg_f_pbmax), size = 5)] <- \"Missing\"\nadeg_f_pbmax$ANRIND[sample(1:nrow(adeg_f_pbmax), size = 5)] <- \"Missing\"\n\nattr(adeg_f_pbmax$ANRIND, \"label\") <- \"Analysis Reference Range Indicator\"\nattr(adeg_f_pbmax$BNRIND, \"label\") <- \"Baseline Reference Range Indicator\"\n\n# Temporary solution for overarching column\nadeg_f_pbmax <- adeg_f_pbmax %>% mutate(max_label = \"Maximum Post-Baseline Assessment\")\n\n# Define the split function\nsplit_fun <- drop_split_levels\n\nlyt <- basic_table() %>%\n  split_cols_by(\"max_label\") %>%\n  split_cols_by(\"ANRIND\") %>%\n  split_rows_by(\"ARMCD\", split_fun = split_fun, label_pos = \"topleft\", split_label = obj_label(adeg_f_pbmax$ARMCD)) %>%\n  add_rowcounts() %>%\n  summarize_vars(\"BNRIND\", denom = \"N_row\", .stats = \"count_fraction\") %>%\n  append_varlabels(adeg_f_pbmax, c(\"BNRIND\"), indent = 1L)\n\nresult <- build_table(\n  lyt = lyt,\n  df = adeg_f_pbmax\n)\n\nresult\n\nPlanned Arm Code                           Maximum Post-Baseline Assessment     \n  Baseline Reference Range Indicator   LOW      NORMAL        HIGH      Missing \n————————————————————————————————————————————————————————————————————————————————\nARM A (N=134)                                                                   \n  LOW                                   0      2 (1.5%)      4 (3%)        0    \n  NORMAL                                0     88 (65.7%)   31 (23.1%)   1 (0.7%)\n  HIGH                                  0      5 (3.7%)     1 (0.7%)       0    \n  Missing                               0         0         1 (0.7%)    1 (0.7%)\nARM B (N=134)                                                                   \n  LOW                                   0       8 (6%)      2 (1.5%)       0    \n  NORMAL                                0     76 (56.7%)   39 (29.1%)   2 (1.5%)\n  HIGH                                  0      3 (2.2%)     2 (1.5%)       0    \n  Missing                               0      1 (0.7%)     1 (0.7%)       0    \nARM C (N=132)                                                                   \n  LOW                                   0     12 (9.1%)     3 (2.3%)       0    \n  NORMAL                                0     79 (59.8%)   27 (20.5%)      0    \n  HIGH                                  0      5 (3.8%)      4 (3%)     1 (0.8%)\n  Missing                               0         0         1 (0.8%)       0    \n\n\n\n\n\nCodelibrary(dplyr)\nlibrary(tern)\nlibrary(scda)\nlibrary(teal.modules.clinical)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadeg <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adeg\")\n\napp <- init(\n  data = cdisc_data(\n    cdisc_dataset(\"ADSL\", adsl, code = 'ADSL <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")'),\n    cdisc_dataset(\"ADEG\", adeg, code = 'ADEG <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adeg\")'),\n    check = TRUE\n  ),\n  modules = modules(\n    tm_t_shift_by_arm(\n      label = \"Shift by Arm Table\",\n      dataname = \"ADEG\",\n      arm_var = choices_selected(\n        variable_choices(adsl, subset = c(\"ARM\", \"ARMCD\")),\n        selected = \"ARM\"\n      ),\n      paramcd = choices_selected(\n        value_choices(adeg, \"PARAMCD\"),\n        selected = \"HR\"\n      ),\n      visit_var = choices_selected(\n        value_choices(adeg, \"AVISIT\"),\n        selected = \"POST-BASELINE MINIMUM\"\n      ),\n      aval_var = choices_selected(\n        variable_choices(adeg, subset = \"ANRIND\"),\n        selected = \"ANRIND\", fixed = TRUE\n      ),\n      base_var = choices_selected(\n        variable_choices(adeg, subset = \"BNRIND\"),\n        selected = \"BNRIND\", fixed = TRUE\n      ),\n      treatment_flag_var = choices_selected(\n        variable_choices(adeg, subset = \"ONTRTFL\"),\n        selected = \"ONTRTFL\", fixed = TRUE\n      ),\n      treatment_flag = choices_selected(\n        value_choices(adeg, \"ONTRTFL\"),\n        selected = \"Y\", fixed = TRUE\n      )\n    )\n  ),\n  filter = list(ADSL = list(SAFFL = \"Y\"))\n)\n\n[INFO] 2023-03-10 05:29:16.0524 pid:4308 token:[] teal.modules.clinical Initializing tm_t_shift_by_arm\n\nCodeshinyApp(app$ui, app$server)\n\n\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n [1] teal.modules.clinical_0.8.14.9026 teal_0.12.0.9023                 \n [3] teal.transform_0.2.0.9011         teal.data_0.1.2.9013             \n [5] shiny_1.7.4                       dplyr_1.1.0                      \n [7] tern_0.7.10.9056                  rtables_0.6.0.1                  \n [9] formatters_0.4.0                  magrittr_2.0.3                   \n[11] scda_0.1.5.9009                  \n\nloaded via a namespace (and not attached):\n [1] sass_0.4.5               tidyr_1.3.0              jsonlite_1.8.4          \n [4] splines_4.2.2            R.utils_2.12.2           bslib_0.4.2             \n [7] teal.slice_0.2.0.9026    Rdpack_2.4               assertthat_0.2.1        \n[10] teal.code_0.3.0.9001     tern.gee_0.1.0.9002      yaml_2.3.7              \n[13] pillar_1.8.1             backports_1.4.1          lattice_0.20-45         \n[16] glue_1.6.2               teal.widgets_0.2.0.9024  digest_0.6.31           \n[19] promises_1.2.0.1         rbibutils_2.2.13         checkmate_2.1.0         \n[22] colorspace_2.1-0         R.oo_1.25.0              htmltools_0.5.4         \n[25] httpuv_1.6.9             Matrix_1.5-3             pkgconfig_2.0.3         \n[28] broom_1.0.3              logger_0.2.2             purrr_1.0.1             \n[31] xtable_1.8-4             mvtnorm_1.1-3            webshot_0.5.4           \n[34] scales_1.2.1             processx_3.8.0           fontawesome_0.5.0       \n[37] later_1.3.0              emmeans_1.8.4-1          tibble_3.1.8            \n[40] styler_1.9.1             generics_0.1.3           ggplot2_3.4.1           \n[43] ellipsis_0.3.2           shinyvalidate_0.1.2      cachem_1.0.7            \n[46] withr_2.5.0              shinyjs_2.1.0            geepack_1.3.9           \n[49] cli_3.6.0                survival_3.5-3           mime_0.12               \n[52] memoise_2.0.1            ps_1.7.2                 estimability_1.4.1      \n[55] evaluate_0.20            R.methodsS3_1.8.2        fansi_1.0.4             \n[58] R.cache_0.16.0           nlme_3.1-162             MASS_7.3-58.3           \n[61] forcats_1.0.0            teal.reporter_0.1.1.9013 tools_4.2.2             \n[64] lifecycle_1.0.3          munsell_0.5.0            callr_3.7.3             \n[67] compiler_4.2.2           jquerylib_0.1.4          rlang_1.0.6             \n[70] grid_4.2.2               htmlwidgets_1.6.1        rmarkdown_2.20          \n[73] shinyWidgets_0.7.6       gtable_0.3.1             codetools_0.2-19        \n[76] teal.logger_0.1.1.9004   R6_2.5.1                 knitr_1.42              \n[79] fastmap_1.1.1            utf8_1.2.3               Rcpp_1.0.10             \n[82] vctrs_0.5.2              tidyselect_1.2.0         xfun_0.37               \n[85] coda_0.19-4             \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R                       [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/tables/safety/egt03.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "tables/safety/eudrat01.html",
    "href": "tables/safety/eudrat01.html",
    "title": "EUDRAT01",
    "section": "",
    "text": "Data Setup\nStandard Table\nTeal\nSession Info\n\n\n\nDefine a trimming function get_adae_trimmed to filter for AEs of greater than 5% incidence rate.\n\nCodelibrary(tern)\nlibrary(scda)\nlibrary(dplyr)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadae <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adae\")\n\n# Ensure character variables are converted to factors and empty strings and NAs are explicit missing levels.\nadsl <- df_explicit_na(adsl)\nadae <- df_explicit_na(adae)\n\nadae_nonser <- adae %>% filter(AESER != \"Y\", SAFFL == \"Y\")\n\nget_adae_trimmed <- function(adsl, adae, cutoff_rate) {\n  n_per_arm <- adsl %>%\n    dplyr::count(ARM)\n\n  anl_terms <- adae %>%\n    dplyr::group_by(ARM, AEBODSYS, AEDECOD) %>%\n    dplyr::count(\n      unique_terms = n_distinct(USUBJID)\n    ) %>%\n    dplyr::select(-n) %>%\n    dplyr::ungroup()\n\n  anl_terms <- dplyr::left_join(\n    anl_terms,\n    n_per_arm,\n    by = \"ARM\"\n  ) %>%\n    dplyr::mutate(\n      ae_rate = unique_terms / n\n    ) %>%\n    dplyr::filter(ae_rate >= cutoff_rate) %>%\n    dplyr::select(AEDECOD) %>%\n    unique()\n\n  anl <- dplyr::left_join(\n    anl_terms,\n    adae,\n    by = \"AEDECOD\"\n  )\n  anl\n}\n\nadae_trim <- get_adae_trimmed(adsl, adae_nonser, cutoff_rate = 0.05)\n\nWarning in dplyr::left_join(anl_terms, adae, by = \"AEDECOD\"): Each row in `x` is expected to match at most 1 row in `y`.\nℹ Row 1 of `x` matches multiple rows.\nℹ If multiple matches are expected, set `multiple = \"all\"` to silence this\n  warning.\n\n\n\n\n\nCode# Define the split function\nsplit_fun <- drop_split_levels\n\nlyt <- basic_table() %>%\n  split_cols_by(\"ARM\") %>%\n  summarize_patients_events_in_cols(\n    custom_label = \"Total number of patients with at least one non-serious adverse event occuring at a relative frequency of >=5% and number of events\"\n  ) %>%\n  split_rows_by(\"AEBODSYS\",\n    nested = FALSE,\n    split_fun = split_fun,\n    indent_mod = -1L,\n    label_pos = \"topleft\",\n    split_label = obj_label(adae_trim$AEBODSYS)\n  ) %>%\n  split_rows_by(\"AEDECOD\", split_fun = split_fun, label_pos = \"topleft\", split_label = obj_label(adae_trim$AEDECOD)) %>%\n  summarize_patients_events_in_cols(\n    col_split = FALSE\n  )\n\nresult <- build_table(lyt, adae_trim)\nresult\n\nBody System or Organ Class                                                                                                                     A: Drug X                      B: Placebo                    C: Combination        \n  Dictionary-Derived Term                                                                                                            Patients (All)   Events (All)   Patients (All)   Events (All)   Patients (All)   Events (All)\n——————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————\nTotal number of patients with at least one non-serious adverse event occuring at a relative frequency of >=5% and number of events        106             360             112             367             112             421     \ncl A.1                                                                                                                                                                                                                            \n  dcd A.1.1.1.1                                                                                                                            50              64              45              62              63              88     \ncl B.2                                                                                                                                                                                                                            \n  dcd B.2.1.2.1                                                                                                                            49              65              44              62              52              66     \ncl C.1                                                                                                                                                                                                                            \n  dcd C.1.1.1.3                                                                                                                            43              55              46              63              43              64     \ncl C.2                                                                                                                                                                                                                            \n  dcd C.2.1.2.1                                                                                                                            35              48              48              53              55              65     \ncl D.1                                                                                                                                                                                                                            \n  dcd D.1.1.4.2                                                                                                                            48              66              42              55              50              64     \ncl D.2                                                                                                                                                                                                                            \n  dcd D.2.1.5.3                                                                                                                            47              62              58              72              57              74     \n\n\n\n\n\nCode# In progress\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n[1] dplyr_1.1.0      scda_0.1.5.9009  tern_0.7.10.9056 rtables_0.6.0.1 \n[5] formatters_0.4.0 magrittr_2.0.3  \n\nloaded via a namespace (and not attached):\n [1] compiler_4.2.2    pillar_1.8.1      forcats_1.0.0     tools_4.2.2      \n [5] digest_0.6.31     lattice_0.20-45   jsonlite_1.8.4    evaluate_0.20    \n [9] lifecycle_1.0.3   tibble_3.1.8      gtable_0.3.1      checkmate_2.1.0  \n[13] pkgconfig_2.0.3   rlang_1.0.6       Matrix_1.5-3      cli_3.6.0        \n[17] yaml_2.3.7        xfun_0.37         fastmap_1.1.1     withr_2.5.0      \n[21] knitr_1.42        generics_0.1.3    vctrs_0.5.2       htmlwidgets_1.6.1\n[25] grid_4.2.2        tidyselect_1.2.0  glue_1.6.2        R6_2.5.1         \n[29] fansi_1.0.4       Rdpack_2.4        survival_3.5-3    rmarkdown_2.20   \n[33] ggplot2_3.4.1     purrr_1.0.1       tidyr_1.3.0       codetools_0.2-19 \n[37] splines_4.2.2     backports_1.4.1   scales_1.2.1      htmltools_0.5.4  \n[41] rbibutils_2.2.13  colorspace_2.1-0  utf8_1.2.3        munsell_0.5.0    \n[45] broom_1.0.3      \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R              [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/tables/safety/eudrat01.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "tables/safety/pdt02.html",
    "href": "tables/safety/pdt02.html",
    "title": "PDT02",
    "section": "",
    "text": "Data Setup\nStandard Table\nTeal\nSession Info\n\n\n\n\nCodelibrary(scda)\nlibrary(tern)\nlibrary(dplyr)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\naddv <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"addv\")\nadsl <- df_explicit_na(adsl)\naddv <- df_explicit_na(addv)\naddv_pan <- addv %>% filter(AEPRELFL == \"Y\" & DVCAT == \"MAJOR\")\n\n\n\n\n\nCodelyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ACTARM\") %>%\n  analyze_num_patients(\n    vars = \"USUBJID\",\n    .stats = c(\"unique\", \"nonunique\"),\n    .labels = c(\n      unique = \"Total number of patients with at least one major protocol deviation related to epidemic/pandemic\",\n      nonunique = \"Total number of major protocol deviations related to epidemic/pandemic\"\n    )\n  ) %>%\n  split_rows_by(\n    \"DVREAS\",\n    split_fun = drop_split_levels,\n    nested = FALSE,\n    label_pos = \"topleft\",\n    split_label = obj_label(addv_pan$DVREAS)\n  ) %>%\n  summarize_num_patients(\n    var = \"USUBJID\",\n    .stats = c(\"unique_count\")\n  ) %>%\n  count_occurrences(vars = \"DVTERM\") %>%\n  append_varlabels(addv_pan, \"DVTERM\", indent = 1L)\n\nresult <- build_table(lyt, addv_pan, alt_counts_df = adsl)\nresult\n\nReason for Deviation                                                                               A: Drug X   B: Placebo   C: Combination\n  Protocol Deviation Term                                                                           (N=134)     (N=134)        (N=132)    \n——————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————\nTotal number of patients with at least one major protocol deviation related to epidemic/pandemic   9 (6.7%)     2 (1.5%)       5 (3.8%)   \nTotal number of major protocol deviations related to epidemic/pandemic                                 9           2              6       \nSite action due to epidemic/pandemic (n)                                                               9           2              5       \n  Dose missed or significantly out of window                                                       2 (1.5%)        0           1 (0.8%)   \n  Failure to sign updated ICF within two visits                                                    2 (1.5%)     1 (0.7%)       1 (0.8%)   \n  Missed 2 or more efficacy assessments                                                            2 (1.5%)        0           1 (0.8%)   \n  Significant deviation from planned dose                                                          3 (2.2%)     1 (0.7%)       2 (1.5%)   \n\n\n\n\n\nCode# In progress\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n[1] dplyr_1.1.0      tern_0.7.10.9056 rtables_0.6.0.1  formatters_0.4.0\n[5] magrittr_2.0.3   scda_0.1.5.9009 \n\nloaded via a namespace (and not attached):\n [1] compiler_4.2.2    pillar_1.8.1      forcats_1.0.0     tools_4.2.2      \n [5] digest_0.6.31     lattice_0.20-45   jsonlite_1.8.4    evaluate_0.20    \n [9] lifecycle_1.0.3   tibble_3.1.8      gtable_0.3.1      checkmate_2.1.0  \n[13] pkgconfig_2.0.3   rlang_1.0.6       Matrix_1.5-3      cli_3.6.0        \n[17] yaml_2.3.7        xfun_0.37         fastmap_1.1.1     withr_2.5.0      \n[21] knitr_1.42        generics_0.1.3    vctrs_0.5.2       htmlwidgets_1.6.1\n[25] grid_4.2.2        tidyselect_1.2.0  glue_1.6.2        R6_2.5.1         \n[29] fansi_1.0.4       Rdpack_2.4        survival_3.5-3    rmarkdown_2.20   \n[33] tidyr_1.3.0       purrr_1.0.1       ggplot2_3.4.1     codetools_0.2-19 \n[37] splines_4.2.2     backports_1.4.1   scales_1.2.1      htmltools_0.5.4  \n[41] rbibutils_2.2.13  colorspace_2.1-0  utf8_1.2.3        munsell_0.5.0    \n[45] broom_1.0.3      \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R              [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/tables/safety/pdt02.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "tables/safety/pdt01.html",
    "href": "tables/safety/pdt01.html",
    "title": "PDT01",
    "section": "",
    "text": "Data Setup\nStandard Table\nTeal\nSession Info\n\n\n\n\nCodelibrary(dplyr)\nlibrary(tern)\nlibrary(scda)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\naddv <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"addv\")\n\n# Ensure character variables are converted to factors and empty strings and NAs are explicit missing levels.\nadsl <- df_explicit_na(adsl)\naddv <- df_explicit_na(addv)\n\n\n\n\n\nCodesplit_fun <- drop_split_levels\n\nlyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ARM\") %>%\n  analyze_num_patients(\n    vars = \"USUBJID\",\n    .stats = c(\"unique\", \"nonunique\"),\n    .labels = c(\n      unique = \"Total number of patients with at least one major protocol deviation\",\n      nonunique = \"Total number of major protocol deviations\"\n    )\n  ) %>%\n  split_rows_by(\n    \"DVDECOD\",\n    child_labels = \"visible\",\n    nested = FALSE,\n    indent_mod = -1L,\n    split_fun = split_fun,\n    label_pos = \"topleft\",\n    split_label = obj_label(addv$DVDECOD)\n  ) %>%\n  count_occurrences(vars = \"DVTERM\") %>%\n  append_varlabels(addv, \"DVTERM\", indent = 1L)\n\nresult <- build_table(\n  lyt = lyt,\n  df = addv,\n  alt_counts_df = adsl\n) %>%\n  prune_table() %>%\n  sort_at_path(path = c(\"DVDECOD\", \"*\", \"DVTERM\"), scorefun = score_occurrences)\n\nresult\n\nProtocol Deviation Coded Term                                         A: Drug X    B: Placebo   C: Combination\n  Protocol Deviation Term                                              (N=134)      (N=134)        (N=132)    \n——————————————————————————————————————————————————————————————————————————————————————————————————————————————\nTotal number of patients with at least one major protocol deviation   22 (16.4%)   23 (17.2%)     13 (9.8%)   \nTotal number of major protocol deviations                                 40           42             21      \nEXCLUSION CRITERIA                                                                                            \nActive or untreated or other excluded cns metastases                   5 (3.7%)     3 (2.2%)          0       \nPregnancy criteria                                                     2 (1.5%)     4 (3.0%)          0       \nHistory of other malignancies within the last 5 years                  3 (2.2%)     2 (1.5%)          0       \nUncontrolled concurrent condition                                      3 (2.2%)     1 (0.7%)          0       \nOther exclusion criteria                                                  0            0           3 (2.3%)   \nReceived prior prohibited therapy or medication                           0         2 (1.5%)       1 (0.8%)   \nINCLUSION CRITERIA                                                                                            \nNo signed ICF at study entry                                           6 (4.5%)     4 (3.0%)          0       \nIneligible cancer type or current cancer stage                         6 (4.5%)     1 (0.7%)       1 (0.8%)   \nInclusion lab values outside allowed limits                               0         3 (2.2%)          0       \nDoes not meet prior therapy requirements                               1 (0.7%)        0              0       \nInclusion-related test not done/out of window                             0            0           1 (0.8%)   \nMEDICATION                                                                                                    \nSignificant deviation from planned dose                                3 (2.2%)     1 (0.7%)       2 (1.5%)   \nReceived incorrect study medication                                    1 (0.7%)     2 (1.5%)       1 (0.8%)   \nDiscontinued study drug for unspecified reason                         1 (0.7%)     1 (0.7%)       1 (0.8%)   \nDose missed or significantly out of window                             2 (1.5%)        0           1 (0.8%)   \nReceived prohibited concomitant medication                                0         2 (1.5%)          0       \nPROCEDURAL                                                                                                    \nEligibility-related test not done/out of window                        1 (0.7%)     6 (4.5%)       1 (0.8%)   \nOmission of screening tumor assessment                                    0         4 (3.0%)       3 (2.3%)   \nMissed assessment affecting safety/study outcomes                      1 (0.7%)     2 (1.5%)       2 (1.5%)   \nFailure to sign updated ICF within two visits                          2 (1.5%)     1 (0.7%)       1 (0.8%)   \nMissed 2 or more efficacy assessments                                  2 (1.5%)        0           1 (0.8%)   \nOmission of complete lab panel required by protocol                       0         1 (0.7%)       1 (0.8%)   \n\n\n\n\n\nCodelibrary(dplyr)\nlibrary(scda)\nlibrary(teal.modules.clinical)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\naddv <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"addv\")\n\n# Ensure character variables are converted to factors and empty strings and NAs are explicit missing levels.\nadsl <- df_explicit_na(adsl)\naddv <- df_explicit_na(addv)\n\napp <- teal::init(\n  data = cdisc_data(\n    cdisc_dataset(\"ADSL\", adsl, code = 'ADSL <- df_explicit_na(synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\"))'),\n    cdisc_dataset(\"ADDV\", addv, code = 'ADDV <- df_explicit_na(synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"addv\"))'),\n    check = TRUE\n  ),\n  modules = modules(\n    tm_t_events(\n      label = \"Major Protocol Deviations Table\",\n      dataname = \"ADDV\",\n      arm_var = choices_selected(c(\"ARM\", \"ARMCD\"), \"ARM\"),\n      llt = choices_selected(\n        choices = variable_choices(addv, c(\"DVTERM\")),\n        selected = c(\"DVTERM\")\n      ),\n      hlt = choices_selected(\n        choices = variable_choices(addv, c(\"DVDECOD\")),\n        selected = \"DVDECOD\"\n      ),\n      add_total = TRUE,\n      event_type = \"major protocol deviation\"\n    )\n  )\n)\n\n[INFO] 2023-03-10 05:29:59.2882 pid:4470 token:[] teal.modules.clinical Initializing tm_t_events\n\nCodeshinyApp(app$ui, app$server)\n\n\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n [1] teal.modules.clinical_0.8.14.9026 teal_0.12.0.9023                 \n [3] teal.transform_0.2.0.9011         teal.data_0.1.2.9013             \n [5] shiny_1.7.4                       scda_0.1.5.9009                  \n [7] tern_0.7.10.9056                  rtables_0.6.0.1                  \n [9] formatters_0.4.0                  magrittr_2.0.3                   \n[11] dplyr_1.1.0                      \n\nloaded via a namespace (and not attached):\n [1] sass_0.4.5               tidyr_1.3.0              jsonlite_1.8.4          \n [4] splines_4.2.2            R.utils_2.12.2           bslib_0.4.2             \n [7] teal.slice_0.2.0.9026    Rdpack_2.4               assertthat_0.2.1        \n[10] teal.code_0.3.0.9001     tern.gee_0.1.0.9002      yaml_2.3.7              \n[13] pillar_1.8.1             backports_1.4.1          lattice_0.20-45         \n[16] glue_1.6.2               teal.widgets_0.2.0.9024  digest_0.6.31           \n[19] promises_1.2.0.1         rbibutils_2.2.13         checkmate_2.1.0         \n[22] colorspace_2.1-0         R.oo_1.25.0              htmltools_0.5.4         \n[25] httpuv_1.6.9             Matrix_1.5-3             pkgconfig_2.0.3         \n[28] broom_1.0.3              logger_0.2.2             purrr_1.0.1             \n[31] xtable_1.8-4             mvtnorm_1.1-3            scales_1.2.1            \n[34] webshot_0.5.4            processx_3.8.0           fontawesome_0.5.0       \n[37] later_1.3.0              emmeans_1.8.4-1          tibble_3.1.8            \n[40] styler_1.9.1             generics_0.1.3           ggplot2_3.4.1           \n[43] ellipsis_0.3.2           withr_2.5.0              shinyvalidate_0.1.2     \n[46] cachem_1.0.7             shinyjs_2.1.0            geepack_1.3.9           \n[49] cli_3.6.0                survival_3.5-3           mime_0.12               \n[52] memoise_2.0.1            ps_1.7.2                 estimability_1.4.1      \n[55] evaluate_0.20            R.methodsS3_1.8.2        fansi_1.0.4             \n[58] R.cache_0.16.0           nlme_3.1-162             MASS_7.3-58.3           \n[61] forcats_1.0.0            teal.reporter_0.1.1.9013 tools_4.2.2             \n[64] lifecycle_1.0.3          munsell_0.5.0            callr_3.7.3             \n[67] compiler_4.2.2           jquerylib_0.1.4          rlang_1.0.6             \n[70] grid_4.2.2               htmlwidgets_1.6.1        rmarkdown_2.20          \n[73] shinyWidgets_0.7.6       gtable_0.3.1             codetools_0.2-19        \n[76] teal.logger_0.1.1.9004   R6_2.5.1                 knitr_1.42              \n[79] fastmap_1.1.1            utf8_1.2.3               Rcpp_1.0.10             \n[82] vctrs_0.5.2              tidyselect_1.2.0         xfun_0.37               \n[85] coda_0.19-4             \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R                       [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/tables/safety/pdt01.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "tables/safety/eudrat02.html",
    "href": "tables/safety/eudrat02.html",
    "title": "EUDRAT02",
    "section": "",
    "text": "Data Setup\nStandard Table\nTeal\nSession Info\n\n\n\nFor illustrative purposes, the adae data is filtered by arm A: Drug X here.\n\nCodelibrary(tern)\nlibrary(scda)\nlibrary(dplyr)\n\nadae <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adae\")\n\n# Ensure character variables are converted to factors and empty strings and NAs are explicit missing levels.\nadae <- df_explicit_na(adae)\n\nadae_serious <- adae %>% filter(AESER == \"Y\", SAFFL == \"Y\")\nadae_serious_arm <- adae_serious %>% filter(ARM == \"A: Drug X\")\n\nfilters_list <- list(\n  related = with_label(c(AEREL = \"Y\"), \"Events (Related)\"),\n  fatal = with_label(c(AESDTH = \"Y\"), \"Events (Fatal)\"),\n  fatal_related = with_label(c(AEREL = \"Y\", AESDTH = \"Y\"), \"Events (Fatal & Related)\")\n)\n\n\n\n\n\nCode# Define the split function\nsplit_fun <- drop_split_levels\n\nlyt <- basic_table() %>%\n  summarize_patients_events_in_cols(\n    filters_list = filters_list,\n    empty_stats = c(\"all\", \"related\", \"fatal\", \"fatal_related\"),\n    custom_label = \"Total number of patients with at least one serious adverse event\"\n  ) %>%\n  split_rows_by(\"AEBODSYS\",\n    nested = FALSE,\n    split_fun = split_fun,\n    indent_mod = -1L,\n    label_pos = \"topleft\",\n    split_label = obj_label(adae_serious_arm$AEBODSYS)\n  ) %>%\n  split_rows_by(\"AEDECOD\",\n    split_fun = split_fun,\n    label_pos = \"topleft\",\n    split_label = obj_label(adae_serious_arm$AEDECOD)\n  ) %>%\n  summarize_patients_events_in_cols(\n    filters_list = filters_list,\n    col_split = FALSE\n  )\n\nresult <- build_table(lyt, adae_serious_arm)\nresult\n\nBody System or Organ Class                                                                                                                                     \n  Dictionary-Derived Term                                          Patients (All)   Events (All)   Events (Related)   Events (Fatal)   Events (Fatal & Related)\n———————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————\nTotal number of patients with at least one serious adverse event        104                                                                                    \ncl A.1                                                                                                                                                         \n  dcd A.1.1.1.2                                                          48              68               0                 0                     0            \ncl B.1                                                                                                                                                         \n  dcd B.1.1.1.1                                                          47              56               56                56                    56           \ncl B.2                                                                                                                                                         \n  dcd B.2.2.3.1                                                          48              64               0                 0                     0            \ncl D.1                                                                                                                                                         \n  dcd D.1.1.1.1                                                          50              61               61                61                    61           \n\n\n\n\n\nCode# In progress\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n[1] dplyr_1.1.0      scda_0.1.5.9009  tern_0.7.10.9056 rtables_0.6.0.1 \n[5] formatters_0.4.0 magrittr_2.0.3  \n\nloaded via a namespace (and not attached):\n [1] compiler_4.2.2    pillar_1.8.1      forcats_1.0.0     tools_4.2.2      \n [5] digest_0.6.31     lattice_0.20-45   jsonlite_1.8.4    evaluate_0.20    \n [9] lifecycle_1.0.3   tibble_3.1.8      gtable_0.3.1      checkmate_2.1.0  \n[13] pkgconfig_2.0.3   rlang_1.0.6       Matrix_1.5-3      cli_3.6.0        \n[17] yaml_2.3.7        xfun_0.37         fastmap_1.1.1     withr_2.5.0      \n[21] knitr_1.42        generics_0.1.3    vctrs_0.5.2       htmlwidgets_1.6.1\n[25] grid_4.2.2        tidyselect_1.2.0  glue_1.6.2        R6_2.5.1         \n[29] fansi_1.0.4       Rdpack_2.4        survival_3.5-3    rmarkdown_2.20   \n[33] ggplot2_3.4.1     purrr_1.0.1       tidyr_1.3.0       codetools_0.2-19 \n[37] splines_4.2.2     backports_1.4.1   scales_1.2.1      htmltools_0.5.4  \n[41] rbibutils_2.2.13  colorspace_2.1-0  utf8_1.2.3        munsell_0.5.0    \n[45] broom_1.0.3      \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R              [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/tables/safety/eudrat02.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "tables/safety/enrollment01.html",
    "href": "tables/safety/enrollment01.html",
    "title": "ENTXX",
    "section": "",
    "text": "Data Setup\nENT01 – Enrollment by Region,  Country, and Investigator Number\nENT01A – Enrollment by Country  and Investigator Number\nENT02 – Enrollment by Region, Country,  and Investigator Number/Name\nENT02A – Enrollment by Country  and Investigator Number/Name\nTeal\nSession Info\n\n\n\n\nCodelibrary(dplyr)\nlibrary(forcats)\nlibrary(scda)\nlibrary(tern)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\n\n# Ensure character variables are converted to factors and empty strings and NAs are explicit missing levels.\nadsl <- df_explicit_na(adsl)\n\nadsl <- adsl %>%\n  mutate(\n    REGION1 = droplevels(REGION1),\n    COUNTRY = droplevels(COUNTRY),\n    INVID_INVNAM = paste(INVID, INVNAM, sep = \" / \")\n  ) %>%\n  mutate(\n    INVID = factor(INVID),\n    SITEID = factor(SITEID),\n    INVNAM = factor(INVNAM),\n    INVID_INVNAM = factor(INVID_INVNAM)\n  ) %>%\n  var_relabel(\n    INVID_INVNAM = \"Investigator Number/Name\",\n    REGION1 = \"Geographic Region 1\",\n    COUNTRY = \"Country\",\n    INVID = \"Investigator Identifier\"\n  ) %>%\n  arrange(REGION1, COUNTRY, INVID)\n\n\n\n\n\nCode# Define the split function\nsplit_fun <- drop_split_levels\n\nlyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ARM\") %>%\n  add_overall_col(label = \"All Patients\") %>%\n  split_rows_by(\"REGION1\", split_fun = split_fun, label_pos = \"topleft\", split_label = obj_label(adsl$REGION1)) %>%\n  summarize_row_groups() %>%\n  split_rows_by(\"COUNTRY\", split_fun = split_fun, label_pos = \"topleft\", split_label = obj_label(adsl$COUNTRY)) %>%\n  summarize_row_groups() %>%\n  split_rows_by(\"INVID\", split_fun = split_fun, label_pos = \"topleft\", split_label = obj_label(adsl$INVID)) %>%\n  summarize_row_groups()\n\nresult <- build_table(lyt, adsl)\nresult\n\nGeographic Region 1                                                                  \n  Country                     A: Drug X    B: Placebo   C: Combination   All Patients\n    Investigator Identifier    (N=134)      (N=134)        (N=132)         (N=400)   \n—————————————————————————————————————————————————————————————————————————————————————\nAfrica                         8 (6.0%)     7 (5.2%)      11 (8.3%)       26 (6.5%)  \n  NGA                          8 (6.0%)     7 (5.2%)      11 (8.3%)       26 (6.5%)  \n    INV ID NGA-1               3 (2.2%)     3 (2.2%)       4 (3.0%)       10 (2.5%)  \n    INV ID NGA-11              1 (0.7%)     2 (1.5%)       3 (2.3%)        6 (1.5%)  \n    INV ID NGA-12              0 (0.0%)     1 (0.7%)       1 (0.8%)        2 (0.5%)  \n    INV ID NGA-17              2 (1.5%)     0 (0.0%)       0 (0.0%)        2 (0.5%)  \n    INV ID NGA-2               1 (0.7%)     1 (0.7%)       0 (0.0%)        2 (0.5%)  \n    INV ID NGA-4               1 (0.7%)     0 (0.0%)       1 (0.8%)        2 (0.5%)  \n    INV ID NGA-5               0 (0.0%)     0 (0.0%)       1 (0.8%)        1 (0.2%)  \n    INV ID NGA-6               0 (0.0%)     0 (0.0%)       1 (0.8%)        1 (0.2%)  \nAsia                          91 (67.9%)   94 (70.1%)     83 (62.9%)     268 (67.0%) \n  CHN                         74 (55.2%)   81 (60.4%)     64 (48.5%)     219 (54.8%) \n    INV ID CHN-1              21 (15.7%)   20 (14.9%)     16 (12.1%)      57 (14.2%) \n    INV ID CHN-10              0 (0.0%)     1 (0.7%)       0 (0.0%)        1 (0.2%)  \n    INV ID CHN-11             12 (9.0%)    20 (14.9%)     16 (12.1%)      48 (12.0%) \n    INV ID CHN-12              4 (3.0%)     3 (2.2%)       1 (0.8%)        8 (2.0%)  \n    INV ID CHN-13              2 (1.5%)     6 (4.5%)       0 (0.0%)        8 (2.0%)  \n    INV ID CHN-14              4 (3.0%)     2 (1.5%)       3 (2.3%)        9 (2.2%)  \n    INV ID CHN-15              2 (1.5%)     0 (0.0%)       4 (3.0%)        6 (1.5%)  \n    INV ID CHN-16              0 (0.0%)     3 (2.2%)       3 (2.3%)        6 (1.5%)  \n    INV ID CHN-17              4 (3.0%)     4 (3.0%)       3 (2.3%)       11 (2.8%)  \n    INV ID CHN-18              1 (0.7%)     0 (0.0%)       2 (1.5%)        3 (0.8%)  \n    INV ID CHN-2               9 (6.7%)     4 (3.0%)       3 (2.3%)       16 (4.0%)  \n    INV ID CHN-3               5 (3.7%)     1 (0.7%)       5 (3.8%)       11 (2.8%)  \n    INV ID CHN-4               3 (2.2%)     3 (2.2%)       3 (2.3%)        9 (2.2%)  \n    INV ID CHN-5               4 (3.0%)     3 (2.2%)       4 (3.0%)       11 (2.8%)  \n    INV ID CHN-6               1 (0.7%)     3 (2.2%)       0 (0.0%)        4 (1.0%)  \n    INV ID CHN-7               0 (0.0%)     5 (3.7%)       1 (0.8%)        6 (1.5%)  \n    INV ID CHN-8               1 (0.7%)     1 (0.7%)       0 (0.0%)        2 (0.5%)  \n    INV ID CHN-9               1 (0.7%)     2 (1.5%)       0 (0.0%)        3 (0.8%)  \n  PAK                         12 (9.0%)     9 (6.7%)      10 (7.6%)       31 (7.8%)  \n    INV ID PAK-1               2 (1.5%)     4 (3.0%)       4 (3.0%)       10 (2.5%)  \n    INV ID PAK-11              4 (3.0%)     3 (2.2%)       2 (1.5%)        9 (2.2%)  \n    INV ID PAK-12              2 (1.5%)     0 (0.0%)       0 (0.0%)        2 (0.5%)  \n    INV ID PAK-13              1 (0.7%)     1 (0.7%)       0 (0.0%)        2 (0.5%)  \n    INV ID PAK-14              1 (0.7%)     0 (0.0%)       0 (0.0%)        1 (0.2%)  \n    INV ID PAK-15              1 (0.7%)     0 (0.0%)       0 (0.0%)        1 (0.2%)  \n    INV ID PAK-2               1 (0.7%)     0 (0.0%)       2 (1.5%)        3 (0.8%)  \n    INV ID PAK-4               0 (0.0%)     1 (0.7%)       1 (0.8%)        2 (0.5%)  \n    INV ID PAK-5               0 (0.0%)     0 (0.0%)       1 (0.8%)        1 (0.2%)  \n  JPN                          5 (3.7%)     4 (3.0%)       9 (6.8%)       18 (4.5%)  \n    INV ID JPN-1               2 (1.5%)     2 (1.5%)       1 (0.8%)        5 (1.2%)  \n    INV ID JPN-11              0 (0.0%)     0 (0.0%)       3 (2.3%)        3 (0.8%)  \n    INV ID JPN-12              0 (0.0%)     0 (0.0%)       1 (0.8%)        1 (0.2%)  \n    INV ID JPN-14              0 (0.0%)     1 (0.7%)       0 (0.0%)        1 (0.2%)  \n    INV ID JPN-17              0 (0.0%)     0 (0.0%)       2 (1.5%)        2 (0.5%)  \n    INV ID JPN-18              1 (0.7%)     0 (0.0%)       0 (0.0%)        1 (0.2%)  \n    INV ID JPN-2               0 (0.0%)     0 (0.0%)       1 (0.8%)        1 (0.2%)  \n    INV ID JPN-3               0 (0.0%)     1 (0.7%)       0 (0.0%)        1 (0.2%)  \n    INV ID JPN-5               1 (0.7%)     0 (0.0%)       1 (0.8%)        2 (0.5%)  \n    INV ID JPN-6               1 (0.7%)     0 (0.0%)       0 (0.0%)        1 (0.2%)  \nEurasia                        5 (3.7%)     8 (6.0%)       6 (4.5%)       19 (4.8%)  \n  RUS                          5 (3.7%)     8 (6.0%)       6 (4.5%)       19 (4.8%)  \n    INV ID RUS-1               1 (0.7%)     0 (0.0%)       0 (0.0%)        1 (0.2%)  \n    INV ID RUS-11              0 (0.0%)     2 (1.5%)       2 (1.5%)        4 (1.0%)  \n    INV ID RUS-12              0 (0.0%)     1 (0.7%)       0 (0.0%)        1 (0.2%)  \n    INV ID RUS-13              1 (0.7%)     0 (0.0%)       0 (0.0%)        1 (0.2%)  \n    INV ID RUS-14              0 (0.0%)     0 (0.0%)       1 (0.8%)        1 (0.2%)  \n    INV ID RUS-16              1 (0.7%)     1 (0.7%)       0 (0.0%)        2 (0.5%)  \n    INV ID RUS-18              1 (0.7%)     0 (0.0%)       0 (0.0%)        1 (0.2%)  \n    INV ID RUS-2               0 (0.0%)     1 (0.7%)       0 (0.0%)        1 (0.2%)  \n    INV ID RUS-3               0 (0.0%)     0 (0.0%)       1 (0.8%)        1 (0.2%)  \n    INV ID RUS-4               0 (0.0%)     2 (1.5%)       1 (0.8%)        3 (0.8%)  \n    INV ID RUS-5               0 (0.0%)     1 (0.7%)       0 (0.0%)        1 (0.2%)  \n    INV ID RUS-6               1 (0.7%)     0 (0.0%)       0 (0.0%)        1 (0.2%)  \n    INV ID RUS-7               0 (0.0%)     0 (0.0%)       1 (0.8%)        1 (0.2%)  \nEurope                         4 (3.0%)     3 (2.2%)       2 (1.5%)        9 (2.2%)  \n  GBR                          4 (3.0%)     3 (2.2%)       2 (1.5%)        9 (2.2%)  \n    INV ID GBR-1               2 (1.5%)     0 (0.0%)       1 (0.8%)        3 (0.8%)  \n    INV ID GBR-11              0 (0.0%)     1 (0.7%)       1 (0.8%)        2 (0.5%)  \n    INV ID GBR-13              1 (0.7%)     0 (0.0%)       0 (0.0%)        1 (0.2%)  \n    INV ID GBR-15              1 (0.7%)     0 (0.0%)       0 (0.0%)        1 (0.2%)  \n    INV ID GBR-17              0 (0.0%)     1 (0.7%)       0 (0.0%)        1 (0.2%)  \n    INV ID GBR-6               0 (0.0%)     1 (0.7%)       0 (0.0%)        1 (0.2%)  \nNorth America                 13 (9.7%)    15 (11.2%)     20 (15.2%)      48 (12.0%) \n  USA                         10 (7.5%)    13 (9.7%)      17 (12.9%)      40 (10.0%) \n    INV ID USA-1               1 (0.7%)     4 (3.0%)       5 (3.8%)       10 (2.5%)  \n    INV ID USA-11              4 (3.0%)     2 (1.5%)       3 (2.3%)        9 (2.2%)  \n    INV ID USA-12              1 (0.7%)     2 (1.5%)       3 (2.3%)        6 (1.5%)  \n    INV ID USA-14              1 (0.7%)     0 (0.0%)       0 (0.0%)        1 (0.2%)  \n    INV ID USA-15              0 (0.0%)     1 (0.7%)       1 (0.8%)        2 (0.5%)  \n    INV ID USA-17              1 (0.7%)     1 (0.7%)       0 (0.0%)        2 (0.5%)  \n    INV ID USA-19              0 (0.0%)     0 (0.0%)       1 (0.8%)        1 (0.2%)  \n    INV ID USA-2               0 (0.0%)     0 (0.0%)       1 (0.8%)        1 (0.2%)  \n    INV ID USA-3               1 (0.7%)     0 (0.0%)       1 (0.8%)        2 (0.5%)  \n    INV ID USA-4               0 (0.0%)     1 (0.7%)       1 (0.8%)        2 (0.5%)  \n    INV ID USA-5               0 (0.0%)     1 (0.7%)       0 (0.0%)        1 (0.2%)  \n    INV ID USA-6               0 (0.0%)     1 (0.7%)       0 (0.0%)        1 (0.2%)  \n    INV ID USA-8               0 (0.0%)     0 (0.0%)       1 (0.8%)        1 (0.2%)  \n    INV ID USA-9               1 (0.7%)     0 (0.0%)       0 (0.0%)        1 (0.2%)  \n  CAN                          3 (2.2%)     2 (1.5%)       3 (2.3%)        8 (2.0%)  \n    INV ID CAN-1               1 (0.7%)     1 (0.7%)       0 (0.0%)        2 (0.5%)  \n    INV ID CAN-11              1 (0.7%)     0 (0.0%)       1 (0.8%)        2 (0.5%)  \n    INV ID CAN-14              1 (0.7%)     0 (0.0%)       0 (0.0%)        1 (0.2%)  \n    INV ID CAN-4               0 (0.0%)     1 (0.7%)       1 (0.8%)        2 (0.5%)  \n    INV ID CAN-5               0 (0.0%)     0 (0.0%)       1 (0.8%)        1 (0.2%)  \nSouth America                 13 (9.7%)     7 (5.2%)      10 (7.6%)       30 (7.5%)  \n  BRA                         13 (9.7%)     7 (5.2%)      10 (7.6%)       30 (7.5%)  \n    INV ID BRA-1               4 (3.0%)     2 (1.5%)       2 (1.5%)        8 (2.0%)  \n    INV ID BRA-11              4 (3.0%)     0 (0.0%)       4 (3.0%)        8 (2.0%)  \n    INV ID BRA-12              0 (0.0%)     1 (0.7%)       0 (0.0%)        1 (0.2%)  \n    INV ID BRA-13              1 (0.7%)     0 (0.0%)       0 (0.0%)        1 (0.2%)  \n    INV ID BRA-14              1 (0.7%)     0 (0.0%)       1 (0.8%)        2 (0.5%)  \n    INV ID BRA-15              1 (0.7%)     0 (0.0%)       0 (0.0%)        1 (0.2%)  \n    INV ID BRA-2               1 (0.7%)     1 (0.7%)       0 (0.0%)        2 (0.5%)  \n    INV ID BRA-3               0 (0.0%)     2 (1.5%)       0 (0.0%)        2 (0.5%)  \n    INV ID BRA-4               0 (0.0%)     1 (0.7%)       1 (0.8%)        2 (0.5%)  \n    INV ID BRA-5               0 (0.0%)     0 (0.0%)       1 (0.8%)        1 (0.2%)  \n    INV ID BRA-6               1 (0.7%)     0 (0.0%)       0 (0.0%)        1 (0.2%)  \n    INV ID BRA-7               0 (0.0%)     0 (0.0%)       1 (0.8%)        1 (0.2%)  \n\n\n\n\n\nCodelyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ARM\") %>%\n  add_overall_col(label = \"All Patients\") %>%\n  split_rows_by(\"COUNTRY\", split_fun = split_fun, label_pos = \"topleft\", split_label = obj_label(adsl$COUNTRY)) %>%\n  summarize_row_groups() %>%\n  split_rows_by(\"INVID\", split_fun = split_fun, label_pos = \"topleft\", split_label = obj_label(adsl$INVID)) %>%\n  summarize_row_groups()\n\nresult <- build_table(lyt, adsl)\nresult\n\nCountry                     A: Drug X    B: Placebo   C: Combination   All Patients\n  Investigator Identifier    (N=134)      (N=134)        (N=132)         (N=400)   \n———————————————————————————————————————————————————————————————————————————————————\nCHN                         74 (55.2%)   81 (60.4%)     64 (48.5%)     219 (54.8%) \n  INV ID CHN-1              21 (15.7%)   20 (14.9%)     16 (12.1%)      57 (14.2%) \n  INV ID CHN-10              0 (0.0%)     1 (0.7%)       0 (0.0%)        1 (0.2%)  \n  INV ID CHN-11             12 (9.0%)    20 (14.9%)     16 (12.1%)      48 (12.0%) \n  INV ID CHN-12              4 (3.0%)     3 (2.2%)       1 (0.8%)        8 (2.0%)  \n  INV ID CHN-13              2 (1.5%)     6 (4.5%)       0 (0.0%)        8 (2.0%)  \n  INV ID CHN-14              4 (3.0%)     2 (1.5%)       3 (2.3%)        9 (2.2%)  \n  INV ID CHN-15              2 (1.5%)     0 (0.0%)       4 (3.0%)        6 (1.5%)  \n  INV ID CHN-16              0 (0.0%)     3 (2.2%)       3 (2.3%)        6 (1.5%)  \n  INV ID CHN-17              4 (3.0%)     4 (3.0%)       3 (2.3%)       11 (2.8%)  \n  INV ID CHN-18              1 (0.7%)     0 (0.0%)       2 (1.5%)        3 (0.8%)  \n  INV ID CHN-2               9 (6.7%)     4 (3.0%)       3 (2.3%)       16 (4.0%)  \n  INV ID CHN-3               5 (3.7%)     1 (0.7%)       5 (3.8%)       11 (2.8%)  \n  INV ID CHN-4               3 (2.2%)     3 (2.2%)       3 (2.3%)        9 (2.2%)  \n  INV ID CHN-5               4 (3.0%)     3 (2.2%)       4 (3.0%)       11 (2.8%)  \n  INV ID CHN-6               1 (0.7%)     3 (2.2%)       0 (0.0%)        4 (1.0%)  \n  INV ID CHN-7               0 (0.0%)     5 (3.7%)       1 (0.8%)        6 (1.5%)  \n  INV ID CHN-8               1 (0.7%)     1 (0.7%)       0 (0.0%)        2 (0.5%)  \n  INV ID CHN-9               1 (0.7%)     2 (1.5%)       0 (0.0%)        3 (0.8%)  \nUSA                         10 (7.5%)    13 (9.7%)      17 (12.9%)      40 (10.0%) \n  INV ID USA-1               1 (0.7%)     4 (3.0%)       5 (3.8%)       10 (2.5%)  \n  INV ID USA-11              4 (3.0%)     2 (1.5%)       3 (2.3%)        9 (2.2%)  \n  INV ID USA-12              1 (0.7%)     2 (1.5%)       3 (2.3%)        6 (1.5%)  \n  INV ID USA-14              1 (0.7%)     0 (0.0%)       0 (0.0%)        1 (0.2%)  \n  INV ID USA-15              0 (0.0%)     1 (0.7%)       1 (0.8%)        2 (0.5%)  \n  INV ID USA-17              1 (0.7%)     1 (0.7%)       0 (0.0%)        2 (0.5%)  \n  INV ID USA-19              0 (0.0%)     0 (0.0%)       1 (0.8%)        1 (0.2%)  \n  INV ID USA-2               0 (0.0%)     0 (0.0%)       1 (0.8%)        1 (0.2%)  \n  INV ID USA-3               1 (0.7%)     0 (0.0%)       1 (0.8%)        2 (0.5%)  \n  INV ID USA-4               0 (0.0%)     1 (0.7%)       1 (0.8%)        2 (0.5%)  \n  INV ID USA-5               0 (0.0%)     1 (0.7%)       0 (0.0%)        1 (0.2%)  \n  INV ID USA-6               0 (0.0%)     1 (0.7%)       0 (0.0%)        1 (0.2%)  \n  INV ID USA-8               0 (0.0%)     0 (0.0%)       1 (0.8%)        1 (0.2%)  \n  INV ID USA-9               1 (0.7%)     0 (0.0%)       0 (0.0%)        1 (0.2%)  \nBRA                         13 (9.7%)     7 (5.2%)      10 (7.6%)       30 (7.5%)  \n  INV ID BRA-1               4 (3.0%)     2 (1.5%)       2 (1.5%)        8 (2.0%)  \n  INV ID BRA-11              4 (3.0%)     0 (0.0%)       4 (3.0%)        8 (2.0%)  \n  INV ID BRA-12              0 (0.0%)     1 (0.7%)       0 (0.0%)        1 (0.2%)  \n  INV ID BRA-13              1 (0.7%)     0 (0.0%)       0 (0.0%)        1 (0.2%)  \n  INV ID BRA-14              1 (0.7%)     0 (0.0%)       1 (0.8%)        2 (0.5%)  \n  INV ID BRA-15              1 (0.7%)     0 (0.0%)       0 (0.0%)        1 (0.2%)  \n  INV ID BRA-2               1 (0.7%)     1 (0.7%)       0 (0.0%)        2 (0.5%)  \n  INV ID BRA-3               0 (0.0%)     2 (1.5%)       0 (0.0%)        2 (0.5%)  \n  INV ID BRA-4               0 (0.0%)     1 (0.7%)       1 (0.8%)        2 (0.5%)  \n  INV ID BRA-5               0 (0.0%)     0 (0.0%)       1 (0.8%)        1 (0.2%)  \n  INV ID BRA-6               1 (0.7%)     0 (0.0%)       0 (0.0%)        1 (0.2%)  \n  INV ID BRA-7               0 (0.0%)     0 (0.0%)       1 (0.8%)        1 (0.2%)  \nPAK                         12 (9.0%)     9 (6.7%)      10 (7.6%)       31 (7.8%)  \n  INV ID PAK-1               2 (1.5%)     4 (3.0%)       4 (3.0%)       10 (2.5%)  \n  INV ID PAK-11              4 (3.0%)     3 (2.2%)       2 (1.5%)        9 (2.2%)  \n  INV ID PAK-12              2 (1.5%)     0 (0.0%)       0 (0.0%)        2 (0.5%)  \n  INV ID PAK-13              1 (0.7%)     1 (0.7%)       0 (0.0%)        2 (0.5%)  \n  INV ID PAK-14              1 (0.7%)     0 (0.0%)       0 (0.0%)        1 (0.2%)  \n  INV ID PAK-15              1 (0.7%)     0 (0.0%)       0 (0.0%)        1 (0.2%)  \n  INV ID PAK-2               1 (0.7%)     0 (0.0%)       2 (1.5%)        3 (0.8%)  \n  INV ID PAK-4               0 (0.0%)     1 (0.7%)       1 (0.8%)        2 (0.5%)  \n  INV ID PAK-5               0 (0.0%)     0 (0.0%)       1 (0.8%)        1 (0.2%)  \nNGA                          8 (6.0%)     7 (5.2%)      11 (8.3%)       26 (6.5%)  \n  INV ID NGA-1               3 (2.2%)     3 (2.2%)       4 (3.0%)       10 (2.5%)  \n  INV ID NGA-11              1 (0.7%)     2 (1.5%)       3 (2.3%)        6 (1.5%)  \n  INV ID NGA-12              0 (0.0%)     1 (0.7%)       1 (0.8%)        2 (0.5%)  \n  INV ID NGA-17              2 (1.5%)     0 (0.0%)       0 (0.0%)        2 (0.5%)  \n  INV ID NGA-2               1 (0.7%)     1 (0.7%)       0 (0.0%)        2 (0.5%)  \n  INV ID NGA-4               1 (0.7%)     0 (0.0%)       1 (0.8%)        2 (0.5%)  \n  INV ID NGA-5               0 (0.0%)     0 (0.0%)       1 (0.8%)        1 (0.2%)  \n  INV ID NGA-6               0 (0.0%)     0 (0.0%)       1 (0.8%)        1 (0.2%)  \nRUS                          5 (3.7%)     8 (6.0%)       6 (4.5%)       19 (4.8%)  \n  INV ID RUS-1               1 (0.7%)     0 (0.0%)       0 (0.0%)        1 (0.2%)  \n  INV ID RUS-11              0 (0.0%)     2 (1.5%)       2 (1.5%)        4 (1.0%)  \n  INV ID RUS-12              0 (0.0%)     1 (0.7%)       0 (0.0%)        1 (0.2%)  \n  INV ID RUS-13              1 (0.7%)     0 (0.0%)       0 (0.0%)        1 (0.2%)  \n  INV ID RUS-14              0 (0.0%)     0 (0.0%)       1 (0.8%)        1 (0.2%)  \n  INV ID RUS-16              1 (0.7%)     1 (0.7%)       0 (0.0%)        2 (0.5%)  \n  INV ID RUS-18              1 (0.7%)     0 (0.0%)       0 (0.0%)        1 (0.2%)  \n  INV ID RUS-2               0 (0.0%)     1 (0.7%)       0 (0.0%)        1 (0.2%)  \n  INV ID RUS-3               0 (0.0%)     0 (0.0%)       1 (0.8%)        1 (0.2%)  \n  INV ID RUS-4               0 (0.0%)     2 (1.5%)       1 (0.8%)        3 (0.8%)  \n  INV ID RUS-5               0 (0.0%)     1 (0.7%)       0 (0.0%)        1 (0.2%)  \n  INV ID RUS-6               1 (0.7%)     0 (0.0%)       0 (0.0%)        1 (0.2%)  \n  INV ID RUS-7               0 (0.0%)     0 (0.0%)       1 (0.8%)        1 (0.2%)  \nJPN                          5 (3.7%)     4 (3.0%)       9 (6.8%)       18 (4.5%)  \n  INV ID JPN-1               2 (1.5%)     2 (1.5%)       1 (0.8%)        5 (1.2%)  \n  INV ID JPN-11              0 (0.0%)     0 (0.0%)       3 (2.3%)        3 (0.8%)  \n  INV ID JPN-12              0 (0.0%)     0 (0.0%)       1 (0.8%)        1 (0.2%)  \n  INV ID JPN-14              0 (0.0%)     1 (0.7%)       0 (0.0%)        1 (0.2%)  \n  INV ID JPN-17              0 (0.0%)     0 (0.0%)       2 (1.5%)        2 (0.5%)  \n  INV ID JPN-18              1 (0.7%)     0 (0.0%)       0 (0.0%)        1 (0.2%)  \n  INV ID JPN-2               0 (0.0%)     0 (0.0%)       1 (0.8%)        1 (0.2%)  \n  INV ID JPN-3               0 (0.0%)     1 (0.7%)       0 (0.0%)        1 (0.2%)  \n  INV ID JPN-5               1 (0.7%)     0 (0.0%)       1 (0.8%)        2 (0.5%)  \n  INV ID JPN-6               1 (0.7%)     0 (0.0%)       0 (0.0%)        1 (0.2%)  \nGBR                          4 (3.0%)     3 (2.2%)       2 (1.5%)        9 (2.2%)  \n  INV ID GBR-1               2 (1.5%)     0 (0.0%)       1 (0.8%)        3 (0.8%)  \n  INV ID GBR-11              0 (0.0%)     1 (0.7%)       1 (0.8%)        2 (0.5%)  \n  INV ID GBR-13              1 (0.7%)     0 (0.0%)       0 (0.0%)        1 (0.2%)  \n  INV ID GBR-15              1 (0.7%)     0 (0.0%)       0 (0.0%)        1 (0.2%)  \n  INV ID GBR-17              0 (0.0%)     1 (0.7%)       0 (0.0%)        1 (0.2%)  \n  INV ID GBR-6               0 (0.0%)     1 (0.7%)       0 (0.0%)        1 (0.2%)  \nCAN                          3 (2.2%)     2 (1.5%)       3 (2.3%)        8 (2.0%)  \n  INV ID CAN-1               1 (0.7%)     1 (0.7%)       0 (0.0%)        2 (0.5%)  \n  INV ID CAN-11              1 (0.7%)     0 (0.0%)       1 (0.8%)        2 (0.5%)  \n  INV ID CAN-14              1 (0.7%)     0 (0.0%)       0 (0.0%)        1 (0.2%)  \n  INV ID CAN-4               0 (0.0%)     1 (0.7%)       1 (0.8%)        2 (0.5%)  \n  INV ID CAN-5               0 (0.0%)     0 (0.0%)       1 (0.8%)        1 (0.2%)  \n\n\n\n\n\nCodelyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ARM\") %>%\n  add_overall_col(label = \"All Patients\") %>%\n  split_rows_by(\"REGION1\", split_fun = split_fun, label_pos = \"topleft\", split_label = obj_label(adsl$REGION1)) %>%\n  summarize_row_groups() %>%\n  split_rows_by(\"COUNTRY\", split_fun = split_fun, label_pos = \"topleft\", split_label = obj_label(adsl$COUNTRY)) %>%\n  summarize_row_groups() %>%\n  split_rows_by(\"INVID_INVNAM\",\n    split_fun = split_fun,\n    label_pos = \"topleft\",\n    split_label = obj_label(adsl$INVID_INVNAM)\n  ) %>%\n  summarize_row_groups()\n\nresult <- build_table(lyt, adsl)\nresult\n\nGeographic Region 1                                                                         \n  Country                            A: Drug X    B: Placebo   C: Combination   All Patients\n    Investigator Number/Name          (N=134)      (N=134)        (N=132)         (N=400)   \n————————————————————————————————————————————————————————————————————————————————————————————\nAfrica                                8 (6.0%)     7 (5.2%)      11 (8.3%)       26 (6.5%)  \n  NGA                                 8 (6.0%)     7 (5.2%)      11 (8.3%)       26 (6.5%)  \n    INV ID NGA-1 / Dr. NGA-1 Doe      3 (2.2%)     3 (2.2%)       4 (3.0%)       10 (2.5%)  \n    INV ID NGA-11 / Dr. NGA-11 Doe    1 (0.7%)     2 (1.5%)       3 (2.3%)        6 (1.5%)  \n    INV ID NGA-12 / Dr. NGA-12 Doe    0 (0.0%)     1 (0.7%)       1 (0.8%)        2 (0.5%)  \n    INV ID NGA-17 / Dr. NGA-17 Doe    2 (1.5%)     0 (0.0%)       0 (0.0%)        2 (0.5%)  \n    INV ID NGA-2 / Dr. NGA-2 Doe      1 (0.7%)     1 (0.7%)       0 (0.0%)        2 (0.5%)  \n    INV ID NGA-4 / Dr. NGA-4 Doe      1 (0.7%)     0 (0.0%)       1 (0.8%)        2 (0.5%)  \n    INV ID NGA-5 / Dr. NGA-5 Doe      0 (0.0%)     0 (0.0%)       1 (0.8%)        1 (0.2%)  \n    INV ID NGA-6 / Dr. NGA-6 Doe      0 (0.0%)     0 (0.0%)       1 (0.8%)        1 (0.2%)  \nAsia                                 91 (67.9%)   94 (70.1%)     83 (62.9%)     268 (67.0%) \n  CHN                                74 (55.2%)   81 (60.4%)     64 (48.5%)     219 (54.8%) \n    INV ID CHN-1 / Dr. CHN-1 Doe     21 (15.7%)   20 (14.9%)     16 (12.1%)      57 (14.2%) \n    INV ID CHN-10 / Dr. CHN-10 Doe    0 (0.0%)     1 (0.7%)       0 (0.0%)        1 (0.2%)  \n    INV ID CHN-11 / Dr. CHN-11 Doe   12 (9.0%)    20 (14.9%)     16 (12.1%)      48 (12.0%) \n    INV ID CHN-12 / Dr. CHN-12 Doe    4 (3.0%)     3 (2.2%)       1 (0.8%)        8 (2.0%)  \n    INV ID CHN-13 / Dr. CHN-13 Doe    2 (1.5%)     6 (4.5%)       0 (0.0%)        8 (2.0%)  \n    INV ID CHN-14 / Dr. CHN-14 Doe    4 (3.0%)     2 (1.5%)       3 (2.3%)        9 (2.2%)  \n    INV ID CHN-15 / Dr. CHN-15 Doe    2 (1.5%)     0 (0.0%)       4 (3.0%)        6 (1.5%)  \n    INV ID CHN-16 / Dr. CHN-16 Doe    0 (0.0%)     3 (2.2%)       3 (2.3%)        6 (1.5%)  \n    INV ID CHN-17 / Dr. CHN-17 Doe    4 (3.0%)     4 (3.0%)       3 (2.3%)       11 (2.8%)  \n    INV ID CHN-18 / Dr. CHN-18 Doe    1 (0.7%)     0 (0.0%)       2 (1.5%)        3 (0.8%)  \n    INV ID CHN-2 / Dr. CHN-2 Doe      9 (6.7%)     4 (3.0%)       3 (2.3%)       16 (4.0%)  \n    INV ID CHN-3 / Dr. CHN-3 Doe      5 (3.7%)     1 (0.7%)       5 (3.8%)       11 (2.8%)  \n    INV ID CHN-4 / Dr. CHN-4 Doe      3 (2.2%)     3 (2.2%)       3 (2.3%)        9 (2.2%)  \n    INV ID CHN-5 / Dr. CHN-5 Doe      4 (3.0%)     3 (2.2%)       4 (3.0%)       11 (2.8%)  \n    INV ID CHN-6 / Dr. CHN-6 Doe      1 (0.7%)     3 (2.2%)       0 (0.0%)        4 (1.0%)  \n    INV ID CHN-7 / Dr. CHN-7 Doe      0 (0.0%)     5 (3.7%)       1 (0.8%)        6 (1.5%)  \n    INV ID CHN-8 / Dr. CHN-8 Doe      1 (0.7%)     1 (0.7%)       0 (0.0%)        2 (0.5%)  \n    INV ID CHN-9 / Dr. CHN-9 Doe      1 (0.7%)     2 (1.5%)       0 (0.0%)        3 (0.8%)  \n  PAK                                12 (9.0%)     9 (6.7%)      10 (7.6%)       31 (7.8%)  \n    INV ID PAK-1 / Dr. PAK-1 Doe      2 (1.5%)     4 (3.0%)       4 (3.0%)       10 (2.5%)  \n    INV ID PAK-11 / Dr. PAK-11 Doe    4 (3.0%)     3 (2.2%)       2 (1.5%)        9 (2.2%)  \n    INV ID PAK-12 / Dr. PAK-12 Doe    2 (1.5%)     0 (0.0%)       0 (0.0%)        2 (0.5%)  \n    INV ID PAK-13 / Dr. PAK-13 Doe    1 (0.7%)     1 (0.7%)       0 (0.0%)        2 (0.5%)  \n    INV ID PAK-14 / Dr. PAK-14 Doe    1 (0.7%)     0 (0.0%)       0 (0.0%)        1 (0.2%)  \n    INV ID PAK-15 / Dr. PAK-15 Doe    1 (0.7%)     0 (0.0%)       0 (0.0%)        1 (0.2%)  \n    INV ID PAK-2 / Dr. PAK-2 Doe      1 (0.7%)     0 (0.0%)       2 (1.5%)        3 (0.8%)  \n    INV ID PAK-4 / Dr. PAK-4 Doe      0 (0.0%)     1 (0.7%)       1 (0.8%)        2 (0.5%)  \n    INV ID PAK-5 / Dr. PAK-5 Doe      0 (0.0%)     0 (0.0%)       1 (0.8%)        1 (0.2%)  \n  JPN                                 5 (3.7%)     4 (3.0%)       9 (6.8%)       18 (4.5%)  \n    INV ID JPN-1 / Dr. JPN-1 Doe      2 (1.5%)     2 (1.5%)       1 (0.8%)        5 (1.2%)  \n    INV ID JPN-11 / Dr. JPN-11 Doe    0 (0.0%)     0 (0.0%)       3 (2.3%)        3 (0.8%)  \n    INV ID JPN-12 / Dr. JPN-12 Doe    0 (0.0%)     0 (0.0%)       1 (0.8%)        1 (0.2%)  \n    INV ID JPN-14 / Dr. JPN-14 Doe    0 (0.0%)     1 (0.7%)       0 (0.0%)        1 (0.2%)  \n    INV ID JPN-17 / Dr. JPN-17 Doe    0 (0.0%)     0 (0.0%)       2 (1.5%)        2 (0.5%)  \n    INV ID JPN-18 / Dr. JPN-18 Doe    1 (0.7%)     0 (0.0%)       0 (0.0%)        1 (0.2%)  \n    INV ID JPN-2 / Dr. JPN-2 Doe      0 (0.0%)     0 (0.0%)       1 (0.8%)        1 (0.2%)  \n    INV ID JPN-3 / Dr. JPN-3 Doe      0 (0.0%)     1 (0.7%)       0 (0.0%)        1 (0.2%)  \n    INV ID JPN-5 / Dr. JPN-5 Doe      1 (0.7%)     0 (0.0%)       1 (0.8%)        2 (0.5%)  \n    INV ID JPN-6 / Dr. JPN-6 Doe      1 (0.7%)     0 (0.0%)       0 (0.0%)        1 (0.2%)  \nEurasia                               5 (3.7%)     8 (6.0%)       6 (4.5%)       19 (4.8%)  \n  RUS                                 5 (3.7%)     8 (6.0%)       6 (4.5%)       19 (4.8%)  \n    INV ID RUS-1 / Dr. RUS-1 Doe      1 (0.7%)     0 (0.0%)       0 (0.0%)        1 (0.2%)  \n    INV ID RUS-11 / Dr. RUS-11 Doe    0 (0.0%)     2 (1.5%)       2 (1.5%)        4 (1.0%)  \n    INV ID RUS-12 / Dr. RUS-12 Doe    0 (0.0%)     1 (0.7%)       0 (0.0%)        1 (0.2%)  \n    INV ID RUS-13 / Dr. RUS-13 Doe    1 (0.7%)     0 (0.0%)       0 (0.0%)        1 (0.2%)  \n    INV ID RUS-14 / Dr. RUS-14 Doe    0 (0.0%)     0 (0.0%)       1 (0.8%)        1 (0.2%)  \n    INV ID RUS-16 / Dr. RUS-16 Doe    1 (0.7%)     1 (0.7%)       0 (0.0%)        2 (0.5%)  \n    INV ID RUS-18 / Dr. RUS-18 Doe    1 (0.7%)     0 (0.0%)       0 (0.0%)        1 (0.2%)  \n    INV ID RUS-2 / Dr. RUS-2 Doe      0 (0.0%)     1 (0.7%)       0 (0.0%)        1 (0.2%)  \n    INV ID RUS-3 / Dr. RUS-3 Doe      0 (0.0%)     0 (0.0%)       1 (0.8%)        1 (0.2%)  \n    INV ID RUS-4 / Dr. RUS-4 Doe      0 (0.0%)     2 (1.5%)       1 (0.8%)        3 (0.8%)  \n    INV ID RUS-5 / Dr. RUS-5 Doe      0 (0.0%)     1 (0.7%)       0 (0.0%)        1 (0.2%)  \n    INV ID RUS-6 / Dr. RUS-6 Doe      1 (0.7%)     0 (0.0%)       0 (0.0%)        1 (0.2%)  \n    INV ID RUS-7 / Dr. RUS-7 Doe      0 (0.0%)     0 (0.0%)       1 (0.8%)        1 (0.2%)  \nEurope                                4 (3.0%)     3 (2.2%)       2 (1.5%)        9 (2.2%)  \n  GBR                                 4 (3.0%)     3 (2.2%)       2 (1.5%)        9 (2.2%)  \n    INV ID GBR-1 / Dr. GBR-1 Doe      2 (1.5%)     0 (0.0%)       1 (0.8%)        3 (0.8%)  \n    INV ID GBR-11 / Dr. GBR-11 Doe    0 (0.0%)     1 (0.7%)       1 (0.8%)        2 (0.5%)  \n    INV ID GBR-13 / Dr. GBR-13 Doe    1 (0.7%)     0 (0.0%)       0 (0.0%)        1 (0.2%)  \n    INV ID GBR-15 / Dr. GBR-15 Doe    1 (0.7%)     0 (0.0%)       0 (0.0%)        1 (0.2%)  \n    INV ID GBR-17 / Dr. GBR-17 Doe    0 (0.0%)     1 (0.7%)       0 (0.0%)        1 (0.2%)  \n    INV ID GBR-6 / Dr. GBR-6 Doe      0 (0.0%)     1 (0.7%)       0 (0.0%)        1 (0.2%)  \nNorth America                        13 (9.7%)    15 (11.2%)     20 (15.2%)      48 (12.0%) \n  USA                                10 (7.5%)    13 (9.7%)      17 (12.9%)      40 (10.0%) \n    INV ID USA-1 / Dr. USA-1 Doe      1 (0.7%)     4 (3.0%)       5 (3.8%)       10 (2.5%)  \n    INV ID USA-11 / Dr. USA-11 Doe    4 (3.0%)     2 (1.5%)       3 (2.3%)        9 (2.2%)  \n    INV ID USA-12 / Dr. USA-12 Doe    1 (0.7%)     2 (1.5%)       3 (2.3%)        6 (1.5%)  \n    INV ID USA-14 / Dr. USA-14 Doe    1 (0.7%)     0 (0.0%)       0 (0.0%)        1 (0.2%)  \n    INV ID USA-15 / Dr. USA-15 Doe    0 (0.0%)     1 (0.7%)       1 (0.8%)        2 (0.5%)  \n    INV ID USA-17 / Dr. USA-17 Doe    1 (0.7%)     1 (0.7%)       0 (0.0%)        2 (0.5%)  \n    INV ID USA-19 / Dr. USA-19 Doe    0 (0.0%)     0 (0.0%)       1 (0.8%)        1 (0.2%)  \n    INV ID USA-2 / Dr. USA-2 Doe      0 (0.0%)     0 (0.0%)       1 (0.8%)        1 (0.2%)  \n    INV ID USA-3 / Dr. USA-3 Doe      1 (0.7%)     0 (0.0%)       1 (0.8%)        2 (0.5%)  \n    INV ID USA-4 / Dr. USA-4 Doe      0 (0.0%)     1 (0.7%)       1 (0.8%)        2 (0.5%)  \n    INV ID USA-5 / Dr. USA-5 Doe      0 (0.0%)     1 (0.7%)       0 (0.0%)        1 (0.2%)  \n    INV ID USA-6 / Dr. USA-6 Doe      0 (0.0%)     1 (0.7%)       0 (0.0%)        1 (0.2%)  \n    INV ID USA-8 / Dr. USA-8 Doe      0 (0.0%)     0 (0.0%)       1 (0.8%)        1 (0.2%)  \n    INV ID USA-9 / Dr. USA-9 Doe      1 (0.7%)     0 (0.0%)       0 (0.0%)        1 (0.2%)  \n  CAN                                 3 (2.2%)     2 (1.5%)       3 (2.3%)        8 (2.0%)  \n    INV ID CAN-1 / Dr. CAN-1 Doe      1 (0.7%)     1 (0.7%)       0 (0.0%)        2 (0.5%)  \n    INV ID CAN-11 / Dr. CAN-11 Doe    1 (0.7%)     0 (0.0%)       1 (0.8%)        2 (0.5%)  \n    INV ID CAN-14 / Dr. CAN-14 Doe    1 (0.7%)     0 (0.0%)       0 (0.0%)        1 (0.2%)  \n    INV ID CAN-4 / Dr. CAN-4 Doe      0 (0.0%)     1 (0.7%)       1 (0.8%)        2 (0.5%)  \n    INV ID CAN-5 / Dr. CAN-5 Doe      0 (0.0%)     0 (0.0%)       1 (0.8%)        1 (0.2%)  \nSouth America                        13 (9.7%)     7 (5.2%)      10 (7.6%)       30 (7.5%)  \n  BRA                                13 (9.7%)     7 (5.2%)      10 (7.6%)       30 (7.5%)  \n    INV ID BRA-1 / Dr. BRA-1 Doe      4 (3.0%)     2 (1.5%)       2 (1.5%)        8 (2.0%)  \n    INV ID BRA-11 / Dr. BRA-11 Doe    4 (3.0%)     0 (0.0%)       4 (3.0%)        8 (2.0%)  \n    INV ID BRA-12 / Dr. BRA-12 Doe    0 (0.0%)     1 (0.7%)       0 (0.0%)        1 (0.2%)  \n    INV ID BRA-13 / Dr. BRA-13 Doe    1 (0.7%)     0 (0.0%)       0 (0.0%)        1 (0.2%)  \n    INV ID BRA-14 / Dr. BRA-14 Doe    1 (0.7%)     0 (0.0%)       1 (0.8%)        2 (0.5%)  \n    INV ID BRA-15 / Dr. BRA-15 Doe    1 (0.7%)     0 (0.0%)       0 (0.0%)        1 (0.2%)  \n    INV ID BRA-2 / Dr. BRA-2 Doe      1 (0.7%)     1 (0.7%)       0 (0.0%)        2 (0.5%)  \n    INV ID BRA-3 / Dr. BRA-3 Doe      0 (0.0%)     2 (1.5%)       0 (0.0%)        2 (0.5%)  \n    INV ID BRA-4 / Dr. BRA-4 Doe      0 (0.0%)     1 (0.7%)       1 (0.8%)        2 (0.5%)  \n    INV ID BRA-5 / Dr. BRA-5 Doe      0 (0.0%)     0 (0.0%)       1 (0.8%)        1 (0.2%)  \n    INV ID BRA-6 / Dr. BRA-6 Doe      1 (0.7%)     0 (0.0%)       0 (0.0%)        1 (0.2%)  \n    INV ID BRA-7 / Dr. BRA-7 Doe      0 (0.0%)     0 (0.0%)       1 (0.8%)        1 (0.2%)  \n\n\n\n\n\nCodelyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ARM\") %>%\n  add_overall_col(label = \"All Patients\") %>%\n  split_rows_by(\"COUNTRY\", split_fun = split_fun, label_pos = \"topleft\", split_label = obj_label(adsl$COUNTRY)) %>%\n  summarize_row_groups() %>%\n  split_rows_by(\"INVID_INVNAM\",\n    split_fun = split_fun,\n    label_pos = \"topleft\",\n    split_label = obj_label(adsl$INVID_INVNAM)\n  ) %>%\n  summarize_row_groups()\n\nresult <- build_table(lyt, adsl)\nresult\n\nCountry                            A: Drug X    B: Placebo   C: Combination   All Patients\n  Investigator Number/Name          (N=134)      (N=134)        (N=132)         (N=400)   \n——————————————————————————————————————————————————————————————————————————————————————————\nCHN                                74 (55.2%)   81 (60.4%)     64 (48.5%)     219 (54.8%) \n  INV ID CHN-1 / Dr. CHN-1 Doe     21 (15.7%)   20 (14.9%)     16 (12.1%)      57 (14.2%) \n  INV ID CHN-10 / Dr. CHN-10 Doe    0 (0.0%)     1 (0.7%)       0 (0.0%)        1 (0.2%)  \n  INV ID CHN-11 / Dr. CHN-11 Doe   12 (9.0%)    20 (14.9%)     16 (12.1%)      48 (12.0%) \n  INV ID CHN-12 / Dr. CHN-12 Doe    4 (3.0%)     3 (2.2%)       1 (0.8%)        8 (2.0%)  \n  INV ID CHN-13 / Dr. CHN-13 Doe    2 (1.5%)     6 (4.5%)       0 (0.0%)        8 (2.0%)  \n  INV ID CHN-14 / Dr. CHN-14 Doe    4 (3.0%)     2 (1.5%)       3 (2.3%)        9 (2.2%)  \n  INV ID CHN-15 / Dr. CHN-15 Doe    2 (1.5%)     0 (0.0%)       4 (3.0%)        6 (1.5%)  \n  INV ID CHN-16 / Dr. CHN-16 Doe    0 (0.0%)     3 (2.2%)       3 (2.3%)        6 (1.5%)  \n  INV ID CHN-17 / Dr. CHN-17 Doe    4 (3.0%)     4 (3.0%)       3 (2.3%)       11 (2.8%)  \n  INV ID CHN-18 / Dr. CHN-18 Doe    1 (0.7%)     0 (0.0%)       2 (1.5%)        3 (0.8%)  \n  INV ID CHN-2 / Dr. CHN-2 Doe      9 (6.7%)     4 (3.0%)       3 (2.3%)       16 (4.0%)  \n  INV ID CHN-3 / Dr. CHN-3 Doe      5 (3.7%)     1 (0.7%)       5 (3.8%)       11 (2.8%)  \n  INV ID CHN-4 / Dr. CHN-4 Doe      3 (2.2%)     3 (2.2%)       3 (2.3%)        9 (2.2%)  \n  INV ID CHN-5 / Dr. CHN-5 Doe      4 (3.0%)     3 (2.2%)       4 (3.0%)       11 (2.8%)  \n  INV ID CHN-6 / Dr. CHN-6 Doe      1 (0.7%)     3 (2.2%)       0 (0.0%)        4 (1.0%)  \n  INV ID CHN-7 / Dr. CHN-7 Doe      0 (0.0%)     5 (3.7%)       1 (0.8%)        6 (1.5%)  \n  INV ID CHN-8 / Dr. CHN-8 Doe      1 (0.7%)     1 (0.7%)       0 (0.0%)        2 (0.5%)  \n  INV ID CHN-9 / Dr. CHN-9 Doe      1 (0.7%)     2 (1.5%)       0 (0.0%)        3 (0.8%)  \nUSA                                10 (7.5%)    13 (9.7%)      17 (12.9%)      40 (10.0%) \n  INV ID USA-1 / Dr. USA-1 Doe      1 (0.7%)     4 (3.0%)       5 (3.8%)       10 (2.5%)  \n  INV ID USA-11 / Dr. USA-11 Doe    4 (3.0%)     2 (1.5%)       3 (2.3%)        9 (2.2%)  \n  INV ID USA-12 / Dr. USA-12 Doe    1 (0.7%)     2 (1.5%)       3 (2.3%)        6 (1.5%)  \n  INV ID USA-14 / Dr. USA-14 Doe    1 (0.7%)     0 (0.0%)       0 (0.0%)        1 (0.2%)  \n  INV ID USA-15 / Dr. USA-15 Doe    0 (0.0%)     1 (0.7%)       1 (0.8%)        2 (0.5%)  \n  INV ID USA-17 / Dr. USA-17 Doe    1 (0.7%)     1 (0.7%)       0 (0.0%)        2 (0.5%)  \n  INV ID USA-19 / Dr. USA-19 Doe    0 (0.0%)     0 (0.0%)       1 (0.8%)        1 (0.2%)  \n  INV ID USA-2 / Dr. USA-2 Doe      0 (0.0%)     0 (0.0%)       1 (0.8%)        1 (0.2%)  \n  INV ID USA-3 / Dr. USA-3 Doe      1 (0.7%)     0 (0.0%)       1 (0.8%)        2 (0.5%)  \n  INV ID USA-4 / Dr. USA-4 Doe      0 (0.0%)     1 (0.7%)       1 (0.8%)        2 (0.5%)  \n  INV ID USA-5 / Dr. USA-5 Doe      0 (0.0%)     1 (0.7%)       0 (0.0%)        1 (0.2%)  \n  INV ID USA-6 / Dr. USA-6 Doe      0 (0.0%)     1 (0.7%)       0 (0.0%)        1 (0.2%)  \n  INV ID USA-8 / Dr. USA-8 Doe      0 (0.0%)     0 (0.0%)       1 (0.8%)        1 (0.2%)  \n  INV ID USA-9 / Dr. USA-9 Doe      1 (0.7%)     0 (0.0%)       0 (0.0%)        1 (0.2%)  \nBRA                                13 (9.7%)     7 (5.2%)      10 (7.6%)       30 (7.5%)  \n  INV ID BRA-1 / Dr. BRA-1 Doe      4 (3.0%)     2 (1.5%)       2 (1.5%)        8 (2.0%)  \n  INV ID BRA-11 / Dr. BRA-11 Doe    4 (3.0%)     0 (0.0%)       4 (3.0%)        8 (2.0%)  \n  INV ID BRA-12 / Dr. BRA-12 Doe    0 (0.0%)     1 (0.7%)       0 (0.0%)        1 (0.2%)  \n  INV ID BRA-13 / Dr. BRA-13 Doe    1 (0.7%)     0 (0.0%)       0 (0.0%)        1 (0.2%)  \n  INV ID BRA-14 / Dr. BRA-14 Doe    1 (0.7%)     0 (0.0%)       1 (0.8%)        2 (0.5%)  \n  INV ID BRA-15 / Dr. BRA-15 Doe    1 (0.7%)     0 (0.0%)       0 (0.0%)        1 (0.2%)  \n  INV ID BRA-2 / Dr. BRA-2 Doe      1 (0.7%)     1 (0.7%)       0 (0.0%)        2 (0.5%)  \n  INV ID BRA-3 / Dr. BRA-3 Doe      0 (0.0%)     2 (1.5%)       0 (0.0%)        2 (0.5%)  \n  INV ID BRA-4 / Dr. BRA-4 Doe      0 (0.0%)     1 (0.7%)       1 (0.8%)        2 (0.5%)  \n  INV ID BRA-5 / Dr. BRA-5 Doe      0 (0.0%)     0 (0.0%)       1 (0.8%)        1 (0.2%)  \n  INV ID BRA-6 / Dr. BRA-6 Doe      1 (0.7%)     0 (0.0%)       0 (0.0%)        1 (0.2%)  \n  INV ID BRA-7 / Dr. BRA-7 Doe      0 (0.0%)     0 (0.0%)       1 (0.8%)        1 (0.2%)  \nPAK                                12 (9.0%)     9 (6.7%)      10 (7.6%)       31 (7.8%)  \n  INV ID PAK-1 / Dr. PAK-1 Doe      2 (1.5%)     4 (3.0%)       4 (3.0%)       10 (2.5%)  \n  INV ID PAK-11 / Dr. PAK-11 Doe    4 (3.0%)     3 (2.2%)       2 (1.5%)        9 (2.2%)  \n  INV ID PAK-12 / Dr. PAK-12 Doe    2 (1.5%)     0 (0.0%)       0 (0.0%)        2 (0.5%)  \n  INV ID PAK-13 / Dr. PAK-13 Doe    1 (0.7%)     1 (0.7%)       0 (0.0%)        2 (0.5%)  \n  INV ID PAK-14 / Dr. PAK-14 Doe    1 (0.7%)     0 (0.0%)       0 (0.0%)        1 (0.2%)  \n  INV ID PAK-15 / Dr. PAK-15 Doe    1 (0.7%)     0 (0.0%)       0 (0.0%)        1 (0.2%)  \n  INV ID PAK-2 / Dr. PAK-2 Doe      1 (0.7%)     0 (0.0%)       2 (1.5%)        3 (0.8%)  \n  INV ID PAK-4 / Dr. PAK-4 Doe      0 (0.0%)     1 (0.7%)       1 (0.8%)        2 (0.5%)  \n  INV ID PAK-5 / Dr. PAK-5 Doe      0 (0.0%)     0 (0.0%)       1 (0.8%)        1 (0.2%)  \nNGA                                 8 (6.0%)     7 (5.2%)      11 (8.3%)       26 (6.5%)  \n  INV ID NGA-1 / Dr. NGA-1 Doe      3 (2.2%)     3 (2.2%)       4 (3.0%)       10 (2.5%)  \n  INV ID NGA-11 / Dr. NGA-11 Doe    1 (0.7%)     2 (1.5%)       3 (2.3%)        6 (1.5%)  \n  INV ID NGA-12 / Dr. NGA-12 Doe    0 (0.0%)     1 (0.7%)       1 (0.8%)        2 (0.5%)  \n  INV ID NGA-17 / Dr. NGA-17 Doe    2 (1.5%)     0 (0.0%)       0 (0.0%)        2 (0.5%)  \n  INV ID NGA-2 / Dr. NGA-2 Doe      1 (0.7%)     1 (0.7%)       0 (0.0%)        2 (0.5%)  \n  INV ID NGA-4 / Dr. NGA-4 Doe      1 (0.7%)     0 (0.0%)       1 (0.8%)        2 (0.5%)  \n  INV ID NGA-5 / Dr. NGA-5 Doe      0 (0.0%)     0 (0.0%)       1 (0.8%)        1 (0.2%)  \n  INV ID NGA-6 / Dr. NGA-6 Doe      0 (0.0%)     0 (0.0%)       1 (0.8%)        1 (0.2%)  \nRUS                                 5 (3.7%)     8 (6.0%)       6 (4.5%)       19 (4.8%)  \n  INV ID RUS-1 / Dr. RUS-1 Doe      1 (0.7%)     0 (0.0%)       0 (0.0%)        1 (0.2%)  \n  INV ID RUS-11 / Dr. RUS-11 Doe    0 (0.0%)     2 (1.5%)       2 (1.5%)        4 (1.0%)  \n  INV ID RUS-12 / Dr. RUS-12 Doe    0 (0.0%)     1 (0.7%)       0 (0.0%)        1 (0.2%)  \n  INV ID RUS-13 / Dr. RUS-13 Doe    1 (0.7%)     0 (0.0%)       0 (0.0%)        1 (0.2%)  \n  INV ID RUS-14 / Dr. RUS-14 Doe    0 (0.0%)     0 (0.0%)       1 (0.8%)        1 (0.2%)  \n  INV ID RUS-16 / Dr. RUS-16 Doe    1 (0.7%)     1 (0.7%)       0 (0.0%)        2 (0.5%)  \n  INV ID RUS-18 / Dr. RUS-18 Doe    1 (0.7%)     0 (0.0%)       0 (0.0%)        1 (0.2%)  \n  INV ID RUS-2 / Dr. RUS-2 Doe      0 (0.0%)     1 (0.7%)       0 (0.0%)        1 (0.2%)  \n  INV ID RUS-3 / Dr. RUS-3 Doe      0 (0.0%)     0 (0.0%)       1 (0.8%)        1 (0.2%)  \n  INV ID RUS-4 / Dr. RUS-4 Doe      0 (0.0%)     2 (1.5%)       1 (0.8%)        3 (0.8%)  \n  INV ID RUS-5 / Dr. RUS-5 Doe      0 (0.0%)     1 (0.7%)       0 (0.0%)        1 (0.2%)  \n  INV ID RUS-6 / Dr. RUS-6 Doe      1 (0.7%)     0 (0.0%)       0 (0.0%)        1 (0.2%)  \n  INV ID RUS-7 / Dr. RUS-7 Doe      0 (0.0%)     0 (0.0%)       1 (0.8%)        1 (0.2%)  \nJPN                                 5 (3.7%)     4 (3.0%)       9 (6.8%)       18 (4.5%)  \n  INV ID JPN-1 / Dr. JPN-1 Doe      2 (1.5%)     2 (1.5%)       1 (0.8%)        5 (1.2%)  \n  INV ID JPN-11 / Dr. JPN-11 Doe    0 (0.0%)     0 (0.0%)       3 (2.3%)        3 (0.8%)  \n  INV ID JPN-12 / Dr. JPN-12 Doe    0 (0.0%)     0 (0.0%)       1 (0.8%)        1 (0.2%)  \n  INV ID JPN-14 / Dr. JPN-14 Doe    0 (0.0%)     1 (0.7%)       0 (0.0%)        1 (0.2%)  \n  INV ID JPN-17 / Dr. JPN-17 Doe    0 (0.0%)     0 (0.0%)       2 (1.5%)        2 (0.5%)  \n  INV ID JPN-18 / Dr. JPN-18 Doe    1 (0.7%)     0 (0.0%)       0 (0.0%)        1 (0.2%)  \n  INV ID JPN-2 / Dr. JPN-2 Doe      0 (0.0%)     0 (0.0%)       1 (0.8%)        1 (0.2%)  \n  INV ID JPN-3 / Dr. JPN-3 Doe      0 (0.0%)     1 (0.7%)       0 (0.0%)        1 (0.2%)  \n  INV ID JPN-5 / Dr. JPN-5 Doe      1 (0.7%)     0 (0.0%)       1 (0.8%)        2 (0.5%)  \n  INV ID JPN-6 / Dr. JPN-6 Doe      1 (0.7%)     0 (0.0%)       0 (0.0%)        1 (0.2%)  \nGBR                                 4 (3.0%)     3 (2.2%)       2 (1.5%)        9 (2.2%)  \n  INV ID GBR-1 / Dr. GBR-1 Doe      2 (1.5%)     0 (0.0%)       1 (0.8%)        3 (0.8%)  \n  INV ID GBR-11 / Dr. GBR-11 Doe    0 (0.0%)     1 (0.7%)       1 (0.8%)        2 (0.5%)  \n  INV ID GBR-13 / Dr. GBR-13 Doe    1 (0.7%)     0 (0.0%)       0 (0.0%)        1 (0.2%)  \n  INV ID GBR-15 / Dr. GBR-15 Doe    1 (0.7%)     0 (0.0%)       0 (0.0%)        1 (0.2%)  \n  INV ID GBR-17 / Dr. GBR-17 Doe    0 (0.0%)     1 (0.7%)       0 (0.0%)        1 (0.2%)  \n  INV ID GBR-6 / Dr. GBR-6 Doe      0 (0.0%)     1 (0.7%)       0 (0.0%)        1 (0.2%)  \nCAN                                 3 (2.2%)     2 (1.5%)       3 (2.3%)        8 (2.0%)  \n  INV ID CAN-1 / Dr. CAN-1 Doe      1 (0.7%)     1 (0.7%)       0 (0.0%)        2 (0.5%)  \n  INV ID CAN-11 / Dr. CAN-11 Doe    1 (0.7%)     0 (0.0%)       1 (0.8%)        2 (0.5%)  \n  INV ID CAN-14 / Dr. CAN-14 Doe    1 (0.7%)     0 (0.0%)       0 (0.0%)        1 (0.2%)  \n  INV ID CAN-4 / Dr. CAN-4 Doe      0 (0.0%)     1 (0.7%)       1 (0.8%)        2 (0.5%)  \n  INV ID CAN-5 / Dr. CAN-5 Doe      0 (0.0%)     0 (0.0%)       1 (0.8%)        1 (0.2%)  \n\n\n\n\nNote that for this module application, only the variables passed into by_vars are used when row_groups is selected. Variables passed into summarize_vars are additionally used when row_groups is deselected.\n\nCodelibrary(dplyr)\nlibrary(forcats)\nlibrary(scda)\nlibrary(teal.modules.clinical)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\n\n# Ensure character variables are converted to factors and empty strings and NAs are explicit missing levels.\nadsl <- df_explicit_na(adsl)\n\nadsl_labels <- var_labels(adsl)\n\nadsl <- adsl %>%\n  mutate(\n    REGION1 = droplevels(REGION1),\n    COUNTRY = droplevels(COUNTRY),\n    INVID_INVNAM = paste(INVID, INVNAM, sep = \" / \")\n  ) %>%\n  arrange(REGION1, COUNTRY, INVID) %>%\n  mutate(\n    INVID = factor(INVID),\n    SITEID = factor(SITEID),\n    INVNAM = factor(INVNAM),\n    INVID_INVNAM = factor(INVID_INVNAM)\n  )\n\nvar_labels(adsl) <- c(adsl_labels, \"Investigator Number/Name\")\n\napp <- init(\n  data = cdisc_data(\n    cdisc_dataset(\"ADSL\", adsl,\n      code = 'ADSL <- df_explicit_na(synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\"))\n                  ADSL_labels <- var_labels(ADSL)\n                  ADSL <- ADSL %>% mutate(\n                    REGION1 = droplevels(REGION1),\n                    COUNTRY = droplevels(COUNTRY),\n                    INVID_INVNAM = paste(INVID, INVNAM, sep = \" / \")\n                  ) %>%\n                    arrange(REGION1, COUNTRY, INVID) %>%\n                    mutate(\n                      INVID = factor(INVID),\n                      SITEID = factor(SITEID),\n                      INVNAM = factor(INVNAM),\n                      INVID_INVNAM = factor(INVID_INVNAM)\n                    )\n\n                  var_labels(ADSL) <- c(ADSL_labels, \"Investigator Number/Name\")'\n    ),\n    check = TRUE\n  ),\n  modules = modules(\n    tm_t_summary_by(\n      label = \"Enrollment Table\",\n      dataname = \"ADSL\",\n      arm_var = choices_selected(\n        choices = variable_choices(adsl, c(\"ARM\", \"ARMCD\")),\n        selected = \"ARM\"\n      ),\n      by_vars = choices_selected(\n        choices = variable_choices(adsl, c(\"REGION1\", \"COUNTRY\", \"SITEID\", \"INVID\", \"INVNAM\", \"INVID_INVNAM\")),\n        selected = c(\"REGION1\")\n      ),\n      summarize_vars = choices_selected(\n        choices = variable_choices(adsl, c(\"REGION1\", \"COUNTRY\", \"SITEID\", \"INVID\", \"INVNAM\", \"INVID_INVNAM\")),\n        selected = c(\"SITEID\")\n      ),\n      denominator = choices_selected(\n        choices = c(\"n\", \"N\", \"omit\"),\n        selected = \"N\",\n        fixed = TRUE\n      ),\n      useNA = \"ifany\",\n      row_groups = TRUE\n    )\n  )\n)\n\n[INFO] 2023-03-10 05:30:42.5890 pid:4591 token:[] teal.modules.clinical Initializing tm_t_summary_by\n\nCodeshinyApp(app$ui, app$server)\n\n\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n [1] teal.modules.clinical_0.8.14.9026 teal_0.12.0.9023                 \n [3] teal.transform_0.2.0.9011         teal.data_0.1.2.9013             \n [5] shiny_1.7.4                       tern_0.7.10.9056                 \n [7] rtables_0.6.0.1                   formatters_0.4.0                 \n [9] magrittr_2.0.3                    scda_0.1.5.9009                  \n[11] forcats_1.0.0                     dplyr_1.1.0                      \n\nloaded via a namespace (and not attached):\n [1] sass_0.4.5               tidyr_1.3.0              jsonlite_1.8.4          \n [4] splines_4.2.2            R.utils_2.12.2           bslib_0.4.2             \n [7] teal.slice_0.2.0.9026    Rdpack_2.4               assertthat_0.2.1        \n[10] teal.code_0.3.0.9001     tern.gee_0.1.0.9002      yaml_2.3.7              \n[13] pillar_1.8.1             backports_1.4.1          lattice_0.20-45         \n[16] glue_1.6.2               teal.widgets_0.2.0.9024  digest_0.6.31           \n[19] promises_1.2.0.1         rbibutils_2.2.13         checkmate_2.1.0         \n[22] colorspace_2.1-0         R.oo_1.25.0              htmltools_0.5.4         \n[25] httpuv_1.6.9             Matrix_1.5-3             pkgconfig_2.0.3         \n[28] broom_1.0.3              logger_0.2.2             purrr_1.0.1             \n[31] xtable_1.8-4             mvtnorm_1.1-3            webshot_0.5.4           \n[34] scales_1.2.1             processx_3.8.0           fontawesome_0.5.0       \n[37] later_1.3.0              emmeans_1.8.4-1          tibble_3.1.8            \n[40] styler_1.9.1             generics_0.1.3           ggplot2_3.4.1           \n[43] ellipsis_0.3.2           shinyvalidate_0.1.2      cachem_1.0.7            \n[46] withr_2.5.0              shinyjs_2.1.0            geepack_1.3.9           \n[49] cli_3.6.0                survival_3.5-3           mime_0.12               \n[52] memoise_2.0.1            ps_1.7.2                 estimability_1.4.1      \n[55] evaluate_0.20            R.methodsS3_1.8.2        fansi_1.0.4             \n[58] R.cache_0.16.0           nlme_3.1-162             MASS_7.3-58.3           \n[61] teal.reporter_0.1.1.9013 tools_4.2.2              lifecycle_1.0.3         \n[64] munsell_0.5.0            callr_3.7.3              compiler_4.2.2          \n[67] jquerylib_0.1.4          rlang_1.0.6              grid_4.2.2              \n[70] htmlwidgets_1.6.1        rmarkdown_2.20           shinyWidgets_0.7.6      \n[73] gtable_0.3.1             codetools_0.2-19         teal.logger_0.1.1.9004  \n[76] R6_2.5.1                 knitr_1.42               fastmap_1.1.1           \n[79] utf8_1.2.3               Rcpp_1.0.10              vctrs_0.5.2             \n[82] tidyselect_1.2.0         xfun_0.37                coda_0.19-4             \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R                       [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/tables/safety/enrollment01.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "tables/safety/cmt01b.html",
    "href": "tables/safety/cmt01b.html",
    "title": "CMT01B",
    "section": "",
    "text": "Data Setup\nStandard Table with  > 1 ATC Class Level\nTable Changing  Class Levels\nTable with Classes  Sorted by Frequency\nTable with Total Number of  Treatments per Medication  Class Suppressed\nTeal\nSession Info\n\n\n\n\nCodelibrary(dplyr)\nlibrary(tern)\nlibrary(scda)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadcm <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adcm\")\n\nadcm$CMSEQ <- as.factor(adcm$CMSEQ)\n\n# Ensure character variables are converted to factors and empty strings and NAs are explicit missing levels.\n# If you want your missing levels to show as \"No Coding Available\", please use\n# adsl <- df_explicit_na(adsl, na_level = \"No Coding Available\")\n# adcm <- df_explicit_na(adcm, na_level = \"No Coding Available\")\nadsl <- df_explicit_na(adsl)\nadcm <- df_explicit_na(adcm)\n\n# Keep only safety-evaluable patients and concomitant medications\nadsl <- adsl %>%\n  filter(SAFFL == \"Y\")\n\nadcm <- adcm %>%\n  filter(SAFFL == \"Y\" & ATIREL == \"CONCOMITANT\")\n\n\n\n\n\nCodesplit_fun <- drop_split_levels\n\nlyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ARM\") %>%\n  analyze_num_patients(\n    vars = \"USUBJID\",\n    count_by = \"CMSEQ\",\n    .stats = c(\"unique\", \"nonunique\"),\n    .labels = c(\n      unique = \"Total number of patients with at least one treatment\",\n      nonunique = \"Total number of treatments\"\n    )\n  ) %>%\n  split_rows_by(\n    \"ATC1\",\n    child_labels = \"visible\",\n    nested = FALSE,\n    split_fun = split_fun,\n    label_pos = \"topleft\",\n    split_label = obj_label(adcm$ATC1)\n  ) %>%\n  split_rows_by(\n    \"ATC2\",\n    child_labels = \"visible\",\n    nested = TRUE,\n    split_fun = split_fun,\n    label_pos = \"topleft\",\n    split_label = obj_label(adcm$ATC2)\n  ) %>%\n  split_rows_by(\n    \"ATC3\",\n    child_labels = \"visible\",\n    nested = TRUE,\n    split_fun = split_fun,\n    label_pos = \"topleft\",\n    split_label = obj_label(adcm$ATC3)\n  ) %>%\n  split_rows_by(\n    \"ATC4\",\n    child_labels = \"visible\",\n    nested = TRUE,\n    split_fun = split_fun,\n    label_pos = \"topleft\",\n    split_label = obj_label(adcm$ATC4)\n  ) %>%\n  append_topleft(\"        Other Treatment\") %>%\n  summarize_num_patients(\n    var = \"USUBJID\",\n    count_by = \"CMSEQ\",\n    .stats = c(\"unique\", \"nonunique\"),\n    .labels = c(\n      unique = \"Total number of patients with at least one treatment\",\n      nonunique = \"Total number of treatments\"\n    )\n  ) %>%\n  count_occurrences(vars = \"CMDECOD\", .indent_mods = -1L)\n\nresult <- build_table(\n  lyt = lyt,\n  df = adcm,\n  alt_counts_df = adsl\n) %>%\n  prune_table() %>%\n  # Sort lowest level terms by descending frequency.\n  sort_at_path(\n    path = c(\"ATC1\", \"*\", \"ATC2\", \"*\", \"ATC3\", \"*\", \"ATC4\", \"*\", \"CMDECOD\"),\n    scorefun = score_occurrences\n  )\n\nresult\n\nATC Level 1 Text                                                                                         \n  ATC Level 2 Text                                                                                       \n    ATC Level 3 Text                                                                                     \n      ATC Level 4 Text                                          A: Drug X    B: Placebo    C: Combination\n        Other Treatment                                          (N=134)       (N=134)        (N=132)    \n—————————————————————————————————————————————————————————————————————————————————————————————————————————\nTotal number of patients with at least one treatment           117 (87.3%)   116 (86.6%)    116 (87.9%)  \nTotal number of treatments                                         415           414            460      \nATCCLAS1 A                                                                                               \n  ATCCLAS2 A                                                                                             \n    ATCCLAS3 A                                                                                           \n      ATCCLAS4 A                                                                                         \n        Total number of patients with at least one treatment   75 (56.0%)    79 (59.0%)      81 (61.4%)  \n        Total number of treatments                                 134           137            143      \n        medname A_2/3                                          53 (39.6%)    50 (37.3%)      56 (42.4%)  \n        medname A_3/3                                          45 (33.6%)    54 (40.3%)      48 (36.4%)  \nATCCLAS1 A p2                                                                                            \n  ATCCLAS2 A p2                                                                                          \n    ATCCLAS3 A p2                                                                                        \n      ATCCLAS4 A p2                                                                                      \n        Total number of patients with at least one treatment   45 (33.6%)    54 (40.3%)      48 (36.4%)  \n        Total number of treatments                                 58            66              64      \n        medname A_3/3                                          45 (33.6%)    54 (40.3%)      48 (36.4%)  \nATCCLAS1 B                                                                                               \n  ATCCLAS2 B                                                                                             \n    ATCCLAS3 B                                                                                           \n      ATCCLAS4 B                                                                                         \n        Total number of patients with at least one treatment   83 (61.9%)    74 (55.2%)      88 (66.7%)  \n        Total number of treatments                                 141           137            162      \n        medname B_1/4                                          52 (38.8%)    57 (42.5%)      59 (44.7%)  \n        medname B_4/4                                          50 (37.3%)    45 (33.6%)      55 (41.7%)  \nATCCLAS1 B p2                                                                                            \n  ATCCLAS2 B p2                                                                                          \n    ATCCLAS3 B p2                                                                                        \n      ATCCLAS4 B p2                                                                                      \n        Total number of patients with at least one treatment   52 (38.8%)    57 (42.5%)      59 (44.7%)  \n        Total number of treatments                                 75            82              83      \n        medname B_1/4                                          52 (38.8%)    57 (42.5%)      59 (44.7%)  \nATCCLAS1 B p3                                                                                            \n  ATCCLAS2 B p3                                                                                          \n    ATCCLAS3 B p3                                                                                        \n      ATCCLAS4 B p3                                                                                      \n        Total number of patients with at least one treatment   52 (38.8%)    57 (42.5%)      59 (44.7%)  \n        Total number of treatments                                 75            82              83      \n        medname B_1/4                                          52 (38.8%)    57 (42.5%)      59 (44.7%)  \nATCCLAS1 C                                                                                               \n  ATCCLAS2 C                                                                                             \n    ATCCLAS3 C                                                                                           \n      ATCCLAS4 C                                                                                         \n        Total number of patients with at least one treatment   82 (61.2%)    84 (62.7%)      89 (67.4%)  \n        Total number of treatments                                 140           140            155      \n        medname C_2/2                                          52 (38.8%)    58 (43.3%)      60 (45.5%)  \n        medname C_1/2                                          51 (38.1%)    50 (37.3%)      56 (42.4%)  \nATCCLAS1 C p2                                                                                            \n  ATCCLAS2 C p2                                                                                          \n    ATCCLAS3 C p2                                                                                        \n      ATCCLAS4 C p2                                                                                      \n        Total number of patients with at least one treatment   82 (61.2%)    84 (62.7%)      89 (67.4%)  \n        Total number of treatments                                 140           140            155      \n        medname C_2/2                                          52 (38.8%)    58 (43.3%)      60 (45.5%)  \n        medname C_1/2                                          51 (38.1%)    50 (37.3%)      56 (42.4%)  \nATCCLAS1 C p3                                                                                            \n  ATCCLAS2 C p3                                                                                          \n    ATCCLAS3 C p3                                                                                        \n      ATCCLAS4 C p3                                                                                      \n        Total number of patients with at least one treatment   52 (38.8%)    58 (43.3%)      60 (45.5%)  \n        Total number of treatments                                 69            73              80      \n        medname C_2/2                                          52 (38.8%)    58 (43.3%)      60 (45.5%)  \n\n\n\n\n\nCodesplit_fun <- drop_split_levels\n\nlyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ARM\") %>%\n  analyze_num_patients(\n    var = \"USUBJID\",\n    count_by = \"CMSEQ\",\n    .stats = c(\"unique\", \"nonunique\"),\n    .labels = c(\n      unique = \"Total number of patients with at least one treatment\",\n      nonunique = \"Total number of treatments\"\n    )\n  ) %>%\n  split_rows_by(\n    \"ATC3\",\n    child_labels = \"visible\",\n    nested = FALSE,\n    split_fun = split_fun,\n    label_pos = \"topleft\",\n    split_label = obj_label(adcm$ATC3)\n  ) %>%\n  split_rows_by(\n    \"ATC2\",\n    child_labels = \"visible\",\n    nested = TRUE,\n    split_fun = split_fun,\n    label_pos = \"topleft\",\n    split_label = obj_label(adcm$ATC2)\n  ) %>%\n  summarize_num_patients(\n    var = \"USUBJID\",\n    count_by = \"CMSEQ\",\n    .stats = c(\"unique\", \"nonunique\"),\n    .labels = c(\n      unique = \"Total number of patients with at least one treatment\",\n      nonunique = \"Total number of treatments\"\n    )\n  ) %>%\n  count_occurrences(vars = \"CMDECOD\", .indent_mods = -1L) %>%\n  append_topleft(\"    Other Treatment\")\n\nresult <- build_table(\n  lyt = lyt,\n  df = adcm,\n  alt_counts_df = adsl\n) %>%\n  prune_table() %>%\n  # Sort lowest level terms by descending frequency.\n  sort_at_path(\n    path = c(\"ATC3\", \"*\", \"ATC2\", \"*\", \"CMDECOD\"),\n    scorefun = score_occurrences\n  )\n\nresult\n\nATC Level 3 Text                                                                                     \n  ATC Level 2 Text                                          A: Drug X    B: Placebo    C: Combination\n    Other Treatment                                          (N=134)       (N=134)        (N=132)    \n—————————————————————————————————————————————————————————————————————————————————————————————————————\nTotal number of patients with at least one treatment       117 (87.3%)   116 (86.6%)    116 (87.9%)  \nTotal number of treatments                                     415           414            460      \nATCCLAS3 A                                                                                           \n  ATCCLAS2 A                                                                                         \n    Total number of patients with at least one treatment   75 (56.0%)    79 (59.0%)      81 (61.4%)  \n    Total number of treatments                                 134           137            143      \n    medname A_2/3                                          53 (39.6%)    50 (37.3%)      56 (42.4%)  \n    medname A_3/3                                          45 (33.6%)    54 (40.3%)      48 (36.4%)  \nATCCLAS3 A p2                                                                                        \n  ATCCLAS2 A p2                                                                                      \n    Total number of patients with at least one treatment   45 (33.6%)    54 (40.3%)      48 (36.4%)  \n    Total number of treatments                                 58            66              64      \n    medname A_3/3                                          45 (33.6%)    54 (40.3%)      48 (36.4%)  \nATCCLAS3 B                                                                                           \n  ATCCLAS2 B                                                                                         \n    Total number of patients with at least one treatment   83 (61.9%)    74 (55.2%)      88 (66.7%)  \n    Total number of treatments                                 141           137            162      \n    medname B_1/4                                          52 (38.8%)    57 (42.5%)      59 (44.7%)  \n    medname B_4/4                                          50 (37.3%)    45 (33.6%)      55 (41.7%)  \nATCCLAS3 B p2                                                                                        \n  ATCCLAS2 B p2                                                                                      \n    Total number of patients with at least one treatment   52 (38.8%)    57 (42.5%)      59 (44.7%)  \n    Total number of treatments                                 75            82              83      \n    medname B_1/4                                          52 (38.8%)    57 (42.5%)      59 (44.7%)  \nATCCLAS3 B p3                                                                                        \n  ATCCLAS2 B p3                                                                                      \n    Total number of patients with at least one treatment   52 (38.8%)    57 (42.5%)      59 (44.7%)  \n    Total number of treatments                                 75            82              83      \n    medname B_1/4                                          52 (38.8%)    57 (42.5%)      59 (44.7%)  \nATCCLAS3 C                                                                                           \n  ATCCLAS2 C                                                                                         \n    Total number of patients with at least one treatment   82 (61.2%)    84 (62.7%)      89 (67.4%)  \n    Total number of treatments                                 140           140            155      \n    medname C_2/2                                          52 (38.8%)    58 (43.3%)      60 (45.5%)  \n    medname C_1/2                                          51 (38.1%)    50 (37.3%)      56 (42.4%)  \nATCCLAS3 C p2                                                                                        \n  ATCCLAS2 C p2                                                                                      \n    Total number of patients with at least one treatment   82 (61.2%)    84 (62.7%)      89 (67.4%)  \n    Total number of treatments                                 140           140            155      \n    medname C_2/2                                          52 (38.8%)    58 (43.3%)      60 (45.5%)  \n    medname C_1/2                                          51 (38.1%)    50 (37.3%)      56 (42.4%)  \nATCCLAS3 C p3                                                                                        \n  ATCCLAS2 C p3                                                                                      \n    Total number of patients with at least one treatment   52 (38.8%)    58 (43.3%)      60 (45.5%)  \n    Total number of treatments                                 69            73              80      \n    medname C_2/2                                          52 (38.8%)    58 (43.3%)      60 (45.5%)  \n\n\n\n\n\nCode# In progress\n\n\n\n\n\nCodesplit_fun <- drop_split_levels\n\nlyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ARM\") %>%\n  split_rows_by(\n    \"ATC1\",\n    child_labels = \"visible\",\n    nested = FALSE,\n    split_fun = split_fun,\n    label_pos = \"topleft\",\n    split_label = obj_label(adcm$ATC1)\n  ) %>%\n  split_rows_by(\n    \"ATC2\",\n    child_labels = \"visible\",\n    nested = TRUE,\n    split_fun = split_fun,\n    label_pos = \"topleft\",\n    split_label = obj_label(adcm$ATC2)\n  ) %>%\n  split_rows_by(\n    \"ATC3\",\n    child_labels = \"visible\",\n    nested = TRUE,\n    split_fun = split_fun,\n    label_pos = \"topleft\",\n    split_label = obj_label(adcm$ATC3)\n  ) %>%\n  summarize_num_patients(\n    var = \"USUBJID\",\n    count_by = \"CMSEQ\",\n    .stats = c(\"unique\", \"nonunique\"),\n    .labels = c(\n      unique = \"Total number of patients with at least one treatment\",\n      nonunique = \"Total number of treatments\"\n    )\n  ) %>%\n  split_rows_by(\n    \"ATC4\",\n    child_labels = \"visible\",\n    nested = TRUE,\n    indent_mod = -1L,\n    split_fun = split_fun,\n    label_pos = \"topleft\",\n    split_label = obj_label(adcm$ATC4)\n  ) %>%\n  summarize_num_patients(\n    var = \"USUBJID\",\n    .stats = c(\"unique\"),\n    .labels = c(\n      unique = \"Total number of patients with at least one treatment\"\n    )\n  ) %>%\n  count_occurrences(vars = \"CMDECOD\", .indent_mods = -1L) %>%\n  append_topleft(\"        Other Treatment\")\n\nresult <- build_table(\n  lyt = lyt,\n  df = adcm,\n  alt_counts_df = adsl\n) %>%\n  prune_table() %>%\n  # Sort lowest level terms by descending frequency.\n  sort_at_path(\n    path = c(\"ATC1\", \"*\", \"ATC2\", \"*\", \"ATC3\", \"*\", \"ATC4\", \"*\", \"CMDECOD\"),\n    scorefun = score_occurrences\n  )\n\nresult\n\nATC Level 1 Text                                                                                       \n  ATC Level 2 Text                                                                                     \n    ATC Level 3 Text                                                                                   \n      ATC Level 4 Text                                         A: Drug X    B: Placebo   C: Combination\n        Other Treatment                                         (N=134)      (N=134)        (N=132)    \n———————————————————————————————————————————————————————————————————————————————————————————————————————\nATCCLAS1 A                                                                                             \n  ATCCLAS2 A                                                                                           \n    ATCCLAS3 A                                                                                         \n      Total number of patients with at least one treatment     75 (56.0%)   79 (59.0%)     81 (61.4%)  \n      Total number of treatments                                  134          137            143      \n      ATCCLAS4 A                                                                                       \n        Total number of patients with at least one treatment   75 (56.0%)   79 (59.0%)     81 (61.4%)  \n        medname A_2/3                                          53 (39.6%)   50 (37.3%)     56 (42.4%)  \n        medname A_3/3                                          45 (33.6%)   54 (40.3%)     48 (36.4%)  \nATCCLAS1 A p2                                                                                          \n  ATCCLAS2 A p2                                                                                        \n    ATCCLAS3 A p2                                                                                      \n      Total number of patients with at least one treatment     45 (33.6%)   54 (40.3%)     48 (36.4%)  \n      Total number of treatments                                   58           66             64      \n      ATCCLAS4 A p2                                                                                    \n        Total number of patients with at least one treatment   45 (33.6%)   54 (40.3%)     48 (36.4%)  \n        medname A_3/3                                          45 (33.6%)   54 (40.3%)     48 (36.4%)  \nATCCLAS1 B                                                                                             \n  ATCCLAS2 B                                                                                           \n    ATCCLAS3 B                                                                                         \n      Total number of patients with at least one treatment     83 (61.9%)   74 (55.2%)     88 (66.7%)  \n      Total number of treatments                                  141          137            162      \n      ATCCLAS4 B                                                                                       \n        Total number of patients with at least one treatment   83 (61.9%)   74 (55.2%)     88 (66.7%)  \n        medname B_1/4                                          52 (38.8%)   57 (42.5%)     59 (44.7%)  \n        medname B_4/4                                          50 (37.3%)   45 (33.6%)     55 (41.7%)  \nATCCLAS1 B p2                                                                                          \n  ATCCLAS2 B p2                                                                                        \n    ATCCLAS3 B p2                                                                                      \n      Total number of patients with at least one treatment     52 (38.8%)   57 (42.5%)     59 (44.7%)  \n      Total number of treatments                                   75           82             83      \n      ATCCLAS4 B p2                                                                                    \n        Total number of patients with at least one treatment   52 (38.8%)   57 (42.5%)     59 (44.7%)  \n        medname B_1/4                                          52 (38.8%)   57 (42.5%)     59 (44.7%)  \nATCCLAS1 B p3                                                                                          \n  ATCCLAS2 B p3                                                                                        \n    ATCCLAS3 B p3                                                                                      \n      Total number of patients with at least one treatment     52 (38.8%)   57 (42.5%)     59 (44.7%)  \n      Total number of treatments                                   75           82             83      \n      ATCCLAS4 B p3                                                                                    \n        Total number of patients with at least one treatment   52 (38.8%)   57 (42.5%)     59 (44.7%)  \n        medname B_1/4                                          52 (38.8%)   57 (42.5%)     59 (44.7%)  \nATCCLAS1 C                                                                                             \n  ATCCLAS2 C                                                                                           \n    ATCCLAS3 C                                                                                         \n      Total number of patients with at least one treatment     82 (61.2%)   84 (62.7%)     89 (67.4%)  \n      Total number of treatments                                  140          140            155      \n      ATCCLAS4 C                                                                                       \n        Total number of patients with at least one treatment   82 (61.2%)   84 (62.7%)     89 (67.4%)  \n        medname C_2/2                                          52 (38.8%)   58 (43.3%)     60 (45.5%)  \n        medname C_1/2                                          51 (38.1%)   50 (37.3%)     56 (42.4%)  \nATCCLAS1 C p2                                                                                          \n  ATCCLAS2 C p2                                                                                        \n    ATCCLAS3 C p2                                                                                      \n      Total number of patients with at least one treatment     82 (61.2%)   84 (62.7%)     89 (67.4%)  \n      Total number of treatments                                  140          140            155      \n      ATCCLAS4 C p2                                                                                    \n        Total number of patients with at least one treatment   82 (61.2%)   84 (62.7%)     89 (67.4%)  \n        medname C_2/2                                          52 (38.8%)   58 (43.3%)     60 (45.5%)  \n        medname C_1/2                                          51 (38.1%)   50 (37.3%)     56 (42.4%)  \nATCCLAS1 C p3                                                                                          \n  ATCCLAS2 C p3                                                                                        \n    ATCCLAS3 C p3                                                                                      \n      Total number of patients with at least one treatment     52 (38.8%)   58 (43.3%)     60 (45.5%)  \n      Total number of treatments                                   69           73             80      \n      ATCCLAS4 C p3                                                                                    \n        Total number of patients with at least one treatment   52 (38.8%)   58 (43.3%)     60 (45.5%)  \n        medname C_2/2                                          52 (38.8%)   58 (43.3%)     60 (45.5%)  \n\n\n\n\n\nCodelibrary(dplyr)\nlibrary(tern)\nlibrary(scda)\nlibrary(teal.modules.clinical)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadcm <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adcm\")\n\nadcm$CMSEQ <- as.integer(adcm$CMSEQ)\n\n# Ensure character variables are converted to factors and empty strings and NAs are explicit missing levels.\n# If you want your missing levels to show as \"No Coding Available\", please use\n# adsl <- df_explicit_na(adsl, na_level = \"No Coding Available\")\n# adcm <- df_explicit_na(adcm, na_level = \"No Coding Available\")\nadsl <- df_explicit_na(adsl)\nadcm <- df_explicit_na(adcm)\n\nadcm_keys <- c(\"STUDYID\", \"USUBJID\", \"ASTDTM\", \"CMSEQ\", \"ATC1\", \"ATC2\", \"ATC3\", \"ATC4\")\n\napp <- teal::init(\n  data = cdisc_data(\n    cdisc_dataset(\"ADSL\", adsl, code = '\n                  ADSL <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\n                  ADSL <- df_explicit_na(ADSL)\n                  '),\n    cdisc_dataset(\"ADCM\", adcm,\n      code = '\n      ADCM <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adcm\")\n      ADCM$CMSEQ <- as.factor(ADCM$CMSEQ)\n      ADCM <- df_explicit_na(ADCM)\n      ',\n      keys = adcm_keys\n    )\n  ),\n  modules = modules(\n    tm_t_mult_events(\n      label = \"Concomitant Medications by Medication Class and Preferred Name\",\n      dataname = \"ADCM\",\n      arm_var = choices_selected(c(\"ARM\", \"ARMCD\"), \"ARM\"),\n      seq_var = choices_selected(\"CMSEQ\", selected = \"CMSEQ\", fixed = TRUE),\n      hlt = choices_selected(\n        choices = variable_choices(adcm, c(\"ATC1\", \"ATC2\", \"ATC3\", \"ATC4\")),\n        selected = c(\"ATC1\", \"ATC2\", \"ATC3\", \"ATC4\")\n      ),\n      llt = choices_selected(\n        choices = variable_choices(adcm, c(\"CMDECOD\")),\n        selected = c(\"CMDECOD\")\n      ),\n      add_total = FALSE,\n      event_type = \"treatment\"\n    )\n  ),\n  filter = list(\n    ADSL = list(SAFFL = \"Y\"),\n    ADCM = list(ATIREL = \"CONCOMITANT\")\n  )\n)\n\n[INFO] 2023-03-10 05:31:05.5171 pid:4667 token:[] teal.modules.clinical Initializing tm_t_mult_events\n\nCodeshinyApp(app$ui, app$server)\n\n\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n [1] teal.modules.clinical_0.8.14.9026 teal_0.12.0.9023                 \n [3] teal.transform_0.2.0.9011         teal.data_0.1.2.9013             \n [5] shiny_1.7.4                       scda_0.1.5.9009                  \n [7] tern_0.7.10.9056                  rtables_0.6.0.1                  \n [9] formatters_0.4.0                  magrittr_2.0.3                   \n[11] dplyr_1.1.0                      \n\nloaded via a namespace (and not attached):\n [1] sass_0.4.5               tidyr_1.3.0              jsonlite_1.8.4          \n [4] splines_4.2.2            R.utils_2.12.2           bslib_0.4.2             \n [7] teal.slice_0.2.0.9026    Rdpack_2.4               assertthat_0.2.1        \n[10] teal.code_0.3.0.9001     tern.gee_0.1.0.9002      yaml_2.3.7              \n[13] pillar_1.8.1             backports_1.4.1          lattice_0.20-45         \n[16] glue_1.6.2               teal.widgets_0.2.0.9024  digest_0.6.31           \n[19] promises_1.2.0.1         rbibutils_2.2.13         checkmate_2.1.0         \n[22] colorspace_2.1-0         R.oo_1.25.0              htmltools_0.5.4         \n[25] httpuv_1.6.9             Matrix_1.5-3             pkgconfig_2.0.3         \n[28] broom_1.0.3              logger_0.2.2             purrr_1.0.1             \n[31] xtable_1.8-4             mvtnorm_1.1-3            webshot_0.5.4           \n[34] scales_1.2.1             processx_3.8.0           fontawesome_0.5.0       \n[37] later_1.3.0              emmeans_1.8.4-1          tibble_3.1.8            \n[40] styler_1.9.1             generics_0.1.3           ggplot2_3.4.1           \n[43] ellipsis_0.3.2           shinyvalidate_0.1.2      cachem_1.0.7            \n[46] withr_2.5.0              shinyjs_2.1.0            geepack_1.3.9           \n[49] cli_3.6.0                survival_3.5-3           mime_0.12               \n[52] memoise_2.0.1            ps_1.7.2                 estimability_1.4.1      \n[55] evaluate_0.20            R.methodsS3_1.8.2        fansi_1.0.4             \n[58] R.cache_0.16.0           nlme_3.1-162             MASS_7.3-58.3           \n[61] forcats_1.0.0            teal.reporter_0.1.1.9013 tools_4.2.2             \n[64] lifecycle_1.0.3          munsell_0.5.0            callr_3.7.3             \n[67] compiler_4.2.2           jquerylib_0.1.4          rlang_1.0.6             \n[70] grid_4.2.2               htmlwidgets_1.6.1        rmarkdown_2.20          \n[73] shinyWidgets_0.7.6       gtable_0.3.1             codetools_0.2-19        \n[76] teal.logger_0.1.1.9004   R6_2.5.1                 knitr_1.42              \n[79] fastmap_1.1.1            utf8_1.2.3               Rcpp_1.0.10             \n[82] vctrs_0.5.2              tidyselect_1.2.0         xfun_0.37               \n[85] coda_0.19-4             \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R                       [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/tables/safety/cmt01b.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "tables/safety/dmt01.html",
    "href": "tables/safety/dmt01.html",
    "title": "DMT01",
    "section": "",
    "text": "Data Setup\nTable with an Additional  Study-Specific Continuous Variable\nTable with an Additional  Study-Specific Categorical Variable\nTable with Subgrouping  for Some Analyses\nTable with Additional Vital  Signs Baseline Values\nTable with Additional  Values from ADSUB\nTeal\nSession Info\n\n\n\n\nCodelibrary(tern)\nlibrary(scda)\nlibrary(dplyr)\nlibrary(tidyr)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadvs <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"advs\")\nadsub <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsub\")\n\n# Ensure character variables are converted to factors and empty strings and NAs are explicit missing levels.\nadsl <- df_explicit_na(adsl)\nadvs <- df_explicit_na(advs)\nadsub <- df_explicit_na(adsub)\n\n# Change description in variable SEX.\nadsl <- adsl %>%\n  mutate(\n    SEX = factor(case_when(\n      SEX == \"M\" ~ \"Male\",\n      SEX == \"F\" ~ \"Female\",\n      SEX == \"U\" ~ \"Unknown\",\n      SEX == \"UNDIFFERENTIATED\" ~ \"Undifferentiated\"\n    )),\n    AGEGRP = factor(\n      case_when(\n        between(AGE, 18, 40) ~ \"18-40\",\n        between(AGE, 41, 64) ~ \"41-64\",\n        AGE > 64 ~ \">=65\"\n      ),\n      levels = c(\"18-40\", \"41-64\", \">=65\")\n    ),\n    BMRKR1_CAT = factor(\n      case_when(\n        BMRKR1 < 3.5 ~ \"LOW\",\n        BMRKR1 >= 3.5 & BMRKR1 < 10 ~ \"MEDIUM\",\n        BMRKR1 >= 10 ~ \"HIGH\"\n      ),\n      levels = c(\"LOW\", \"MEDIUM\", \"HIGH\")\n    )\n  ) %>%\n  var_relabel(\n    BMRKR1_CAT = \"Biomarker 1 Categories\"\n  )\n# The developer needs to do pre-processing to add necessary variables based on ADVS to analysis dataset.\n# Obtain SBP, DBP and weight.\nget_param_advs <- function(pname, plabel) {\n  ds <- advs %>%\n    filter(PARAM == plabel & AVISIT == \"BASELINE\") %>%\n    select(USUBJID, AVAL)\n\n  colnames(ds) <- c(\"USUBJID\", pname)\n\n  ds\n}\n# The developer needs to do pre-processing to add necessary variables based on ADSUB to analysis dataset.\n# Obtain baseline BMI (BBMISI).\nget_param_adsub <- function(pname, plabel) {\n  ds <- adsub %>%\n    filter(PARAM == plabel) %>%\n    select(USUBJID, AVAL)\n\n  colnames(ds) <- c(\"USUBJID\", pname)\n\n  ds\n}\nadsl <- adsl %>%\n  left_join(get_param_advs(\"SBP\", \"Systolic Blood Pressure\")) %>%\n  left_join(get_param_advs(\"DBP\", \"Diastolic Blood Pressure\")) %>%\n  left_join(get_param_advs(\"WGT\", \"Weight\")) %>%\n  left_join(get_param_adsub(\"BBMISI\", \"Baseline BMI\"))\n\n\n\n\n\nCodevars <- c(\"AGE\", \"SEX\", \"RACE\", \"BMRKR1\")\nvar_labels <- c(\n  \"Age (yr)\",\n  \"Sex\",\n  \"Race\",\n  \"Continous Level Biomarker 1\"\n)\n\nresult <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(var = \"ARM\") %>%\n  add_overall_col(\"All Patients\") %>%\n  summarize_vars(\n    vars = vars,\n    var_labels = var_labels\n  ) %>%\n  build_table(adsl)\nresult\n\n                                               A: Drug X    B: Placebo    C: Combination   All Patients\n                                                (N=134)       (N=134)        (N=132)         (N=400)   \n———————————————————————————————————————————————————————————————————————————————————————————————————————\nAge (yr)                                                                                               \n  n                                               134           134            132             400     \n  Mean (SD)                                   33.8 (6.6)    35.4 (7.9)      35.4 (7.7)      34.9 (7.4) \n  Median                                         33.0          35.0            35.0            34.0    \n  Min - Max                                   21.0 - 50.0   21.0 - 62.0    20.0 - 69.0     20.0 - 69.0 \nSex                                                                                                    \n  n                                               134           134            132             400     \n  Female                                       79 (59%)     82 (61.2%)       70 (53%)      231 (57.8%) \n  Male                                         55 (41%)     52 (38.8%)       62 (47%)      169 (42.2%) \nRace                                                                                                   \n  n                                               134           134            132             400     \n  ASIAN                                       68 (50.7%)     67 (50%)       73 (55.3%)      208 (52%)  \n  BLACK OR AFRICAN AMERICAN                   31 (23.1%)    28 (20.9%)      32 (24.2%)      91 (22.8%) \n  WHITE                                       27 (20.1%)    26 (19.4%)      21 (15.9%)      74 (18.5%) \n  AMERICAN INDIAN OR ALASKA NATIVE              8 (6%)       11 (8.2%)       6 (4.5%)       25 (6.2%)  \n  MULTIPLE                                         0         1 (0.7%)           0            1 (0.2%)  \n  NATIVE HAWAIIAN OR OTHER PACIFIC ISLANDER        0         1 (0.7%)           0            1 (0.2%)  \n  OTHER                                            0             0              0               0      \n  UNKNOWN                                          0             0              0               0      \nContinous Level Biomarker 1                                                                            \n  n                                               134           134            132             400     \n  Mean (SD)                                    6.0 (3.6)     5.7 (3.3)      5.6 (3.5)       5.8 (3.4)  \n  Median                                          5.4           4.8            4.6             4.8     \n  Min - Max                                   0.4 - 17.7    0.6 - 14.2      0.2 - 21.4      0.2 - 21.4 \n\n\n\n\n\nCodevars <- c(\"AGE\", \"SEX\", \"RACE\", \"BMRKR1_CAT\")\nvar_labels <- c(\n  \"Age (yr)\",\n  \"Sex\",\n  \"Race\",\n  \"Biomarker 1 Categories\"\n)\n\nresult <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(var = \"ARM\") %>%\n  summarize_vars(\n    vars = vars,\n    var_labels = var_labels\n  ) %>%\n  build_table(adsl)\nresult\n\n                                               A: Drug X    B: Placebo    C: Combination\n                                                (N=134)       (N=134)        (N=132)    \n————————————————————————————————————————————————————————————————————————————————————————\nAge (yr)                                                                                \n  n                                               134           134            132      \n  Mean (SD)                                   33.8 (6.6)    35.4 (7.9)      35.4 (7.7)  \n  Median                                         33.0          35.0            35.0     \n  Min - Max                                   21.0 - 50.0   21.0 - 62.0    20.0 - 69.0  \nSex                                                                                     \n  n                                               134           134            132      \n  Female                                       79 (59%)     82 (61.2%)       70 (53%)   \n  Male                                         55 (41%)     52 (38.8%)       62 (47%)   \nRace                                                                                    \n  n                                               134           134            132      \n  ASIAN                                       68 (50.7%)     67 (50%)       73 (55.3%)  \n  BLACK OR AFRICAN AMERICAN                   31 (23.1%)    28 (20.9%)      32 (24.2%)  \n  WHITE                                       27 (20.1%)    26 (19.4%)      21 (15.9%)  \n  AMERICAN INDIAN OR ALASKA NATIVE              8 (6%)       11 (8.2%)       6 (4.5%)   \n  MULTIPLE                                         0         1 (0.7%)           0       \n  NATIVE HAWAIIAN OR OTHER PACIFIC ISLANDER        0         1 (0.7%)           0       \n  OTHER                                            0             0              0       \n  UNKNOWN                                          0             0              0       \nBiomarker 1 Categories                                                                  \n  n                                               134           134            132      \n  LOW                                         33 (24.6%)    41 (30.6%)      38 (28.8%)  \n  MEDIUM                                      84 (62.7%)    76 (56.7%)      80 (60.6%)  \n  HIGH                                        17 (12.7%)    17 (12.7%)      14 (10.6%)  \n\n\n\n\n\nCodesplit_fun <- drop_split_levels\n\nresult <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(var = \"ARM\") %>%\n  summarize_vars(\n    vars = c(\"AGE\", \"SEX\", \"RACE\"),\n    var_labels = c(\"Age\", \"Sex\", \"Race\")\n  ) %>%\n  split_rows_by(\"STRATA1\",\n    split_fun = split_fun\n  ) %>%\n  summarize_vars(\"BMRKR1\") %>%\n  build_table(adsl)\nresult\n\n                                               A: Drug X    B: Placebo    C: Combination\n                                                (N=134)       (N=134)        (N=132)    \n————————————————————————————————————————————————————————————————————————————————————————\nAge                                                                                     \n  n                                               134           134            132      \n  Mean (SD)                                   33.8 (6.6)    35.4 (7.9)      35.4 (7.7)  \n  Median                                         33.0          35.0            35.0     \n  Min - Max                                   21.0 - 50.0   21.0 - 62.0    20.0 - 69.0  \nSex                                                                                     \n  n                                               134           134            132      \n  Female                                       79 (59%)     82 (61.2%)       70 (53%)   \n  Male                                         55 (41%)     52 (38.8%)       62 (47%)   \nRace                                                                                    \n  n                                               134           134            132      \n  ASIAN                                       68 (50.7%)     67 (50%)       73 (55.3%)  \n  BLACK OR AFRICAN AMERICAN                   31 (23.1%)    28 (20.9%)      32 (24.2%)  \n  WHITE                                       27 (20.1%)    26 (19.4%)      21 (15.9%)  \n  AMERICAN INDIAN OR ALASKA NATIVE              8 (6%)       11 (8.2%)       6 (4.5%)   \n  MULTIPLE                                         0         1 (0.7%)           0       \n  NATIVE HAWAIIAN OR OTHER PACIFIC ISLANDER        0         1 (0.7%)           0       \n  OTHER                                            0             0              0       \n  UNKNOWN                                          0             0              0       \nA                                                                                       \n  n                                               38            44              40      \n  Mean (SD)                                    5.8 (3.8)     5.4 (3.2)      5.1 (3.2)   \n  Median                                          5.1           4.5            3.8      \n  Min - Max                                   0.4 - 17.7    1.4 - 14.2      1.5 - 14.0  \nB                                                                                       \n  n                                               47            45              43      \n  Mean (SD)                                    6.1 (3.6)     5.8 (3.6)      5.7 (3.4)   \n  Median                                          5.2           4.8            5.1      \n  Min - Max                                   1.6 - 17.2    0.6 - 13.3      0.2 - 16.5  \nC                                                                                       \n  n                                               49            45              49      \n  Mean (SD)                                    6.0 (3.4)     5.9 (3.2)      6.0 (3.8)   \n  Median                                          5.8           5.6            4.5      \n  Min - Max                                   0.5 - 15.1    1.5 - 13.9      1.2 - 21.4  \n\n\n\n\n\nCoderesult <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(var = \"ARM\") %>%\n  summarize_vars(\n    vars = c(\"AGE\", \"SEX\", \"RACE\", \"DBP\", \"SBP\"),\n    var_labels = c(\n      \"Age (yr)\",\n      \"Sex\",\n      \"Race\",\n      \"Diastolic Blood Pressure\",\n      \"Systolic Blood Pressure\"\n    )\n  ) %>%\n  build_table(adsl)\nresult\n\n                                               A: Drug X    B: Placebo    C: Combination\n                                                (N=134)       (N=134)        (N=132)    \n————————————————————————————————————————————————————————————————————————————————————————\nAge (yr)                                                                                \n  n                                               134           134            132      \n  Mean (SD)                                   33.8 (6.6)    35.4 (7.9)      35.4 (7.7)  \n  Median                                         33.0          35.0            35.0     \n  Min - Max                                   21.0 - 50.0   21.0 - 62.0    20.0 - 69.0  \nSex                                                                                     \n  n                                               134           134            132      \n  Female                                       79 (59%)     82 (61.2%)       70 (53%)   \n  Male                                         55 (41%)     52 (38.8%)       62 (47%)   \nRace                                                                                    \n  n                                               134           134            132      \n  ASIAN                                       68 (50.7%)     67 (50%)       73 (55.3%)  \n  BLACK OR AFRICAN AMERICAN                   31 (23.1%)    28 (20.9%)      32 (24.2%)  \n  WHITE                                       27 (20.1%)    26 (19.4%)      21 (15.9%)  \n  AMERICAN INDIAN OR ALASKA NATIVE              8 (6%)       11 (8.2%)       6 (4.5%)   \n  MULTIPLE                                         0         1 (0.7%)           0       \n  NATIVE HAWAIIAN OR OTHER PACIFIC ISLANDER        0         1 (0.7%)           0       \n  OTHER                                            0             0              0       \n  UNKNOWN                                          0             0              0       \nDiastolic Blood Pressure                                                                \n  n                                               134           134            132      \n  Mean (SD)                                   48.6 (8.0)    50.4 (7.9)      51.1 (7.8)  \n  Median                                         48.4          50.2            50.8     \n  Min - Max                                   27.7 - 64.6   21.7 - 67.5    29.7 - 71.4  \nSystolic Blood Pressure                                                                 \n  n                                               134           134            132      \n  Mean (SD)                                   49.4 (8.5)    50.2 (8.5)      48.5 (7.2)  \n  Median                                         48.3          50.0            49.2     \n  Min - Max                                   24.3 - 71.1   24.4 - 71.1    26.2 - 63.4  \n\n\n\n\n\nCoderesult <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(var = \"ARM\") %>%\n  summarize_vars(\n    vars = c(\"AGE\", \"SEX\", \"RACE\", \"BBMISI\"),\n    var_labels = c(\n      \"Age (yr)\",\n      \"Sex\",\n      \"Race\",\n      \"Baseline BMI\"\n    )\n  ) %>%\n  build_table(adsl)\nresult\n\n                                               A: Drug X     B: Placebo     C: Combination\n                                                (N=134)        (N=134)         (N=132)    \n——————————————————————————————————————————————————————————————————————————————————————————\nAge (yr)                                                                                  \n  n                                               134            134             132      \n  Mean (SD)                                   33.8 (6.6)     35.4 (7.9)       35.4 (7.7)  \n  Median                                         33.0           35.0             35.0     \n  Min - Max                                   21.0 - 50.0    21.0 - 62.0     20.0 - 69.0  \nSex                                                                                       \n  n                                               134            134             132      \n  Female                                       79 (59%)      82 (61.2%)        70 (53%)   \n  Male                                         55 (41%)      52 (38.8%)        62 (47%)   \nRace                                                                                      \n  n                                               134            134             132      \n  ASIAN                                       68 (50.7%)      67 (50%)        73 (55.3%)  \n  BLACK OR AFRICAN AMERICAN                   31 (23.1%)     28 (20.9%)       32 (24.2%)  \n  WHITE                                       27 (20.1%)     26 (19.4%)       21 (15.9%)  \n  AMERICAN INDIAN OR ALASKA NATIVE              8 (6%)        11 (8.2%)        6 (4.5%)   \n  MULTIPLE                                         0          1 (0.7%)            0       \n  NATIVE HAWAIIAN OR OTHER PACIFIC ISLANDER        0          1 (0.7%)            0       \n  OTHER                                            0              0               0       \n  UNKNOWN                                          0              0               0       \nBaseline BMI                                                                              \n  n                                               134            134             132      \n  Mean (SD)                                   30.0 (18.3)    32.4 (23.2)     30.1 (18.4)  \n  Median                                         27.1           31.1             30.0     \n  Min - Max                                   -6.9 - 75.9   -26.6 - 117.9    -44.2 - 87.5 \n\n\n\n\n\nCodelibrary(teal.modules.clinical)\nlibrary(scda)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\n\n# Include `EOSDY` and `DCSREAS` variables below because they contain missing data.\nstopifnot(\n  any(is.na(adsl$EOSDY)),\n  any(is.na(adsl$DCSREAS))\n)\n\napp <- init(\n  data = cdisc_data(\n    cdisc_dataset(\"ADSL\", adsl),\n    code = 'ADSL <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")',\n    check = TRUE\n  ),\n  modules = modules(\n    tm_t_summary(\n      label = \"Demographic Table\",\n      dataname = \"ADSL\",\n      arm_var = choices_selected(c(\"ARM\", \"ARMCD\"), \"ARM\"),\n      summarize_vars = choices_selected(\n        c(\"SEX\", \"RACE\", \"BMRKR2\", \"EOSDY\", \"DCSREAS\"),\n        c(\"SEX\", \"RACE\")\n      ),\n      useNA = \"ifany\"\n    )\n  )\n)\n\n[INFO] 2023-03-10 05:31:29.5914 pid:4743 token:[] teal.modules.clinical Initializing tm_t_summary\n\nCodeshinyApp(app$ui, app$server)\n\n\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n [1] teal.modules.clinical_0.8.14.9026 teal_0.12.0.9023                 \n [3] teal.transform_0.2.0.9011         teal.data_0.1.2.9013             \n [5] shiny_1.7.4                       tidyr_1.3.0                      \n [7] dplyr_1.1.0                       scda_0.1.5.9009                  \n [9] tern_0.7.10.9056                  rtables_0.6.0.1                  \n[11] formatters_0.4.0                  magrittr_2.0.3                   \n\nloaded via a namespace (and not attached):\n [1] sass_0.4.5               jsonlite_1.8.4           splines_4.2.2           \n [4] R.utils_2.12.2           bslib_0.4.2              teal.slice_0.2.0.9026   \n [7] Rdpack_2.4               assertthat_0.2.1         teal.code_0.3.0.9001    \n[10] tern.gee_0.1.0.9002      yaml_2.3.7               pillar_1.8.1            \n[13] backports_1.4.1          lattice_0.20-45          glue_1.6.2              \n[16] teal.widgets_0.2.0.9024  digest_0.6.31            promises_1.2.0.1        \n[19] rbibutils_2.2.13         checkmate_2.1.0          colorspace_2.1-0        \n[22] R.oo_1.25.0              htmltools_0.5.4          httpuv_1.6.9            \n[25] Matrix_1.5-3             pkgconfig_2.0.3          broom_1.0.3             \n[28] logger_0.2.2             purrr_1.0.1              xtable_1.8-4            \n[31] mvtnorm_1.1-3            scales_1.2.1             webshot_0.5.4           \n[34] processx_3.8.0           fontawesome_0.5.0        later_1.3.0             \n[37] emmeans_1.8.4-1          tibble_3.1.8             styler_1.9.1            \n[40] generics_0.1.3           ggplot2_3.4.1            ellipsis_0.3.2          \n[43] shinyvalidate_0.1.2      cachem_1.0.7             withr_2.5.0             \n[46] shinyjs_2.1.0            geepack_1.3.9            cli_3.6.0               \n[49] survival_3.5-3           mime_0.12                memoise_2.0.1           \n[52] ps_1.7.2                 estimability_1.4.1       evaluate_0.20           \n[55] R.methodsS3_1.8.2        fansi_1.0.4              R.cache_0.16.0          \n[58] nlme_3.1-162             MASS_7.3-58.3            forcats_1.0.0           \n[61] teal.reporter_0.1.1.9013 tools_4.2.2              lifecycle_1.0.3         \n[64] munsell_0.5.0            callr_3.7.3              compiler_4.2.2          \n[67] jquerylib_0.1.4          rlang_1.0.6              grid_4.2.2              \n[70] htmlwidgets_1.6.1        shinyWidgets_0.7.6       rmarkdown_2.20          \n[73] gtable_0.3.1             codetools_0.2-19         teal.logger_0.1.1.9004  \n[76] R6_2.5.1                 knitr_1.42               fastmap_1.1.1           \n[79] utf8_1.2.3               Rcpp_1.0.10              vctrs_0.5.2             \n[82] tidyselect_1.2.0         xfun_0.37                coda_0.19-4             \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R                       [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/tables/safety/dmt01.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "tables/safety/mht01.html",
    "href": "tables/safety/mht01.html",
    "title": "MHT01",
    "section": "",
    "text": "Data Setup\nStandard Table\nTable of History  Prior to Study\nTable with Total Number  of Conditions Suppressed\nTable with Total Number of Conditions Per Body  System After The Summary of Patients\nTable Showing Additional  “All Patients” Column\nTeal\nSession Info\n\n\n\n\nCodelibrary(tern)\nlibrary(dplyr)\nlibrary(scda)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadmh <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"admh\")\n\n# Ensure character variables are converted to factors and empty strings and NAs are explicit missing levels.\nadsl <- df_explicit_na(adsl)\nadmh <- df_explicit_na(admh)\n\nadsl_f <- adsl %>%\n  filter(SAFFL == \"Y\") %>%\n  select(USUBJID, ARM) %>%\n  mutate(ARM = factor(ARM))\n\nadmh_f <- admh %>%\n  filter(SAFFL == \"Y\" & MHBODSYS != \"\" & MHDECOD != \"\") %>%\n  mutate(ARM = factor(ARM))\n\n\n\n\n\nCodesplit_fun <- drop_split_levels\n\nlyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ARM\") %>%\n  analyze_num_patients(\n    vars = \"USUBJID\",\n    .stats = c(\"unique\", \"nonunique\"),\n    .labels = c(\"Total number of patients with at least one condition\", \"Total number of conditions\")\n  ) %>%\n  split_rows_by(\n    var = \"MHBODSYS\",\n    split_fun = split_fun,\n    child_labels = \"visible\",\n    nested = FALSE,\n    indent_mod = -1L,\n    label_pos = \"topleft\",\n    split_label = obj_label(admh_f$MHBODSYS)\n  ) %>%\n  summarize_num_patients(\n    var = \"USUBJID\",\n    .stats = c(\"unique\", \"nonunique\"),\n    .labels = c(\"Total number of patients with at least one condition\", \"Total number of conditions\")\n  ) %>%\n  count_occurrences(vars = \"MHDECOD\", .indent_mods = -1L) %>%\n  append_varlabels(admh_f, \"MHDECOD\", indent = 1L)\n\nresult <- build_table(lyt, admh_f, alt_counts_df = adsl_f) %>%\n  prune_table()\n\nresult\n\nBody System or Organ Class                              A: Drug X    B: Placebo    C: Combination\n  Dictionary-Derived Term                                (N=134)       (N=134)        (N=132)    \n—————————————————————————————————————————————————————————————————————————————————————————————————\nTotal number of patients with at least one condition   122 (91.0%)   123 (91.8%)    120 (90.9%)  \nTotal number of conditions                                 609           622            703      \ncl A                                                                                             \nTotal number of patients with at least one condition   78 (58.2%)    75 (56.0%)      89 (67.4%)  \nTotal number of conditions                                 132           130            160      \ntrm A_1/2                                              50 (37.3%)    45 (33.6%)      63 (47.7%)  \ntrm A_2/2                                              48 (35.8%)    48 (35.8%)      50 (37.9%)  \ncl B                                                                                             \nTotal number of patients with at least one condition   96 (71.6%)    89 (66.4%)      97 (73.5%)  \nTotal number of conditions                                 185           198            205      \ntrm B_1/3                                              47 (35.1%)    49 (36.6%)      43 (32.6%)  \ntrm B_2/3                                              49 (36.6%)    44 (32.8%)      52 (39.4%)  \ntrm B_3/3                                              48 (35.8%)    54 (40.3%)      51 (38.6%)  \ncl C                                                                                             \nTotal number of patients with at least one condition   67 (50.0%)    75 (56.0%)      79 (59.8%)  \nTotal number of conditions                                 103           116            129      \ntrm C_1/2                                              43 (32.1%)    46 (34.3%)      43 (32.6%)  \ntrm C_2/2                                              35 (26.1%)    48 (35.8%)      55 (41.7%)  \ncl D                                                                                             \nTotal number of patients with at least one condition   96 (71.6%)    90 (67.2%)      98 (74.2%)  \nTotal number of conditions                                 189           178            209      \ntrm D_1/3                                              50 (37.3%)    42 (31.3%)      51 (38.6%)  \ntrm D_2/3                                              48 (35.8%)    42 (31.3%)      50 (37.9%)  \ntrm D_3/3                                              47 (35.1%)    58 (43.3%)      57 (43.2%)  \n\n\n\n\n\nCodeadmh_f_prior <- admh_f %>%\n  filter(ASTDY <= 0)\n\nresult <- build_table(lyt, admh_f_prior, alt_counts_df = adsl_f) %>%\n  prune_table()\n\nresult\n\nBody System or Organ Class                             A: Drug X   B: Placebo   C: Combination\n  Dictionary-Derived Term                               (N=134)     (N=134)        (N=132)    \n——————————————————————————————————————————————————————————————————————————————————————————————\nTotal number of patients with at least one condition       0           0           1 (0.8%)   \nTotal number of conditions                                 0           0              1       \ncl D                                                                                          \nTotal number of patients with at least one condition       0           0           1 (0.8%)   \nTotal number of conditions                                 0           0              1       \ntrm D_2/3                                                  0           0           1 (0.8%)   \n\n\n\n\n\nCodesplit_fun <- drop_split_levels\n\nlyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ARM\") %>%\n  analyze_num_patients(\n    vars = \"USUBJID\",\n    .stats = \"unique\",\n    .labels = \"Total number of patients with at least one condition\"\n  ) %>%\n  split_rows_by(\n    var = \"MHBODSYS\",\n    split_fun = split_fun,\n    child_labels = \"visible\",\n    nested = FALSE,\n    label_pos = \"topleft\",\n    split_label = obj_label(admh_f$MHBODSYS)\n  ) %>%\n  summarize_num_patients(\n    var = \"USUBJID\",\n    .stats = \"unique\",\n    .labels = \"Total number of patients with at least one condition\"\n  ) %>%\n  count_occurrences(vars = \"MHDECOD\", .indent_mods = -1L) %>%\n  append_varlabels(admh_f, \"MHDECOD\", indent = 1L)\n\nresult <- build_table(lyt, admh_f, alt_counts_df = adsl) %>%\n  prune_table()\n\nresult\n\nBody System or Organ Class                                A: Drug X    B: Placebo    C: Combination\n  Dictionary-Derived Term                                  (N=134)       (N=134)        (N=132)    \n———————————————————————————————————————————————————————————————————————————————————————————————————\nTotal number of patients with at least one condition     122 (91.0%)   123 (91.8%)    120 (90.9%)  \ncl A                                                                                               \n  Total number of patients with at least one condition   78 (58.2%)    75 (56.0%)      89 (67.4%)  \n  trm A_1/2                                              50 (37.3%)    45 (33.6%)      63 (47.7%)  \n  trm A_2/2                                              48 (35.8%)    48 (35.8%)      50 (37.9%)  \ncl B                                                                                               \n  Total number of patients with at least one condition   96 (71.6%)    89 (66.4%)      97 (73.5%)  \n  trm B_1/3                                              47 (35.1%)    49 (36.6%)      43 (32.6%)  \n  trm B_2/3                                              49 (36.6%)    44 (32.8%)      52 (39.4%)  \n  trm B_3/3                                              48 (35.8%)    54 (40.3%)      51 (38.6%)  \ncl C                                                                                               \n  Total number of patients with at least one condition   67 (50.0%)    75 (56.0%)      79 (59.8%)  \n  trm C_1/2                                              43 (32.1%)    46 (34.3%)      43 (32.6%)  \n  trm C_2/2                                              35 (26.1%)    48 (35.8%)      55 (41.7%)  \ncl D                                                                                               \n  Total number of patients with at least one condition   96 (71.6%)    90 (67.2%)      98 (74.2%)  \n  trm D_1/3                                              50 (37.3%)    42 (31.3%)      51 (38.6%)  \n  trm D_2/3                                              48 (35.8%)    42 (31.3%)      50 (37.9%)  \n  trm D_3/3                                              47 (35.1%)    58 (43.3%)      57 (43.2%)  \n\n\n\n\nNot currently supported by rtables. Users, please notify us if this variation is important to you.\n\n\nConditions are further sorted by decreasing high level terms and low level terms.\n\nCodesplit_fun <- drop_split_levels\n\nlyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ARM\") %>%\n  add_overall_col(\"All Patients\") %>%\n  analyze_num_patients(\n    \"USUBJID\",\n    .stats = c(\"unique\", \"nonunique\"),\n    .labels = c(unique = \"Total number of patients with at least one event\")\n  ) %>%\n  split_rows_by(\n    var = \"MHBODSYS\",\n    split_fun = split_fun,\n    child_labels = \"visible\",\n    nested = FALSE,\n    label_pos = \"topleft\",\n    split_label = obj_label(admh_f$MHBODSYS)\n  ) %>%\n  summarize_num_patients(\n    \"USUBJID\",\n    .stats = c(\"unique\", \"nonunique\"),\n    .labels = c(unique = \"Total number of patients with at least one event\")\n  ) %>%\n  count_occurrences(vars = \"MHDECOD\", .indent_mods = -1L) %>%\n  append_varlabels(admh_f, \"MHDECOD\", indent = 1L)\n\nscorefun_hlt <- cont_n_onecol(nlevels(adsl_f$ARM) + 1)\nscorefun_llt <- score_occurrences_cols(col_indices = nlevels(adsl_f$ARM) + 1)\n\nresult <- build_table(lyt, admh_f, alt_counts_df = adsl_f) %>%\n  prune_table() %>%\n  sort_at_path(path = c(\"MHBODSYS\"), scorefun = scorefun_hlt) %>%\n  sort_at_path(path = c(\"MHBODSYS\", \"*\", \"MHDECOD\"), scorefun = scorefun_llt)\n\nresult\n\nBody System or Organ Class                            A: Drug X    B: Placebo    C: Combination   All Patients\n  Dictionary-Derived Term                              (N=134)       (N=134)        (N=132)         (N=400)   \n——————————————————————————————————————————————————————————————————————————————————————————————————————————————\nTotal number of patients with at least one event     122 (91.0%)   123 (91.8%)    120 (90.9%)     365 (91.2%) \n                                                         609           622            703             1934    \ncl D                                                                                                          \n  Total number of patients with at least one event   96 (71.6%)    90 (67.2%)      98 (74.2%)     284 (71.0%) \n  cl D                                                   189           178            209             576     \n  trm D_3/3                                          47 (35.1%)    58 (43.3%)      57 (43.2%)     162 (40.5%) \n  trm D_1/3                                          50 (37.3%)    42 (31.3%)      51 (38.6%)     143 (35.8%) \n  trm D_2/3                                          48 (35.8%)    42 (31.3%)      50 (37.9%)     140 (35.0%) \ncl B                                                                                                          \n  Total number of patients with at least one event   96 (71.6%)    89 (66.4%)      97 (73.5%)     282 (70.5%) \n  cl B                                                   185           198            205             588     \n  trm B_3/3                                          48 (35.8%)    54 (40.3%)      51 (38.6%)     153 (38.2%) \n  trm B_2/3                                          49 (36.6%)    44 (32.8%)      52 (39.4%)     145 (36.2%) \n  trm B_1/3                                          47 (35.1%)    49 (36.6%)      43 (32.6%)     139 (34.8%) \ncl A                                                                                                          \n  Total number of patients with at least one event   78 (58.2%)    75 (56.0%)      89 (67.4%)     242 (60.5%) \n  cl A                                                   132           130            160             422     \n  trm A_1/2                                          50 (37.3%)    45 (33.6%)      63 (47.7%)     158 (39.5%) \n  trm A_2/2                                          48 (35.8%)    48 (35.8%)      50 (37.9%)     146 (36.5%) \ncl C                                                                                                          \n  Total number of patients with at least one event   67 (50.0%)    75 (56.0%)      79 (59.8%)     221 (55.2%) \n  cl C                                                   103           116            129             348     \n  trm C_2/2                                          35 (26.1%)    48 (35.8%)      55 (41.7%)     138 (34.5%) \n  trm C_1/2                                          43 (32.1%)    46 (34.3%)      43 (32.6%)     132 (33.0%) \n\n\n\n\n\nCodelibrary(scda)\nlibrary(teal.modules.clinical)\n\nadsl_f <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\") %>%\n  filter(SAFFL == \"Y\")\nadmh_f <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"admh\") %>%\n  filter(SAFFL == \"Y\" & MHBODSYS != \"\" & MHDECOD != \"\")\n\napp <- teal::init(\n  data = cdisc_data(\n    cdisc_dataset(\"ADSL\", adsl_f, code = 'ADSL <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\") %>%\n                  filter(SAFFL == \"Y\")'),\n    cdisc_dataset(\"ADMH\", admh_f, code = 'ADMH <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"admh\") %>%\n                  filter(SAFFL == \"Y\" & MHBODSYS != \"\" & MHDECOD != \"\")'),\n    check = TRUE\n  ),\n  modules = modules(\n    tm_t_events(\n      label = \"Medical History Table\",\n      dataname = \"ADMH\",\n      arm_var = choices_selected(c(\"ARM\", \"ARMCD\"), \"ARM\"),\n      llt = choices_selected(\n        choices = variable_choices(admh_f, c(\"MHTERM\", \"MHDECOD\")),\n        selected = c(\"MHDECOD\")\n      ),\n      hlt = choices_selected(\n        choices = variable_choices(admh_f, c(\"MHBODSYS\", \"MHSOC\")),\n        selected = \"MHBODSYS\"\n      ),\n      add_total = TRUE,\n      event_type = \"condition\"\n    )\n  )\n)\n\n[INFO] 2023-03-10 05:32:02.3678 pid:4819 token:[] teal.modules.clinical Initializing tm_t_events\n\nCodeshinyApp(app$ui, app$server)\n\n\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n [1] teal.modules.clinical_0.8.14.9026 teal_0.12.0.9023                 \n [3] teal.transform_0.2.0.9011         teal.data_0.1.2.9013             \n [5] shiny_1.7.4                       scda_0.1.5.9009                  \n [7] dplyr_1.1.0                       tern_0.7.10.9056                 \n [9] rtables_0.6.0.1                   formatters_0.4.0                 \n[11] magrittr_2.0.3                   \n\nloaded via a namespace (and not attached):\n [1] sass_0.4.5               tidyr_1.3.0              jsonlite_1.8.4          \n [4] splines_4.2.2            R.utils_2.12.2           bslib_0.4.2             \n [7] teal.slice_0.2.0.9026    Rdpack_2.4               assertthat_0.2.1        \n[10] teal.code_0.3.0.9001     tern.gee_0.1.0.9002      yaml_2.3.7              \n[13] pillar_1.8.1             backports_1.4.1          lattice_0.20-45         \n[16] glue_1.6.2               teal.widgets_0.2.0.9024  digest_0.6.31           \n[19] promises_1.2.0.1         rbibutils_2.2.13         checkmate_2.1.0         \n[22] colorspace_2.1-0         R.oo_1.25.0              htmltools_0.5.4         \n[25] httpuv_1.6.9             Matrix_1.5-3             pkgconfig_2.0.3         \n[28] broom_1.0.3              logger_0.2.2             purrr_1.0.1             \n[31] xtable_1.8-4             mvtnorm_1.1-3            scales_1.2.1            \n[34] webshot_0.5.4            processx_3.8.0           fontawesome_0.5.0       \n[37] later_1.3.0              emmeans_1.8.4-1          tibble_3.1.8            \n[40] styler_1.9.1             generics_0.1.3           ggplot2_3.4.1           \n[43] ellipsis_0.3.2           shinyvalidate_0.1.2      cachem_1.0.7            \n[46] withr_2.5.0              shinyjs_2.1.0            geepack_1.3.9           \n[49] cli_3.6.0                survival_3.5-3           mime_0.12               \n[52] memoise_2.0.1            ps_1.7.2                 estimability_1.4.1      \n[55] evaluate_0.20            R.methodsS3_1.8.2        fansi_1.0.4             \n[58] R.cache_0.16.0           nlme_3.1-162             MASS_7.3-58.3           \n[61] forcats_1.0.0            teal.reporter_0.1.1.9013 tools_4.2.2             \n[64] lifecycle_1.0.3          munsell_0.5.0            callr_3.7.3             \n[67] compiler_4.2.2           jquerylib_0.1.4          rlang_1.0.6             \n[70] grid_4.2.2               htmlwidgets_1.6.1        rmarkdown_2.20          \n[73] shinyWidgets_0.7.6       gtable_0.3.1             codetools_0.2-19        \n[76] teal.logger_0.1.1.9004   R6_2.5.1                 knitr_1.42              \n[79] fastmap_1.1.1            utf8_1.2.3               Rcpp_1.0.10             \n[82] vctrs_0.5.2              tidyselect_1.2.0         xfun_0.37               \n[85] coda_0.19-4             \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R                       [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/tables/safety/mht01.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "tables/safety/dst01.html",
    "href": "tables/safety/dst01.html",
    "title": "DST01",
    "section": "",
    "text": "Data Setup\nStandard Table\nTable with Grouping of Reasons\nTable Adding Optional Rows\nTeal\nSession Info\n\n\n\n\nCodelibrary(tern)\nlibrary(scda)\nlibrary(dplyr)\n\nset.seed(1, kind = \"Mersenne-Twister\")\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadsl <- df_explicit_na(adsl)\n\n\n\n\n\nCodelyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\n    \"ARM\",\n    split_fun = add_overall_level(\"All Patients\", first = FALSE)\n  ) %>%\n  count_values(\"EOSSTT\",\n    values = \"COMPLETED\",\n    .labels = c(count_fraction = \"Completed Study\")\n  ) %>%\n  split_rows_by(\n    \"EOSSTT\",\n    split_fun = keep_split_levels(\"DISCONTINUED\")\n  ) %>%\n  summarize_row_groups(label_fstr = \"Discontinued Study\") %>%\n  summarize_vars(\n    \"DCSREAS\",\n    .stats = \"count_fraction\",\n    denom = \"N_col\"\n  )\n\nresult1 <- build_table(lyt = lyt, df = adsl)\nresult1\n\n                                   A: Drug X    B: Placebo    C: Combination   All Patients\n                                    (N=134)       (N=134)        (N=132)         (N=400)   \n———————————————————————————————————————————————————————————————————————————————————————————\nCompleted Study                   68 (50.75%)   66 (49.25%)    73 (55.30%)     207 (51.75%)\nDiscontinued Study                42 (31.3%)    40 (29.9%)      38 (28.8%)     120 (30.0%) \n  ADVERSE EVENT                    3 (2.2%)      6 (4.5%)        5 (3.8%)       14 (3.5%)  \n  DEATH                           25 (18.7%)    23 (17.2%)      22 (16.7%)      70 (17.5%) \n  LACK OF EFFICACY                 2 (1.5%)      2 (1.5%)        3 (2.3%)        7 (1.8%)  \n  PHYSICIAN DECISION               2 (1.5%)      3 (2.2%)        2 (1.5%)        7 (1.8%)  \n  PROTOCOL VIOLATION               5 (3.7%)      3 (2.2%)         4 (3%)         12 (3%)   \n  WITHDRAWAL BY PARENT/GUARDIAN     4 (3%)       2 (1.5%)        1 (0.8%)        7 (1.8%)  \n  WITHDRAWAL BY SUBJECT            1 (0.7%)      1 (0.7%)        1 (0.8%)        3 (0.8%)  \n\n\n\n\n\nCodeadsl_gp_added <- adsl %>%\n  mutate(DCSREASGP = case_when(\n    DCSREAS %in% c(\"ADVERSE EVENT\", \"DEATH\") ~ \"Safety\",\n    (DCSREAS != \"<Missing>\" & !DCSREAS %in% c(\"ADVERSE EVENT\", \"DEATH\")) ~ \"Non-Safety\",\n    DCSREAS == \"<Missing>\" ~ \"<Missing>\"\n  ) %>% as.factor())\n\nlyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\n    \"ARM\",\n    split_fun = add_overall_level(\"All Patients\", first = FALSE)\n  ) %>%\n  count_values(\"EOSSTT\",\n    values = \"COMPLETED\",\n    .labels = c(count_fraction = \"Completed Study\")\n  ) %>%\n  split_rows_by(\n    \"EOSSTT\",\n    split_fun = keep_split_levels(\"DISCONTINUED\")\n  ) %>%\n  summarize_row_groups(label_fstr = \"Discontinued Study\") %>%\n  split_rows_by(\n    \"DCSREASGP\",\n    split_fun = reorder_split_levels(neworder = c(\"Safety\", \"Non-Safety\"))\n  ) %>%\n  summarize_row_groups() %>%\n  summarize_vars(\n    \"DCSREAS\",\n    .stats = \"count_fraction\",\n    denom = \"N_col\"\n  )\n\ntbl <- build_table(lyt = lyt, df = adsl_gp_added)\nresult2 <- prune_table(tbl) # remove rows containing all zeros\nresult2\n\n                                     A: Drug X    B: Placebo    C: Combination   All Patients\n                                      (N=134)       (N=134)        (N=132)         (N=400)   \n—————————————————————————————————————————————————————————————————————————————————————————————\nCompleted Study                     68 (50.75%)   66 (49.25%)    73 (55.30%)     207 (51.75%)\nDiscontinued Study                  42 (31.3%)    40 (29.9%)      38 (28.8%)     120 (30.0%) \n  Safety                            28 (20.9%)    29 (21.6%)      27 (20.5%)      84 (21.0%) \n    ADVERSE EVENT                    3 (2.2%)      6 (4.5%)        5 (3.8%)       14 (3.5%)  \n    DEATH                           25 (18.7%)    23 (17.2%)      22 (16.7%)      70 (17.5%) \n  Non-Safety                        14 (10.4%)     11 (8.2%)      11 (8.3%)       36 (9.0%)  \n    LACK OF EFFICACY                 2 (1.5%)      2 (1.5%)        3 (2.3%)        7 (1.8%)  \n    PHYSICIAN DECISION               2 (1.5%)      3 (2.2%)        2 (1.5%)        7 (1.8%)  \n    PROTOCOL VIOLATION               5 (3.7%)      3 (2.2%)         4 (3%)         12 (3%)   \n    WITHDRAWAL BY PARENT/GUARDIAN     4 (3%)       2 (1.5%)        1 (0.8%)        7 (1.8%)  \n    WITHDRAWAL BY SUBJECT            1 (0.7%)      1 (0.7%)        1 (0.8%)        3 (0.8%)  \n\n\n\n\n\nCodeadsl_eotstt_added <- adsl_gp_added %>%\n  mutate(\n    EOTSTT = sample(\n      c(\"ONGOING\", \"COMPLETED\", \"DISCONTINUED\"),\n      size = nrow(adsl),\n      replace = TRUE\n    ) %>% as.factor()\n  ) %>%\n  var_relabel(\n    EOTSTT = \"End Of Treatment Status\"\n  )\n\nlyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\n    \"ARM\",\n    split_fun = add_overall_level(\"All Patients\", first = FALSE)\n  ) %>%\n  count_values(\n    \"EOTSTT\",\n    values = \"COMPLETED\",\n    .labels = c(count_fraction = \"Completed Treatment\"),\n    table_names = c(\"COMPLETED\")\n  ) %>%\n  count_values(\n    \"EOTSTT\",\n    values = \"ONGOING\",\n    .labels = c(count_fraction = \"Ongoing Treatment\"),\n    table_names = c(\"ONGOING\")\n  ) %>%\n  count_values(\n    \"EOTSTT\",\n    values = \"DISCONTINUED\",\n    .labels = c(count_fraction = \"Discontinued Treatment\"),\n    table_names = c(\"DISCONTINUED\")\n  )\n\ntbl <- build_table(lyt = lyt, df = adsl_eotstt_added)\ntbl <- prune_table(tbl) # remove rows containing all zeros\n\n# Combine tables\ncol_info(result2) <- col_info(tbl)\nresult3 <- rbind(result2, tbl)\nresult3\n\n                                     A: Drug X    B: Placebo    C: Combination   All Patients\n                                      (N=134)       (N=134)        (N=132)         (N=400)   \n—————————————————————————————————————————————————————————————————————————————————————————————\nCompleted Study                     68 (50.75%)   66 (49.25%)    73 (55.30%)     207 (51.75%)\nDiscontinued Study                  42 (31.3%)    40 (29.9%)      38 (28.8%)     120 (30.0%) \n  Safety                            28 (20.9%)    29 (21.6%)      27 (20.5%)      84 (21.0%) \n    ADVERSE EVENT                    3 (2.2%)      6 (4.5%)        5 (3.8%)       14 (3.5%)  \n    DEATH                           25 (18.7%)    23 (17.2%)      22 (16.7%)      70 (17.5%) \n  Non-Safety                        14 (10.4%)     11 (8.2%)      11 (8.3%)       36 (9.0%)  \n    LACK OF EFFICACY                 2 (1.5%)      2 (1.5%)        3 (2.3%)        7 (1.8%)  \n    PHYSICIAN DECISION               2 (1.5%)      3 (2.2%)        2 (1.5%)        7 (1.8%)  \n    PROTOCOL VIOLATION               5 (3.7%)      3 (2.2%)         4 (3%)         12 (3%)   \n    WITHDRAWAL BY PARENT/GUARDIAN     4 (3%)       2 (1.5%)        1 (0.8%)        7 (1.8%)  \n    WITHDRAWAL BY SUBJECT            1 (0.7%)      1 (0.7%)        1 (0.8%)        3 (0.8%)  \nCompleted Treatment                 46 (34.33%)   38 (28.36%)    41 (31.06%)     125 (31.25%)\nOngoing Treatment                   50 (37.31%)   51 (38.06%)    46 (34.85%)     147 (36.75%)\nDiscontinued Treatment              38 (28.36%)   45 (33.58%)    45 (34.09%)     128 (32.00%)\n\n\n\n\n\nCodelibrary(teal.modules.clinical)\nlibrary(scda)\nlibrary(dplyr)\n\nset.seed(1, kind = \"Mersenne-Twister\")\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadsl <- df_explicit_na(adsl)\nadsl <- adsl %>%\n  mutate(\n    DCSREASGP = case_when(\n      DCSREAS %in% c(\"ADVERSE EVENT\", \"DEATH\") ~ \"Safety\",\n      (DCSREAS != \"<Missing>\" & !DCSREAS %in% c(\"ADVERSE EVENT\", \"DEATH\")) ~ \"Non-Safety\",\n      DCSREAS == \"<Missing>\" ~ \"<Missing>\"\n    ) %>% as.factor(),\n    EOTSTT = sample(\n      c(\"ONGOING\", \"COMPLETED\", \"DISCONTINUED\"),\n      size = nrow(adsl),\n      replace = TRUE\n    ) %>% as.factor()\n  ) %>%\n  var_relabel(\n    EOTSTT = \"End Of Treatment Status\"\n  )\n\ndate_vars_asl <- names(adsl)[vapply(adsl, function(x) inherits(x, c(\"Date\", \"POSIXct\", \"POSIXlt\")), logical(1))]\ndemog_vars_asl <- names(adsl)[!(names(adsl) %in% c(\"USUBJID\", \"STUDYID\", date_vars_asl))]\n\napp <- init(\n  data = cdisc_data(\n    cdisc_dataset(\"ADSL\", adsl),\n    code = '\n     set.seed(1, kind = \"Mersenne-Twister\")\n     ADSL <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\n     ADSL <- df_explicit_na(ADSL)\n     ADSL <- ADSL %>%\n        mutate(\n            DCSREASGP = case_when(\n                DCSREAS %in% c(\"ADVERSE EVENT\", \"DEATH\") ~ \"Safety\",\n                (DCSREAS != \"<Missing>\" & !DCSREAS %in% c(\"ADVERSE EVENT\", \"DEATH\")) ~ \"Non-Safety\",\n                DCSREAS == \"<Missing>\" ~ \"<Missing>\"\n    )  %>% as.factor(),\n    EOTSTT = sample(\n      c(\"ONGOING\", \"COMPLETED\", \"DISCONTINUED\"),\n      size = nrow(ADSL),\n      replace = TRUE\n    ) %>% as.factor()\n  ) %>% var_relabel(\n    EOTSTT = \"End Of Treatment Status\"\n  )\n     ',\n    check = TRUE\n  ),\n  modules = modules(\n    tm_t_summary(\n      label = \"Disposition Table\",\n      dataname = \"ADSL\",\n      arm_var = choices_selected(c(\"ARM\", \"ARMCD\"), \"ARM\"),\n      summarize_vars = choices_selected(\n        variable_choices(adsl, demog_vars_asl),\n        c(\"EOSSTT\", \"DCSREAS\", \"EOTSTT\")\n      ),\n      useNA = \"ifany\"\n    )\n  )\n)\n\n[INFO] 2023-03-10 05:32:25.1889 pid:4897 token:[] teal.modules.clinical Initializing tm_t_summary\n\nCodeshinyApp(app$ui, app$server)\n\n\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n [1] teal.modules.clinical_0.8.14.9026 teal_0.12.0.9023                 \n [3] teal.transform_0.2.0.9011         teal.data_0.1.2.9013             \n [5] shiny_1.7.4                       dplyr_1.1.0                      \n [7] scda_0.1.5.9009                   tern_0.7.10.9056                 \n [9] rtables_0.6.0.1                   formatters_0.4.0                 \n[11] magrittr_2.0.3                   \n\nloaded via a namespace (and not attached):\n [1] sass_0.4.5               tidyr_1.3.0              jsonlite_1.8.4          \n [4] splines_4.2.2            R.utils_2.12.2           bslib_0.4.2             \n [7] teal.slice_0.2.0.9026    Rdpack_2.4               assertthat_0.2.1        \n[10] teal.code_0.3.0.9001     tern.gee_0.1.0.9002      yaml_2.3.7              \n[13] pillar_1.8.1             backports_1.4.1          lattice_0.20-45         \n[16] glue_1.6.2               teal.widgets_0.2.0.9024  digest_0.6.31           \n[19] promises_1.2.0.1         rbibutils_2.2.13         checkmate_2.1.0         \n[22] colorspace_2.1-0         R.oo_1.25.0              htmltools_0.5.4         \n[25] httpuv_1.6.9             Matrix_1.5-3             pkgconfig_2.0.3         \n[28] broom_1.0.3              logger_0.2.2             purrr_1.0.1             \n[31] xtable_1.8-4             mvtnorm_1.1-3            scales_1.2.1            \n[34] webshot_0.5.4            processx_3.8.0           fontawesome_0.5.0       \n[37] later_1.3.0              emmeans_1.8.4-1          tibble_3.1.8            \n[40] styler_1.9.1             generics_0.1.3           ggplot2_3.4.1           \n[43] ellipsis_0.3.2           shinyvalidate_0.1.2      cachem_1.0.7            \n[46] withr_2.5.0              shinyjs_2.1.0            geepack_1.3.9           \n[49] cli_3.6.0                survival_3.5-3           mime_0.12               \n[52] memoise_2.0.1            ps_1.7.2                 estimability_1.4.1      \n[55] evaluate_0.20            R.methodsS3_1.8.2        fansi_1.0.4             \n[58] R.cache_0.16.0           nlme_3.1-162             MASS_7.3-58.3           \n[61] forcats_1.0.0            teal.reporter_0.1.1.9013 tools_4.2.2             \n[64] lifecycle_1.0.3          munsell_0.5.0            callr_3.7.3             \n[67] compiler_4.2.2           jquerylib_0.1.4          rlang_1.0.6             \n[70] grid_4.2.2               htmlwidgets_1.6.1        rmarkdown_2.20          \n[73] shinyWidgets_0.7.6       gtable_0.3.1             codetools_0.2-19        \n[76] teal.logger_0.1.1.9004   R6_2.5.1                 knitr_1.42              \n[79] fastmap_1.1.1            utf8_1.2.3               Rcpp_1.0.10             \n[82] vctrs_0.5.2              tidyselect_1.2.0         xfun_0.37               \n[85] coda_0.19-4             \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R                       [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/tables/safety/dst01.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "tables/safety/egt04.html",
    "href": "tables/safety/egt04.html",
    "title": "EGT04",
    "section": "",
    "text": "Data Setup\nStandard Table\nTeal\nSession Info\n\n\n\nFor the EGT04 template, data imputation should be avoided, and missing data explicit and accounted for, so the contingency table sum adds up to the group N. For illustration purposes, missing data are added to the example dataset.\n\nCodelibrary(scda)\nlibrary(tern)\nlibrary(dplyr)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadeg <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adeg\")\n\n# Ensure character variables are converted to factors and empty strings and NAs are explicit missing levels.\nadsl <- df_explicit_na(adsl)\nadeg <- df_explicit_na(adeg, omit_columns = c(\"AVALC\", \"BASEC\"))\n\nadeg_labels <- var_labels(adeg)\n\nadeg_f <- subset(\n  adeg,\n  PARAMCD == \"ECGINTP\" & # Analysis in terms of \"NORMAL\"/\"ABNORMAL\" (AVALC)\n    SAFFL == \"Y\" & # \"Safety Population Flag\"\n    ONTRTFL == \"Y\" & # \"On Treatment Record Flag\"\n    WORS02FL == \"Y\" # \"Worst Post-Baseline Observation\"\n)\n\nadeg_f$AVALC[sample(1:nrow(adeg_f), size = 5)] <- \"Missing\"\nadeg_f$BASEC[sample(1:nrow(adeg_f), size = 5)] <- \"Missing\"\nadeg_f$AVALC <- factor(\n  adeg_f$AVALC,\n  levels = c(\"NORMAL\", \"ABNORMAL\", \"Missing\"),\n  labels = c(\"Normal\", \"Abnormal\", \"Missing\")\n)\nadeg_f$BASEC <- factor(\n  adeg_f$BASEC,\n  levels = c(\"NORMAL\", \"ABNORMAL\", \"Missing\"),\n  labels = c(\"Normal\", \"Abnormal\", \"Missing\")\n)\n\nvar_labels(adeg_f) <- adeg_labels\nadeg_f <- adeg_f %>%\n  var_relabel(BASEC = \"Baseline\")\n\n# Temprary solution for over arching column\nadeg_f <- adeg_f %>% mutate(postbaseline_label = \"Post-Baseline\")\n\n\n\n\nThe EGT04 template consists of a stacked list of contingency tables, one per group. For each group, the n’s across all cells must add up to the group N in the analysis, and percentages are calculated using N as the denominator.\n\nCode# Define the split function\nsplit_fun <- drop_split_levels\n\nlyt <- basic_table() %>%\n  split_cols_by(\"postbaseline_label\") %>%\n  split_cols_by(\"AVALC\") %>%\n  split_rows_by(\"ARM\", split_fun = split_fun, label_pos = \"topleft\", split_label = obj_label(adeg_f$ARM)) %>%\n  add_rowcounts() %>%\n  summarize_vars(\n    \"BASEC\",\n    denom = \"N_row\",\n    .stats = \"count_fraction\",\n    na.rm = FALSE\n  ) %>%\n  append_varlabels(adeg_f, c(\"BASEC\"), indent = 1L)\n\nresult <- build_table(lyt, adeg_f)\nresult\n\nDescription of Planned Arm             Post-Baseline           \n  Baseline                     Normal      Abnormal    Missing \n———————————————————————————————————————————————————————————————\nA: Drug X (N=134)                                              \n  Normal                     20 (14.9%)   80 (59.7%)      0    \n  Abnormal                    12 (9%)     18 (13.4%)      0    \n  Missing                        0          4 (3%)        0    \nB: Placebo (N=134)                                             \n  Normal                     17 (12.7%)   83 (61.9%)   2 (1.5%)\n  Abnormal                    3 (2.2%)    28 (20.9%)      0    \n  Missing                     1 (0.7%)        0           0    \nC: Combination (N=132)                                         \n  Normal                     26 (19.7%)    70 (53%)    1 (0.8%)\n  Abnormal                    6 (4.5%)    27 (20.5%)   2 (1.5%)\n  Missing                        0            0           0    \n\n\n\n\n\nCode# In progress\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n[1] dplyr_1.1.0      tern_0.7.10.9056 rtables_0.6.0.1  formatters_0.4.0\n[5] magrittr_2.0.3   scda_0.1.5.9009 \n\nloaded via a namespace (and not attached):\n [1] compiler_4.2.2    pillar_1.8.1      forcats_1.0.0     tools_4.2.2      \n [5] digest_0.6.31     lattice_0.20-45   jsonlite_1.8.4    evaluate_0.20    \n [9] lifecycle_1.0.3   tibble_3.1.8      gtable_0.3.1      checkmate_2.1.0  \n[13] pkgconfig_2.0.3   rlang_1.0.6       Matrix_1.5-3      cli_3.6.0        \n[17] yaml_2.3.7        xfun_0.37         fastmap_1.1.1     withr_2.5.0      \n[21] knitr_1.42        generics_0.1.3    vctrs_0.5.2       htmlwidgets_1.6.1\n[25] grid_4.2.2        tidyselect_1.2.0  glue_1.6.2        R6_2.5.1         \n[29] fansi_1.0.4       Rdpack_2.4        survival_3.5-3    rmarkdown_2.20   \n[33] tidyr_1.3.0       purrr_1.0.1       ggplot2_3.4.1     codetools_0.2-19 \n[37] splines_4.2.2     backports_1.4.1   scales_1.2.1      htmltools_0.5.4  \n[41] rbibutils_2.2.13  colorspace_2.1-0  utf8_1.2.3        munsell_0.5.0    \n[45] broom_1.0.3      \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R              [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/tables/safety/egt04.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "tables/safety/dtht01.html",
    "href": "tables/safety/dtht01.html",
    "title": "DTHT01",
    "section": "",
    "text": "Data Setup\nStandard Table\nTable Selecting  Sections to Display\nTable for Studies Collecting Death  Information from Public Records\nTable Adding Details for “All other causes”  Category for Studies Collecting Death  Information from Public Records\nTeal\nSession Info\n\n\n\n\nCodelibrary(tern)\nlibrary(scda)\nlibrary(dplyr)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\n\n# Ensure character variables are converted to factors and empty strings and NAs are explicit missing levels.\nadsl <- df_explicit_na(adsl) %>% filter(SAFFL == \"Y\")\n\n# Reorder the levels in \"DTHCAT\" to put Other category at the end.\nadsl$DTHCAT <- factor(adsl$DTHCAT, levels = c(\"ADVERSE EVENT\", \"PROGRESSIVE DISEASE\", \"OTHER\", \"<Missing>\"))\n\n\n\n\n\nCodelyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ARM\", split_fun = add_overall_level(\"All Patients\", first = FALSE)) %>%\n  count_values(\n    \"DTHFL\",\n    values = \"Y\",\n    .labels = c(count_fraction = \"Total number of deaths\"),\n    .formats = c(count_fraction = \"xx (xx.x%)\")\n  ) %>%\n  summarize_vars(vars = c(\"DTHCAT\"), var_labels = c(\"Primary cause of death\"))\n\nresult <- build_table(lyt, df = adsl)\nresult\n\n                         A: Drug X    B: Placebo   C: Combination   All Patients\n                          (N=134)      (N=134)        (N=132)         (N=400)   \n————————————————————————————————————————————————————————————————————————————————\nTotal number of deaths   25 (18.7%)   23 (17.2%)     22 (16.7%)      70 (17.5%) \nPrimary cause of death                                                          \n  n                          25           23             22              70     \n  ADVERSE EVENT           9 (36%)     7 (30.4%)      10 (45.5%)      26 (37.1%) \n  PROGRESSIVE DISEASE     8 (32%)     6 (26.1%)      6 (27.3%)       20 (28.6%) \n  OTHER                   8 (32%)     10 (43.5%)     6 (27.3%)       24 (34.3%) \n\n\n\n\n\nCodelyt1 <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ARM\", split_fun = add_overall_level(\"All Patients\", first = FALSE)) %>%\n  count_values(\n    \"DTHFL\",\n    values = \"Y\",\n    .labels = c(count_fraction = \"Total number of deaths\"),\n    .formats = c(count_fraction = \"xx (xx.x%)\")\n  ) %>%\n  summarize_vars(vars = c(\"DTHCAT\"), var_labels = c(\"Primary cause of death\"))\n\npart1 <- build_table(lyt1, df = adsl)\n\nlyt2 <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ARM\", split_fun = add_overall_level(\"All Patients\", first = FALSE)) %>%\n  split_rows_by(\"DTHCAT\", split_fun = keep_split_levels(\"OTHER\"), child_labels = \"hidden\") %>%\n  summarize_vars(\n    \"DTHCAUS\",\n    nested = TRUE,\n    .stats = \"count_fraction\",\n    .indent_mods = c(\"count_fraction\" = 4L)\n  )\n\npart2 <- build_table(lyt2, df = adsl) %>%\n  prune_table()\n\nlyt3 <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ARM\", split_fun = add_overall_level(\"All Patients\", first = FALSE)) %>%\n  summarize_vars(\n    vars = \"LDDTHGR1\",\n    var_labels = \"Days from last drug administration\",\n    show_labels = \"visible\"\n  )\n\npart3 <- build_table(lyt3, df = adsl)\n\nlyt4 <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ARM\", split_fun = add_overall_level(\"All Patients\", first = FALSE)) %>%\n  split_rows_by(\n    \"LDDTHGR1\",\n    split_fun = remove_split_levels(\"<Missing>\"),\n    split_label = \"Primary cause by days from last study drug administration\",\n    label_pos = \"visible\"\n  ) %>%\n  summarize_vars(\"DTHCAT\")\n\npart4 <- build_table(lyt4, df = adsl)\n\n# Combine tables\ncol_info(part2) <- col_info(part1)\ncol_info(part3) <- col_info(part2)\ncol_info(part4) <- col_info(part3)\n\nresult <- rbind(\n  part1,\n  part2,\n  part3,\n  part4\n)\n\nresult\n\n                                                            A: Drug X    B: Placebo   C: Combination   All Patients\n                                                             (N=134)      (N=134)        (N=132)         (N=400)   \n———————————————————————————————————————————————————————————————————————————————————————————————————————————————————\nTotal number of deaths                                      25 (18.7%)   23 (17.2%)     22 (16.7%)      70 (17.5%) \nPrimary cause of death                                                                                             \n  n                                                             25           23             22              70     \n  ADVERSE EVENT                                              9 (36%)     7 (30.4%)      10 (45.5%)      26 (37.1%) \n  PROGRESSIVE DISEASE                                        8 (32%)     6 (26.1%)      6 (27.3%)       20 (28.6%) \n  OTHER                                                      8 (32%)     10 (43.5%)     6 (27.3%)       24 (34.3%) \n        LOST TO FOLLOW UP                                    2 (25%)      2 (20%)       2 (33.3%)        6 (25%)   \n        MISSING                                              2 (25%)      3 (30%)       2 (33.3%)       7 (29.2%)  \n        Post-study reporting of death                       1 (12.5%)     2 (20%)       1 (16.7%)       4 (16.7%)  \n        SUICIDE                                              2 (25%)      2 (20%)       1 (16.7%)       5 (20.8%)  \n        UNKNOWN                                             1 (12.5%)     1 (10%)           0            2 (8.3%)  \nDays from last drug administration                                                                                 \n  n                                                             25           23             22              70     \n  <=30                                                       14 (56%)    11 (47.8%)     14 (63.6%)      39 (55.7%) \n  >30                                                        11 (44%)    12 (52.2%)     8 (36.4%)       31 (44.3%) \nPrimary cause by days from last study drug administration                                                          \n  <=30                                                                                                             \n    n                                                           14           11             14              39     \n    ADVERSE EVENT                                           4 (28.6%)    2 (18.2%)      6 (42.9%)       12 (30.8%) \n    PROGRESSIVE DISEASE                                     6 (42.9%)    3 (27.3%)      4 (28.6%)       13 (33.3%) \n    OTHER                                                   4 (28.6%)    6 (54.5%)      4 (28.6%)       14 (35.9%) \n  >30                                                                                                              \n    n                                                           11           12             8               31     \n    ADVERSE EVENT                                           5 (45.5%)    5 (41.7%)       4 (50%)        14 (45.2%) \n    PROGRESSIVE DISEASE                                     2 (18.2%)     3 (25%)        2 (25%)        7 (22.6%)  \n    OTHER                                                   4 (36.4%)    4 (33.3%)       2 (25%)        10 (32.3%) \n\n\n\n\n\nCodedthcaus_levels <- levels(adsl[adsl$DTHCAT == \"OTHER\", ]$DTHCAUS)\n\nlyt1 <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ARM\", split_fun = add_overall_level(\"All Patients\", first = FALSE)) %>%\n  count_values(\n    \"DTHFL\",\n    values = \"Y\",\n    .labels = c(count_fraction = \"Total number of deaths\"),\n    .formats = c(count_fraction = \"xx (xx.x%)\")\n  ) %>%\n  summarize_vars(\n    vars = c(\"DTHCAT\"),\n    var_labels = c(\"Primary cause of death\"),\n    table_names = \"primary_cause\"\n  )\n\npart1 <- build_table(lyt1, df = adsl)\n\nlyt2 <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ARM\", split_fun = add_overall_level(\"All Patients\", first = FALSE)) %>%\n  split_rows_by(\n    \"DTHCAT\",\n    split_fun = keep_split_levels(\"OTHER\"),\n    child_labels = \"hidden\"\n  ) %>%\n  count_values(\n    \"DTHCAUS\",\n    values = dthcaus_levels[5],\n    .labels = c(count_fraction = \"Post study reporting of deaths\"),\n    .formats = c(count_fraction = \"xx (xx.x%)\"),\n    .indent_mods = c(count_fraction = 2L),\n    table_names = \"post_study_deaths\"\n  ) %>%\n  count_values(\n    \"DTHCAUS\",\n    values = dthcaus_levels[-5],\n    .labels = c(count_fraction = \"All other causes\"),\n    .formats = c(count_fraction = \"xx (xx.x%)\"),\n    .indent_mods = c(count_fraction = 2L),\n    table_names = \"all_other_causes\"\n  )\n\npart2 <- build_table(lyt2, df = adsl)\n\n# Combine tables\ncol_info(part2) <- col_info(part1)\nresult <- rbind(part1, part2)\n\nresult\n\n                                     A: Drug X    B: Placebo   C: Combination   All Patients\n                                      (N=134)      (N=134)        (N=132)         (N=400)   \n————————————————————————————————————————————————————————————————————————————————————————————\nTotal number of deaths               25 (18.7%)   23 (17.2%)     22 (16.7%)      70 (17.5%) \nPrimary cause of death                                                                      \n  n                                      25           23             22              70     \n  ADVERSE EVENT                       9 (36%)     7 (30.4%)      10 (45.5%)      26 (37.1%) \n  PROGRESSIVE DISEASE                 8 (32%)     6 (26.1%)      6 (27.3%)       20 (28.6%) \n  OTHER                               8 (32%)     10 (43.5%)     6 (27.3%)       24 (34.3%) \n    Post study reporting of deaths   1 (12.5%)    2 (20.0%)      1 (16.7%)       4 (16.7%)  \n    All other causes                 7 (87.5%)    8 (80.0%)      5 (83.3%)       20 (83.3%) \n\n\n\n\n\nCodedthcaus_levels <- levels(adsl[adsl$DTHCAT == \"OTHER\", ]$DTHCAUS)\n\n# create a helper variable DTHCAUS_other for part3\nadsl <- adsl %>%\n  mutate(\n    DTHCAUS_other = ifelse(\n      DTHCAT == \"OTHER\" & DTHCAUS != \"Post-study reporting of death\", as.character(DTHCAUS), NA\n    )\n  )\nadsl$DTHCAUS_other <- factor(\n  adsl$DTHCAUS_other,\n  levels = c(\"LOST TO FOLLOW UP\", \"SUICIDE\", \"UNKNOWN\", \"MISSING\")\n)\nadsl$DTHCAUS_other <- explicit_na(adsl$DTHCAUS_other)\n\nlyt1 <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ARM\", split_fun = add_overall_level(\"All Patients\", first = FALSE)) %>%\n  count_values(\n    \"DTHFL\",\n    values = \"Y\",\n    .labels = c(count_fraction = \"Total number of deaths\"),\n    .formats = c(count_fraction = \"xx (xx.x%)\")\n  ) %>%\n  summarize_vars(vars = c(\"DTHCAT\"), var_labels = c(\"Primary cause of death\"))\n\npart1 <- build_table(lyt1, df = adsl)\n\nlyt2 <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ARM\", split_fun = add_overall_level(\"All Patients\", first = FALSE)) %>%\n  split_rows_by(\"DTHCAT\", split_fun = keep_split_levels(\"OTHER\"), child_labels = \"hidden\") %>%\n  count_values(\n    \"DTHCAUS\",\n    values = dthcaus_levels[5],\n    .labels = c(count_fraction = \"Post study reporting of deaths\"),\n    .formats = c(count_fraction = \"xx (xx.x%)\"),\n    .indent_mods = c(count_fraction = 2L),\n    table_names = \"post_study_deaths\"\n  ) %>%\n  count_values(\n    \"DTHCAUS\",\n    values = dthcaus_levels[-5],\n    .labels = c(count_fraction = \"All other causes\"),\n    .formats = c(count_fraction = \"xx (xx.x%)\"),\n    .indent_mods = c(count_fraction = 2L),\n    table_names = \"all_other_causes\"\n  )\n\npart2 <- build_table(lyt2, df = adsl)\n\nlyt3 <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ARM\", split_fun = add_overall_level(\"All Patients\", first = FALSE)) %>%\n  split_rows_by(\"DTHCAT\", split_fun = keep_split_levels(\"OTHER\"), child_labels = \"hidden\") %>%\n  summarize_vars(\n    \"DTHCAUS_other\",\n    nested = TRUE,\n    .stats = \"count_fraction\",\n    .indent_mods = c(\"count_fraction\" = 3L)\n  )\n\npart3 <- build_table(lyt3, df = adsl)\n\n# Combine tables\ncol_info(part2) <- col_info(part1)\ncol_info(part3) <- col_info(part2)\n\nresult <- rbind(part1, part2, part3)\nresult\n\n                                     A: Drug X    B: Placebo   C: Combination   All Patients\n                                      (N=134)      (N=134)        (N=132)         (N=400)   \n————————————————————————————————————————————————————————————————————————————————————————————\nTotal number of deaths               25 (18.7%)   23 (17.2%)     22 (16.7%)      70 (17.5%) \nPrimary cause of death                                                                      \n  n                                      25           23             22              70     \n  ADVERSE EVENT                       9 (36%)     7 (30.4%)      10 (45.5%)      26 (37.1%) \n  PROGRESSIVE DISEASE                 8 (32%)     6 (26.1%)      6 (27.3%)       20 (28.6%) \n  OTHER                               8 (32%)     10 (43.5%)     6 (27.3%)       24 (34.3%) \n    Post study reporting of deaths   1 (12.5%)    2 (20.0%)      1 (16.7%)       4 (16.7%)  \n    All other causes                 7 (87.5%)    8 (80.0%)      5 (83.3%)       20 (83.3%) \n      LOST TO FOLLOW UP              2 (28.6%)     2 (25%)        2 (40%)         6 (30%)   \n      SUICIDE                        2 (28.6%)     2 (25%)        1 (20%)         5 (25%)   \n      UNKNOWN                        1 (14.3%)    1 (12.5%)          0            2 (10%)   \n      MISSING                        2 (28.6%)    3 (37.5%)       2 (40%)         7 (35%)   \n\n\n\n\n\nCode# In progress\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n[1] dplyr_1.1.0      scda_0.1.5.9009  tern_0.7.10.9056 rtables_0.6.0.1 \n[5] formatters_0.4.0 magrittr_2.0.3  \n\nloaded via a namespace (and not attached):\n [1] compiler_4.2.2    pillar_1.8.1      forcats_1.0.0     tools_4.2.2      \n [5] digest_0.6.31     lattice_0.20-45   jsonlite_1.8.4    evaluate_0.20    \n [9] lifecycle_1.0.3   tibble_3.1.8      gtable_0.3.1      checkmate_2.1.0  \n[13] pkgconfig_2.0.3   rlang_1.0.6       Matrix_1.5-3      cli_3.6.0        \n[17] yaml_2.3.7        xfun_0.37         fastmap_1.1.1     withr_2.5.0      \n[21] knitr_1.42        generics_0.1.3    vctrs_0.5.2       htmlwidgets_1.6.1\n[25] grid_4.2.2        tidyselect_1.2.0  glue_1.6.2        R6_2.5.1         \n[29] fansi_1.0.4       Rdpack_2.4        survival_3.5-3    rmarkdown_2.20   \n[33] ggplot2_3.4.1     purrr_1.0.1       tidyr_1.3.0       codetools_0.2-19 \n[37] splines_4.2.2     backports_1.4.1   scales_1.2.1      htmltools_0.5.4  \n[41] rbibutils_2.2.13  colorspace_2.1-0  utf8_1.2.3        munsell_0.5.0    \n[45] broom_1.0.3      \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R              [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/tables/safety/dtht01.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "tables/safety/egt01.html",
    "href": "tables/safety/egt01.html",
    "title": "EGT01",
    "section": "",
    "text": "Data Setup\nStandard Table\nTeal\nSession Info\n\n\n\n\nCodelibrary(tern)\nlibrary(scda)\n\n# Data should be filtered for the studied Parameter (`PARAM`) and the\n# Analysis Visit (`AVISIT`). According to the GDSR template, the values for\n# the `AVISIT` reported in the EGT01 standard may be:\n# 'POST-BASELINE MAXIMUM', 'POST-BASELINE MINIMUM', 'POST-BASELINE LAST'.\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadeg <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adeg\")\n\n# Ensure character variables are converted to factors and empty strings and NAs are explicit missing levels.\nadsl <- df_explicit_na(adsl)\nadeg <- df_explicit_na(adeg)\n\nadeg_f <- adeg %>%\n  dplyr::filter(\n    PARAM == \"Heart Rate\" &\n      AVISIT != \"SCREENING\"\n  )\n\n\n\n\n\nCode# Define the split function\nsplit_fun <- drop_split_levels\n\nlyt <- basic_table() %>%\n  split_cols_by(\"ARM\") %>%\n  split_rows_by(\"AVISIT\", split_fun = split_fun, label_pos = \"topleft\", split_label = obj_label(adeg_f$AVISIT)) %>%\n  split_cols_by_multivar(\n    vars = c(\"AVAL\", \"CHG\"),\n    varlabels = c(\"Analysis Value\", \"Absolute Change from Baseline\")\n  ) %>%\n  summarize_colvars()\n\nresult <- build_table(lyt, adeg_f)\nresult\n\nAnalysis Visit                            A: Drug X                                        B: Placebo                                     C: Combination                \n                        Analysis Value   Absolute Change from Baseline   Analysis Value   Absolute Change from Baseline   Analysis Value   Absolute Change from Baseline\n————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————\nBASELINE                                                                                                                                                                \n  n                          134                       0                      134                       0                      132                       0              \n  Mean (SD)              71.4 (17.9)                  NA                  69.8 (20.7)                  NA                  69.3 (20.9)                  NA              \n  Median                     72.7                     NA                      73.4                     NA                      72.0                     NA              \n  Min - Max              9.1 - 106.9                  NA                  13.5 - 115.5                 NA                  11.6 - 115.5                 NA              \nWEEK 1 DAY 8                                                                                                                                                            \n  n                          134                      134                     134                      134                     132                      132             \n  Mean (SD)              70.2 (20.3)              -1.3 (26.0)             69.4 (20.8)              -0.4 (29.7)             68.7 (18.1)              -0.7 (27.8)         \n  Median                     70.7                    -2.2                     70.5                    -0.5                     68.6                    -0.8             \n  Min - Max              8.5 - 127.5             -51.0 - 89.2             16.9 - 129.1            -68.2 - 88.4             16.9 - 115.6            -68.2 - 67.2         \nWEEK 2 DAY 15                                                                                                                                                           \n  n                          134                      134                     134                      134                     132                      132             \n  Mean (SD)              70.3 (19.6)              -1.1 (26.3)             71.1 (20.6)              1.3 (31.4)              69.2 (18.1)              -0.1 (28.6)         \n  Median                     70.9                    -1.1                     72.5                    -0.3                     69.3                    -1.5             \n  Min - Max              17.1 - 116.3            -85.0 - 67.5             9.2 - 120.5             -73.1 - 81.4             29.6 - 120.5            -67.7 - 66.3         \nWEEK 3 DAY 22                                                                                                                                                           \n  n                          134                      134                     134                      134                     132                      132             \n  Mean (SD)              68.3 (20.2)              -3.2 (28.7)             68.9 (20.6)              -0.9 (30.1)             70.9 (20.3)              1.5 (27.3)          \n  Median                     68.8                    -2.2                     67.8                     1.2                     70.1                     0.1             \n  Min - Max              13.3 - 131.7            -81.2 - 72.6             24.0 - 130.4            -73.0 - 103.3            20.9 - 116.8            -64.5 - 72.5         \nWEEK 4 DAY 29                                                                                                                                                           \n  n                          134                      134                     134                      134                     132                      132             \n  Mean (SD)              70.1 (18.4)              -1.4 (26.6)             71.6 (20.3)              1.8 (30.3)              71.0 (20.6)              1.7 (29.6)          \n  Median                     69.3                    -4.5                     72.2                    -0.9                     70.5                     3.8             \n  Min - Max              22.3 - 116.5            -58.1 - 77.3             17.5 - 129.1            -64.3 - 85.3             10.4 - 117.3            -65.9 - 105.7        \nWEEK 5 DAY 36                                                                                                                                                           \n  n                          134                      134                     134                      134                     132                      132             \n  Mean (SD)              66.4 (19.7)              -5.0 (27.1)             71.3 (18.9)              1.4 (27.1)              71.3 (18.6)              1.9 (29.6)          \n  Median                     65.4                    -6.8                     70.9                     0.6                     73.3                     1.7             \n  Min - Max              23.9 - 110.4            -73.3 - 57.2             25.9 - 125.7            -71.2 - 67.4             23.9 - 117.2            -58.2 - 68.9         \nPOST-BASELINE MINIMUM                                                                                                                                                   \n  n                          134                      134                     134                      134                     132                      132             \n  Mean (SD)              46.2 (12.2)             -25.2 (23.2)             47.1 (14.1)             -22.7 (26.0)             47.4 (12.6)             -21.9 (24.7)         \n  Median                     47.3                    -26.1                    47.3                    -24.3                    48.2                    -24.9            \n  Min - Max               8.5 - 85.6             -85.0 - 45.9              9.2 - 83.0             -73.1 - 47.0             10.4 - 80.4             -68.2 - 45.3         \nPOST-BASELINE MAXIMUM                                                                                                                                                   \n  n                          134                      134                     134                      134                     132                      132             \n  Mean (SD)              91.7 (13.9)              20.2 (22.8)             93.5 (14.4)              23.6 (26.5)             92.6 (12.1)              23.3 (23.1)         \n  Median                     90.0                    16.6                     91.0                    22.9                     93.4                    22.1             \n  Min - Max              54.0 - 131.7            -31.1 - 89.2             63.6 - 130.4            -33.1 - 103.3            65.7 - 120.5            -28.5 - 105.7        \n\n\n\n\n\nCodelibrary(teal.modules.clinical)\nlibrary(scda)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadeg <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adeg\")\n\n# Ensure character variables are converted to factors and empty strings and NAs are explicit missing levels.\nadsl <- df_explicit_na(adsl)\nadeg <- df_explicit_na(adeg)\n\napp <- init(\n  data = cdisc_data(\n    cdisc_dataset(\"ADSL\",\n      adsl,\n      code = 'ADSL <- df_explicit_na(synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\"))'\n    ),\n    cdisc_dataset(\"ADEG\",\n      adeg,\n      code = 'ADEG <- df_explicit_na(synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adeg\"))'\n    ),\n    check = TRUE\n  ),\n  modules = modules(\n    tm_t_summary_by(\n      label = \"ECG Results and Change from Baseline by Visit\",\n      dataname = \"ADEG\",\n      arm_var = choices_selected(\n        choices = variable_choices(adsl, c(\"ARM\", \"ARMCD\")),\n        selected = \"ARM\"\n      ),\n      by_vars = choices_selected(\n        choices = variable_choices(adeg, c(\"PARAM\", \"AVISIT\")),\n        selected = c(\"AVISIT\")\n      ),\n      summarize_vars = choices_selected(\n        choices = variable_choices(adeg, c(\"AVAL\", \"CHG\")),\n        selected = c(\"AVAL\")\n      ),\n      useNA = \"ifany\",\n      paramcd = choices_selected(\n        choices = value_choices(adeg, \"PARAMCD\", \"PARAM\"),\n        selected = \"HR\"\n      ),\n      parallel_vars = TRUE\n    )\n  ),\n  filter = list(ADEG = list(AVAL = list()))\n)\n\n[INFO] 2023-03-10 05:33:15.3788 pid:5059 token:[] teal.modules.clinical Initializing tm_t_summary_by\n\nCodeshinyApp(app$ui, app$server)\n\n\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n [1] teal.modules.clinical_0.8.14.9026 teal_0.12.0.9023                 \n [3] teal.transform_0.2.0.9011         teal.data_0.1.2.9013             \n [5] shiny_1.7.4                       scda_0.1.5.9009                  \n [7] tern_0.7.10.9056                  rtables_0.6.0.1                  \n [9] formatters_0.4.0                  magrittr_2.0.3                   \n\nloaded via a namespace (and not attached):\n [1] sass_0.4.5               tidyr_1.3.0              jsonlite_1.8.4          \n [4] splines_4.2.2            R.utils_2.12.2           bslib_0.4.2             \n [7] teal.slice_0.2.0.9026    Rdpack_2.4               assertthat_0.2.1        \n[10] teal.code_0.3.0.9001     tern.gee_0.1.0.9002      yaml_2.3.7              \n[13] pillar_1.8.1             backports_1.4.1          lattice_0.20-45         \n[16] glue_1.6.2               teal.widgets_0.2.0.9024  digest_0.6.31           \n[19] promises_1.2.0.1         rbibutils_2.2.13         checkmate_2.1.0         \n[22] colorspace_2.1-0         R.oo_1.25.0              htmltools_0.5.4         \n[25] httpuv_1.6.9             Matrix_1.5-3             pkgconfig_2.0.3         \n[28] broom_1.0.3              logger_0.2.2             purrr_1.0.1             \n[31] xtable_1.8-4             mvtnorm_1.1-3            scales_1.2.1            \n[34] webshot_0.5.4            processx_3.8.0           fontawesome_0.5.0       \n[37] later_1.3.0              emmeans_1.8.4-1          tibble_3.1.8            \n[40] styler_1.9.1             farver_2.1.1             generics_0.1.3          \n[43] ggplot2_3.4.1            ellipsis_0.3.2           shinyvalidate_0.1.2     \n[46] cachem_1.0.7             withr_2.5.0              shinyjs_2.1.0           \n[49] geepack_1.3.9            cli_3.6.0                survival_3.5-3          \n[52] mime_0.12                memoise_2.0.1            ps_1.7.2                \n[55] estimability_1.4.1       evaluate_0.20            R.methodsS3_1.8.2       \n[58] fansi_1.0.4              R.cache_0.16.0           nlme_3.1-162            \n[61] MASS_7.3-58.3            forcats_1.0.0            textshaping_0.3.6       \n[64] teal.reporter_0.1.1.9013 tools_4.2.2              lifecycle_1.0.3         \n[67] munsell_0.5.0            callr_3.7.3              compiler_4.2.2          \n[70] jquerylib_0.1.4          systemfonts_1.0.4        rlang_1.0.6             \n[73] grid_4.2.2               htmlwidgets_1.6.1        labeling_0.4.2          \n[76] rmarkdown_2.20           shinyWidgets_0.7.6       gtable_0.3.1            \n[79] codetools_0.2-19         teal.logger_0.1.1.9004   R6_2.5.1                \n[82] knitr_1.42               dplyr_1.1.0              fastmap_1.1.1           \n[85] utf8_1.2.3               ragg_1.2.5               Rcpp_1.0.10             \n[88] vctrs_0.5.2              tidyselect_1.2.0         xfun_0.37               \n[91] coda_0.19-4             \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R                       [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/tables/safety/egt01.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "tables/safety/cmt02_pt.html",
    "href": "tables/safety/cmt02_pt.html",
    "title": "CMT02_PT",
    "section": "",
    "text": "Data Setup\nStandard Table\nTeal\nSession Info\n\n\n\n\nCodelibrary(dplyr)\nlibrary(tern)\nlibrary(scda)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadcm <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adcm\")\n\nadcm$CMSEQ <- as.factor(adcm$CMSEQ)\n\n# Ensure character variables are converted to factors and empty strings and NAs are explicit missing levels.\n# If you want your missing levels to show as \"No Coding Available\", please use\n# adsl <- df_explicit_na(adsl, na_level = \"No Coding Available\")\n# adcm <- df_explicit_na(adcm, na_level = \"No Coding Available\")\nadsl <- df_explicit_na(adsl)\nadcm <- df_explicit_na(adcm)\n\n# Keep only safety-evaluable patients and concomitant medications\nadsl <- adsl %>%\n  filter(SAFFL == \"Y\")\n\n# Keep only concomitant medications\nadcm <- adcm %>% filter(ATIREL == \"CONCOMITANT\")\n\n\n\n\n\nCodesplit_fun <- drop_split_levels\n\nlyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ARM\") %>%\n  add_overall_col(\"All Patients\") %>%\n  analyze_num_patients(\n    vars = \"USUBJID\",\n    count_by = \"CMSEQ\",\n    .stats = c(\"unique\", \"nonunique\"),\n    .labels = c(\n      unique = \"Total number of patients with at least one treatment\",\n      nonunique = \"Total number of treatments\"\n    ),\n    indent_mod = -1L,\n    show_labels = \"hidden\"\n  ) %>%\n  count_occurrences(vars = \"CMDECOD\") %>%\n  append_varlabels(adcm, \"CMDECOD\", indent = 0)\n\nresult <- build_table(\n  lyt = lyt,\n  df = adcm,\n  alt_counts_df = adsl\n) %>%\n  sort_at_path(\n    path = c(\"CMDECOD\"),\n    scorefun = score_occurrences\n  )\n\nresult\n\nStandardized Medication Name                            A: Drug X    B: Placebo    C: Combination   All Patients\n                                                         (N=134)       (N=134)        (N=132)         (N=400)   \n————————————————————————————————————————————————————————————————————————————————————————————————————————————————\nTotal number of patients with at least one treatment   117 (87.3%)   116 (86.6%)    116 (87.9%)     349 (87.2%) \nTotal number of treatments                                 415           414            460             1289    \nmedname C_2/2                                          52 (38.8%)    58 (43.3%)      60 (45.5%)     170 (42.5%) \nmedname B_1/4                                          52 (38.8%)    57 (42.5%)      59 (44.7%)     168 (42.0%) \nmedname A_2/3                                          53 (39.6%)    50 (37.3%)      56 (42.4%)     159 (39.8%) \nmedname C_1/2                                          51 (38.1%)    50 (37.3%)      56 (42.4%)     157 (39.2%) \nmedname B_4/4                                          50 (37.3%)    45 (33.6%)      55 (41.7%)     150 (37.5%) \nmedname A_3/3                                          45 (33.6%)    54 (40.3%)      48 (36.4%)     147 (36.8%) \n\n\n\n\n\nCodelibrary(dplyr)\nlibrary(tern)\nlibrary(scda)\nlibrary(teal.modules.clinical)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadcm <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adcm\")\n\nadcm$CMSEQ <- as.integer(adcm$CMSEQ)\n\n# Ensure character variables are converted to factors and empty strings and NAs are explicit missing levels.\n# If you want your missing levels to show as \"No Coding Available\", please use\n# adsl <- df_explicit_na(adsl, na_level = \"No Coding Available\")\n# adcm <- df_explicit_na(adcm, na_level = \"No Coding Available\")\nadsl <- df_explicit_na(adsl)\nadcm <- df_explicit_na(adcm)\n\nadcm_keys <- c(\"STUDYID\", \"USUBJID\", \"ASTDTM\", \"CMSEQ\", \"ATC1\", \"ATC2\", \"ATC3\", \"ATC4\")\n\napp <- teal::init(\n  data = cdisc_data(\n    cdisc_dataset(\"ADSL\", adsl, code = '\n                  ADSL <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\n                  ADSL <- df_explicit_na(ADSL)\n                  '),\n    cdisc_dataset(\"ADCM\", adcm,\n      code = '\n      ADCM <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adcm\")\n      ADCM$CMID <- as.factor(ADCM$CMSEQ)\n      ADCM <- df_explicit_na(ADCM)\n      ',\n      keys = adcm_keys\n    )\n  ),\n  modules = modules(\n    tm_t_mult_events(\n      label = \"Concomitant Medications by Medication Class and Preferred Name\",\n      dataname = \"ADCM\",\n      arm_var = choices_selected(c(\"ARM\", \"ARMCD\"), \"ARM\"),\n      seq_var = choices_selected(\"CMSEQ\", selected = \"CMSEQ\", fixed = TRUE),\n      hlt = choices_selected(\n        choices = variable_choices(adcm, c(\"ATC1\", \"ATC2\", \"ATC3\", \"ATC4\")),\n        selected = c(\"ATC1\")\n      ),\n      llt = choices_selected(\n        choices = variable_choices(adcm, c(\"CMDECOD\")),\n        selected = c(\"CMDECOD\")\n      ),\n      add_total = TRUE,\n      event_type = \"treatment\"\n    )\n  ),\n  filter = list(\n    ADSL = list(SAFFL = \"Y\"),\n    ADCM = list(ATIREL = \"CONCOMITANT\")\n  )\n)\n\n[INFO] 2023-03-10 05:33:42.2746 pid:5137 token:[] teal.modules.clinical Initializing tm_t_mult_events\n\nCodeshinyApp(app$ui, app$server)\n\n\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n [1] teal.modules.clinical_0.8.14.9026 teal_0.12.0.9023                 \n [3] teal.transform_0.2.0.9011         teal.data_0.1.2.9013             \n [5] shiny_1.7.4                       scda_0.1.5.9009                  \n [7] tern_0.7.10.9056                  rtables_0.6.0.1                  \n [9] formatters_0.4.0                  magrittr_2.0.3                   \n[11] dplyr_1.1.0                      \n\nloaded via a namespace (and not attached):\n [1] sass_0.4.5               tidyr_1.3.0              jsonlite_1.8.4          \n [4] splines_4.2.2            R.utils_2.12.2           bslib_0.4.2             \n [7] teal.slice_0.2.0.9026    Rdpack_2.4               assertthat_0.2.1        \n[10] teal.code_0.3.0.9001     tern.gee_0.1.0.9002      yaml_2.3.7              \n[13] pillar_1.8.1             backports_1.4.1          lattice_0.20-45         \n[16] glue_1.6.2               teal.widgets_0.2.0.9024  digest_0.6.31           \n[19] promises_1.2.0.1         rbibutils_2.2.13         checkmate_2.1.0         \n[22] colorspace_2.1-0         R.oo_1.25.0              htmltools_0.5.4         \n[25] httpuv_1.6.9             Matrix_1.5-3             pkgconfig_2.0.3         \n[28] broom_1.0.3              logger_0.2.2             purrr_1.0.1             \n[31] xtable_1.8-4             mvtnorm_1.1-3            webshot_0.5.4           \n[34] scales_1.2.1             processx_3.8.0           fontawesome_0.5.0       \n[37] later_1.3.0              emmeans_1.8.4-1          tibble_3.1.8            \n[40] styler_1.9.1             generics_0.1.3           ggplot2_3.4.1           \n[43] ellipsis_0.3.2           shinyvalidate_0.1.2      cachem_1.0.7            \n[46] withr_2.5.0              shinyjs_2.1.0            geepack_1.3.9           \n[49] cli_3.6.0                survival_3.5-3           mime_0.12               \n[52] memoise_2.0.1            ps_1.7.2                 estimability_1.4.1      \n[55] evaluate_0.20            R.methodsS3_1.8.2        fansi_1.0.4             \n[58] R.cache_0.16.0           nlme_3.1-162             MASS_7.3-58.3           \n[61] forcats_1.0.0            teal.reporter_0.1.1.9013 tools_4.2.2             \n[64] lifecycle_1.0.3          munsell_0.5.0            callr_3.7.3             \n[67] compiler_4.2.2           jquerylib_0.1.4          rlang_1.0.6             \n[70] grid_4.2.2               htmlwidgets_1.6.1        rmarkdown_2.20          \n[73] shinyWidgets_0.7.6       gtable_0.3.1             codetools_0.2-19        \n[76] teal.logger_0.1.1.9004   R6_2.5.1                 knitr_1.42              \n[79] fastmap_1.1.1            utf8_1.2.3               Rcpp_1.0.10             \n[82] vctrs_0.5.2              tidyselect_1.2.0         xfun_0.37               \n[85] coda_0.19-4             \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R                       [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/tables/safety/cmt02_pt.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "tables/safety/ext01.html",
    "href": "tables/safety/ext01.html",
    "title": "EXT01",
    "section": "",
    "text": "Data Setup\nTable with Optional Analyses\nTable with User-Specified  Categories for Missed Doses\nTeal\nSession Info\n\n\n\n\nCodelibrary(scda)\nlibrary(tern)\nlibrary(dplyr)\nlibrary(tidyr)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadex <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adex\")\n\n# Ensure character variables are converted to factors and empty strings and NAs are explicit missing levels.\nadsl <- df_explicit_na(adsl)\nadex <- df_explicit_na(adex)\n\nadex <- adex %>%\n  filter(PARCAT1 == \"OVERALL\" & PARCAT2 == \"Drug A\") %>%\n  select(STUDYID, USUBJID, ARM, PARAMCD, PARAM, AVAL) %>%\n  mutate(\n    PARAMCD = as.character(PARAMCD),\n    AVALC = \"\"\n  ) %>%\n  droplevels()\n\n# Add new param tdurd for treatment duration.\nset.seed(99)\ntdurd_adsl <- adsl %>%\n  select(STUDYID, USUBJID, ARM) %>%\n  mutate(\n    PARAMCD = \"TDURD\",\n    PARAM = \"Treatment duration (days)\",\n    AVAL = sample(1:150, size = nrow(adsl), replace = TRUE),\n    AVALC = case_when(\n      0 <= AVAL & AVAL <= 30 ~ \"0 - 30\",\n      31 <= AVAL & AVAL <= 60 ~ \"31 - 60\",\n      61 <= AVAL & AVAL <= 90 ~ \"61 - 90\",\n      TRUE ~ \">= 91\"\n    )\n  )\ntdurd <- adex %>%\n  filter(PARAMCD == \"TNDOSE\") %>%\n  select(STUDYID, USUBJID) %>%\n  left_join(tdurd_adsl, by = c(\"STUDYID\", \"USUBJID\"))\n\n# Add new param tndosmis for missed doses.\ntndosmis_adsl <- adsl %>%\n  select(STUDYID, USUBJID, ARM) %>%\n  mutate(\n    PARAMCD = \"TNDOSMIS\",\n    PARAM = \"Total number of missed doses during study\",\n    AVAL = sample(0:20, size = nrow(adsl), replace = TRUE),\n    AVALC = \"\"\n  )\ntndosmis <- adex %>%\n  filter(PARAMCD == \"TNDOSE\") %>%\n  select(STUDYID, USUBJID) %>%\n  left_join(tndosmis_adsl, by = c(\"STUDYID\", \"USUBJID\"))\n\nadex <- dplyr::bind_rows(adex, tdurd, tndosmis)\n\n\n\n\n\nCode# When summary table contains only categorical or only numeric parameters\n\nsplit_fun <- drop_split_levels\n\nlyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ARM\") %>%\n  split_rows_by(\n    \"PARAM\",\n    split_fun = split_fun\n  ) %>%\n  summarize_vars(vars = \"AVAL\")\n\nresult <- build_table(\n  lyt = lyt,\n  df = adex,\n  alt_counts_df = adsl\n)\n\nresult\n\n                                               A: Drug X        B: Placebo      C: Combination \n                                                (N=134)           (N=134)           (N=132)    \n———————————————————————————————————————————————————————————————————————————————————————————————\nTotal dose administered                                                                        \n  n                                               75                67                75       \n  Mean (SD)                                 6675.2 (1110.9)   6505.1 (1249.3)   6982.4 (1272.5)\n  Median                                        6720.0            6480.0            7200.0     \n  Min - Max                                 4800.0 - 9360.0   4080.0 - 9360.0   4320.0 - 9360.0\nTotal number of doses administered                                                             \n  n                                               75                67                75       \n  Mean (SD)                                    7.0 (0.0)         7.0 (0.0)         7.0 (0.0)   \n  Median                                          7.0               7.0               7.0      \n  Min - Max                                    7.0 - 7.0         7.0 - 7.0         7.0 - 7.0   \nTreatment duration (days)                                                                      \n  n                                               75                67                75       \n  Mean (SD)                                   74.3 (41.6)       79.0 (43.1)       74.2 (39.5)  \n  Median                                         77.0              80.0              78.0      \n  Min - Max                                   5.0 - 149.0       2.0 - 150.0       1.0 - 147.0  \nTotal number of missed doses during study                                                      \n  n                                               75                67                75       \n  Mean (SD)                                   10.5 (5.9)        10.0 (6.1)         9.5 (5.5)   \n  Median                                         10.0              11.0               9.0      \n  Min - Max                                   0.0 - 20.0        0.0 - 19.0        0.0 - 20.0   \n\n\n\nCode# When summary table contains both categorical and numeric parameters,\n# developer needs to do pre-processing to transform dataset to wide format.\nadex_avalc_wide <- adex %>%\n  filter(PARAMCD == \"TDURD\") %>%\n  select(STUDYID, USUBJID, PARAMCD, AVALC) %>%\n  tidyr::pivot_wider(\n    id_cols = c(STUDYID, USUBJID),\n    names_from = PARAMCD,\n    values_from = AVALC\n  ) %>%\n  mutate(\n    TDURDC = factor(TDURD, levels = c(\"0 - 30\", \"31 - 60\", \"61 - 90\", \">= 91\"))\n  ) %>%\n  select(-TDURD)\n\nanl <- adex %>%\n  select(STUDYID, USUBJID, ARM, PARAMCD, AVAL) %>%\n  tidyr::pivot_wider(\n    id_cols = c(STUDYID, USUBJID, ARM),\n    names_from = PARAMCD,\n    values_from = AVAL\n  ) %>%\n  left_join(adex_avalc_wide, by = c(\"STUDYID\", \"USUBJID\")) %>%\n  var_relabel(\n    TDOSE = \"Total dose administered\",\n    TNDOSE = \"Total number of doses administered\",\n    TDURD = \"Treatment duration (days)\",\n    TNDOSMIS = \"Total number of missed doses during study\",\n    TDURDC = \"Treatment duration (days)\"\n  )\n\nlyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ARM\") %>%\n  summarize_vars(\n    vars = c(\"TDURD\", \"TDURDC\", \"TDOSE\", \"TNDOSE\"),\n    var_labels = var_labels(anl)[c(\"TDURD\", \"TDURDC\", \"TDOSE\", \"TNDOSE\")]\n  )\n\nresult <- build_table(\n  lyt = lyt,\n  df = anl,\n  alt_counts_df = adsl\n)\n\nresult\n\n                                        A: Drug X        B: Placebo      C: Combination \n                                         (N=134)           (N=134)           (N=132)    \n————————————————————————————————————————————————————————————————————————————————————————\nTreatment duration (days)                                                               \n  n                                        75                67                75       \n  Mean (SD)                            74.3 (41.6)       79.0 (43.1)       74.2 (39.5)  \n  Median                                  77.0              80.0              78.0      \n  Min - Max                            5.0 - 149.0       2.0 - 150.0       1.0 - 147.0  \nTreatment duration (days)                                                               \n  n                                        75                67                75       \n  0 - 30                                12 (16%)         12 (17.9%)         15 (20%)    \n  31 - 60                               18 (24%)         12 (17.9%)        14 (18.7%)   \n  61 - 90                              19 (25.3%)        15 (22.4%)         18 (24%)    \n  >= 91                                26 (34.7%)        28 (41.8%)        28 (37.3%)   \nTotal dose administered                                                                 \n  n                                        75                67                75       \n  Mean (SD)                          6675.2 (1110.9)   6505.1 (1249.3)   6982.4 (1272.5)\n  Median                                 6720.0            6480.0            7200.0     \n  Min - Max                          4800.0 - 9360.0   4080.0 - 9360.0   4320.0 - 9360.0\nTotal number of doses administered                                                      \n  n                                        75                67                75       \n  Mean (SD)                             7.0 (0.0)         7.0 (0.0)         7.0 (0.0)   \n  Median                                   7.0               7.0               7.0      \n  Min - Max                             7.0 - 7.0         7.0 - 7.0         7.0 - 7.0   \n\n\n\n\n\nCode# When summary table contains both categorical and numeric parameters,\n# developer needs to do pre-processing to transform dataset to wide format.\nadex_avalc_wide <- adex %>%\n  filter(PARAMCD == \"TDURD\") %>%\n  select(STUDYID, USUBJID, PARAMCD, AVALC) %>%\n  tidyr::pivot_wider(\n    id_cols = c(STUDYID, USUBJID),\n    names_from = PARAMCD,\n    values_from = AVALC\n  ) %>%\n  mutate(\n    TDURDC = factor(TDURD, levels = c(\"0 - 30\", \"31 - 60\", \"61 - 90\", \">= 91\"))\n  ) %>%\n  select(-TDURD)\n\nanl <- adex %>%\n  select(STUDYID, USUBJID, ARM, PARAMCD, AVAL) %>%\n  tidyr::pivot_wider(\n    id_cols = c(STUDYID, USUBJID, ARM),\n    names_from = PARAMCD,\n    values_from = AVAL\n  ) %>%\n  left_join(adex_avalc_wide, by = c(\"STUDYID\", \"USUBJID\")) %>%\n  var_relabel(\n    TDOSE = \"Total dose administered\",\n    TNDOSE = \"Total number of doses administered\",\n    TDURD = \"Treatment duration (days)\",\n    TNDOSMIS = \"Total number of missed doses during study\",\n    TDURDC = \"Treatment duration (days)\"\n  )\n\nlyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ARM\") %>%\n  summarize_vars(\n    vars = c(\"TDURD\", \"TDURDC\", \"TDOSE\", \"TNDOSE\"),\n    var_labels = var_labels(anl)[c(\"TDURD\", \"TDURDC\", \"TDOSE\", \"TNDOSE\")]\n  ) %>%\n  count_missed_doses(\n    \"TNDOSMIS\",\n    thresholds = c(1, 5, 10, 15),\n    var_labels = \"Missed Doses\"\n  )\n\nresult <- build_table(\n  lyt = lyt,\n  df = anl,\n  alt_counts_df = adsl\n)\n\nresult\n\n                                        A: Drug X        B: Placebo      C: Combination \n                                         (N=134)           (N=134)           (N=132)    \n————————————————————————————————————————————————————————————————————————————————————————\nTreatment duration (days)                                                               \n  n                                        75                67                75       \n  Mean (SD)                            74.3 (41.6)       79.0 (43.1)       74.2 (39.5)  \n  Median                                  77.0              80.0              78.0      \n  Min - Max                            5.0 - 149.0       2.0 - 150.0       1.0 - 147.0  \nTreatment duration (days)                                                               \n  n                                        75                67                75       \n  0 - 30                                12 (16%)         12 (17.9%)         15 (20%)    \n  31 - 60                               18 (24%)         12 (17.9%)        14 (18.7%)   \n  61 - 90                              19 (25.3%)        15 (22.4%)         18 (24%)    \n  >= 91                                26 (34.7%)        28 (41.8%)        28 (37.3%)   \nTotal dose administered                                                                 \n  n                                        75                67                75       \n  Mean (SD)                          6675.2 (1110.9)   6505.1 (1249.3)   6982.4 (1272.5)\n  Median                                 6720.0            6480.0            7200.0     \n  Min - Max                          4800.0 - 9360.0   4080.0 - 9360.0   4320.0 - 9360.0\nTotal number of doses administered                                                      \n  n                                        75                67                75       \n  Mean (SD)                             7.0 (0.0)         7.0 (0.0)         7.0 (0.0)   \n  Median                                   7.0               7.0               7.0      \n  Min - Max                             7.0 - 7.0         7.0 - 7.0         7.0 - 7.0   \nMissed Doses                                                                            \n  n                                        75                67                75       \n  At least 1 missed dose               74 (55.2%)         63 (47%)         73 (55.3%)   \n  At least 5 missed doses               59 (44%)         49 (36.6%)        59 (44.7%)   \n  At least 10 missed doses             41 (30.6%)        38 (28.4%)         37 (28%)    \n  At least 15 missed doses             26 (19.4%)        21 (15.7%)        16 (12.1%)   \n\n\n\n\n\nCodelibrary(scda)\nlibrary(teal.modules.clinical)\nlibrary(dplyr)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadex <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adex\")\nadex_labels <- unname(var_labels(adex))\nadex <- adex %>%\n  filter(PARCAT1 == \"OVERALL\") %>%\n  mutate(\n    AVALCAT1 = case_when(\n      PARAMCD == \"TDOSE\" & AVAL < 5000 ~ \"LOW\",\n      PARAMCD == \"TDOSE\" & AVAL >= 5000 ~ \"HIGH\",\n      PARAMCD == \"TNDOSE\" & AVAL < 10 ~ \"< 10\",\n      PARAMCD == \"TNDOSE\" & AVAL >= 10 ~ \">= 10\"\n    )\n  )\nvar_labels(adex) <- c(adex_labels, \"\")\n\napp <- teal::init(\n  data = cdisc_data(\n    cdisc_dataset(\n      \"ADSL\",\n      adsl,\n      code = 'ADSL <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")'\n    ),\n    cdisc_dataset(\n      \"ADEX\",\n      adex,\n      code = 'ADEX <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adex\")\n      ADEX_labels <- unname(var_labels(ADEX))\n      ADEX <- ADEX %>%\n        filter(PARCAT1 == \"OVERALL\") %>%\n        mutate(\n          AVALCAT1 = case_when(\n            PARAMCD == \"TDOSE\" &  AVAL < 5000 ~  \"LOW\",\n            PARAMCD == \"TDOSE\" &  AVAL >= 5000 ~ \"HIGH\",\n            PARAMCD == \"TNDOSE\" &  AVAL < 10 ~  \"< 10\",\n            PARAMCD == \"TNDOSE\" &  AVAL >= 10 ~  \">= 10\")\n        )\n      var_labels(ADEX) <- c(ADEX_labels, \"\")'\n    ),\n    check = TRUE\n  ),\n  modules = modules(\n    tm_t_summary_by(\n      label = \"Exposure Table\",\n      dataname = \"ADEX\",\n      arm_var = choices_selected(\n        choices = variable_choices(adex, c(\"ARM\", \"ARMCD\")),\n        selected = \"ARM\"\n      ),\n      by_vars = choices_selected(\n        choices = variable_choices(adex, c(\"PARCAT2\", \"PARAM\")),\n        selected = c(\"PARCAT2\", \"PARAM\")\n      ),\n      summarize_vars = choices_selected(\n        choices = variable_choices(adex, c(\"AVAL\", \"AVALCAT1\")),\n        selected = c(\"AVAL\", \"AVALCAT1\")\n      ),\n      paramcd = choices_selected(\n        choices = value_choices(adex, \"PARAMCD\", \"PARAM\"),\n        selected = c(\"TDOSE\", \"TNDOSE\")\n      ),\n      denominator = choices_selected(\n        choices = c(\"n\", \"N\", \"omit\"),\n        selected = \"N\"\n      )\n    )\n  ), # Set initial filter state as single study drug to produce smaller table\n  filter = list(ADEX = list(PARCAT2 = \"Drug A\", AVAL = list()))\n)\n\n[INFO] 2023-03-10 05:34:19.4339 pid:5213 token:[] teal.modules.clinical Initializing tm_t_summary_by\n\nCodeshinyApp(app$ui, app$server)\n\n\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n [1] teal.modules.clinical_0.8.14.9026 teal_0.12.0.9023                 \n [3] teal.transform_0.2.0.9011         teal.data_0.1.2.9013             \n [5] shiny_1.7.4                       tidyr_1.3.0                      \n [7] dplyr_1.1.0                       tern_0.7.10.9056                 \n [9] rtables_0.6.0.1                   formatters_0.4.0                 \n[11] magrittr_2.0.3                    scda_0.1.5.9009                  \n\nloaded via a namespace (and not attached):\n [1] sass_0.4.5               jsonlite_1.8.4           splines_4.2.2           \n [4] R.utils_2.12.2           bslib_0.4.2              teal.slice_0.2.0.9026   \n [7] Rdpack_2.4               assertthat_0.2.1         teal.code_0.3.0.9001    \n[10] tern.gee_0.1.0.9002      yaml_2.3.7               pillar_1.8.1            \n[13] backports_1.4.1          lattice_0.20-45          glue_1.6.2              \n[16] teal.widgets_0.2.0.9024  digest_0.6.31            promises_1.2.0.1        \n[19] rbibutils_2.2.13         checkmate_2.1.0          colorspace_2.1-0        \n[22] R.oo_1.25.0              htmltools_0.5.4          httpuv_1.6.9            \n[25] Matrix_1.5-3             pkgconfig_2.0.3          broom_1.0.3             \n[28] logger_0.2.2             purrr_1.0.1              xtable_1.8-4            \n[31] mvtnorm_1.1-3            webshot_0.5.4            scales_1.2.1            \n[34] processx_3.8.0           fontawesome_0.5.0        later_1.3.0             \n[37] emmeans_1.8.4-1          tibble_3.1.8             styler_1.9.1            \n[40] farver_2.1.1             generics_0.1.3           ggplot2_3.4.1           \n[43] ellipsis_0.3.2           shinyvalidate_0.1.2      cachem_1.0.7            \n[46] withr_2.5.0              shinyjs_2.1.0            geepack_1.3.9           \n[49] cli_3.6.0                survival_3.5-3           mime_0.12               \n[52] memoise_2.0.1            ps_1.7.2                 estimability_1.4.1      \n[55] evaluate_0.20            R.methodsS3_1.8.2        fansi_1.0.4             \n[58] R.cache_0.16.0           nlme_3.1-162             MASS_7.3-58.3           \n[61] forcats_1.0.0            textshaping_0.3.6        teal.reporter_0.1.1.9013\n[64] tools_4.2.2              lifecycle_1.0.3          munsell_0.5.0           \n[67] callr_3.7.3              compiler_4.2.2           jquerylib_0.1.4         \n[70] systemfonts_1.0.4        rlang_1.0.6              grid_4.2.2              \n[73] htmlwidgets_1.6.1        labeling_0.4.2           rmarkdown_2.20          \n[76] shinyWidgets_0.7.6       gtable_0.3.1             codetools_0.2-19        \n[79] teal.logger_0.1.1.9004   R6_2.5.1                 knitr_1.42              \n[82] fastmap_1.1.1            utf8_1.2.3               ragg_1.2.5              \n[85] Rcpp_1.0.10              vctrs_0.5.2              tidyselect_1.2.0        \n[88] xfun_0.37                coda_0.19-4             \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R                       [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/tables/safety/ext01.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "tables/safety/vst02.html",
    "href": "tables/safety/vst02.html",
    "title": "VST02",
    "section": "",
    "text": "Data Setup\nVST02_1 – Table of Abnormalities  Regardless of Abnormality at Baseline\nVST02_2 – Table of Abnormalities Among  Subjects Without Abnormality at Baseline\nTeal\nSession Info\n\n\n\n\nCodelibrary(scda)\nlibrary(dplyr)\nlibrary(tern)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadvs <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"advs\")\n\n# Ensure character variables are converted to factors and empty strings\n# and NAs are explicit missing levels.\nadsl <- df_explicit_na(adsl)\nadvs <- df_explicit_na(advs)\n\nadvs <- advs %>%\n  mutate(\n    ONTRTFL = ifelse(AVISIT %in% c(\"SCREENING\", \"BASELINE\"), \"\", \"Y\")\n  ) %>%\n  var_relabel(\n    ONTRTFL = \"On Treatment Record Flag\"\n  )\n\n# Note:  We keep only post-baseline for analysis.\nadvs_f <- advs %>%\n  filter(ONTRTFL == \"Y\")\n\n# If you want to control which parameters in the table have only `LOW` or only `HIGH` theoretical ranges defined,\n# see `tern::h_map_for_count_abnormal` with method \"range\" or refer to the `EGT02` example.\n# For `VST02` we want to keep both directions for all parameters so we will not use `trim_levels_to_map` as the split function.\nsplit_fun <- drop_split_levels\n\n\n\n\n\nCodelyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(var = \"ARM\") %>%\n  add_overall_col(\"All Patients\") %>%\n  split_rows_by(\"PARAM\", split_fun = split_fun, label_pos = \"topleft\", split_label = obj_label(advs_f$PARAM)) %>%\n  count_abnormal(\n    \"ANRIND\",\n    abnormal = list(low = c(\"LOW\", \"LOW LOW\"), high = c(\"HIGH\", \"HIGH HIGH\")),\n    exclude_base_abn = FALSE\n  ) %>%\n  append_varlabels(advs_f, \"ANRIND\", indent = 1L)\n\nresult <- build_table(lyt = lyt, df = advs_f, alt_counts_df = adsl)\n\nresult\n\nParameter                                A: Drug X        B: Placebo     C: Combination    All Patients  \n  Analysis Reference Range Indicator      (N=134)          (N=134)          (N=132)           (N=400)    \n—————————————————————————————————————————————————————————————————————————————————————————————————————————\nDiastolic Blood Pressure                                                                                 \n  low                                  53/134 (39.6%)   57/134 (42.5%)   54/132 (40.9%)    164/400 (41%) \n  high                                 53/134 (39.6%)   51/134 (38.1%)   52/132 (39.4%)    156/400 (39%) \nPulse Rate                                                                                               \n  low                                   63/134 (47%)    53/134 (39.6%)   50/132 (37.9%)   166/400 (41.5%)\n  high                                 52/134 (38.8%)   57/134 (42.5%)   39/132 (29.5%)    148/400 (37%) \nRespiratory Rate                                                                                         \n  low                                   59/134 (44%)    49/134 (36.6%)   45/132 (34.1%)   153/400 (38.2%)\n  high                                 62/134 (46.3%)   54/134 (40.3%)    62/132 (47%)    178/400 (44.5%)\nSystolic Blood Pressure                                                                                  \n  low                                  54/134 (40.3%)    55/134 (41%)    57/132 (43.2%)   166/400 (41.5%)\n  high                                 58/134 (43.3%)   49/134 (36.6%)   52/132 (39.4%)   159/400 (39.8%)\nTemperature                                                                                              \n  low                                   59/134 (44%)    50/134 (37.3%)   61/132 (46.2%)   170/400 (42.5%)\n  high                                 45/134 (33.6%)   54/134 (40.3%)   52/132 (39.4%)   151/400 (37.8%)\nWeight                                                                                                   \n  low                                  62/134 (46.3%)   57/134 (42.5%)   63/132 (47.7%)   182/400 (45.5%)\n  high                                 54/134 (40.3%)   58/134 (43.3%)   55/132 (41.7%)   167/400 (41.8%)\n\n\n\n\n\nCodelyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(var = \"ARM\") %>%\n  add_overall_col(\"All Patients\") %>%\n  split_rows_by(\"PARAM\", split_fun = split_fun, label_pos = \"topleft\", split_label = obj_label(advs_f$PARAM)) %>%\n  count_abnormal(\n    \"ANRIND\",\n    abnormal = list(low = c(\"LOW\", \"LOW LOW\"), high = c(\"HIGH\", \"HIGH HIGH\")),\n    exclude_base_abn = TRUE\n  ) %>%\n  append_varlabels(advs_f, \"ANRIND\", indent = 1L)\n\nresult <- build_table(lyt = lyt, df = advs_f, alt_counts_df = adsl)\n\nresult\n\nParameter                                A: Drug X        B: Placebo     C: Combination    All Patients  \n  Analysis Reference Range Indicator      (N=134)          (N=134)          (N=132)           (N=400)    \n—————————————————————————————————————————————————————————————————————————————————————————————————————————\nDiastolic Blood Pressure                                                                                 \n  low                                  45/120 (37.5%)   53/121 (43.8%)   48/118 (40.7%)   146/359 (40.7%)\n  high                                 47/113 (41.6%)    48/123 (39%)    48/119 (40.3%)   143/355 (40.3%)\nPulse Rate                                                                                               \n  low                                   60/125 (48%)    49/121 (40.5%)   47/118 (39.8%)   156/364 (42.9%)\n  high                                 47/119 (39.5%)   52/119 (43.7%)   34/117 (29.1%)   133/355 (37.5%)\nRespiratory Rate                                                                                         \n  low                                  53/123 (43.1%)   45/118 (38.1%)   39/118 (33.1%)   137/359 (38.2%)\n  high                                  57/124 (46%)    52/127 (40.9%)   53/118 (44.9%)   162/369 (43.9%)\nSystolic Blood Pressure                                                                                  \n  low                                  47/116 (40.5%)   51/120 (42.5%)   51/120 (42.5%)   149/356 (41.9%)\n  high                                 55/121 (45.5%)   43/125 (34.4%)   49/124 (39.5%)   147/370 (39.7%)\nTemperature                                                                                              \n  low                                  47/119 (39.5%)    44/119 (37%)    55/115 (47.8%)   146/353 (41.4%)\n  high                                 43/128 (33.6%)   47/121 (38.8%)    50/122 (41%)    140/371 (37.7%)\nWeight                                                                                                   \n  low                                   54/120 (45%)    50/117 (42.7%)   57/119 (47.9%)   161/356 (45.2%)\n  high                                 49/123 (39.8%)   54/121 (44.6%)   47/113 (41.6%)    150/357 (42%) \n\n\n\n\n\nCodelibrary(teal.modules.clinical)\nlibrary(scda)\nlibrary(dplyr)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadvs <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"advs\") %>%\n  mutate(ONTRTFL = ifelse(AVISIT %in% c(\"SCREENING\", \"BASELINE\"), \"\", \"Y\")) %>%\n  var_relabel(ONTRTFL = \"On Treatment Record Flag\")\n\napp <- init(\n  data = cdisc_data(\n    cdisc_dataset(\"ADSL\", adsl, code = 'ADSL <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")'),\n    cdisc_dataset(\"ADVS\", advs,\n      code = 'ADVS <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"advs\") %>%\n                mutate(ONTRTFL = ifelse(AVISIT %in% c(\"SCREENING\", \"BASELINE\"), \"\", \"Y\")) %>%\n                var_relabel(ONTRTFL = \"On Treatment Record Flag\")'\n    ),\n    check = TRUE\n  ),\n  modules = modules(\n    tm_t_abnormality(\n      label = \"Abnormality Table\",\n      dataname = \"ADVS\",\n      arm_var = choices_selected(\n        choices = variable_choices(adsl, subset = c(\"ARM\", \"ARMCD\")),\n        selected = \"ARM\"\n      ),\n      by_vars = choices_selected(\n        choices = variable_choices(advs, subset = c(\"VSCAT\", \"PARAM\", \"AVISIT\")),\n        selected = c(\"PARAM\"),\n        keep_order = TRUE\n      ),\n      grade = choices_selected(\n        choices = variable_choices(advs, subset = \"ANRIND\"),\n        selected = \"ANRIND\",\n        fixed = TRUE\n      ),\n      abnormal = list(low = c(\"LOW\", \"LOW LOW\"), high = c(\"HIGH\", \"HIGH HIGH\")),\n      exclude_base_abn = FALSE\n    )\n  )\n)\n\n[INFO] 2023-03-10 05:34:40.6194 pid:5291 token:[] teal.modules.clinical Initializing tm_t_abnormality\n\nCodeshinyApp(app$ui, app$server)\n\n\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n [1] teal.modules.clinical_0.8.14.9026 teal_0.12.0.9023                 \n [3] teal.transform_0.2.0.9011         teal.data_0.1.2.9013             \n [5] shiny_1.7.4                       tern_0.7.10.9056                 \n [7] rtables_0.6.0.1                   formatters_0.4.0                 \n [9] magrittr_2.0.3                    dplyr_1.1.0                      \n[11] scda_0.1.5.9009                  \n\nloaded via a namespace (and not attached):\n [1] sass_0.4.5               tidyr_1.3.0              jsonlite_1.8.4          \n [4] splines_4.2.2            R.utils_2.12.2           bslib_0.4.2             \n [7] teal.slice_0.2.0.9026    Rdpack_2.4               assertthat_0.2.1        \n[10] teal.code_0.3.0.9001     tern.gee_0.1.0.9002      yaml_2.3.7              \n[13] pillar_1.8.1             backports_1.4.1          lattice_0.20-45         \n[16] glue_1.6.2               teal.widgets_0.2.0.9024  digest_0.6.31           \n[19] promises_1.2.0.1         rbibutils_2.2.13         checkmate_2.1.0         \n[22] colorspace_2.1-0         R.oo_1.25.0              htmltools_0.5.4         \n[25] httpuv_1.6.9             Matrix_1.5-3             pkgconfig_2.0.3         \n[28] broom_1.0.3              logger_0.2.2             purrr_1.0.1             \n[31] xtable_1.8-4             mvtnorm_1.1-3            webshot_0.5.4           \n[34] scales_1.2.1             processx_3.8.0           fontawesome_0.5.0       \n[37] later_1.3.0              emmeans_1.8.4-1          tibble_3.1.8            \n[40] styler_1.9.1             generics_0.1.3           ggplot2_3.4.1           \n[43] ellipsis_0.3.2           shinyvalidate_0.1.2      cachem_1.0.7            \n[46] withr_2.5.0              shinyjs_2.1.0            geepack_1.3.9           \n[49] cli_3.6.0                survival_3.5-3           mime_0.12               \n[52] memoise_2.0.1            ps_1.7.2                 estimability_1.4.1      \n[55] evaluate_0.20            R.methodsS3_1.8.2        fansi_1.0.4             \n[58] R.cache_0.16.0           nlme_3.1-162             MASS_7.3-58.3           \n[61] forcats_1.0.0            teal.reporter_0.1.1.9013 tools_4.2.2             \n[64] lifecycle_1.0.3          munsell_0.5.0            callr_3.7.3             \n[67] compiler_4.2.2           jquerylib_0.1.4          rlang_1.0.6             \n[70] grid_4.2.2               htmlwidgets_1.6.1        rmarkdown_2.20          \n[73] shinyWidgets_0.7.6       gtable_0.3.1             codetools_0.2-19        \n[76] teal.logger_0.1.1.9004   R6_2.5.1                 knitr_1.42              \n[79] fastmap_1.1.1            utf8_1.2.3               Rcpp_1.0.10             \n[82] vctrs_0.5.2              tidyselect_1.2.0         xfun_0.37               \n[85] coda_0.19-4             \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R                       [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/tables/safety/vst02.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "tables/safety/cmt01a.html",
    "href": "tables/safety/cmt01a.html",
    "title": "CMT01A",
    "section": "",
    "text": "Data Setup\nStandard Table,  Safety-Evaluable Patients\nTable Changing  ATC Class Level\nTable with Classes  Sorted by Frequency\nTable with Total Number of Treatments  per Medication Class Suppressed\nTeal\nSession Info\n\n\n\n\nCodelibrary(dplyr)\nlibrary(tern)\nlibrary(scda)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadcm <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adcm\")\n\nadcm$CMSEQ <- as.factor(adcm$CMSEQ)\n\n# Ensure character variables are converted to factors and empty strings and NAs are explicit missing levels.\n# If you want your missing levels to show as \"No Coding Available\", please use\n# adsl <- df_explicit_na(adsl, na_level = \"No Coding Available\")\n# adcm <- df_explicit_na(adcm, na_level = \"No Coding Available\")\nadsl <- df_explicit_na(adsl)\nadcm <- df_explicit_na(adcm)\n\n# Keep only safety-evaluable patients and concomitant medications\nadsl <- adsl %>%\n  filter(SAFFL == \"Y\")\n\nadcm <- adcm %>%\n  filter(SAFFL == \"Y\" & ATIREL == \"CONCOMITANT\")\n\n\n\n\n\nCodesplit_fun <- drop_split_levels\n\nlyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ARM\") %>%\n  analyze_num_patients(\n    vars = \"USUBJID\",\n    count_by = \"CMSEQ\",\n    .stats = c(\"unique\", \"nonunique\"),\n    .labels = c(\n      unique = \"Total number of patients with at least one treatment\",\n      nonunique = \"Total number of treatments\"\n    )\n  ) %>%\n  split_rows_by(\n    \"ATC2\",\n    child_labels = \"visible\",\n    nested = FALSE,\n    split_fun = split_fun,\n    label_pos = \"topleft\",\n    split_label = obj_label(adcm$ATC2)\n  ) %>%\n  summarize_num_patients(\n    var = \"USUBJID\",\n    count_by = \"CMSEQ\",\n    .stats = c(\"unique\", \"nonunique\"),\n    .labels = c(\n      unique = \"Total number of patients with at least one treatment\",\n      nonunique = \"Total number of treatments\"\n    )\n  ) %>%\n  count_occurrences(vars = \"CMDECOD\", .indent_mods = -1L) %>%\n  append_varlabels(adcm, \"CMDECOD\", indent = 1L)\n\nresult <- build_table(\n  lyt = lyt,\n  df = adcm,\n  alt_counts_df = adsl\n) %>%\n  prune_table() %>%\n  # Sort lowest level terms by descending frequency.\n  sort_at_path(\n    path = c(\"ATC2\", \"*\", \"CMDECOD\"),\n    scorefun = score_occurrences\n  )\n\nresult\n\nATC Level 2 Text                                          A: Drug X    B: Placebo    C: Combination\n  Standardized Medication Name                             (N=134)       (N=134)        (N=132)    \n———————————————————————————————————————————————————————————————————————————————————————————————————\nTotal number of patients with at least one treatment     117 (87.3%)   116 (86.6%)    116 (87.9%)  \nTotal number of treatments                                   415           414            460      \nATCCLAS2 A                                                                                         \n  Total number of patients with at least one treatment   75 (56.0%)    79 (59.0%)      81 (61.4%)  \n  Total number of treatments                                 134           137            143      \n  medname A_2/3                                          53 (39.6%)    50 (37.3%)      56 (42.4%)  \n  medname A_3/3                                          45 (33.6%)    54 (40.3%)      48 (36.4%)  \nATCCLAS2 A p2                                                                                      \n  Total number of patients with at least one treatment   45 (33.6%)    54 (40.3%)      48 (36.4%)  \n  Total number of treatments                                 58            66              64      \n  medname A_3/3                                          45 (33.6%)    54 (40.3%)      48 (36.4%)  \nATCCLAS2 B                                                                                         \n  Total number of patients with at least one treatment   83 (61.9%)    74 (55.2%)      88 (66.7%)  \n  Total number of treatments                                 141           137            162      \n  medname B_1/4                                          52 (38.8%)    57 (42.5%)      59 (44.7%)  \n  medname B_4/4                                          50 (37.3%)    45 (33.6%)      55 (41.7%)  \nATCCLAS2 B p2                                                                                      \n  Total number of patients with at least one treatment   52 (38.8%)    57 (42.5%)      59 (44.7%)  \n  Total number of treatments                                 75            82              83      \n  medname B_1/4                                          52 (38.8%)    57 (42.5%)      59 (44.7%)  \nATCCLAS2 B p3                                                                                      \n  Total number of patients with at least one treatment   52 (38.8%)    57 (42.5%)      59 (44.7%)  \n  Total number of treatments                                 75            82              83      \n  medname B_1/4                                          52 (38.8%)    57 (42.5%)      59 (44.7%)  \nATCCLAS2 C                                                                                         \n  Total number of patients with at least one treatment   82 (61.2%)    84 (62.7%)      89 (67.4%)  \n  Total number of treatments                                 140           140            155      \n  medname C_2/2                                          52 (38.8%)    58 (43.3%)      60 (45.5%)  \n  medname C_1/2                                          51 (38.1%)    50 (37.3%)      56 (42.4%)  \nATCCLAS2 C p2                                                                                      \n  Total number of patients with at least one treatment   82 (61.2%)    84 (62.7%)      89 (67.4%)  \n  Total number of treatments                                 140           140            155      \n  medname C_2/2                                          52 (38.8%)    58 (43.3%)      60 (45.5%)  \n  medname C_1/2                                          51 (38.1%)    50 (37.3%)      56 (42.4%)  \nATCCLAS2 C p3                                                                                      \n  Total number of patients with at least one treatment   52 (38.8%)    58 (43.3%)      60 (45.5%)  \n  Total number of treatments                                 69            73              80      \n  medname C_2/2                                          52 (38.8%)    58 (43.3%)      60 (45.5%)  \n\n\n\n\n\nCodesplit_fun <- drop_split_levels\n\nlyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ARM\") %>%\n  analyze_num_patients(\n    vars = \"USUBJID\",\n    count_by = \"CMSEQ\",\n    .stats = c(\"unique\", \"nonunique\"),\n    .labels = c(\n      unique = \"Total number of patients with at least one treatment\",\n      nonunique = \"Total number of treatments\"\n    )\n  ) %>%\n  split_rows_by(\n    \"ATC1\",\n    child_labels = \"visible\",\n    nested = FALSE,\n    split_fun = split_fun,\n    label_pos = \"topleft\",\n    split_label = obj_label(adcm$ATC1)\n  ) %>%\n  summarize_num_patients(\n    var = \"USUBJID\",\n    count_by = \"CMSEQ\",\n    .stats = c(\"unique\", \"nonunique\"),\n    .labels = c(\n      unique = \"Total number of patients with at least one treatment\",\n      nonunique = \"Total number of treatments\"\n    )\n  ) %>%\n  count_occurrences(vars = \"CMDECOD\", .indent_mods = -1L) %>%\n  append_varlabels(adcm, \"CMDECOD\", indent = 1L)\n\nresult <- build_table(\n  lyt = lyt,\n  df = adcm,\n  alt_counts_df = adsl\n) %>%\n  prune_table() %>%\n  # Sort lowest level terms by descending frequency.\n  sort_at_path(\n    path = c(\"ATC1\", \"*\", \"CMDECOD\"),\n    scorefun = score_occurrences\n  )\n\nresult\n\nATC Level 1 Text                                          A: Drug X    B: Placebo    C: Combination\n  Standardized Medication Name                             (N=134)       (N=134)        (N=132)    \n———————————————————————————————————————————————————————————————————————————————————————————————————\nTotal number of patients with at least one treatment     117 (87.3%)   116 (86.6%)    116 (87.9%)  \nTotal number of treatments                                   415           414            460      \nATCCLAS1 A                                                                                         \n  Total number of patients with at least one treatment   75 (56.0%)    79 (59.0%)      81 (61.4%)  \n  Total number of treatments                                 134           137            143      \n  medname A_2/3                                          53 (39.6%)    50 (37.3%)      56 (42.4%)  \n  medname A_3/3                                          45 (33.6%)    54 (40.3%)      48 (36.4%)  \nATCCLAS1 A p2                                                                                      \n  Total number of patients with at least one treatment   45 (33.6%)    54 (40.3%)      48 (36.4%)  \n  Total number of treatments                                 58            66              64      \n  medname A_3/3                                          45 (33.6%)    54 (40.3%)      48 (36.4%)  \nATCCLAS1 B                                                                                         \n  Total number of patients with at least one treatment   83 (61.9%)    74 (55.2%)      88 (66.7%)  \n  Total number of treatments                                 141           137            162      \n  medname B_1/4                                          52 (38.8%)    57 (42.5%)      59 (44.7%)  \n  medname B_4/4                                          50 (37.3%)    45 (33.6%)      55 (41.7%)  \nATCCLAS1 B p2                                                                                      \n  Total number of patients with at least one treatment   52 (38.8%)    57 (42.5%)      59 (44.7%)  \n  Total number of treatments                                 75            82              83      \n  medname B_1/4                                          52 (38.8%)    57 (42.5%)      59 (44.7%)  \nATCCLAS1 B p3                                                                                      \n  Total number of patients with at least one treatment   52 (38.8%)    57 (42.5%)      59 (44.7%)  \n  Total number of treatments                                 75            82              83      \n  medname B_1/4                                          52 (38.8%)    57 (42.5%)      59 (44.7%)  \nATCCLAS1 C                                                                                         \n  Total number of patients with at least one treatment   82 (61.2%)    84 (62.7%)      89 (67.4%)  \n  Total number of treatments                                 140           140            155      \n  medname C_2/2                                          52 (38.8%)    58 (43.3%)      60 (45.5%)  \n  medname C_1/2                                          51 (38.1%)    50 (37.3%)      56 (42.4%)  \nATCCLAS1 C p2                                                                                      \n  Total number of patients with at least one treatment   82 (61.2%)    84 (62.7%)      89 (67.4%)  \n  Total number of treatments                                 140           140            155      \n  medname C_2/2                                          52 (38.8%)    58 (43.3%)      60 (45.5%)  \n  medname C_1/2                                          51 (38.1%)    50 (37.3%)      56 (42.4%)  \nATCCLAS1 C p3                                                                                      \n  Total number of patients with at least one treatment   52 (38.8%)    58 (43.3%)      60 (45.5%)  \n  Total number of treatments                                 69            73              80      \n  medname C_2/2                                          52 (38.8%)    58 (43.3%)      60 (45.5%)  \n\n\n\n\n\nCodesplit_fun <- drop_split_levels\n\nlyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ARM\") %>%\n  analyze_num_patients(\n    vars = \"USUBJID\",\n    count_by = \"CMSEQ\",\n    .stats = c(\"unique\", \"nonunique\"),\n    .labels = c(\n      unique = \"Total number of patients with at least one treatment\",\n      nonunique = \"Total number of treatments\"\n    )\n  ) %>%\n  split_rows_by(\n    \"ATC2\",\n    child_labels = \"visible\",\n    nested = FALSE,\n    split_fun = split_fun,\n    label_pos = \"topleft\",\n    split_label = obj_label(adcm$ATC2)\n  ) %>%\n  summarize_num_patients(\n    var = \"USUBJID\",\n    count_by = \"CMSEQ\",\n    .stats = c(\"unique\", \"nonunique\"),\n    .labels = c(\n      unique = \"Total number of patients with at least one treatment\",\n      nonunique = \"Total number of treatments\"\n    )\n  ) %>%\n  count_occurrences(vars = \"CMDECOD\", .indent_mods = -1L) %>%\n  append_varlabels(adcm, \"CMDECOD\", indent = 1L)\n\nresult <- build_table(\n  lyt = lyt,\n  df = adcm,\n  alt_counts_df = adsl\n) %>%\n  prune_table() %>%\n  sort_at_path(path = c(\"ATC2\"), scorefun = cont_n_allcols) %>%\n  sort_at_path(path = c(\"ATC2\", \"*\", \"CMDECOD\"), scorefun = score_occurrences)\n\nresult\n\nATC Level 2 Text                                          A: Drug X    B: Placebo    C: Combination\n  Standardized Medication Name                             (N=134)       (N=134)        (N=132)    \n———————————————————————————————————————————————————————————————————————————————————————————————————\nTotal number of patients with at least one treatment     117 (87.3%)   116 (86.6%)    116 (87.9%)  \nTotal number of treatments                                   415           414            460      \nATCCLAS2 C                                                                                         \n  Total number of patients with at least one treatment   82 (61.2%)    84 (62.7%)      89 (67.4%)  \n  Total number of treatments                                 140           140            155      \n  medname C_2/2                                          52 (38.8%)    58 (43.3%)      60 (45.5%)  \n  medname C_1/2                                          51 (38.1%)    50 (37.3%)      56 (42.4%)  \nATCCLAS2 C p2                                                                                      \n  Total number of patients with at least one treatment   82 (61.2%)    84 (62.7%)      89 (67.4%)  \n  Total number of treatments                                 140           140            155      \n  medname C_2/2                                          52 (38.8%)    58 (43.3%)      60 (45.5%)  \n  medname C_1/2                                          51 (38.1%)    50 (37.3%)      56 (42.4%)  \nATCCLAS2 B                                                                                         \n  Total number of patients with at least one treatment   83 (61.9%)    74 (55.2%)      88 (66.7%)  \n  Total number of treatments                                 141           137            162      \n  medname B_1/4                                          52 (38.8%)    57 (42.5%)      59 (44.7%)  \n  medname B_4/4                                          50 (37.3%)    45 (33.6%)      55 (41.7%)  \nATCCLAS2 A                                                                                         \n  Total number of patients with at least one treatment   75 (56.0%)    79 (59.0%)      81 (61.4%)  \n  Total number of treatments                                 134           137            143      \n  medname A_2/3                                          53 (39.6%)    50 (37.3%)      56 (42.4%)  \n  medname A_3/3                                          45 (33.6%)    54 (40.3%)      48 (36.4%)  \nATCCLAS2 C p3                                                                                      \n  Total number of patients with at least one treatment   52 (38.8%)    58 (43.3%)      60 (45.5%)  \n  Total number of treatments                                 69            73              80      \n  medname C_2/2                                          52 (38.8%)    58 (43.3%)      60 (45.5%)  \nATCCLAS2 B p2                                                                                      \n  Total number of patients with at least one treatment   52 (38.8%)    57 (42.5%)      59 (44.7%)  \n  Total number of treatments                                 75            82              83      \n  medname B_1/4                                          52 (38.8%)    57 (42.5%)      59 (44.7%)  \nATCCLAS2 B p3                                                                                      \n  Total number of patients with at least one treatment   52 (38.8%)    57 (42.5%)      59 (44.7%)  \n  Total number of treatments                                 75            82              83      \n  medname B_1/4                                          52 (38.8%)    57 (42.5%)      59 (44.7%)  \nATCCLAS2 A p2                                                                                      \n  Total number of patients with at least one treatment   45 (33.6%)    54 (40.3%)      48 (36.4%)  \n  Total number of treatments                                 58            66              64      \n  medname A_3/3                                          45 (33.6%)    54 (40.3%)      48 (36.4%)  \n\n\n\n\n\nCodesplit_fun <- drop_split_levels\n\nlyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ARM\") %>%\n  analyze_num_patients(\n    vars = \"USUBJID\",\n    count_by = \"CMSEQ\",\n    .stats = c(\"unique\", \"nonunique\"),\n    .labels = c(\n      unique = \"Total number of patients with at least one treatment\",\n      nonunique = \"Total number of treatments\"\n    )\n  ) %>%\n  split_rows_by(\n    \"ATC2\",\n    child_labels = \"visible\",\n    nested = FALSE,\n    split_fun = split_fun,\n    label_pos = \"topleft\",\n    split_label = obj_label(adcm$ATC2)\n  ) %>%\n  summarize_num_patients(\n    var = \"USUBJID\",\n    count_by = \"CMSEQ\",\n    .stats = c(\"unique\"),\n    .labels = c(\n      unique = \"Total number of patients with at least one treatment\"\n    )\n  ) %>%\n  count_occurrences(vars = \"CMDECOD\", .indent_mods = -1L) %>%\n  append_varlabels(adcm, \"CMDECOD\", indent = 1L)\n\nresult <- build_table(\n  lyt = lyt,\n  df = adcm,\n  alt_counts_df = adsl\n) %>%\n  prune_table() %>%\n  # Sort lowest level terms by descending frequency.\n  sort_at_path(\n    path = c(\"ATC2\", \"*\", \"CMDECOD\"),\n    scorefun = score_occurrences\n  )\n\nresult\n\nATC Level 2 Text                                          A: Drug X    B: Placebo    C: Combination\n  Standardized Medication Name                             (N=134)       (N=134)        (N=132)    \n———————————————————————————————————————————————————————————————————————————————————————————————————\nTotal number of patients with at least one treatment     117 (87.3%)   116 (86.6%)    116 (87.9%)  \nTotal number of treatments                                   415           414            460      \nATCCLAS2 A                                                                                         \n  Total number of patients with at least one treatment   75 (56.0%)    79 (59.0%)      81 (61.4%)  \n  medname A_2/3                                          53 (39.6%)    50 (37.3%)      56 (42.4%)  \n  medname A_3/3                                          45 (33.6%)    54 (40.3%)      48 (36.4%)  \nATCCLAS2 A p2                                                                                      \n  Total number of patients with at least one treatment   45 (33.6%)    54 (40.3%)      48 (36.4%)  \n  medname A_3/3                                          45 (33.6%)    54 (40.3%)      48 (36.4%)  \nATCCLAS2 B                                                                                         \n  Total number of patients with at least one treatment   83 (61.9%)    74 (55.2%)      88 (66.7%)  \n  medname B_1/4                                          52 (38.8%)    57 (42.5%)      59 (44.7%)  \n  medname B_4/4                                          50 (37.3%)    45 (33.6%)      55 (41.7%)  \nATCCLAS2 B p2                                                                                      \n  Total number of patients with at least one treatment   52 (38.8%)    57 (42.5%)      59 (44.7%)  \n  medname B_1/4                                          52 (38.8%)    57 (42.5%)      59 (44.7%)  \nATCCLAS2 B p3                                                                                      \n  Total number of patients with at least one treatment   52 (38.8%)    57 (42.5%)      59 (44.7%)  \n  medname B_1/4                                          52 (38.8%)    57 (42.5%)      59 (44.7%)  \nATCCLAS2 C                                                                                         \n  Total number of patients with at least one treatment   82 (61.2%)    84 (62.7%)      89 (67.4%)  \n  medname C_2/2                                          52 (38.8%)    58 (43.3%)      60 (45.5%)  \n  medname C_1/2                                          51 (38.1%)    50 (37.3%)      56 (42.4%)  \nATCCLAS2 C p2                                                                                      \n  Total number of patients with at least one treatment   82 (61.2%)    84 (62.7%)      89 (67.4%)  \n  medname C_2/2                                          52 (38.8%)    58 (43.3%)      60 (45.5%)  \n  medname C_1/2                                          51 (38.1%)    50 (37.3%)      56 (42.4%)  \nATCCLAS2 C p3                                                                                      \n  Total number of patients with at least one treatment   52 (38.8%)    58 (43.3%)      60 (45.5%)  \n  medname C_2/2                                          52 (38.8%)    58 (43.3%)      60 (45.5%)  \n\n\n\n\n\nCodelibrary(dplyr)\nlibrary(tern)\nlibrary(scda)\nlibrary(teal.modules.clinical)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadcm <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adcm\")\nadcm$CMSEQ <- as.integer(adcm$CMSEQ)\n\n# Ensure character variables are converted to factors and empty strings and NAs are explicit missing levels.\n# If you want your missing levels to show as \"No Coding Available\", please use\n# adsl <- df_explicit_na(adsl, na_level = \"No Coding Available\")\n# adcm <- df_explicit_na(adcm, na_level = \"No Coding Available\")\nadsl <- df_explicit_na(adsl)\nadcm <- df_explicit_na(adcm)\n\nadcm_keys <- c(\"STUDYID\", \"USUBJID\", \"ASTDTM\", \"CMSEQ\", \"ATC1\", \"ATC2\", \"ATC3\", \"ATC4\")\n\napp <- teal::init(\n  data = cdisc_data(\n    cdisc_dataset(\"ADSL\", adsl, code = '\n                  ADSL <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\n                  ADSL <- df_explicit_na(ADSL)\n                  '),\n    cdisc_dataset(\"ADCM\", adcm,\n      code = '\n      ADCM <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adcm\")\n      ADCM$CMSEQ <- as.factor(ADCM$CMSEQ)\n      ADCM <- df_explicit_na(ADCM)\n      ',\n      keys = adcm_keys\n    )\n  ),\n  modules = modules(\n    tm_t_mult_events(\n      label = \"Concomitant Medications by Medication Class and Preferred Name\",\n      dataname = \"ADCM\",\n      arm_var = choices_selected(c(\"ARM\", \"ARMCD\"), \"ARM\"),\n      seq_var = choices_selected(\"CMSEQ\", selected = \"CMSEQ\", fixed = TRUE),\n      hlt = choices_selected(\n        choices = variable_choices(adcm, c(\"ATC1\", \"ATC2\", \"ATC3\", \"ATC4\")),\n        selected = c(\"ATC2\")\n      ),\n      llt = choices_selected(\n        choices = variable_choices(adcm, c(\"CMDECOD\")),\n        selected = c(\"CMDECOD\")\n      ),\n      add_total = FALSE,\n      event_type = \"treatment\"\n    )\n  ),\n  filter = list(\n    ADSL = list(SAFFL = \"Y\"),\n    ADCM = list(ATIREL = \"CONCOMITANT\")\n  )\n)\n\n[INFO] 2023-03-10 05:35:05.8065 pid:5367 token:[] teal.modules.clinical Initializing tm_t_mult_events\n\nCodeshinyApp(app$ui, app$server)\n\n\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n [1] teal.modules.clinical_0.8.14.9026 teal_0.12.0.9023                 \n [3] teal.transform_0.2.0.9011         teal.data_0.1.2.9013             \n [5] shiny_1.7.4                       scda_0.1.5.9009                  \n [7] tern_0.7.10.9056                  rtables_0.6.0.1                  \n [9] formatters_0.4.0                  magrittr_2.0.3                   \n[11] dplyr_1.1.0                      \n\nloaded via a namespace (and not attached):\n [1] sass_0.4.5               tidyr_1.3.0              jsonlite_1.8.4          \n [4] splines_4.2.2            R.utils_2.12.2           bslib_0.4.2             \n [7] teal.slice_0.2.0.9026    Rdpack_2.4               assertthat_0.2.1        \n[10] teal.code_0.3.0.9001     tern.gee_0.1.0.9002      yaml_2.3.7              \n[13] pillar_1.8.1             backports_1.4.1          lattice_0.20-45         \n[16] glue_1.6.2               teal.widgets_0.2.0.9024  digest_0.6.31           \n[19] promises_1.2.0.1         rbibutils_2.2.13         checkmate_2.1.0         \n[22] colorspace_2.1-0         R.oo_1.25.0              htmltools_0.5.4         \n[25] httpuv_1.6.9             Matrix_1.5-3             pkgconfig_2.0.3         \n[28] broom_1.0.3              logger_0.2.2             purrr_1.0.1             \n[31] xtable_1.8-4             mvtnorm_1.1-3            webshot_0.5.4           \n[34] scales_1.2.1             processx_3.8.0           fontawesome_0.5.0       \n[37] later_1.3.0              emmeans_1.8.4-1          tibble_3.1.8            \n[40] styler_1.9.1             generics_0.1.3           ggplot2_3.4.1           \n[43] ellipsis_0.3.2           shinyvalidate_0.1.2      cachem_1.0.7            \n[46] withr_2.5.0              shinyjs_2.1.0            geepack_1.3.9           \n[49] cli_3.6.0                survival_3.5-3           mime_0.12               \n[52] memoise_2.0.1            ps_1.7.2                 estimability_1.4.1      \n[55] evaluate_0.20            R.methodsS3_1.8.2        fansi_1.0.4             \n[58] R.cache_0.16.0           nlme_3.1-162             MASS_7.3-58.3           \n[61] forcats_1.0.0            teal.reporter_0.1.1.9013 tools_4.2.2             \n[64] lifecycle_1.0.3          munsell_0.5.0            callr_3.7.3             \n[67] compiler_4.2.2           jquerylib_0.1.4          rlang_1.0.6             \n[70] grid_4.2.2               htmlwidgets_1.6.1        rmarkdown_2.20          \n[73] shinyWidgets_0.7.6       gtable_0.3.1             codetools_0.2-19        \n[76] teal.logger_0.1.1.9004   R6_2.5.1                 knitr_1.42              \n[79] fastmap_1.1.1            utf8_1.2.3               Rcpp_1.0.10             \n[82] vctrs_0.5.2              tidyselect_1.2.0         xfun_0.37               \n[85] coda_0.19-4             \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R                       [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/tables/safety/cmt01a.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "tables/safety/egt02.html",
    "href": "tables/safety/egt02.html",
    "title": "EGT02",
    "section": "",
    "text": "Data Setup\nECG Abnormalities Regardless  of Abnormality at Baseline\nECG Abnormalities Among Subjects  Without Abnormality at Baseline\nTeal\nSession Info\n\n\n\n\nCodelibrary(dplyr)\nlibrary(scda)\nlibrary(tern)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadeg <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adeg\")\n\n# Ensure character variables are converted to factors and empty strings and NAs are explicit missing levels.\nadsl <- df_explicit_na(adsl)\nadeg <- df_explicit_na(adeg)\n\nadeg <- adeg %>%\n  mutate(\n    ONTRTFL = ifelse(AVISIT %in% c(\"SCREENING\", \"BASELINE\"), \"\", \"Y\")\n  ) %>%\n  var_relabel(\n    ONTRTFL = \"On Treatment Record Flag\"\n  )\n\n# Note:  We keep only post-baseline for analysis.\nadeg_f <- adeg %>%\n  filter(ONTRTFL == \"Y\") %>%\n  filter(PARAM %in% c(\"Heart Rate\", \"QT Duration\", \"RR Duration\"))\n\nmap <- h_map_for_count_abnormal(\n  df = adeg_f,\n  variables = list(anl = \"ANRIND\", split_rows = \"PARAM\", range_low = \"ANRLO\", range_high = \"ANRHI\"),\n  abnormal = list(low = \"LOW\", high = \"HIGH\"),\n  method = \"range\",\n  na_level = \"<Missing>\"\n)\n\n\n\n\n\nCodesplit_fun <- trim_levels_to_map(map = map)\n\nlyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(var = \"ARM\") %>%\n  split_rows_by(\n    \"PARAM\",\n    split_fun = split_fun,\n    label_pos = \"topleft\",\n    split_label = obj_label(adeg_f$PARAM)\n  ) %>%\n  count_abnormal(\"ANRIND\", abnormal = list(low = \"LOW\", high = \"HIGH\"), exclude_base_abn = FALSE) %>%\n  append_varlabels(adeg_f, \"ANRIND\", indent = 1L)\n\n\nresult <- build_table(lyt = lyt, df = adeg_f, alt_counts_df = adsl)\nresult\n\nParameter                                A: Drug X        B: Placebo     C: Combination\n  Analysis Reference Range Indicator      (N=134)          (N=134)          (N=132)    \n———————————————————————————————————————————————————————————————————————————————————————\nHeart Rate                                                                             \n  low                                  40/134 (29.9%)   43/134 (32.1%)    37/132 (28%) \n  high                                 39/134 (29.1%)   45/134 (33.6%)   36/132 (27.3%)\nQT Duration                                                                            \n  low                                  33/134 (24.6%)   44/134 (32.8%)   47/132 (35.6%)\n  high                                 30/134 (22.4%)   42/134 (31.3%)   34/132 (25.8%)\nRR Duration                                                                            \n  low                                  45/134 (33.6%)   26/134 (19.4%)   38/132 (28.8%)\n  high                                 29/134 (21.6%)   49/134 (36.6%)   27/132 (20.5%)\n\n\n\n\n\nCodesplit_fun <- trim_levels_to_map(map = map)\n\nlyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(var = \"ARM\") %>%\n  split_rows_by(\n    \"PARAM\",\n    split_fun = split_fun,\n    label_pos = \"topleft\",\n    split_label = obj_label(adeg_f$PARAM)\n  ) %>%\n  count_abnormal(\"ANRIND\", abnormal = list(low = \"LOW\", high = \"HIGH\"), exclude_base_abn = TRUE) %>%\n  append_varlabels(adeg_f, \"ANRIND\", indent = 1L)\n\nresult <- build_table(lyt = lyt, df = adeg_f, alt_counts_df = adsl)\nresult\n\nParameter                                A: Drug X        B: Placebo     C: Combination\n  Analysis Reference Range Indicator      (N=134)          (N=134)          (N=132)    \n———————————————————————————————————————————————————————————————————————————————————————\nHeart Rate                                                                             \n  low                                  39/128 (30.5%)   42/124 (33.9%)   33/117 (28.2%)\n  high                                 37/127 (29.1%)   43/129 (33.3%)   31/122 (25.4%)\nQT Duration                                                                            \n  low                                  29/113 (25.7%)   42/126 (33.3%)   43/124 (34.7%)\n  high                                  30/125 (24%)    40/130 (30.8%)   30/119 (25.2%)\nRR Duration                                                                            \n  low                                  45/129 (34.9%)   26/123 (21.1%)   37/126 (29.4%)\n  high                                 27/127 (21.3%)   43/122 (35.2%)    25/125 (20%) \n\n\n\n\n\nCodelibrary(scda)\nlibrary(teal.modules.clinical)\nlibrary(dplyr)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadeg <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adeg\") %>%\n  mutate(\n    ONTRTFL = ifelse(AVISIT %in% c(\"SCREENING\", \"BASELINE\"), \"\", \"Y\")\n  ) %>%\n  var_relabel(\n    ONTRTFL = \"On Treatment Record Flag\"\n  )\n\napp <- init(\n  data = cdisc_data(\n    cdisc_dataset(\"ADSL\", adsl, code = 'ADSL <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")'),\n    cdisc_dataset(\"ADEG\", adeg,\n      code = 'ADEG <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adeg\") %>%\n                mutate(\n                  ONTRTFL = ifelse(AVISIT %in% c(\"SCREENING\", \"BASELINE\"), \"\", \"Y\")\n                ) %>%\n                var_relabel(\n                  ONTRTFL = \"On Treatment Record Flag\"\n                )'\n    ),\n    check = TRUE\n  ),\n  modules = modules(\n    tm_t_abnormality(\n      label = \"Abnormality Table\",\n      dataname = \"ADEG\",\n      arm_var = choices_selected(\n        choices = variable_choices(adsl, subset = c(\"ARM\", \"ARMCD\")),\n        selected = \"ARM\"\n      ),\n      by_vars = choices_selected(\n        choices = variable_choices(adeg, subset = c(\"EGCAT\", \"PARAM\", \"AVISIT\")),\n        selected = c(\"PARAM\"),\n        keep_order = TRUE\n      ),\n      grade = choices_selected(\n        choices = variable_choices(adeg, subset = \"ANRIND\"),\n        selected = \"ANRIND\",\n        fixed = TRUE\n      ),\n      abnormal = list(low = \"LOW\", high = \"HIGH\"),\n      exclude_base_abn = FALSE\n    )\n  )\n)\n\n[INFO] 2023-03-10 05:35:28.7865 pid:5443 token:[] teal.modules.clinical Initializing tm_t_abnormality\n\nCodeshinyApp(app$ui, app$server)\n\n\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n [1] teal.modules.clinical_0.8.14.9026 teal_0.12.0.9023                 \n [3] teal.transform_0.2.0.9011         teal.data_0.1.2.9013             \n [5] shiny_1.7.4                       tern_0.7.10.9056                 \n [7] rtables_0.6.0.1                   formatters_0.4.0                 \n [9] magrittr_2.0.3                    scda_0.1.5.9009                  \n[11] dplyr_1.1.0                      \n\nloaded via a namespace (and not attached):\n [1] sass_0.4.5               tidyr_1.3.0              jsonlite_1.8.4          \n [4] splines_4.2.2            R.utils_2.12.2           bslib_0.4.2             \n [7] teal.slice_0.2.0.9026    Rdpack_2.4               assertthat_0.2.1        \n[10] teal.code_0.3.0.9001     tern.gee_0.1.0.9002      yaml_2.3.7              \n[13] pillar_1.8.1             backports_1.4.1          lattice_0.20-45         \n[16] glue_1.6.2               teal.widgets_0.2.0.9024  digest_0.6.31           \n[19] promises_1.2.0.1         rbibutils_2.2.13         checkmate_2.1.0         \n[22] colorspace_2.1-0         R.oo_1.25.0              htmltools_0.5.4         \n[25] httpuv_1.6.9             Matrix_1.5-3             pkgconfig_2.0.3         \n[28] broom_1.0.3              logger_0.2.2             purrr_1.0.1             \n[31] xtable_1.8-4             mvtnorm_1.1-3            webshot_0.5.4           \n[34] scales_1.2.1             processx_3.8.0           fontawesome_0.5.0       \n[37] later_1.3.0              emmeans_1.8.4-1          tibble_3.1.8            \n[40] styler_1.9.1             generics_0.1.3           ggplot2_3.4.1           \n[43] ellipsis_0.3.2           shinyvalidate_0.1.2      cachem_1.0.7            \n[46] withr_2.5.0              shinyjs_2.1.0            geepack_1.3.9           \n[49] cli_3.6.0                survival_3.5-3           mime_0.12               \n[52] memoise_2.0.1            ps_1.7.2                 estimability_1.4.1      \n[55] evaluate_0.20            R.methodsS3_1.8.2        fansi_1.0.4             \n[58] R.cache_0.16.0           nlme_3.1-162             MASS_7.3-58.3           \n[61] forcats_1.0.0            teal.reporter_0.1.1.9013 tools_4.2.2             \n[64] lifecycle_1.0.3          munsell_0.5.0            callr_3.7.3             \n[67] compiler_4.2.2           jquerylib_0.1.4          rlang_1.0.6             \n[70] grid_4.2.2               htmlwidgets_1.6.1        rmarkdown_2.20          \n[73] shinyWidgets_0.7.6       gtable_0.3.1             codetools_0.2-19        \n[76] teal.logger_0.1.1.9004   R6_2.5.1                 knitr_1.42              \n[79] fastmap_1.1.1            utf8_1.2.3               Rcpp_1.0.10             \n[82] vctrs_0.5.2              tidyselect_1.2.0         xfun_0.37               \n[85] coda_0.19-4             \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R                       [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/tables/safety/egt02.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "tables/other/aovt02.html",
    "href": "tables/other/aovt02.html",
    "title": "AOVT02",
    "section": "",
    "text": "This example will focus on data from a single visit “WEEK 1 DAY 8” and a single endpoint “FKSI-FWB”. Only evaluable populations will be analyzed.\n\n\nData Setup\nStandard Table\nTeal\nSession Info\n\n\n\n\nCodelibrary(scda)\nlibrary(tern)\nlibrary(dplyr)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadqs <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adqs\")\n\n# Ensure character variables are converted to factors and empty strings and NAs are explicit missing levels.\nadsl <- df_explicit_na(adsl)\nadqs <- df_explicit_na(adqs)\n\nadqs_single <- adqs %>%\n  filter(\n    AVISIT == \"WEEK 1 DAY 8\",\n    PARAMCD == \"FKSI-FWB\"\n  ) %>%\n  mutate(CHG = ifelse(BMEASIFL == \"Y\", CHG, NA))\n\n\n\n\n\nCodelyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ARMCD\", ref_group = \"ARM A\") %>%\n  append_varlabels(adqs_single, \"PARAM\") %>%\n  summarize_ancova(\n    vars = \"CHG\",\n    variables = list(arm = \"ARMCD\", covariates = NULL),\n    conf_level = 0.95,\n    var_labels = \"Unadjusted comparison\",\n    .labels = c(lsmean = \"Mean\", lsmean_diff = \"Difference in Means\"),\n    table_names = \"unadjusted\"\n  ) %>%\n  summarize_ancova(\n    vars = \"CHG\",\n    variables = list(arm = \"ARMCD\", covariates = c(\"BASE\", \"STRATA1\")),\n    conf_level = 0.95,\n    var_labels = \"Adjusted comparison (covariates BASE and STRATA1)\",\n    table_names = \"adjusted\"\n  )\n\nresult <- build_table(\n  lyt = lyt,\n  df = adqs_single,\n  alt_counts_df = adsl\n)\n\nresult\n\nParameter                                            ARM A        ARM B           ARM C    \n                                                    (N=134)      (N=134)         (N=132)   \n———————————————————————————————————————————————————————————————————————————————————————————\nUnadjusted comparison                                                                      \n  n                                                   68           73              62      \n  Mean                                               3.68         5.07            3.09     \n  Difference in Means                                             1.38            -0.59    \n    95% CI                                                    (-2.76, 5.53)   (-4.91, 3.73)\n    p-value                                                      0.5113          0.7873    \nAdjusted comparison (covariates BASE and STRATA1)                                          \n  n                                                   68           73              62      \n  Adjusted Mean                                      4.06         3.57            3.34     \n  Difference in Adjusted Means                                    -0.49           -0.72    \n    95% CI                                                    (-3.28, 2.29)   (-3.57, 2.12)\n    p-value                                                      0.7277          0.6165    \n\n\n\n\n\nCodelibrary(teal)\nlibrary(scda)\nlibrary(teal.modules.clinical)\nlibrary(tern)\nlibrary(dplyr)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadqs <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adqs\")\n\n# Ensure character variables are converted to factors and empty strings and NAs are explicit missing levels.\nadsl <- df_explicit_na(adsl)\nadqs <- df_explicit_na(adqs)\n\narm_ref_comp <- list(\n  ARM = list(\n    ref = \"B: Placebo\",\n    comp = c(\"A: Drug X\", \"C: Combination\")\n  ),\n  ACTARMCD = list(\n    ref = \"ARM B\",\n    comp = c(\"ARM A\", \"ARM C\")\n  )\n)\n\napp <- init(\n  data = cdisc_data(\n    cdisc_dataset(\"ADSL\", adsl),\n    cdisc_dataset(\"ADQS\", adqs),\n    code =\n      'ADSL <- df_explicit_na(synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\"))\n       ADQS <- df_explicit_na(synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adqs\"))',\n    check = TRUE\n  ),\n  modules = modules(\n    tm_t_ancova(\n      label = \"ANCOVA table\",\n      dataname = \"ADQS\",\n      avisit = choices_selected(\n        choices = value_choices(adqs, \"AVISIT\"),\n        selected = \"WEEK 1 DAY 8\"\n      ),\n      arm_var = choices_selected(\n        choices = variable_choices(adsl, c(\"ARM\", \"ACTARMCD\")),\n        selected = \"ARM\"\n      ),\n      arm_ref_comp = arm_ref_comp,\n      aval_var = choices_selected(\n        choices = variable_choices(adqs, c(\"CHG\", \"AVAL\")),\n        selected = \"CHG\"\n      ),\n      cov_var = choices_selected(\n        choices = variable_choices(adqs, c(\"BASE\", \"STRATA1\", \"SEX\")),\n        selected = \"STRATA1\"\n      ),\n      paramcd = choices_selected(\n        choices = value_choices(adqs, \"PARAMCD\", \"PARAM\"),\n        selected = \"FKSI-FWB\"\n      )\n    )\n  )\n)\n\n[INFO] 2023-03-10 05:36:00.2860 pid:5519 token:[] teal.modules.clinical Initializing tm_t_ancova\n\nCodeshinyApp(app$ui, app$server)\n\n\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n [1] teal.modules.clinical_0.8.14.9026 teal_0.12.0.9023                 \n [3] teal.transform_0.2.0.9011         teal.data_0.1.2.9013             \n [5] shiny_1.7.4                       dplyr_1.1.0                      \n [7] tern_0.7.10.9056                  rtables_0.6.0.1                  \n [9] formatters_0.4.0                  magrittr_2.0.3                   \n[11] scda_0.1.5.9009                  \n\nloaded via a namespace (and not attached):\n [1] sass_0.4.5               tidyr_1.3.0              jsonlite_1.8.4          \n [4] splines_4.2.2            R.utils_2.12.2           bslib_0.4.2             \n [7] teal.slice_0.2.0.9026    Rdpack_2.4               assertthat_0.2.1        \n[10] teal.code_0.3.0.9001     tern.gee_0.1.0.9002      yaml_2.3.7              \n[13] pillar_1.8.1             backports_1.4.1          lattice_0.20-45         \n[16] glue_1.6.2               teal.widgets_0.2.0.9024  digest_0.6.31           \n[19] promises_1.2.0.1         rbibutils_2.2.13         checkmate_2.1.0         \n[22] colorspace_2.1-0         R.oo_1.25.0              htmltools_0.5.4         \n[25] httpuv_1.6.9             Matrix_1.5-3             pkgconfig_2.0.3         \n[28] broom_1.0.3              logger_0.2.2             purrr_1.0.1             \n[31] xtable_1.8-4             mvtnorm_1.1-3            webshot_0.5.4           \n[34] scales_1.2.1             processx_3.8.0           fontawesome_0.5.0       \n[37] later_1.3.0              emmeans_1.8.4-1          tibble_3.1.8            \n[40] styler_1.9.1             generics_0.1.3           ggplot2_3.4.1           \n[43] ellipsis_0.3.2           shinyvalidate_0.1.2      cachem_1.0.7            \n[46] withr_2.5.0              shinyjs_2.1.0            geepack_1.3.9           \n[49] cli_3.6.0                survival_3.5-3           mime_0.12               \n[52] memoise_2.0.1            ps_1.7.2                 estimability_1.4.1      \n[55] evaluate_0.20            R.methodsS3_1.8.2        fansi_1.0.4             \n[58] R.cache_0.16.0           nlme_3.1-162             MASS_7.3-58.3           \n[61] forcats_1.0.0            teal.reporter_0.1.1.9013 tools_4.2.2             \n[64] lifecycle_1.0.3          munsell_0.5.0            callr_3.7.3             \n[67] compiler_4.2.2           jquerylib_0.1.4          rlang_1.0.6             \n[70] grid_4.2.2               htmlwidgets_1.6.1        rmarkdown_2.20          \n[73] shinyWidgets_0.7.6       gtable_0.3.1             codetools_0.2-19        \n[76] teal.logger_0.1.1.9004   R6_2.5.1                 knitr_1.42              \n[79] fastmap_1.1.1            utf8_1.2.3               Rcpp_1.0.10             \n[82] vctrs_0.5.2              tidyselect_1.2.0         xfun_0.37               \n[85] coda_0.19-4             \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R                       [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/tables/other/aovt02.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "tables/other/rmpt05.html",
    "href": "tables/other/rmpt05.html",
    "title": "RMPT05",
    "section": "",
    "text": "Data Setup\nStandard Table\nTeal\nSession Info\n\n\n\n\nCodelibrary(tern)\nlibrary(scda)\nlibrary(dplyr)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadex <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adex\")\n\n# Ensure character variables are converted to factors and empty strings and NAs are explicit missing levels.\nadsl <- df_explicit_na(adsl)\nadex <- df_explicit_na(adex)\n\n# Simulate ADEX records with PARAMCD == \"TDURD\" as they are not in the sample dataset.\nset.seed(1)\nadex2 <- adex %>%\n  distinct(USUBJID, .keep_all = TRUE) %>%\n  mutate(\n    PARAMCD = \"TDURD\",\n    PARAM = \"Overall duration (days)\",\n    AVAL = sample(x = seq(1, 200), size = n(), replace = TRUE)\n  ) %>%\n  bind_rows(adex)\n\n# Now pre-processing steps are carried out.\nanl <- adex2 %>%\n  filter(\n    PARAMCD == \"TDURD\",\n    PARCAT2 == \"Drug A\",\n    SAFFL == \"Y\"\n  ) %>%\n  mutate()\n\nadsl_f <- adsl %>% filter(adsl$SAFFL == \"Y\")\n\n\n\n\n\nCodelyt <- basic_table(\n  title = \"Extent of Exposure by Race: Safety-Evaluable Patients\",\n  main_footer = \"* Person time is the sum of exposure across all patients in unit: days.\",\n  show_colcounts = TRUE\n) %>%\n  summarize_patients_exposure_in_cols(\n    var = \"AVAL\", col_split = TRUE,\n    .labels = c(n_patients = \"Patients\", sum_exposure = \"Person time*\")\n  ) %>%\n  split_rows_by(\"RACE\", label_pos = \"topleft\", split_label = obj_label(adex$RACE)) %>%\n  summarize_patients_exposure_in_cols(\n    var = \"AVAL\",\n    col_split = FALSE\n  )\n\nresult <- build_table(lyt, df = anl, alt_counts_df = adsl_f)\nresult\n\nExtent of Exposure by Race: Safety-Evaluable Patients\n\n————————————————————————————————————————————————————————————————————————\nRace                                           Patients     Person time*\n                                                (N=400)       (N=400)   \n————————————————————————————————————————————————————————————————————————\nTotal patients numbers/person time            217 (54.2%)      20641    \n  ASIAN                                       113 (28.2%)      10239    \n  BLACK OR AFRICAN AMERICAN                   48 (12.0%)        4481    \n  WHITE                                       40 (10.0%)        4237    \n  AMERICAN INDIAN OR ALASKA NATIVE             14 (3.5%)        1566    \n  MULTIPLE                                     1 (0.2%)          58     \n  NATIVE HAWAIIAN OR OTHER PACIFIC ISLANDER    1 (0.2%)          60     \n  OTHER                                        0 (0.0%)          0      \n  UNKNOWN                                      0 (0.0%)          0      \n————————————————————————————————————————————————————————————————————————\n\n* Person time is the sum of exposure across all patients in unit: days.\n\n\n\n\n\nCodelibrary(scda)\nlibrary(dplyr)\nlibrary(teal.modules.clinical)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadex <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adex\")\nlabels <- var_labels(adex)\n\nset.seed(1, kind = \"Mersenne-Twister\")\nadex <- adex %>%\n  distinct(USUBJID, .keep_all = TRUE) %>%\n  mutate(\n    PARAMCD = \"TDURD\",\n    PARAM = \"Overall duration (days)\",\n    AVAL = sample(x = seq(1, 200), size = n(), replace = TRUE),\n    AVALU = \"Days\"\n  ) %>%\n  bind_rows(adex)\n\nvar_labels(adex) <- labels\n\napp <- init(\n  data = cdisc_data(\n    cdisc_dataset(\"ADSL\", adsl, code = 'ADSL <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")'),\n    cdisc_dataset(\"ADEX\", adex,\n      code = 'ADEX <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adex\")\n  labels <- var_labels(ADEX)\n  set.seed(1, kind = \"Mersenne-Twister\")\n  ADEX <- ADEX %>%\n    distinct(USUBJID, .keep_all = TRUE) %>%\n    mutate(PARAMCD = \"TDURD\",\n           PARAM = \"Overall duration (days)\",\n           AVAL = sample(x = seq(1, 200), size = n(), replace = TRUE),\n           AVALU = \"Days\") %>%\n    bind_rows(ADEX)\n  var_labels(ADEX) <- labels'\n    ),\n    check = TRUE\n  ),\n  modules = modules(\n    tm_t_exposure(\n      label = \"Duration of Exposure Table\",\n      dataname = \"ADEX\",\n      paramcd = choices_selected(\n        choices = value_choices(adex, \"PARAMCD\", \"PARAM\"),\n        selected = \"TDURD\"\n      ),\n      col_by_var = choices_selected(\n        choices = variable_choices(adex, subset = c(\"SEX\", \"ARM\")),\n        selected = NULL\n      ),\n      row_by_var = choices_selected(\n        choices = variable_choices(adex, subset = c(\"RACE\", \"STRATA1\", \"SEX\")),\n        selected = \"RACE\"\n      ),\n      parcat = choices_selected(\n        choices = value_choices(adex, \"PARCAT2\"),\n        selected = \"Drug A\"\n      ),\n      add_total = FALSE\n    )\n  ),\n  filter = list(\n    ADSL = list(SAFFL = \"Y\")\n  )\n)\n\n[INFO] 2023-03-10 05:36:32.8128 pid:5597 token:[] teal.modules.clinical Initializing tm_t_exposure\n\nCodeshinyApp(app$ui, app$server)\n\n\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n [1] teal.modules.clinical_0.8.14.9026 teal_0.12.0.9023                 \n [3] teal.transform_0.2.0.9011         teal.data_0.1.2.9013             \n [5] shiny_1.7.4                       dplyr_1.1.0                      \n [7] scda_0.1.5.9009                   tern_0.7.10.9056                 \n [9] rtables_0.6.0.1                   formatters_0.4.0                 \n[11] magrittr_2.0.3                   \n\nloaded via a namespace (and not attached):\n [1] sass_0.4.5               tidyr_1.3.0              jsonlite_1.8.4          \n [4] splines_4.2.2            R.utils_2.12.2           bslib_0.4.2             \n [7] teal.slice_0.2.0.9026    Rdpack_2.4               assertthat_0.2.1        \n[10] teal.code_0.3.0.9001     tern.gee_0.1.0.9002      yaml_2.3.7              \n[13] pillar_1.8.1             backports_1.4.1          lattice_0.20-45         \n[16] glue_1.6.2               teal.widgets_0.2.0.9024  digest_0.6.31           \n[19] promises_1.2.0.1         rbibutils_2.2.13         checkmate_2.1.0         \n[22] colorspace_2.1-0         R.oo_1.25.0              htmltools_0.5.4         \n[25] httpuv_1.6.9             Matrix_1.5-3             pkgconfig_2.0.3         \n[28] broom_1.0.3              logger_0.2.2             purrr_1.0.1             \n[31] xtable_1.8-4             mvtnorm_1.1-3            scales_1.2.1            \n[34] webshot_0.5.4            processx_3.8.0           fontawesome_0.5.0       \n[37] later_1.3.0              emmeans_1.8.4-1          tibble_3.1.8            \n[40] styler_1.9.1             generics_0.1.3           ggplot2_3.4.1           \n[43] ellipsis_0.3.2           shinyvalidate_0.1.2      cachem_1.0.7            \n[46] withr_2.5.0              shinyjs_2.1.0            geepack_1.3.9           \n[49] cli_3.6.0                survival_3.5-3           mime_0.12               \n[52] memoise_2.0.1            ps_1.7.2                 estimability_1.4.1      \n[55] evaluate_0.20            R.methodsS3_1.8.2        fansi_1.0.4             \n[58] R.cache_0.16.0           nlme_3.1-162             MASS_7.3-58.3           \n[61] forcats_1.0.0            teal.reporter_0.1.1.9013 tools_4.2.2             \n[64] lifecycle_1.0.3          munsell_0.5.0            callr_3.7.3             \n[67] compiler_4.2.2           jquerylib_0.1.4          rlang_1.0.6             \n[70] grid_4.2.2               htmlwidgets_1.6.1        rmarkdown_2.20          \n[73] shinyWidgets_0.7.6       gtable_0.3.1             codetools_0.2-19        \n[76] teal.logger_0.1.1.9004   R6_2.5.1                 knitr_1.42              \n[79] fastmap_1.1.1            utf8_1.2.3               Rcpp_1.0.10             \n[82] vctrs_0.5.2              tidyselect_1.2.0         xfun_0.37               \n[85] coda_0.19-4             \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R                       [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/tables/other/rmpt05.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "tables/other/rmpt01.html",
    "href": "tables/other/rmpt01.html",
    "title": "RMPT01",
    "section": "",
    "text": "Data Setup\nStandard Table\nTeal\nSession Info\n\n\n\n\nCodelibrary(tern)\nlibrary(scda)\nlibrary(dplyr)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadex <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adex\")\n\n# Ensure character variables are converted to factors and empty strings and NAs are explicit missing levels.\nadsl <- df_explicit_na(adsl)\nadex <- df_explicit_na(adex)\n\n# Simulate ADEX records with PARAMCD == \"TDURD\" as they are not in sample scda dataset.\nset.seed(1, kind = \"Mersenne-Twister\")\nadex2 <- adex %>%\n  distinct(USUBJID, .keep_all = TRUE) %>%\n  mutate(\n    PARAMCD = \"TDURD\",\n    PARAM = \"Overall duration (days)\",\n    AVAL = sample(x = seq(1, 200), size = n(), replace = TRUE)\n  ) %>%\n  bind_rows(adex)\n\n# Now pre-processing steps are carried out.\nanl <- adex2 %>%\n  filter(\n    PARAMCD == \"TDURD\",\n    PARCAT2 == \"Drug A\",\n    SAFFL == \"Y\"\n  ) %>%\n  mutate(\n    aval_months = day2month(AVAL),\n    aval_months_cat = factor(case_when(\n      aval_months < 1 ~ \"< 1 month\",\n      aval_months >= 1 & aval_months < 3 ~ \"1 to <3 months\",\n      aval_months >= 3 & aval_months < 6 ~ \"3 to <6 months\",\n      TRUE ~ \">=6 months\"\n    ), levels = c(\"< 1 month\", \"1 to <3 months\", \"3 to <6 months\", \">=6 months\"))\n  )\n\nadsl_f <- adsl %>% filter(adsl$SAFFL == \"Y\")\n\n\n\n\n\nCodelyt <- basic_table(\n  title = \"Duration of Exposure: Safety-Evaluable Patients\",\n  main_footer = \"* Patient Time is the sum of exposure across all patients in days.\",\n  show_colcounts = TRUE\n) %>%\n  summarize_patients_exposure_in_cols(\n    var = \"AVAL\", col_split = TRUE,\n    .labels = c(n_patients = \"Number of Patients\", sum_exposure = \"Patient Time*\"),\n    custom_label = \"Total Number of Patients and Patient Time\"\n  ) %>%\n  split_rows_by(\"aval_months_cat\", label_pos = \"topleft\", split_label = \"Duration of exposure\") %>%\n  summarize_patients_exposure_in_cols(\n    var = \"AVAL\",\n    col_split = FALSE\n  )\n\nresult <- build_table(lyt, df = anl, alt_counts_df = adsl_f)\nresult\n\nDuration of Exposure: Safety-Evaluable Patients\n\n——————————————————————————————————————————————————————————————————————————————\nDuration of exposure                        Number of Patients   Patient Time*\n                                                 (N=400)            (N=400)   \n——————————————————————————————————————————————————————————————————————————————\nTotal Number of Patients and Patient Time      217 (54.2%)           20641    \n  < 1 month                                     28 (7.0%)             504     \n  1 to <3 months                                79 (19.8%)           4727     \n  3 to <6 months                               101 (25.2%)           13690    \n  >=6 months                                     9 (2.2%)            1720     \n——————————————————————————————————————————————————————————————————————————————\n\n* Patient Time is the sum of exposure across all patients in days.\n\n\n\n\n\nCodelibrary(scda)\nlibrary(dplyr)\nlibrary(teal.modules.clinical)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadex <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adex\")\n\nlabels <- var_labels(adex)\nset.seed(1, kind = \"Mersenne-Twister\")\nadex <- adex %>%\n  distinct(USUBJID, .keep_all = TRUE) %>%\n  mutate(\n    PARAMCD = \"TDURD\",\n    PARAM = \"Overall duration (days)\",\n    AVAL = sample(x = seq(1, 200), size = n(), replace = TRUE),\n    AVALU = \"Days\"\n  ) %>%\n  bind_rows(adex)\n\nadex <- adex %>%\n  mutate(\n    aval_months = day2month(AVAL),\n    aval_months_cat = factor(case_when(\n      aval_months < 1 ~ \"< 1 month\",\n      aval_months >= 1 & aval_months < 3 ~ \"1 to <3 months\",\n      aval_months >= 3 & aval_months < 6 ~ \"3 to <6 months\",\n      TRUE ~ \">=6 months\"\n    ), levels = c(\"< 1 month\", \"1 to <3 months\", \"3 to <6 months\", \">=6 months\"))\n  ) %>%\n  select(-aval_months)\n\nvar_labels(adex) <- c(labels, \"Overall duration\")\n\napp <- init(\n  data = cdisc_data(\n    cdisc_dataset(\"ADSL\", adsl, code = 'ADSL <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")'),\n    cdisc_dataset(\"ADEX\", adex, code = 'ADEX <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adex\")\n    labels <- var_labels(ADEX)\n    set.seed(1, kind = \"Mersenne-Twister\")\n    ADEX <- ADEX %>%\n      distinct(USUBJID, .keep_all = TRUE) %>%\n      mutate(PARAMCD = \"TDURD\",\n             PARAM = \"Overall duration (days)\",\n             AVAL = sample(\n             x = seq(1, 200), size = n(), replace = TRUE\n             ),\n             AVALU = \"Days\") %>%\n      bind_rows(ADEX)\n\n    ADEX <-ADEX %>%\n      mutate(\n        aval_months = day2month(AVAL),\n        aval_months_cat = factor(case_when(\n          aval_months < 1 ~ \"< 1 month\",\n          aval_months >= 1 & aval_months < 3 ~ \"1 to <3 months\",\n          aval_months >= 3 & aval_months < 6 ~ \"3 to <6 months\",\n          TRUE ~ \">=6 months\"\n        ), levels = c(\"< 1 month\", \"1 to <3 months\", \"3 to <6 months\", \">=6 months\"))) %>%\n      select(-aval_months)\n\n    var_labels(ADEX) <- c(labels, \"Overall duration\")'),\n    check = TRUE\n  ),\n  modules = modules(\n    tm_t_exposure(\n      label = \"Duration of Exposure Table\",\n      dataname = \"ADEX\",\n      paramcd = choices_selected(\n        choices = value_choices(adex, \"PARAMCD\", \"PARAM\"),\n        selected = \"TDURD\"\n      ),\n      col_by_var = choices_selected(\n        choices = variable_choices(adex, subset = c(\"SEX\", \"ARM\")),\n        selected = NULL\n      ),\n      row_by_var = choices_selected(\n        choices = variable_choices(adex, subset = c(\"aval_months_cat\", \"RACE\", \"STRATA1\", \"SEX\")),\n        selected = \"aval_months_cat\"\n      ),\n      parcat = choices_selected(\n        choices = value_choices(adex, \"PARCAT2\"),\n        selected = \"Drug A\"\n      ),\n      add_total = FALSE\n    )\n  ),\n  filter = list(\n    ADSL = list(SAFFL = \"Y\")\n  )\n)\n\n[INFO] 2023-03-10 05:36:54.6369 pid:5673 token:[] teal.modules.clinical Initializing tm_t_exposure\n\nCodeshinyApp(app$ui, app$server)\n\n\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n [1] teal.modules.clinical_0.8.14.9026 teal_0.12.0.9023                 \n [3] teal.transform_0.2.0.9011         teal.data_0.1.2.9013             \n [5] shiny_1.7.4                       dplyr_1.1.0                      \n [7] scda_0.1.5.9009                   tern_0.7.10.9056                 \n [9] rtables_0.6.0.1                   formatters_0.4.0                 \n[11] magrittr_2.0.3                   \n\nloaded via a namespace (and not attached):\n [1] sass_0.4.5               tidyr_1.3.0              jsonlite_1.8.4          \n [4] splines_4.2.2            R.utils_2.12.2           bslib_0.4.2             \n [7] teal.slice_0.2.0.9026    Rdpack_2.4               assertthat_0.2.1        \n[10] teal.code_0.3.0.9001     tern.gee_0.1.0.9002      yaml_2.3.7              \n[13] pillar_1.8.1             backports_1.4.1          lattice_0.20-45         \n[16] glue_1.6.2               teal.widgets_0.2.0.9024  digest_0.6.31           \n[19] promises_1.2.0.1         rbibutils_2.2.13         checkmate_2.1.0         \n[22] colorspace_2.1-0         R.oo_1.25.0              htmltools_0.5.4         \n[25] httpuv_1.6.9             Matrix_1.5-3             pkgconfig_2.0.3         \n[28] broom_1.0.3              logger_0.2.2             purrr_1.0.1             \n[31] xtable_1.8-4             mvtnorm_1.1-3            scales_1.2.1            \n[34] webshot_0.5.4            processx_3.8.0           fontawesome_0.5.0       \n[37] later_1.3.0              emmeans_1.8.4-1          tibble_3.1.8            \n[40] styler_1.9.1             generics_0.1.3           ggplot2_3.4.1           \n[43] ellipsis_0.3.2           shinyvalidate_0.1.2      cachem_1.0.7            \n[46] withr_2.5.0              shinyjs_2.1.0            geepack_1.3.9           \n[49] cli_3.6.0                survival_3.5-3           mime_0.12               \n[52] memoise_2.0.1            ps_1.7.2                 estimability_1.4.1      \n[55] evaluate_0.20            R.methodsS3_1.8.2        fansi_1.0.4             \n[58] R.cache_0.16.0           nlme_3.1-162             MASS_7.3-58.3           \n[61] forcats_1.0.0            teal.reporter_0.1.1.9013 tools_4.2.2             \n[64] lifecycle_1.0.3          munsell_0.5.0            callr_3.7.3             \n[67] compiler_4.2.2           jquerylib_0.1.4          rlang_1.0.6             \n[70] grid_4.2.2               htmlwidgets_1.6.1        rmarkdown_2.20          \n[73] shinyWidgets_0.7.6       gtable_0.3.1             codetools_0.2-19        \n[76] teal.logger_0.1.1.9004   R6_2.5.1                 knitr_1.42              \n[79] fastmap_1.1.1            utf8_1.2.3               Rcpp_1.0.10             \n[82] vctrs_0.5.2              tidyselect_1.2.0         xfun_0.37               \n[85] coda_0.19-4             \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R                       [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/tables/other/rmpt01.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "tables/other/rmpt03.html",
    "href": "tables/other/rmpt03.html",
    "title": "RMPT03",
    "section": "",
    "text": "Data Setup\nStandard Table\nTable Modifying Age Groups\nTeal\nSession Info\n\n\n\n\nCodelibrary(tern)\nlibrary(scda)\nlibrary(dplyr)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadex <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adex\")\n\n# Ensure character variables are converted to factors and empty strings and NAs are explicit missing levels.\nadsl <- df_explicit_na(adsl)\nadex <- df_explicit_na(adex)\n\n# Simulate ADEX records with PARAMCD == \"TDURD\" as they are not in sample scda dataset.\nset.seed(1, kind = \"Mersenne-Twister\")\nadex2 <- adex %>%\n  distinct(USUBJID, .keep_all = TRUE) %>%\n  mutate(\n    PARAMCD = \"TDURD\",\n    PARAM = \"Overall duration (days)\",\n    AVAL = sample(x = seq(1, 200), size = n(), replace = TRUE)\n  ) %>%\n  bind_rows(adex)\n\n# Now pre-processing steps are carried out.\nanl <- adex2 %>%\n  filter(\n    PARAMCD == \"TDURD\",\n    PARCAT2 == \"Drug A\",\n    SAFFL == \"Y\"\n  ) %>%\n  mutate(\n    AGEGR1 = factor(ifelse(AGE < 65, \"<65\", \">=65\")),\n    AGEGR2 = factor(case_when(\n      AGE < 18 ~ \"< 18\",\n      AGE >= 18 & AGE <= 40 ~ \"18 - 40\",\n      AGE > 40 & AGE <= 64 ~ \"41 - 64\",\n      TRUE ~ \">=65\"\n    ), levels = c(\"< 18\", \"18 - 40\", \"41 - 64\", \">=65\")),\n    SEX = factor(case_when(\n      SEX == \"F\" ~ \"Female\",\n      SEX == \"M\" ~ \"Male\"\n    ))\n  )\n\nadsl_f <- adsl %>%\n  filter(adsl$SAFFL == \"Y\") %>%\n  mutate(SEX = factor(case_when(\n    SEX == \"F\" ~ \"Female\",\n    SEX == \"M\" ~ \"Male\"\n  )))\n\n\n\n\n\nCodelyt <- basic_table(\n  title = \"Extent of Exposure by Age Group and Gender: Safety-Evaluable Patients\",\n  main_footer = \"* Patient Time is the sum of exposure across all patients in days.\"\n) %>%\n  split_cols_by(\"SEX\", split_fun = add_overall_level(\"Total\", first = FALSE)) %>%\n  summarize_patients_exposure_in_cols(\n    var = \"AVAL\", col_split = TRUE,\n    .labels = c(n_patients = \"Number of Patients\", sum_exposure = \"Patient Time*\"),\n    custom_label = \"Total Number of Patients and Patient Time\"\n  ) %>%\n  split_rows_by(\"AGEGR1\", label_pos = \"topleft\", split_label = \"Age group (years)\") %>%\n  summarize_patients_exposure_in_cols(\n    var = \"AVAL\",\n    col_split = FALSE\n  )\n\nresult <- build_table(lyt, df = anl, alt_counts_df = adsl_f)\nresult\n\nExtent of Exposure by Age Group and Gender: Safety-Evaluable Patients\n\n————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————\nAge group (years)                                         Female                                Male                                Total               \n                                            Number of Patients   Patient Time*   Number of Patients   Patient Time*   Number of Patients   Patient Time*\n————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————\nTotal Number of Patients and Patient Time      134 (58.0%)           12591           83 (49.1%)           8050           217 (54.2%)           20641    \n  <65                                          134 (58.0%)           12591           82 (48.5%)           7970           216 (54.0%)           20561    \n  >=65                                           0 (0.0%)              0              1 (0.6%)             80              1 (0.2%)             80      \n————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————\n\n* Patient Time is the sum of exposure across all patients in days.\n\n\n\n\n\nCodelyt <- basic_table(\n  title = \"Duration of Exposure: Safety-Evaluable Patients\",\n  main_footer = \"* Patient Time is the sum of exposure across all patients in days.\"\n) %>%\n  split_cols_by(\"SEX\", split_fun = add_overall_level(\"Total\", first = FALSE)) %>%\n  summarize_patients_exposure_in_cols(\n    var = \"AVAL\", col_split = TRUE,\n    .labels = c(n_patients = \"Number of Patients\", sum_exposure = \"Patient Time*\"),\n    custom_label = \"Total Number of Patients and Patient Time\"\n  ) %>%\n  split_rows_by(\"AGEGR2\",\n    split_fun = drop_split_levels, # \"< 18\" dropped\n    label_pos = \"topleft\", split_label = \"Age group (years)\"\n  ) %>%\n  summarize_patients_exposure_in_cols(\n    var = \"AVAL\",\n    col_split = FALSE\n  )\n\nresult <- build_table(lyt, df = anl, alt_counts_df = adsl_f)\nresult\n\nDuration of Exposure: Safety-Evaluable Patients\n\n————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————\nAge group (years)                                         Female                                Male                                Total               \n                                            Number of Patients   Patient Time*   Number of Patients   Patient Time*   Number of Patients   Patient Time*\n————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————\nTotal Number of Patients and Patient Time      134 (58.0%)           12591           83 (49.1%)           8050           217 (54.2%)           20641    \n  18 - 40                                      118 (51.1%)           11203           60 (35.5%)           5787           178 (44.5%)           16990    \n  41 - 64                                       16 (6.9%)            1388            22 (13.0%)           2183            38 (9.5%)            3571     \n  >=65                                           0 (0.0%)              0              1 (0.6%)             80              1 (0.2%)             80      \n————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————\n\n* Patient Time is the sum of exposure across all patients in days.\n\n\n\n\n\nCodelibrary(scda)\nlibrary(dplyr)\nlibrary(teal.modules.clinical)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadex <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adex\")\nset.seed(1, kind = \"Mersenne-Twister\")\n\nlabels <- var_labels(adex)\nadex <- adex %>%\n  distinct(USUBJID, .keep_all = TRUE) %>%\n  mutate(\n    PARAMCD = \"TDURD\",\n    PARAM = \"Overall duration (days)\",\n    AVAL = sample(x = seq(1, 200), size = n(), replace = TRUE),\n    AVALU = \"Days\"\n  ) %>%\n  bind_rows(adex)\n\nadex <- adex %>%\n  mutate(\n    AGEGR1 = factor(ifelse(AGE < 65, \"<65\", \">=65\")),\n    AGEGR2 = factor(case_when(\n      AGE < 18 ~ \"< 18\",\n      AGE >= 18 & AGE <= 40 ~ \"18 - 40\",\n      AGE > 40 & AGE <= 64 ~ \"41 - 64\",\n      TRUE ~ \">=65\"\n    ), levels = c(\"< 18\", \"18 - 40\", \"41 - 64\", \">=65\")),\n    SEX = factor(case_when(\n      SEX == \"F\" ~ \"Female\",\n      SEX == \"M\" ~ \"Male\"\n    ))\n  )\n\nvar_labels(adex) <- c(labels, \"Age group (years)\", \"Age group (years)\")\n\nadsl <- adsl %>%\n  mutate(SEX = factor(case_when(\n    SEX == \"F\" ~ \"Female\",\n    SEX == \"M\" ~ \"Male\"\n  )))\n\napp <- init(\n  data = cdisc_data(\n    cdisc_dataset(\"ADSL\", adsl, code = 'ADSL <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\n  ADSL <- ADSL %>% filter(ADSL$SAFFL == \"Y\") %>%\n  mutate(SEX = factor(case_when(\n    SEX == \"F\" ~ \"Female\",\n    SEX == \"M\" ~ \"Male\"\n  )))'),\n    cdisc_dataset(\"ADEX\", adex, code = 'ADEX <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adex\")\n  set.seed(1, kind = \"Mersenne-Twister\")\n  labels <- var_labels(ADEX)\n  ADEX <- ADEX %>%\n    distinct(USUBJID, .keep_all = TRUE) %>%\n    mutate(PARAMCD = \"TDURD\",\n           PARAM = \"Overall duration (days)\",\n           AVAL = sample(x = seq(1, 200), size = n(), replace = TRUE),\n           AVALU = \"Days\") %>%\n    bind_rows(ADEX)\n\n  ADEX <- ADEX %>%\n    mutate(\n      AGEGR1 = factor(ifelse(AGE < 65, \"<65\", \">=65\")),\n      AGEGR2 = factor(case_when(\n        AGE < 18 ~ \"< 18\",\n        AGE >= 18 & AGE <= 40 ~ \"18 - 40\",\n        AGE > 40 & AGE <= 64 ~ \"41 - 64\",\n        TRUE ~ \">=65\"\n      ), levels = c(\"< 18\", \"18 - 40\", \"41 - 64\", \">=65\")),\n      SEX = factor(case_when(\n        SEX == \"F\" ~ \"Female\",\n        SEX == \"M\" ~ \"Male\"\n    )))\n  var_labels(ADEX) <- c(labels, \"Age group (years)\", \"Age group (years)\")'),\n    check = TRUE\n  ),\n  modules = modules(\n    tm_t_exposure(\n      label = \"Duration of Exposure Table\",\n      dataname = \"ADEX\",\n      paramcd = choices_selected(\n        choices = value_choices(adex, \"PARAMCD\", \"PARAM\"),\n        selected = \"TDURD\"\n      ),\n      col_by_var = choices_selected(\n        choices = variable_choices(adex, subset = c(\"SEX\", \"ARM\")),\n        selected = \"SEX\"\n      ),\n      row_by_var = choices_selected(\n        choices = variable_choices(adex, subset = c(\"AGEGR1\", \"AGEGR2\")),\n        selected = \"AGEGR1\"\n      ),\n      parcat = choices_selected(\n        choices = value_choices(adex, \"PARCAT2\"),\n        selected = \"Drug A\"\n      ),\n      add_total = FALSE\n    )\n  ),\n  filter = list(\n    ADSL = list(SAFFL = \"Y\")\n  )\n)\n\n[INFO] 2023-03-10 05:37:17.3323 pid:5749 token:[] teal.modules.clinical Initializing tm_t_exposure\n\nCodeshinyApp(app$ui, app$server)\n\n\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n [1] teal.modules.clinical_0.8.14.9026 teal_0.12.0.9023                 \n [3] teal.transform_0.2.0.9011         teal.data_0.1.2.9013             \n [5] shiny_1.7.4                       dplyr_1.1.0                      \n [7] scda_0.1.5.9009                   tern_0.7.10.9056                 \n [9] rtables_0.6.0.1                   formatters_0.4.0                 \n[11] magrittr_2.0.3                   \n\nloaded via a namespace (and not attached):\n [1] sass_0.4.5               tidyr_1.3.0              jsonlite_1.8.4          \n [4] splines_4.2.2            R.utils_2.12.2           bslib_0.4.2             \n [7] teal.slice_0.2.0.9026    Rdpack_2.4               assertthat_0.2.1        \n[10] teal.code_0.3.0.9001     tern.gee_0.1.0.9002      yaml_2.3.7              \n[13] pillar_1.8.1             backports_1.4.1          lattice_0.20-45         \n[16] glue_1.6.2               teal.widgets_0.2.0.9024  digest_0.6.31           \n[19] promises_1.2.0.1         rbibutils_2.2.13         checkmate_2.1.0         \n[22] colorspace_2.1-0         R.oo_1.25.0              htmltools_0.5.4         \n[25] httpuv_1.6.9             Matrix_1.5-3             pkgconfig_2.0.3         \n[28] broom_1.0.3              logger_0.2.2             purrr_1.0.1             \n[31] xtable_1.8-4             mvtnorm_1.1-3            scales_1.2.1            \n[34] webshot_0.5.4            processx_3.8.0           fontawesome_0.5.0       \n[37] later_1.3.0              emmeans_1.8.4-1          tibble_3.1.8            \n[40] styler_1.9.1             generics_0.1.3           ggplot2_3.4.1           \n[43] ellipsis_0.3.2           shinyvalidate_0.1.2      cachem_1.0.7            \n[46] withr_2.5.0              shinyjs_2.1.0            geepack_1.3.9           \n[49] cli_3.6.0                survival_3.5-3           mime_0.12               \n[52] memoise_2.0.1            ps_1.7.2                 estimability_1.4.1      \n[55] evaluate_0.20            R.methodsS3_1.8.2        fansi_1.0.4             \n[58] R.cache_0.16.0           nlme_3.1-162             MASS_7.3-58.3           \n[61] forcats_1.0.0            teal.reporter_0.1.1.9013 tools_4.2.2             \n[64] lifecycle_1.0.3          munsell_0.5.0            callr_3.7.3             \n[67] compiler_4.2.2           jquerylib_0.1.4          rlang_1.0.6             \n[70] grid_4.2.2               htmlwidgets_1.6.1        rmarkdown_2.20          \n[73] shinyWidgets_0.7.6       gtable_0.3.1             codetools_0.2-19        \n[76] teal.logger_0.1.1.9004   R6_2.5.1                 knitr_1.42              \n[79] fastmap_1.1.1            utf8_1.2.3               Rcpp_1.0.10             \n[82] vctrs_0.5.2              tidyselect_1.2.0         xfun_0.37               \n[85] coda_0.19-4             \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R                       [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/tables/other/rmpt03.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "tables/other/cmht01.html",
    "href": "tables/other/cmht01.html",
    "title": "CMHT01",
    "section": "",
    "text": "Data Setup\nTable of Single Parameter\nTable of Multiple Parameters\nTeal\nSession Info\n\n\n\n\nCodelibrary(tern)\nlibrary(scda)\nlibrary(dplyr)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadqs <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adqs\")\n\n# Ensure character variables are converted to factors and empty strings and NAs are explicit missing levels.\nadsl <- df_explicit_na(adsl)\nadqs <- df_explicit_na(adqs)\n\n\n\n\n\nCodeanl_01 <- adqs %>%\n  filter(PARAMCD == \"FKSI-FWB\" & AVISIT == \"WEEK 1 DAY 8\") %>%\n  mutate(is_rsp = PCHG > 15) %>%\n  mutate(ARM = relevel(ARM, ref = \"A: Drug X\")) %>%\n  var_relabel(ARM = \"Description of Planned Arm\") %>%\n  mutate(strata = interaction(STRATA1, STRATA2, drop = TRUE))\n\nlyt_01 <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(var = \"ARM\", ref_group = \"A: Drug X\") %>%\n  estimate_proportion(vars = \"is_rsp\", table_names = \"est_prop\") %>%\n  estimate_proportion_diff(\n    var_labels = \"Unstratified Analysis\",\n    vars = \"is_rsp\",\n    show_labels = \"visible\",\n    table_names = \"est_prop_diff\"\n  ) %>%\n  test_proportion_diff(vars = \"is_rsp\", table_names = \"test_prop\") %>%\n  estimate_odds_ratio(vars = \"is_rsp\", table_names = \"est_or\") %>%\n  estimate_proportion_diff(\n    var_labels = \"Stratified Analysis\",\n    vars = \"is_rsp\",\n    show_labels = \"visible\",\n    method = \"cmh\",\n    variables = list(strata = \"strata\"),\n    table_names = \"est_prop_diff_strat\"\n  ) %>%\n  test_proportion_diff(\n    vars = \"is_rsp\",\n    method = \"cmh\",\n    variables = list(strata = \"strata\"),\n    table_names = \"test_prop_strat\"\n  ) %>%\n  estimate_odds_ratio(\n    vars = \"is_rsp\",\n    variables = list(strata = \"strata\", arm = \"ARM\"),\n    table_names = \"est_or_strat\"\n  )\n\nresult <- build_table(\n  lyt = lyt_01,\n  df = anl_01,\n  alt_counts_df = adsl\n)\nresult\n\n                                            A: Drug X         B: Placebo         C: Combination  \n                                             (N=134)           (N=134)              (N=132)      \n—————————————————————————————————————————————————————————————————————————————————————————————————\nResponders                                  49 (36.6%)        51 (38.1%)           47 (35.6%)    \n95% CI (Wald, with correction)             (28.0, 45.1)      (29.5, 46.7)         (27.1, 44.2)   \nUnstratified Analysis                                                                            \n  Difference in Response rate (%)                                1.5                  -1.0       \n    95% CI (Wald, with correction)                          (-10.8, 13.8)        (-13.3, 11.3)   \n  p-value (Chi-Squared Test)                                    0.8006               0.8704      \nOdds Ratio (95% CI)                                       1.07 (0.65 - 1.75)   0.96 (0.58 - 1.58)\nStratified Analysis                                                                              \n  Difference in Response rate (%)                                2.8                  -1.5       \n    95% CI (CMH, without correction)                         (-8.2, 13.8)         (-13.0, 9.9)   \n  p-value (Cochran-Mantel-Haenszel Test)                        0.6397               0.7952      \nOdds Ratio (95% CI)                                       1.12 (0.68 - 1.83)   0.99 (0.60 - 1.64)\n\n\n\n\n\nCodeanl_02 <- adqs %>%\n  filter(AVISIT == \"WEEK 1 DAY 8\") %>%\n  mutate(is_rsp = PCHG > 15) %>%\n  mutate(PARAM = droplevels(PARAM)) %>%\n  mutate(ARM = relevel(ARM, ref = \"A: Drug X\")) %>%\n  var_relabel(ARM = \"Description of Planned Arm\") %>%\n  mutate(strata = interaction(STRATA1, STRATA2, drop = TRUE))\n\nvar_labels(anl_02)[\"PARAM\"] <- \"Parameter\"\n\nsplit_fun <- drop_split_levels\n\nlyt_02 <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(var = \"ARM\", ref_group = \"A: Drug X\") %>%\n  split_rows_by(\n    var = \"PARAM\",\n    split_fun = split_fun,\n    label_pos = \"topleft\",\n    split_label = obj_label(anl_02$PARAM)\n  ) %>%\n  estimate_proportion(vars = \"is_rsp\", table_names = \"est_prop\") %>%\n  estimate_proportion_diff(\n    var_labels = \"Unstratified Analysis\",\n    vars = \"is_rsp\",\n    show_labels = \"visible\",\n    table_names = \"est_prop_diff\"\n  ) %>%\n  test_proportion_diff(vars = \"is_rsp\", table_names = \"test_prop\") %>%\n  estimate_odds_ratio(vars = \"is_rsp\", table_names = \"est_or\") %>%\n  estimate_proportion_diff(\n    var_labels = \"Stratified Analysis\",\n    vars = \"is_rsp\",\n    show_labels = \"visible\",\n    method = \"cmh\",\n    variables = list(strata = \"strata\"),\n    table_names = \"est_prop_diff_strat\"\n  ) %>%\n  test_proportion_diff(\n    vars = \"is_rsp\",\n    method = \"cmh\",\n    variables = list(strata = \"strata\"),\n    table_names = \"test_prop_strat\"\n  ) %>%\n  estimate_odds_ratio(\n    vars = \"is_rsp\",\n    variables = list(strata = \"strata\", arm = \"ARM\"),\n    table_names = \"est_or_strat\"\n  )\n\nresult <- build_table(\n  lyt = lyt_02,\n  df = anl_02,\n  alt_counts_df = adsl\n)\nresult\n\nParameter                                     A: Drug X         B: Placebo         C: Combination  \n                                               (N=134)           (N=134)              (N=132)      \n———————————————————————————————————————————————————————————————————————————————————————————————————\nBFI All Questions                                                                                  \n  Responders                                  57 (42.5%)        65 (48.5%)           50 (37.9%)    \n  95% CI (Wald, with correction)             (33.8, 51.3)      (39.7, 57.3)         (29.2, 46.5)   \n  Unstratified Analysis                                                                            \n    Difference in Response rate (%)                                6.0                  -4.7       \n      95% CI (Wald, with correction)                           (-6.7, 18.6)         (-17.2, 7.9)   \n    p-value (Chi-Squared Test)                                    0.3264               0.4385      \n  Odds Ratio (95% CI)                                       1.27 (0.79 - 2.06)   0.82 (0.50 - 1.35)\n  Stratified Analysis                                                                              \n    Difference in Response rate (%)                                6.7                  -5.1       \n      95% CI (CMH, without correction)                         (-5.0, 18.4)         (-16.8, 6.6)   \n    p-value (Cochran-Mantel-Haenszel Test)                        0.2781               0.4056      \n  Odds Ratio (95% CI)                                       1.30 (0.80 - 2.11)   0.80 (0.49 - 1.32)\nFatigue Interference                                                                               \n  Responders                                  66 (49.3%)        50 (37.3%)           48 (36.4%)    \n  95% CI (Wald, with correction)             (40.4, 58.1)      (28.8, 45.9)         (27.8, 44.9)   \n  Unstratified Analysis                                                                            \n    Difference in Response rate (%)                               -11.9                -12.9       \n      95% CI (Wald, with correction)                           (-24.5, 0.6)        (-25.4, -0.3)   \n    p-value (Chi-Squared Test)                                    0.0485               0.0337      \n  Odds Ratio (95% CI)                                       0.61 (0.38 - 1.00)   0.59 (0.36 - 0.96)\n  Stratified Analysis                                                                              \n    Difference in Response rate (%)                               -12.0                -13.3       \n      95% CI (CMH, without correction)                        (-23.7, -0.2)        (-24.9, -1.6)   \n    p-value (Cochran-Mantel-Haenszel Test)                        0.0518               0.0303      \n  Odds Ratio (95% CI)                                       0.61 (0.37 - 0.99)   0.58 (0.36 - 0.96)\nFKSI-19 All Questions                                                                              \n  Responders                                  60 (44.8%)        57 (42.5%)           68 (51.5%)    \n  95% CI (Wald, with correction)             (36.0, 53.6)      (33.8, 51.3)         (42.6, 60.4)   \n  Unstratified Analysis                                                                            \n    Difference in Response rate (%)                                -2.2                 6.7        \n      95% CI (Wald, with correction)                          (-14.9, 10.4)         (-6.0, 19.5)   \n    p-value (Chi-Squared Test)                                    0.7118               0.2714      \n  Odds Ratio (95% CI)                                       0.91 (0.56 - 1.48)   1.31 (0.81 - 2.12)\n  Stratified Analysis                                                                              \n    Difference in Response rate (%)                                -2.8                 5.6        \n      95% CI (CMH, without correction)                         (-14.3, 8.8)         (-6.2, 17.4)   \n    p-value (Cochran-Mantel-Haenszel Test)                        0.6442               0.3683      \n  Odds Ratio (95% CI)                                       0.90 (0.56 - 1.47)   1.26 (0.77 - 2.04)\nFunction/Well-Being (GF1,GF3,GF7)                                                                  \n  Responders                                  49 (36.6%)        51 (38.1%)           47 (35.6%)    \n  95% CI (Wald, with correction)             (28.0, 45.1)      (29.5, 46.7)         (27.1, 44.2)   \n  Unstratified Analysis                                                                            \n    Difference in Response rate (%)                                1.5                  -1.0       \n      95% CI (Wald, with correction)                          (-10.8, 13.8)        (-13.3, 11.3)   \n    p-value (Chi-Squared Test)                                    0.8006               0.8704      \n  Odds Ratio (95% CI)                                       1.07 (0.65 - 1.75)   0.96 (0.58 - 1.58)\n  Stratified Analysis                                                                              \n    Difference in Response rate (%)                                2.8                  -1.5       \n      95% CI (CMH, without correction)                         (-8.2, 13.8)         (-13.0, 9.9)   \n    p-value (Cochran-Mantel-Haenszel Test)                        0.6397               0.7952      \n  Odds Ratio (95% CI)                                       1.12 (0.68 - 1.83)   0.99 (0.60 - 1.64)\nTreatment Side Effects (GP2,C5,GP5)                                                                \n  Responders                                  62 (46.3%)        49 (36.6%)           51 (38.6%)    \n  95% CI (Wald, with correction)             (37.5, 55.1)      (28.0, 45.1)         (30.0, 47.3)   \n  Unstratified Analysis                                                                            \n    Difference in Response rate (%)                                -9.7                 -7.6       \n      95% CI (Wald, with correction)                           (-22.2, 2.8)         (-20.2, 5.0)   \n    p-value (Chi-Squared Test)                                    0.1069               0.2080      \n  Odds Ratio (95% CI)                                       0.67 (0.41 - 1.09)   0.73 (0.45 - 1.19)\n  Stratified Analysis                                                                              \n    Difference in Response rate (%)                                -9.6                 -7.1       \n      95% CI (CMH, without correction)                         (-21.0, 1.8)         (-18.8, 4.6)   \n    p-value (Cochran-Mantel-Haenszel Test)                        0.1168               0.2426      \n  Odds Ratio (95% CI)                                       0.67 (0.41 - 1.10)   0.73 (0.45 - 1.19)\n\n\n\n\n\nCodelibrary(dplyr)\nlibrary(scda)\nlibrary(teal.modules.clinical)\n\nADSL <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nADRS <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adrs\")\n\narm_ref_comp <- list(\n  ARMCD = list(ref = \"ARM B\", comp = c(\"ARM A\", \"ARM C\")),\n  ARM = list(ref = \"B: Placebo\", comp = c(\"A: Drug X\", \"C: Combination\"))\n)\napp <- init(\n  data = cdisc_data(\n    cdisc_dataset(\"ADSL\", ADSL),\n    cdisc_dataset(\"ADRS\", ADRS),\n    code =\n      'ADSL <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\n    ADRS <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adrs\")'\n  ),\n  modules = modules(\n    tm_t_binary_outcome(\n      label = \"Responders\",\n      dataname = \"ADRS\",\n      paramcd = choices_selected(\n        choices = value_choices(ADRS, \"PARAMCD\", \"PARAM\"),\n        selected = \"BESRSPI\"\n      ),\n      arm_var = choices_selected(\n        choices = variable_choices(ADRS, c(\"ARM\", \"ARMCD\", \"ACTARMCD\")),\n        selected = \"ARM\"\n      ),\n      arm_ref_comp = arm_ref_comp,\n      strata_var = choices_selected(\n        choices = variable_choices(ADRS, c(\"SEX\", \"BMRKR2\")),\n        select = NULL\n      )\n    )\n  )\n)\n\n[INFO] 2023-03-10 05:37:48.6075 pid:5825 token:[] teal.modules.clinical Initializing tm_t_binary_outcome\n\nCodeshinyApp(app$ui, app$server)\n\n\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n [1] teal.modules.clinical_0.8.14.9026 teal_0.12.0.9023                 \n [3] teal.transform_0.2.0.9011         teal.data_0.1.2.9013             \n [5] shiny_1.7.4                       dplyr_1.1.0                      \n [7] scda_0.1.5.9009                   tern_0.7.10.9056                 \n [9] rtables_0.6.0.1                   formatters_0.4.0                 \n[11] magrittr_2.0.3                   \n\nloaded via a namespace (and not attached):\n [1] sass_0.4.5               tidyr_1.3.0              jsonlite_1.8.4          \n [4] splines_4.2.2            R.utils_2.12.2           bslib_0.4.2             \n [7] teal.slice_0.2.0.9026    Rdpack_2.4               assertthat_0.2.1        \n[10] teal.code_0.3.0.9001     tern.gee_0.1.0.9002      yaml_2.3.7              \n[13] pillar_1.8.1             backports_1.4.1          lattice_0.20-45         \n[16] glue_1.6.2               teal.widgets_0.2.0.9024  digest_0.6.31           \n[19] promises_1.2.0.1         rbibutils_2.2.13         checkmate_2.1.0         \n[22] colorspace_2.1-0         R.oo_1.25.0              htmltools_0.5.4         \n[25] httpuv_1.6.9             Matrix_1.5-3             pkgconfig_2.0.3         \n[28] broom_1.0.3              logger_0.2.2             purrr_1.0.1             \n[31] xtable_1.8-4             mvtnorm_1.1-3            scales_1.2.1            \n[34] webshot_0.5.4            processx_3.8.0           fontawesome_0.5.0       \n[37] later_1.3.0              emmeans_1.8.4-1          tibble_3.1.8            \n[40] styler_1.9.1             generics_0.1.3           ggplot2_3.4.1           \n[43] ellipsis_0.3.2           shinyvalidate_0.1.2      cachem_1.0.7            \n[46] withr_2.5.0              shinyjs_2.1.0            geepack_1.3.9           \n[49] cli_3.6.0                survival_3.5-3           mime_0.12               \n[52] memoise_2.0.1            ps_1.7.2                 estimability_1.4.1      \n[55] evaluate_0.20            R.methodsS3_1.8.2        fansi_1.0.4             \n[58] R.cache_0.16.0           nlme_3.1-162             MASS_7.3-58.3           \n[61] forcats_1.0.0            teal.reporter_0.1.1.9013 tools_4.2.2             \n[64] lifecycle_1.0.3          munsell_0.5.0            callr_3.7.3             \n[67] compiler_4.2.2           jquerylib_0.1.4          rlang_1.0.6             \n[70] grid_4.2.2               htmlwidgets_1.6.1        rmarkdown_2.20          \n[73] shinyWidgets_0.7.6       gtable_0.3.1             codetools_0.2-19        \n[76] teal.logger_0.1.1.9004   R6_2.5.1                 knitr_1.42              \n[79] fastmap_1.1.1            utf8_1.2.3               Rcpp_1.0.10             \n[82] vctrs_0.5.2              tidyselect_1.2.0         xfun_0.37               \n[85] coda_0.19-4             \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R                       [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/tables/other/cmht01.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "tables/other/rmpt06.html",
    "href": "tables/other/rmpt06.html",
    "title": "RMPT06",
    "section": "",
    "text": "Data Setup\nStandard Table\nTable Selecting  Sections to Display\nTable with Differences\nTable Modifying Alpha Level and  Type of Confidence Interval\nTable by SMQ\nTeal\nSession Info\n\n\n\nThe adae and adsl datasets need to undergo data processing before table production. Some new variables are added to these datasets to create the desired tables.\n\nCodelibrary(tern)\nlibrary(dplyr)\nlibrary(scda)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadae <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adae\")\n\n# Ensure character variables are converted to factors and empty strings and NAs are explicit missing levels.\nadsl <- df_explicit_na(adsl)\nadae <- df_explicit_na(\n  adae,\n  omit_columns = c(\"SMQ01NAM\", \"SMQ01SC\", \"SMQ02NAM\", \"SMQ02SC\", \"CQ01NAM\", \"STUDYID\", \"USUBJID\")\n)\n\ndf_max <- aggregate(as.numeric(AETOXGR) ~ USUBJID, data = adae, FUN = max, drop = FALSE)\ncolnames(df_max) <- c(\"USUBJID\", \"WTOXGR\")\n\nadae <- adae %>%\n  left_join(df_max, by = c(\"USUBJID\")) %>%\n  mutate(\n    WTOXGR = factor(WTOXGR, levels = c(\"1\", \"2\", \"3\", \"4\", \"5\")),\n    fl_ser = AESER == \"Y\"\n  ) %>%\n  mutate(\n    WTOXGR = forcats::fct_recode(WTOXGR,\n      \"Grade 1\" = \"1\",\n      \"Grade 2\" = \"2\",\n      \"Grade 3\" = \"3\",\n      \"Grade 4\" = \"4\",\n      \"Grade 5\" = \"5\"\n    ),\n    AEOUT = forcats::fct_recode(AEOUT,\n      \"Fatal outcome\" = \"FATAL\",\n      \"Unresolved\" = \"NOT RECOVERED/NOT RESOLVED\",\n      \"Recovered/Resolved\" = \"RECOVERED/RESOLVED\",\n      \"Resolved with sequelae\" = \"RECOVERED/RESOLVED WITH SEQUELAE\",\n      \"Recovering/Resolving\" = \"RECOVERING/RESOLVING\",\n      \"Unknown outcome\" = \"UNKNOWN\"\n    )\n  ) %>%\n  var_relabel(\n    WTOXGR = \"Worst overall grade\",\n    fl_ser = \"Number of patients with at least one serious AE\"\n  )\n\n# Add AE flag to adsl.\nadsl1 <- adsl %>%\n  mutate(AEFL = ifelse(USUBJID %in% adae$USUBJID, TRUE, FALSE)) %>%\n  var_relabel(AEFL = \"At least one AE\")\n\n\n\n\nPlease note that by default the percentage analysis uses Wald’s confidence interval with continuity correction and the default confidence interval for percentage is 95%. To use a different method for confidence interval calculation, the method name needs to be provided to method argument.\n\nCodelyt_adsl <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ACTARM\") %>%\n  estimate_proportion(\n    vars = \"AEFL\",\n    method = \"clopper-pearson\",\n    .labels = c(\n      n_prop = \"Number of patients with at least one adverse event\",\n      prop_ci = \"95% CI for % of patients with at least one AE (Clopper-Pearson)\"\n    ),\n    table_names = \"est_prop\"\n  )\n\nresult_adsl <- build_table(lyt_adsl, df = adsl1, alt_counts_df = adsl1)\n\n# Layout for variables from adae dataset.\nlyt_adae <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ACTARM\") %>%\n  count_values(\n    \"STUDYID\",\n    values = as.character(unique(adae$STUDYID)),\n    .stats = \"count\",\n    .labels = c(count = \"Total number of AEs\"),\n    table_names = \"total_aes\"\n  ) %>%\n  count_occurrences(\n    \"WTOXGR\",\n    var_labels = \"Number of patients with at least one AE by worst grade\",\n    show_labels = \"visible\",\n    .indent_mods = 1L\n  ) %>%\n  count_patients_with_flags(\n    \"USUBJID\",\n    flag_variables = var_labels(adae[, \"fl_ser\"])\n  ) %>%\n  count_occurrences(\n    \"AEOUT\",\n    denom = \"n\",\n    var_labels = \"Number of patients with at least one AE by outcome\",\n    show_labels = \"visible\",\n    .indent_mods = 1L\n  )\n\nresult_adae <- build_table(lyt_adae, df = adae, alt_counts_df = adsl)\n\n# Combine tables.\ncol_info(result_adsl) <- col_info(result_adae)\nresult <- rbind(\n  result_adsl,\n  result_adae[1:nrow(result_adae), ]\n)\n\nresult\n\n                                                                   A: Drug X      B: Placebo    C: Combination\n                                                                    (N=134)        (N=134)         (N=132)    \n——————————————————————————————————————————————————————————————————————————————————————————————————————————————\nNumber of patients with at least one adverse event                122 (91.0%)    123 (91.8%)     120 (90.9%)  \n95% CI for % of patients with at least one AE (Clopper-Pearson)   (84.9, 95.3)   (85.8, 95.8)    (84.7, 95.2) \nTotal number of AEs                                                   609            622             703      \nNumber of patients with at least one AE by worst grade                                                        \n    Grade 1                                                         7 (5.2%)       9 (6.7%)        4 (3.0%)   \n    Grade 2                                                         6 (4.5%)      10 (7.5%)        7 (5.3%)   \n    Grade 3                                                        18 (13.4%)     14 (10.4%)      16 (12.1%)  \n    Grade 4                                                        15 (11.2%)     20 (14.9%)      18 (13.6%)  \n    Grade 5                                                        76 (56.7%)     70 (52.2%)      75 (56.8%)  \nNumber of patients with at least one serious AE                   104 (85.2%)    101 (82.1%)      99 (82.5%)  \nNumber of patients with at least one AE by outcome                                                            \n    Fatal outcome                                                  76 (62.3%)     70 (56.9%)      75 (62.5%)  \n    Unresolved                                                     66 (54.1%)     64 (52.0%)      70 (58.3%)  \n    Recovered/Resolved                                             73 (59.8%)     83 (67.5%)      88 (73.3%)  \n    Resolved with sequelae                                         44 (36.1%)     40 (32.5%)      43 (35.8%)  \n    Recovering/Resolving                                           81 (66.4%)     84 (68.3%)      88 (73.3%)  \n    Unknown outcome                                                38 (31.1%)     49 (39.8%)      44 (36.7%)  \n\n\n\n\n\nCodelyt_adsl <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ACTARM\") %>%\n  estimate_proportion(\n    vars = \"AEFL\",\n    method = \"clopper-pearson\",\n    .labels = c(\n      n_prop = \"Number of patients with at least one adverse event\",\n      prop_ci = \"95% CI for % of patients with at least one AE (Clopper-Pearson)\"\n    ),\n    table_names = \"est_prop\"\n  )\n\nresult_adsl <- build_table(lyt_adsl, df = adsl1, alt_counts_df = adsl1)\n\n# Layout for variables from adae dataset.\nlyt_adae <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ACTARM\") %>%\n  count_values(\n    \"STUDYID\",\n    values = as.character(unique(adae$STUDYID)),\n    .stats = \"count\",\n    .labels = c(count = \"Total number of AEs\"),\n    table_names = \"total_aes\"\n  ) %>%\n  count_occurrences(\n    \"WTOXGR\",\n    var_labels = \"Number of patients with at least one AE by worst grade\",\n    show_labels = \"visible\",\n    .indent_mods = 1L\n  ) %>%\n  count_patients_with_flags(\n    \"USUBJID\",\n    flag_variables = var_labels(adae[, \"fl_ser\"]),\n    denom = \"N_col\"\n  )\n\nresult_adae <- build_table(lyt_adae, df = adae, alt_counts_df = adsl)\n\n# Combine tables.\ncol_info(result_adsl) <- col_info(result_adae)\nresult <- rbind(\n  result_adsl,\n  result_adae[1:nrow(result_adae), ]\n)\n\nresult\n\n                                                                   A: Drug X      B: Placebo    C: Combination\n                                                                    (N=134)        (N=134)         (N=132)    \n——————————————————————————————————————————————————————————————————————————————————————————————————————————————\nNumber of patients with at least one adverse event                122 (91.0%)    123 (91.8%)     120 (90.9%)  \n95% CI for % of patients with at least one AE (Clopper-Pearson)   (84.9, 95.3)   (85.8, 95.8)    (84.7, 95.2) \nTotal number of AEs                                                   609            622             703      \nNumber of patients with at least one AE by worst grade                                                        \n    Grade 1                                                         7 (5.2%)       9 (6.7%)        4 (3.0%)   \n    Grade 2                                                         6 (4.5%)      10 (7.5%)        7 (5.3%)   \n    Grade 3                                                        18 (13.4%)     14 (10.4%)      16 (12.1%)  \n    Grade 4                                                        15 (11.2%)     20 (14.9%)      18 (13.6%)  \n    Grade 5                                                        76 (56.7%)     70 (52.2%)      75 (56.8%)  \nNumber of patients with at least one serious AE                   104 (77.6%)    101 (75.4%)      99 (75.0%)  \n\n\n\n\nPlease note that by default the percentage difference analysis also uses Wald’s confidence interval with continuity correction and the default confidence interval is 95%.\n\nCodelyt_adsl <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ACTARM\", ref_group = \"A: Drug X\") %>%\n  estimate_proportion(\n    vars = \"AEFL\",\n    method = \"clopper-pearson\",\n    .labels = c(\n      n_prop = \"Number of patients with at least one adverse event\",\n      prop_ci = \"95% CI for % of patients with at least one AE\"\n    ),\n    table_names = \"est_prop\"\n  ) %>%\n  estimate_proportion_diff(\n    vars = \"AEFL\",\n    .labels = c(\n      diff = \"Difference in % of patients with at least one AE\",\n      diff_ci = \"95% CI of difference (Wald, with correction)\"\n    ),\n    table_names = \"est_prop_diff\"\n  )\n\nresult_adsl <- build_table(lyt_adsl, df = adsl1, alt_counts_df = adsl1)\n\n# Layout for variables from adae dataset.\nlyt_adae <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ACTARM\") %>%\n  count_values(\n    \"STUDYID\",\n    values = as.character(unique(adae$STUDYID)),\n    .stats = \"count\",\n    .labels = c(count = \"Total number of AEs\"),\n    table_names = \"total_aes\"\n  ) %>%\n  count_occurrences(\n    \"WTOXGR\",\n    var_labels = \"Number of patients with at least one AE by worst grade\",\n    show_labels = \"visible\",\n    .indent_mods = 1L\n  ) %>%\n  count_patients_with_flags(\n    \"USUBJID\",\n    flag_variables = var_labels(adae[, \"fl_ser\"]),\n    denom = \"N_col\"\n  ) %>%\n  count_occurrences(\n    \"AEOUT\",\n    denom = \"n\",\n    var_labels = \"Number of patients with at least one AE by outcome\",\n    show_labels = \"visible\",\n    .indent_mods = 1L\n  )\n\nresult_adae <- build_table(lyt_adae, df = adae, alt_counts_df = adsl)\n\n# Combine tables.\ncol_info(result_adsl) <- col_info(result_adae)\nresult <- rbind(\n  result_adsl,\n  result_adae[1:nrow(result_adae), ]\n)\n\nresult\n\n                                                          A: Drug X      B: Placebo    C: Combination\n                                                           (N=134)        (N=134)         (N=132)    \n—————————————————————————————————————————————————————————————————————————————————————————————————————\nNumber of patients with at least one adverse event       122 (91.0%)    123 (91.8%)     120 (90.9%)  \n95% CI for % of patients with at least one AE            (84.9, 95.3)   (85.8, 95.8)    (84.7, 95.2) \nDifference in % of patients with at least one AE                            0.7             -0.1     \n  95% CI of difference (Wald, with correction)                          (-6.7, 8.2)     (-7.8, 7.5)  \nTotal number of AEs                                          609            622             703      \nNumber of patients with at least one AE by worst grade                                               \n    Grade 1                                                7 (5.2%)       9 (6.7%)        4 (3.0%)   \n    Grade 2                                                6 (4.5%)      10 (7.5%)        7 (5.3%)   \n    Grade 3                                               18 (13.4%)     14 (10.4%)      16 (12.1%)  \n    Grade 4                                               15 (11.2%)     20 (14.9%)      18 (13.6%)  \n    Grade 5                                               76 (56.7%)     70 (52.2%)      75 (56.8%)  \nNumber of patients with at least one serious AE          104 (77.6%)    101 (75.4%)      99 (75.0%)  \nNumber of patients with at least one AE by outcome                                                   \n    Fatal outcome                                         76 (62.3%)     70 (56.9%)      75 (62.5%)  \n    Unresolved                                            66 (54.1%)     64 (52.0%)      70 (58.3%)  \n    Recovered/Resolved                                    73 (59.8%)     83 (67.5%)      88 (73.3%)  \n    Resolved with sequelae                                44 (36.1%)     40 (32.5%)      43 (35.8%)  \n    Recovering/Resolving                                  81 (66.4%)     84 (68.3%)      88 (73.3%)  \n    Unknown outcome                                       38 (31.1%)     49 (39.8%)      44 (36.7%)  \n\n\n\n\nThe confidence level can be changed through the conf_level argument.\n\nCodelyt_adsl <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ACTARM\", ref_group = \"A: Drug X\") %>%\n  estimate_proportion(\n    vars = \"AEFL\",\n    conf_level = 0.90,\n    method = \"clopper-pearson\",\n    .labels = c(\n      n_prop = \"Number of patients with at least one adverse event\",\n      prop_ci = \"90% CI for % of patients with at least one AE (Clopper-Pearson)\"\n    ),\n    table_names = \"est_prop\"\n  ) %>%\n  estimate_proportion_diff(\n    vars = \"AEFL\",\n    conf_level = 0.90,\n    method = \"newcombe\",\n    .labels = c(\n      diff = \"Difference in % of patients with at least one AE\",\n      diff_ci = \"90% CI of difference (Newcombe)\"\n    ),\n    table_names = \"est_prop_diff\"\n  )\n\nresult_adsl <- build_table(lyt_adsl, df = adsl1, alt_counts_df = adsl1)\n\n# Layout for variables from adae dataset.\nlyt_adae <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ACTARM\") %>%\n  count_values(\n    \"STUDYID\",\n    values = as.character(unique(adae$STUDYID)),\n    .stats = \"count\",\n    .labels = c(count = \"Total number of AEs\"),\n    table_names = \"total_aes\"\n  ) %>%\n  count_occurrences(\n    \"WTOXGR\",\n    var_labels = \"Number of patients with at least one AE by worst grade\",\n    show_labels = \"visible\",\n    .indent_mods = 1L\n  ) %>%\n  count_patients_with_flags(\n    \"USUBJID\",\n    flag_variables = var_labels(adae[, \"fl_ser\"]),\n    denom = \"N_col\"\n  ) %>%\n  count_occurrences(\n    \"AEOUT\",\n    denom = \"n\",\n    var_labels = \"Number of patients with at least one AE by outcome\",\n    show_labels = \"visible\",\n    .indent_mods = 1L\n  )\n\nresult_adae <- build_table(lyt_adae, df = adae, alt_counts_df = adsl)\n\n# Combine tables.\ncol_info(result_adsl) <- col_info(result_adae)\nresult <- rbind(\n  result_adsl,\n  result_adae[1:nrow(result_adae), ]\n)\n\nresult\n\n                                                                   A: Drug X      B: Placebo    C: Combination\n                                                                    (N=134)        (N=134)         (N=132)    \n——————————————————————————————————————————————————————————————————————————————————————————————————————————————\nNumber of patients with at least one adverse event                122 (91.0%)    123 (91.8%)     120 (90.9%)  \n90% CI for % of patients with at least one AE (Clopper-Pearson)   (85.9, 94.8)   (86.8, 95.3)    (85.7, 94.7) \nDifference in % of patients with at least one AE                                     0.7             -0.1     \n  90% CI of difference (Newcombe)                                                (-5.1, 6.6)     (-6.1, 5.8)  \nTotal number of AEs                                                   609            622             703      \nNumber of patients with at least one AE by worst grade                                                        \n    Grade 1                                                         7 (5.2%)       9 (6.7%)        4 (3.0%)   \n    Grade 2                                                         6 (4.5%)      10 (7.5%)        7 (5.3%)   \n    Grade 3                                                        18 (13.4%)     14 (10.4%)      16 (12.1%)  \n    Grade 4                                                        15 (11.2%)     20 (14.9%)      18 (13.6%)  \n    Grade 5                                                        76 (56.7%)     70 (52.2%)      75 (56.8%)  \nNumber of patients with at least one serious AE                   104 (77.6%)    101 (75.4%)      99 (75.0%)  \nNumber of patients with at least one AE by outcome                                                            \n    Fatal outcome                                                  76 (62.3%)     70 (56.9%)      75 (62.5%)  \n    Unresolved                                                     66 (54.1%)     64 (52.0%)      70 (58.3%)  \n    Recovered/Resolved                                             73 (59.8%)     83 (67.5%)      88 (73.3%)  \n    Resolved with sequelae                                         44 (36.1%)     40 (32.5%)      43 (35.8%)  \n    Recovering/Resolving                                           81 (66.4%)     84 (68.3%)      88 (73.3%)  \n    Unknown outcome                                                38 (31.1%)     49 (39.8%)      44 (36.7%)  \n\n\n\n\n\nCode# In progress\n\n\n\n\n\nCode# In progress\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n[1] scda_0.1.5.9009  dplyr_1.1.0      tern_0.7.10.9056 rtables_0.6.0.1 \n[5] formatters_0.4.0 magrittr_2.0.3  \n\nloaded via a namespace (and not attached):\n [1] compiler_4.2.2    pillar_1.8.1      forcats_1.0.0     tools_4.2.2      \n [5] digest_0.6.31     lattice_0.20-45   jsonlite_1.8.4    evaluate_0.20    \n [9] lifecycle_1.0.3   tibble_3.1.8      gtable_0.3.1      checkmate_2.1.0  \n[13] pkgconfig_2.0.3   rlang_1.0.6       Matrix_1.5-3      cli_3.6.0        \n[17] yaml_2.3.7        xfun_0.37         fastmap_1.1.1     withr_2.5.0      \n[21] knitr_1.42        generics_0.1.3    vctrs_0.5.2       htmlwidgets_1.6.1\n[25] grid_4.2.2        tidyselect_1.2.0  glue_1.6.2        R6_2.5.1         \n[29] fansi_1.0.4       Rdpack_2.4        survival_3.5-3    rmarkdown_2.20   \n[33] ggplot2_3.4.1     purrr_1.0.1       tidyr_1.3.0       codetools_0.2-19 \n[37] splines_4.2.2     backports_1.4.1   scales_1.2.1      htmltools_0.5.4  \n[41] rbibutils_2.2.13  colorspace_2.1-0  utf8_1.2.3        munsell_0.5.0    \n[45] broom_1.0.3      \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R              [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/tables/other/rmpt06.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "tables/other/ratet01.html",
    "href": "tables/other/ratet01.html",
    "title": "RATET01",
    "section": "",
    "text": "This example will focus on data from a single visit “WEEK 1 DAY 8” and a single endpoint “FKSI-FWB”. Only evaluable populations will be analyzed.\n\n\nData Setup\nCustomized Table\nTeal\nSession Info\n\n\n\n\nCodelibrary(scda)\nlibrary(tern)\nlibrary(dplyr)\n\nanl <- synthetic_cdisc_dataset(\"latest\", \"adtte\") %>%\n  filter(PARAMCD == \"TNE\")\n\n# Ensure number of exacerbation is a factor and NAs are explicit missing levels.\nanl$AVAL_f <- as.factor(anl$AVAL)\nanl <- df_explicit_na(anl)\n\n\n\n\n\nCodelyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ARM\", ref_group = \"B: Placebo\") %>%\n  summarize_vars(\n    \"AVAL_f\",\n    var_labels = \"Number of exacerbations per patient\",\n    .stats = c(\"count_fraction\"),\n    .formats = c(\"count_fraction\" = \"xx (xx.xx%)\"),\n    .label = c(\"Number of exacerbations per patient\")\n  ) %>%\n  summarize_glm_count(\n    vars = \"AVAL\",\n    variables = list(arm = \"ARM\", offset = \"lgTMATRSK\", covariates = NULL),\n    conf_level = 0.95,\n    distribution = \"poisson\",\n    rate_mean_method = \"emmeans\",\n    var_labels = \"Unadjusted exacerbation rate (per year)\",\n    table_names = \"unadj\",\n    .stats = c(\"rate\"),\n    .labels = c(rate = \"Rate\")\n  ) %>%\n  summarize_glm_count(\n    vars = \"AVAL\",\n    variables = list(arm = \"ARM\", offset = \"lgTMATRSK\", covariates = c(\"REGION1\")),\n    conf_level = 0.95,\n    distribution = \"quasipoisson\",\n    rate_mean_method = \"ppmeans\",\n    var_labels = \"Adjusted (QP) exacerbation rate (per year)\",\n    table_names = \"adj\",\n    .stats = c(\"rate\", \"rate_ci\", \"rate_ratio\", \"rate_ratio_ci\", \"pval\"),\n    .labels = c(\n      rate = \"Rate\", rate_ci = \"Rate CI\", rate_ratio = \"Rate Ratio\",\n      rate_ratio_ci = \"Rate Ratio CI\", pval = \"p value\"\n    )\n  )\n\nresult <- build_table(\n  lyt = lyt,\n  df = anl\n)\n\nresult\n\n                                                B: Placebo           A: Drug X        C: Combination  \n                                                  (N=134)             (N=134)             (N=132)     \n——————————————————————————————————————————————————————————————————————————————————————————————————————\nNumber of exacerbations per patient                                                                   \n  0                                              6 (4.48%)           7 (5.22%)          12 (9.09%)    \n  1                                             19 (14.18%)         24 (17.91%)         23 (17.42%)   \n  2                                             34 (25.37%)         20 (14.93%)         25 (18.94%)   \n  3                                             31 (23.13%)         36 (26.87%)         30 (22.73%)   \n  4                                             21 (15.67%)         20 (14.93%)         22 (16.67%)   \n  5                                             16 (11.94%)         16 (11.94%)          9 (6.82%)    \n  6                                              6 (4.48%)           6 (4.48%)           6 (4.55%)    \n  7                                              0 (0.00%)           5 (3.73%)           4 (3.03%)    \n  8                                              1 (0.75%)           0 (0.00%)           1 (0.76%)    \nUnadjusted exacerbation rate (per year)                                                               \n  Rate                                            9.4721              10.0872             8.7228      \nAdjusted (QP) exacerbation rate (per year)                                                            \n  Rate                                            9.6627              10.0716             8.7092      \n  Rate CI                                    (6.5933, 14.1611)   (6.9632, 14.5676)   (5.9167, 12.8197)\n  Rate Ratio                                                          1.0423              0.9013      \n  Rate Ratio CI                                                  (0.6121, 1.7749)    (0.5220, 1.5564) \n  p value                                                             0.8787              0.7093      \n\n\n\n\n\nCode# In Progress\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n[1] dplyr_1.1.0      tern_0.7.10.9056 rtables_0.6.0.1  formatters_0.4.0\n[5] magrittr_2.0.3   scda_0.1.5.9009 \n\nloaded via a namespace (and not attached):\n [1] compiler_4.2.2     pillar_1.8.1       forcats_1.0.0      tools_4.2.2       \n [5] digest_0.6.31      lattice_0.20-45    jsonlite_1.8.4     evaluate_0.20     \n [9] lifecycle_1.0.3    tibble_3.1.8       gtable_0.3.1       checkmate_2.1.0   \n[13] pkgconfig_2.0.3    rlang_1.0.6        Matrix_1.5-3       cli_3.6.0         \n[17] yaml_2.3.7         mvtnorm_1.1-3      xfun_0.37          fastmap_1.1.1     \n[21] coda_0.19-4        withr_2.5.0        knitr_1.42         generics_0.1.3    \n[25] vctrs_0.5.2        htmlwidgets_1.6.1  grid_4.2.2         tidyselect_1.2.0  \n[29] glue_1.6.2         R6_2.5.1           fansi_1.0.4        Rdpack_2.4        \n[33] survival_3.5-3     rmarkdown_2.20     tidyr_1.3.0        purrr_1.0.1       \n[37] ggplot2_3.4.1      emmeans_1.8.4-1    codetools_0.2-19   splines_4.2.2     \n[41] backports_1.4.1    scales_1.2.1       htmltools_0.5.4    rbibutils_2.2.13  \n[45] xtable_1.8-4       colorspace_2.1-0   utf8_1.2.3         estimability_1.4.1\n[49] munsell_0.5.0      broom_1.0.3       \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R              [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/tables/other/ratet01.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "tables/other/disclosurest01.html",
    "href": "tables/other/disclosurest01.html",
    "title": "DISCLOSUREST01",
    "section": "",
    "text": "Patient Disposition Table  (CTgov & EudraCT)\nDemographic Table  (CTgov & EudraCT)\nEnrollment by Country  Table (EudraCT only)\nNon-Serious Adverse Events  Reported in \\(\\geq\\) 5% of Patients in Any  Treatment Group (CTgov & EudraCT)\nSerious Adverse Events, Fatal SAEs  and SAEs Related to Study Medication,  by Treatment Group (CTgov & EudraCT)\nDeath Table  (EudraCT only)\nSession Info\n\n\n\nData Setup\n\nCodelibrary(tern)\nlibrary(scda)\nlibrary(dplyr)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\n\n# Ensure character variables are converted to factors and empty strings and NAs are explicit missing levels.\nadsl <- df_explicit_na(adsl)\n\nset.seed(1, kind = \"Mersenne-Twister\")\n\n# Add additional disposition variables to adsl.\nadsl0 <- adsl %>%\n  mutate(\n    STSTFL = case_when(\n      is.na(RANDDT) ~ \"N\",\n      TRUE ~ \"Y\"\n    ) %>% as.factor(),\n    COMPSTUD = sample(\n      c(\"Y\", \"N\"),\n      size = nrow(adsl),\n      replace = TRUE\n    ) %>% as.factor(),\n    STUDONS = sample(\n      c(\"Alive: On Treatment\", \"Alive: In Follow-up\", NA),\n      size = nrow(adsl),\n      replace = TRUE\n    ) %>% as.factor(),\n    STDDRS = sample(\n      c(\n        \"Death\", \"Lost To Follow-Up\",\n        \"Protocol Violation\", \"Withdrawal By Subject\",\n        \"Other\"\n      ),\n      size = nrow(adsl),\n      replace = TRUE\n    ) %>% as.factor(),\n    GOTTRT = ifelse(!is.na(ACTARMCD), \"Y\", \"N\") %>%\n      as.factor(),\n    DISTRTFL = sample(\n      c(\"Y\", \"N\"),\n      size = nrow(adsl),\n      replace = TRUE\n    ) %>% as.factor(),\n    TRTDRS = sample(\n      c(\n        \"ADVERSE EVENT\", \"PROGRESSIVE DISEASE\",\n        \"PHYSICIAN DECISION\", \"LACK OF EFFICACY\",\n        \"OTHER\"\n      ),\n      size = nrow(adsl),\n      replace = TRUE\n    ) %>% as.factor(),\n    STUDONS = case_when(COMPSTUD == \"N\" ~ STUDONS),\n    STDDRS = case_when(COMPSTUD == \"N\" & is.na(STUDONS) ~ STDDRS),\n    DISSTDFL = case_when(!is.na(STDDRS) ~ \"Y\"),\n    DISTRTFL = case_when(GOTTRT == \"Y\" ~ DISTRTFL),\n    TRTDRS = case_when(DISTRTFL == \"Y\" ~ TRTDRS),\n    DRSCAT = case_when(\n      TRTDRS %in% c(\"ADVERSE EVENT\", \"PHYSICIAN DECISION\") ~ \"Safety\",\n      !is.na(TRTDRS) ~ \"Other\"\n    )\n  ) %>%\n  var_relabel(\n    STSTFL = \"Started Study\",\n    COMPSTUD = \"Complete Study\",\n    STUDONS = \"On-study Status\",\n    DISSTDFL = \"Discontinued Study\",\n    STDDRS = \"Reason for Study Discontinuation\",\n    GOTTRT = \"Received Treatment\",\n    DISTRTFL = \"Discontinued Treatment\",\n    TRTDRS = \"Reason for Treatment Discontinuation\",\n    DRSCAT = \"Subcategory for Treatment Discontinuation\"\n  )\n\n\nPatient Disposition Table\n\nCode# Define the split function\nsplit_fun <- keep_split_levels(\"Y\")\n\nlyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\n    \"ARM\",\n    split_fun = add_overall_level(\"All Patients\", first = FALSE)\n  ) %>%\n  count_values(\"STSTFL\",\n    values = \"Y\",\n    .labels = c(count_fraction = \"Started Study\")\n  ) %>%\n  count_values(\"COMPSTUD\",\n    values = \"Y\",\n    .labels = c(count_fraction = \"Completed Study\")\n  ) %>%\n  split_rows_by(\n    \"DISSTDFL\",\n    split_fun = split_fun\n  ) %>%\n  summarize_row_groups(label_fstr = \"Discontinued Study\") %>%\n  summarize_vars(\n    \"STDDRS\",\n    .stats = \"count_fraction\"\n  ) %>%\n  append_topleft(\"Status\")\n\nresult <- build_table(lyt = lyt, df = adsl0)\nresult\n\nStatus                      A: Drug X      B: Placebo     C: Combination   All Patients \n                             (N=134)         (N=134)         (N=132)          (N=400)   \n————————————————————————————————————————————————————————————————————————————————————————\nStarted Study             134 (100.00%)   134 (100.00%)   132 (100.00%)    400 (100.00%)\nCompleted Study            65 (48.51%)     67 (50.00%)     69 (52.27%)     201 (50.25%) \nDiscontinued Study         15 (11.2%)      28 (20.9%)       24 (18.2%)      67 (16.8%)  \n  Death                      6 (40%)        5 (17.9%)       4 (16.7%)       15 (22.4%)  \n  Lost To Follow-Up         1 (6.7%)        3 (10.7%)       8 (33.3%)       12 (17.9%)  \n  Other                     2 (13.3%)       6 (21.4%)       5 (20.8%)       13 (19.4%)  \n  Protocol Violation        4 (26.7%)       4 (14.3%)       4 (16.7%)       12 (17.9%)  \n  Withdrawal By Subject     2 (13.3%)      10 (35.7%)       3 (12.5%)       15 (22.4%)  \n\n\n\n\n\nData Setup\n\nCodelibrary(tern)\nlibrary(scda)\nlibrary(dplyr)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\n\n# Ensure character variables are converted to factors and empty strings and NAs are explicit missing levels.\nadsl <- df_explicit_na(adsl)\n\n# Change description in variable SEX.\nadsl <- adsl %>%\n  mutate(\n    SEX = factor(case_when(\n      SEX == \"M\" ~ \"Male\",\n      SEX == \"F\" ~ \"Female\",\n      SEX == \"U\" ~ \"Unknown\",\n      SEX == \"UNDIFFERENTIATED\" ~ \"Undifferentiated\"\n    )),\n    AGEGRP = factor(\n      case_when(\n        between(AGE, 18, 40) ~ \"18-40\",\n        between(AGE, 41, 64) ~ \"41-64\",\n        AGE > 64 ~ \">=65\"\n      ),\n      levels = c(\"18-40\", \"41-64\", \">=65\")\n    )\n  )\n\n\nDemographic Table\n\nCodevars <- c(\"AGE\", \"AGEGRP\", \"SEX\", \"RACE\", \"ETHNIC\")\nvar_labels <- c(\"Age (yr)\", \"Age group\", \"Sex\", \"Race\", \"Ethnicity\")\n\nlyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(var = \"ARM\") %>%\n  add_overall_col(\"All Patients\") %>%\n  summarize_vars(\n    vars = vars,\n    var_labels = var_labels\n  )\n\nresult <- build_table(lyt = lyt, df = adsl)\nresult\n\n                                               A: Drug X    B: Placebo    C: Combination   All Patients\n                                                (N=134)       (N=134)        (N=132)         (N=400)   \n———————————————————————————————————————————————————————————————————————————————————————————————————————\nAge (yr)                                                                                               \n  n                                               134           134            132             400     \n  Mean (SD)                                   33.8 (6.6)    35.4 (7.9)      35.4 (7.7)      34.9 (7.4) \n  Median                                         33.0          35.0            35.0            34.0    \n  Min - Max                                   21.0 - 50.0   21.0 - 62.0    20.0 - 69.0     20.0 - 69.0 \nAge group                                                                                              \n  n                                               134           134            132             400     \n  18-40                                       113 (84.3%)   103 (76.9%)    106 (80.3%)     322 (80.5%) \n  41-64                                       21 (15.7%)    31 (23.1%)      25 (18.9%)      77 (19.2%) \n  >=65                                             0             0           1 (0.8%)        1 (0.2%)  \nSex                                                                                                    \n  n                                               134           134            132             400     \n  Female                                       79 (59%)     82 (61.2%)       70 (53%)      231 (57.8%) \n  Male                                         55 (41%)     52 (38.8%)       62 (47%)      169 (42.2%) \nRace                                                                                                   \n  n                                               134           134            132             400     \n  ASIAN                                       68 (50.7%)     67 (50%)       73 (55.3%)      208 (52%)  \n  BLACK OR AFRICAN AMERICAN                   31 (23.1%)    28 (20.9%)      32 (24.2%)      91 (22.8%) \n  WHITE                                       27 (20.1%)    26 (19.4%)      21 (15.9%)      74 (18.5%) \n  AMERICAN INDIAN OR ALASKA NATIVE              8 (6%)       11 (8.2%)       6 (4.5%)       25 (6.2%)  \n  MULTIPLE                                         0         1 (0.7%)           0            1 (0.2%)  \n  NATIVE HAWAIIAN OR OTHER PACIFIC ISLANDER        0         1 (0.7%)           0            1 (0.2%)  \n  OTHER                                            0             0              0               0      \n  UNKNOWN                                          0             0              0               0      \nEthnicity                                                                                              \n  n                                               134           134            132             400     \n  NOT REPORTED                                 6 (4.5%)      10 (7.5%)      11 (8.3%)       27 (6.8%)  \n  HISPANIC OR LATINO                          15 (11.2%)    18 (13.4%)      15 (11.4%)       48 (12%)  \n  NOT HISPANIC OR LATINO                      104 (77.6%)   103 (76.9%)    101 (76.5%)      308 (77%)  \n  UNKNOWN                                      9 (6.7%)      3 (2.2%)        5 (3.8%)       17 (4.2%)  \n\n\n\n\n\nData Setup\n\nCodelibrary(tern)\nlibrary(scda)\nlibrary(dplyr)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadsl_labels <- var_labels(adsl)\n\n# Ensure character variables are converted to factors and empty strings and NAs are explicit missing levels.\nadsl <- df_explicit_na(adsl)\n\nadsl <- adsl %>%\n  mutate(COUNTRY = droplevels(COUNTRY)) %>%\n  arrange(REGION1, COUNTRY)\n\nvar_labels(adsl) <- c(adsl_labels)\n\n\nEnrollment by Country Table\n\nCodelyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ARM\") %>%\n  add_overall_col(label = \"All Patients\") %>%\n  summarize_vars(\"COUNTRY\") %>%\n  append_varlabels(adsl, \"COUNTRY\")\n\nresult <- build_table(lyt, adsl)\nresult\n\nCountry   A: Drug X    B: Placebo   C: Combination   All Patients\n           (N=134)      (N=134)        (N=132)         (N=400)   \n—————————————————————————————————————————————————————————————————\nn            134          134            132             400     \nCHN       74 (55.2%)   81 (60.4%)     64 (48.5%)     219 (54.8%) \nUSA       10 (7.5%)    13 (9.7%)      17 (12.9%)       40 (10%)  \nBRA       13 (9.7%)     7 (5.2%)      10 (7.6%)       30 (7.5%)  \nPAK        12 (9%)      9 (6.7%)      10 (7.6%)       31 (7.8%)  \nNGA         8 (6%)      7 (5.2%)      11 (8.3%)       26 (6.5%)  \nRUS        5 (3.7%)      8 (6%)        6 (4.5%)       19 (4.8%)  \nJPN        5 (3.7%)      4 (3%)        9 (6.8%)       18 (4.5%)  \nGBR         4 (3%)      3 (2.2%)       2 (1.5%)        9 (2.2%)  \nCAN        3 (2.2%)     2 (1.5%)       3 (2.3%)         8 (2%)   \n\n\n\n\n\nData Setup\nTrimming function get_adae_trimmed is defined to filter AEs with greater than 5% incidence rate.\n\nCodelibrary(tern)\nlibrary(scda)\nlibrary(dplyr)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadae <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adae\")\n\n# Ensure character variables are converted to factors and empty strings and NAs are explicit missing levels.\nadsl <- df_explicit_na(adsl)\nadae <- df_explicit_na(adae)\n\nadae_nonser <- adae %>% filter(AESER != \"Y\", SAFFL == \"Y\")\n\nget_adae_trimmed <- function(adsl, adae, cutoff_rate) {\n  n_per_arm <- adsl %>%\n    dplyr::count(ARM)\n\n  anl_terms <- adae %>%\n    dplyr::group_by(ARM, AEBODSYS, AEDECOD) %>%\n    dplyr::count(\n      unique_terms = n_distinct(USUBJID)\n    ) %>%\n    dplyr::select(-n) %>%\n    dplyr::ungroup()\n\n  anl_terms <- dplyr::left_join(\n    anl_terms,\n    n_per_arm,\n    by = \"ARM\"\n  ) %>%\n    dplyr::mutate(\n      ae_rate = unique_terms / n\n    ) %>%\n    dplyr::filter(ae_rate >= cutoff_rate) %>%\n    dplyr::select(AEDECOD) %>%\n    unique()\n\n  anl <- dplyr::left_join(\n    anl_terms,\n    adae,\n    by = \"AEDECOD\"\n  )\n  anl\n}\n\nadae_trim <- get_adae_trimmed(adsl, adae_nonser, cutoff_rate = 0.05)\n\nWarning in dplyr::left_join(anl_terms, adae, by = \"AEDECOD\"): Each row in `x` is expected to match at most 1 row in `y`.\nℹ Row 1 of `x` matches multiple rows.\nℹ If multiple matches are expected, set `multiple = \"all\"` to silence this\n  warning.\n\n\nNon-Serious Adverse Events Report in \\(\\geq\\) 5% of Patients in Any Treatment Group\n\nCode# Define the split function\nsplit_fun <- drop_split_levels\n\nlyt <- basic_table() %>%\n  split_cols_by(\"ARM\") %>%\n  summarize_patients_events_in_cols(\n    custom_label = \"Total number of patients with at least one non-serious adverse event occuring at a relative frequency of >=5%\"\n  ) %>%\n  split_rows_by(\"AEBODSYS\",\n    nested = FALSE,\n    split_fun = split_fun,\n    indent_mod = -1L,\n    label_pos = \"topleft\",\n    split_label = obj_label(adae_trim$AEBODSYS)\n  ) %>%\n  split_rows_by(\"AEDECOD\", split_fun = split_fun, label_pos = \"topleft\", split_label = obj_label(adae_trim$AEDECOD)) %>%\n  summarize_patients_events_in_cols(\n    col_split = FALSE\n  )\n\nresult <- build_table(lyt, adae_trim)\nresult\n\nBody System or Organ Class                                                                                                A: Drug X                      B: Placebo                    C: Combination        \n  Dictionary-Derived Term                                                                                       Patients (All)   Events (All)   Patients (All)   Events (All)   Patients (All)   Events (All)\n—————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————\nTotal number of patients with at least one non-serious adverse event occuring at a relative frequency of >=5%        106             360             112             367             112             421     \ncl A.1                                                                                                                                                                                                       \n  dcd A.1.1.1.1                                                                                                       50              64              45              62              63              88     \ncl B.2                                                                                                                                                                                                       \n  dcd B.2.1.2.1                                                                                                       49              65              44              62              52              66     \ncl C.1                                                                                                                                                                                                       \n  dcd C.1.1.1.3                                                                                                       43              55              46              63              43              64     \ncl C.2                                                                                                                                                                                                       \n  dcd C.2.1.2.1                                                                                                       35              48              48              53              55              65     \ncl D.1                                                                                                                                                                                                       \n  dcd D.1.1.4.2                                                                                                       48              66              42              55              50              64     \ncl D.2                                                                                                                                                                                                       \n  dcd D.2.1.5.3                                                                                                       47              62              58              72              57              74     \n\n\n\n\n\nFor illustrative purposes, the adae data is filtered by arm “A: Drug X” here.\nData Setup\n\nCodelibrary(tern)\nlibrary(scda)\nlibrary(dplyr)\n\nadae <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adae\")\n\n# Ensure character variables are converted to factors and empty strings and NAs are explicit missing levels.\nadae <- df_explicit_na(adae)\n\nadae_serious <- adae %>% filter(AESER == \"Y\", SAFFL == \"Y\")\nadae_serious_arm <- adae_serious %>% filter(ARM == \"A: Drug X\")\n\nfilters_list <- list(\n  related = with_label(c(AEREL = \"Y\"), \"Events (Related)\"),\n  fatal = with_label(c(AESDTH = \"Y\"), \"Events (Fatal)\"),\n  fatal_related = with_label(c(AEREL = \"Y\", AESDTH = \"Y\"), \"Events (Fatal & Related)\")\n)\n\n\nSerious Adverse Events, Fatal SAEs and SAEs Related to Study Medication, by Treatment Group\n\nCode# Define the split function\nsplit_fun <- drop_split_levels\n\nlyt <- basic_table() %>%\n  summarize_patients_events_in_cols(\n    filters_list = filters_list,\n    empty_stats = c(\"all\", \"related\", \"fatal\", \"fatal_related\"),\n    custom_label = \"Total number of patients with at least one serious adverse event\"\n  ) %>%\n  split_rows_by(\"AEBODSYS\",\n    nested = FALSE,\n    split_fun = split_fun,\n    indent_mod = -1L,\n    label_pos = \"topleft\",\n    split_label = obj_label(adae_trim$AEBODSYS)\n  ) %>%\n  split_rows_by(\"AEDECOD\",\n    split_fun = split_fun,\n    label_pos = \"topleft\",\n    split_label = obj_label(adae_serious_arm$AEDECOD)\n  ) %>%\n  summarize_patients_events_in_cols(\n    filters_list = filters_list,\n    col_split = FALSE\n  )\n\nresult <- build_table(lyt, adae_serious_arm)\nresult\n\nBody System or Organ Class                                                                                                                                     \n  Dictionary-Derived Term                                          Patients (All)   Events (All)   Events (Related)   Events (Fatal)   Events (Fatal & Related)\n———————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————\nTotal number of patients with at least one serious adverse event        104                                                                                    \ncl A.1                                                                                                                                                         \n  dcd A.1.1.1.2                                                          48              68               0                 0                     0            \ncl B.1                                                                                                                                                         \n  dcd B.1.1.1.1                                                          47              56               56                56                    56           \ncl B.2                                                                                                                                                         \n  dcd B.2.2.3.1                                                          48              64               0                 0                     0            \ncl D.1                                                                                                                                                         \n  dcd D.1.1.1.1                                                          50              61               61                61                    61           \n\n\n\n\n\nData Setup\n\nCodelibrary(tern)\nlibrary(scda)\nlibrary(dplyr)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadae <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adae\")\n\n\nDeath Table\n\nCodelyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ARM\") %>%\n  add_overall_col(\"All Patients\") %>%\n  count_patients_with_event(\n    \"USUBJID\",\n    filters = c(\"AESDTH\" = \"Y\"),\n    .labels = c(count_fraction = \"Total Number of Deaths\"),\n    .formats = c(count_fraction = \"xx (xx.xx%)\")\n  )\nresult <- build_table(lyt, adae, alt_counts_df = adsl)\nresult\n\n                          A: Drug X    B: Placebo    C: Combination   All Patients\n                           (N=134)       (N=134)        (N=132)         (N=400)   \n——————————————————————————————————————————————————————————————————————————————————\nTotal Number of Deaths   76 (62.30%)   70 (56.91%)    75 (62.50%)     221 (60.55%)\n\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n[1] dplyr_1.1.0      scda_0.1.5.9009  tern_0.7.10.9056 rtables_0.6.0.1 \n[5] formatters_0.4.0 magrittr_2.0.3  \n\nloaded via a namespace (and not attached):\n [1] compiler_4.2.2    pillar_1.8.1      forcats_1.0.0     tools_4.2.2      \n [5] digest_0.6.31     lattice_0.20-45   jsonlite_1.8.4    evaluate_0.20    \n [9] lifecycle_1.0.3   tibble_3.1.8      gtable_0.3.1      checkmate_2.1.0  \n[13] pkgconfig_2.0.3   rlang_1.0.6       Matrix_1.5-3      cli_3.6.0        \n[17] yaml_2.3.7        xfun_0.37         fastmap_1.1.1     withr_2.5.0      \n[21] knitr_1.42        generics_0.1.3    vctrs_0.5.2       htmlwidgets_1.6.1\n[25] grid_4.2.2        tidyselect_1.2.0  glue_1.6.2        R6_2.5.1         \n[29] fansi_1.0.4       Rdpack_2.4        survival_3.5-3    rmarkdown_2.20   \n[33] ggplot2_3.4.1     purrr_1.0.1       tidyr_1.3.0       codetools_0.2-19 \n[37] splines_4.2.2     backports_1.4.1   scales_1.2.1      htmltools_0.5.4  \n[41] rbibutils_2.2.13  colorspace_2.1-0  utf8_1.2.3        munsell_0.5.0    \n[45] broom_1.0.3      \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R              [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/tables/other/disclosurest01.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "tables/other/rmpt04.html",
    "href": "tables/other/rmpt04.html",
    "title": "RMPT04",
    "section": "",
    "text": "Data Setup\nStandard Table\nTeal\nSession Info\n\n\n\n\nCodelibrary(tern)\nlibrary(scda)\nlibrary(dplyr)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadex <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adex\")\n\n# Ensure character variables are converted to factors and empty strings and NAs are explicit missing levels.\nadsl <- df_explicit_na(adsl)\nadex <- df_explicit_na(adex)\n\n# Simulate ADEX records with PARAMCD == \"TDURD\" as they are not in sample scda dataset.\nset.seed(1, kind = \"Mersenne-Twister\")\nadex2 <- adex %>%\n  distinct(USUBJID, .keep_all = TRUE) %>%\n  mutate(\n    PARAMCD = \"TDURD\",\n    PARAM = \"Overall duration (days)\",\n    AVAL = sample(x = seq(1, 200), size = n(), replace = TRUE)\n  ) %>%\n  bind_rows(adex)\n\n\n# Now pre-processing steps are carried out.\nanl <- adex2 %>%\n  filter(\n    PARAMCD == \"TDURD\",\n    PARCAT2 == \"Drug A\",\n    SAFFL == \"Y\"\n  )\n\nadsl_f <- adsl %>% filter(adsl$SAFFL == \"Y\")\n\n\n\n\n\nCodelyt <- basic_table(\n  title = \"Extent of Exposure by Ethnic Origin: Safety-Evaluable Patients\",\n  main_footer = \"* Patient Time is the sum of exposure across all patients in days.\",\n  show_colcounts = TRUE\n) %>%\n  summarize_patients_exposure_in_cols(\n    var = \"AVAL\", col_split = TRUE,\n    .labels = c(n_patients = \"Number of Patients\", sum_exposure = \"Patient Time*\"),\n    custom_label = \"Total Number of Patients and Patient Time\"\n  ) %>%\n  split_rows_by(\"ETHNIC\", label_pos = \"topleft\", split_label = \"Ethnicity\") %>%\n  summarize_patients_exposure_in_cols(\n    var = \"AVAL\",\n    col_split = FALSE\n  )\n\nresult <- build_table(lyt, df = anl, alt_counts_df = adsl_f)\nresult\n\nExtent of Exposure by Ethnic Origin: Safety-Evaluable Patients\n\n——————————————————————————————————————————————————————————————————————————————\nEthnicity                                   Number of Patients   Patient Time*\n                                                 (N=400)            (N=400)   \n——————————————————————————————————————————————————————————————————————————————\nTotal Number of Patients and Patient Time      217 (54.2%)           20641    \n  NOT REPORTED                                  18 (4.5%)            2085     \n  HISPANIC OR LATINO                            28 (7.0%)            2423     \n  NOT HISPANIC OR LATINO                       165 (41.2%)           15570    \n  UNKNOWN                                        6 (1.5%)             563     \n——————————————————————————————————————————————————————————————————————————————\n\n* Patient Time is the sum of exposure across all patients in days.\n\n\n\n\n\nCodelibrary(scda)\nlibrary(dplyr)\nlibrary(teal.modules.clinical)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadex <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adex\")\n\nset.seed(1, kind = \"Mersenne-Twister\")\nadex <- adex %>%\n  distinct(USUBJID, .keep_all = TRUE) %>%\n  mutate(\n    PARAMCD = \"TDURD\",\n    PARAM = \"Overall duration (days)\",\n    AVAL = sample(x = seq(1, 200), size = n(), replace = TRUE),\n    AVALU = \"Days\"\n  ) %>%\n  bind_rows(adex)\n\napp <- init(\n  data = cdisc_data(\n    cdisc_dataset(\"ADSL\", adsl, code = 'ADSL <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")'),\n    cdisc_dataset(\"ADEX\", adex, code = 'ADEX <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adex\")\n  set.seed(1, kind = \"Mersenne-Twister\")\n  ADEX <- ADEX %>%\n  distinct(USUBJID, .keep_all = TRUE) %>%\n  mutate(PARAMCD = \"TDURD\",\n         PARAM = \"Overall duration (days)\",\n         AVAL = sample(x = seq(1, 200), size = n(), replace = TRUE),\n         AVALU = \"Days\") %>%\n  bind_rows(ADEX)'),\n    check = TRUE\n  ),\n  modules = modules(\n    tm_t_exposure(\n      label = \"Duration of Exposure Table\",\n      dataname = \"ADEX\",\n      paramcd = choices_selected(\n        choices = value_choices(adex, \"PARAMCD\", \"PARAM\"),\n        selected = \"TDURD\"\n      ),\n      col_by_var = choices_selected(\n        choices = variable_choices(adex, subset = c(\"ARM\")),\n        selected = NULL\n      ),\n      row_by_var = choices_selected(\n        choices = variable_choices(adex, subset = c(\"ETHNIC\", \"SEX\")),\n        selected = \"ETHNIC\"\n      ),\n      parcat = choices_selected(\n        choices = value_choices(adex, \"PARCAT2\"),\n        selected = \"Drug A\"\n      ),\n      add_total = FALSE\n    )\n  ),\n  filter = list(\n    ADSL = list(SAFFL = \"Y\")\n  )\n)\n\n[INFO] 2023-03-10 05:38:46.4263 pid:6034 token:[] teal.modules.clinical Initializing tm_t_exposure\n\nCodeshinyApp(app$ui, app$server)\n\n\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n [1] teal.modules.clinical_0.8.14.9026 teal_0.12.0.9023                 \n [3] teal.transform_0.2.0.9011         teal.data_0.1.2.9013             \n [5] shiny_1.7.4                       dplyr_1.1.0                      \n [7] scda_0.1.5.9009                   tern_0.7.10.9056                 \n [9] rtables_0.6.0.1                   formatters_0.4.0                 \n[11] magrittr_2.0.3                   \n\nloaded via a namespace (and not attached):\n [1] sass_0.4.5               tidyr_1.3.0              jsonlite_1.8.4          \n [4] splines_4.2.2            R.utils_2.12.2           bslib_0.4.2             \n [7] teal.slice_0.2.0.9026    Rdpack_2.4               assertthat_0.2.1        \n[10] teal.code_0.3.0.9001     tern.gee_0.1.0.9002      yaml_2.3.7              \n[13] pillar_1.8.1             backports_1.4.1          lattice_0.20-45         \n[16] glue_1.6.2               teal.widgets_0.2.0.9024  digest_0.6.31           \n[19] promises_1.2.0.1         rbibutils_2.2.13         checkmate_2.1.0         \n[22] colorspace_2.1-0         R.oo_1.25.0              htmltools_0.5.4         \n[25] httpuv_1.6.9             Matrix_1.5-3             pkgconfig_2.0.3         \n[28] broom_1.0.3              logger_0.2.2             purrr_1.0.1             \n[31] xtable_1.8-4             mvtnorm_1.1-3            scales_1.2.1            \n[34] webshot_0.5.4            processx_3.8.0           fontawesome_0.5.0       \n[37] later_1.3.0              emmeans_1.8.4-1          tibble_3.1.8            \n[40] styler_1.9.1             generics_0.1.3           ggplot2_3.4.1           \n[43] ellipsis_0.3.2           shinyvalidate_0.1.2      cachem_1.0.7            \n[46] withr_2.5.0              shinyjs_2.1.0            geepack_1.3.9           \n[49] cli_3.6.0                survival_3.5-3           mime_0.12               \n[52] memoise_2.0.1            ps_1.7.2                 estimability_1.4.1      \n[55] evaluate_0.20            R.methodsS3_1.8.2        fansi_1.0.4             \n[58] R.cache_0.16.0           nlme_3.1-162             MASS_7.3-58.3           \n[61] forcats_1.0.0            teal.reporter_0.1.1.9013 tools_4.2.2             \n[64] lifecycle_1.0.3          munsell_0.5.0            callr_3.7.3             \n[67] compiler_4.2.2           jquerylib_0.1.4          rlang_1.0.6             \n[70] grid_4.2.2               htmlwidgets_1.6.1        rmarkdown_2.20          \n[73] shinyWidgets_0.7.6       gtable_0.3.1             codetools_0.2-19        \n[76] teal.logger_0.1.1.9004   R6_2.5.1                 knitr_1.42              \n[79] fastmap_1.1.1            utf8_1.2.3               Rcpp_1.0.10             \n[82] vctrs_0.5.2              tidyselect_1.2.0         xfun_0.37               \n[85] coda_0.19-4             \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R                       [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/tables/other/rmpt04.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "tables/other/rbmit01.html",
    "href": "tables/other/rbmit01.html",
    "title": "RBMIT01",
    "section": "",
    "text": "Data Setup\nDraws\nImpute\nAnalyze\nPool\nCreate Output\nSession Info\n\n\n\nWe use a publicly available example dataset from an antidepressant clinical trial of an active drug versus placebo from the rbmi package. The relevant endpoint is the Hamilton 17-item depression rating scale (HAMD17) which was assessed at baseline and at weeks 1, 2, 4, and 6. Study drug discontinuation occurred in 24% of subjects from the active drug and 26% of subjects from placebo. All data after study drug discontinuation are missing and there is a single additional intermittent missing observation.\n\nCodelibrary(tern.rbmi)\nlibrary(dplyr)\n\ndata <- antidepressant_data\nlevels(data$THERAPY) <- c(\"PLACEBO\", \"DRUG\") # This is important! The order defines the computation order later\n\nmissing_var <- \"CHANGE\"\nvars <- list(\n  id = \"PATIENT\",\n  visit = \"VISIT\",\n  expand_vars = c(\"BASVAL\", \"THERAPY\"),\n  group = \"THERAPY\"\n)\ncovariates <- list(\n  draws = c(\"BASVAL*VISIT\", \"THERAPY*VISIT\"),\n  analyse = c(\"BASVAL\")\n)\n\ndata <- data %>%\n  dplyr::select(PATIENT, THERAPY, VISIT, BASVAL, THERAPY, CHANGE) %>%\n  dplyr::mutate(dplyr::across(.cols = vars$id, ~ as.factor(.x))) %>%\n  dplyr::arrange(dplyr::across(.cols = c(vars$id, vars$visit)))\n\n# Use expand_locf to add rows corresponding to visits with missing outcomes to the dataset\ndata_full <- do.call(\n  expand_locf,\n  args = list(\n    data = data,\n    vars = c(vars$expand_vars, vars$group),\n    group = vars$id,\n    order = c(vars$id, vars$visit)\n  ) %>%\n    append(lapply(data[c(vars$id, vars$visit)], levels))\n)\n\ndata_full <- data_full %>%\n  dplyr::group_by(dplyr::across(vars$id)) %>%\n  dplyr::mutate(!!vars$group := Filter(Negate(is.na), .data[[vars$group]])[1])\n\n# there are duplicates - use first value\ndata_full <- data_full %>%\n  dplyr::group_by(dplyr::across(c(vars$id, vars$group, vars$visit))) %>%\n  dplyr::slice(1) %>%\n  dplyr::ungroup()\n# need to have a single ID column\ndata_full <- data_full %>%\n  tidyr::unite(\"TMP_ID\", dplyr::all_of(vars$id), sep = \"_#_\", remove = FALSE) %>%\n  dplyr::mutate(TMP_ID = as.factor(TMP_ID))\n\n\nCreating Intercurrent Event Data\nSet the imputation strategy to \"MAR\" for each patient with at least one missing observation.\n\nCodedata_ice <- data_full %>%\n  dplyr::arrange(dplyr::across(.cols = c(\"TMP_ID\", vars$visit))) %>%\n  dplyr::filter(is.na(.data[[missing_var]])) %>%\n  dplyr::group_by(TMP_ID) %>%\n  dplyr::slice(1) %>%\n  dplyr::ungroup() %>%\n  dplyr::select(all_of(c(\"TMP_ID\", vars$visit))) %>%\n  dplyr::mutate(strategy = \"MAR\")\n\n\n\n\n\nThe rbmi::draws() function fits the imputation models and stores the corresponding parameter estimates or Bayesian posterior parameter draws. The three main inputs to the rbmi::draws() function are:\n\n\ndata - The primary longitudinal data.frame containing the outcome variable and all covariates.\n\ndata_ice - A data.frame which specifies the first visit affected by an intercurrent event (ICE) and the imputation strategy for handling missing outcome data after the ICE. At most one ICE which is to be imputed by a non-MAR strategy is allowed per subject.\n\nmethod - The statistical method used to fit the imputation models and to create imputed datasets.\n\nDefine Key Variables\nDefine the names of key variables in our dataset and the covariates included in the imputation model using rbmi::set_vars(). Note that the covariates argument can also include interaction terms.\n\nCodedebug_mode <- FALSE\n\ndraws_vars <- rbmi::set_vars(\n  outcome = missing_var,\n  visit = vars$visit,\n  group = vars$group,\n  covariates = covariates$draws\n)\ndraws_vars$subjid <- \"TMP_ID\"\n\n\nDefine which imputation method to use, then create samples for the imputation parameters by running the draws() function.\n\nCodedraws_method <- method_bayes()\n\ndraws_obj <- rbmi::draws(\n  data = data_full,\n  data_ice = data_ice,\n  vars = draws_vars,\n  method = draws_method\n)\n\n\nSAMPLING FOR MODEL 'MMRM' NOW (CHAIN 1).\nChain 1: \nChain 1: Gradient evaluation took 0.000995 seconds\nChain 1: 1000 transitions using 10 leapfrog steps per transition would take 9.95 seconds.\nChain 1: Adjust your expectations accordingly!\nChain 1: \nChain 1: \nChain 1: Iteration:    1 / 1200 [  0%]  (Warmup)\nChain 1: Iteration:  120 / 1200 [ 10%]  (Warmup)\nChain 1: Iteration:  201 / 1200 [ 16%]  (Sampling)\nChain 1: Iteration:  320 / 1200 [ 26%]  (Sampling)\nChain 1: Iteration:  440 / 1200 [ 36%]  (Sampling)\nChain 1: Iteration:  560 / 1200 [ 46%]  (Sampling)\nChain 1: Iteration:  680 / 1200 [ 56%]  (Sampling)\nChain 1: Iteration:  800 / 1200 [ 66%]  (Sampling)\nChain 1: Iteration:  920 / 1200 [ 76%]  (Sampling)\nChain 1: Iteration: 1040 / 1200 [ 86%]  (Sampling)\nChain 1: Iteration: 1160 / 1200 [ 96%]  (Sampling)\nChain 1: Iteration: 1200 / 1200 [100%]  (Sampling)\nChain 1: \nChain 1:  Elapsed Time: 1.02754 seconds (Warm-up)\nChain 1:                3.36144 seconds (Sampling)\nChain 1:                4.38898 seconds (Total)\nChain 1: \n\n\n\n\n\nThe next step is to use the parameters from the imputation model to generate the imputed datasets. This is done via the rbmi::impute() function. The function only has two key inputs: the imputation model output from rbmi::draws() and the reference groups relevant to reference-based imputation methods. It’s usage is thus:\n\nCodeimpute_references <- c(\"DRUG\" = \"PLACEBO\", \"PLACEBO\" = \"PLACEBO\")\n\nimpute_obj <- rbmi::impute(\n  draws_obj,\n  references = impute_references\n)\n\n\n\n\nThe next step is to run the analysis model on each imputed dataset. This is done by defining an analysis function and then calling rbmi::analyse() to apply this function to each imputed dataset.\n\nCode# Define analysis model\nanalyse_fun <- ancova\n\nref_levels <- levels(impute_obj$data$group[[1]])\nnames(ref_levels) <- c(\"ref\", \"alt\")\n\nanalyse_obj <- rbmi::analyse(\n  imputations = impute_obj,\n  fun = analyse_fun,\n  vars = rbmi::set_vars(\n    subjid = \"TMP_ID\",\n    outcome = missing_var,\n    visit = vars$visit,\n    group = vars$group,\n    covariates = covariates$analyse\n  )\n)\n\n\n\n\nThe rbmi::pool() function can be used to summarize the analysis results across multiple imputed datasets to provide an overall statistic with a standard error, confidence intervals and a p-value for the hypothesis test of the null hypothesis that the effect is equal to 0. Using the broom::tidy() function the rbmi final results are reshaped.\n\nCodelibrary(broom)\n\npool_obj <- rbmi::pool(\n  results = analyse_obj,\n  conf.level = 0.95,\n  alternative = c(\"two.sided\", \"less\", \"greater\"),\n  type = c(\"percentile\", \"normal\")\n)\n\ndf <- tidy(pool_obj)\ndf\n\n  group       est    se_est lower_cl_est upper_cl_est   est_contr  se_contr\n1   ref -1.615820 0.4862316    -2.575771   -0.6558685          NA        NA\n2   alt -1.707626 0.4749573    -2.645319   -0.7699335 -0.09180645 0.6826279\n3   ref -4.222296 0.6515841    -5.509280   -2.9353125          NA        NA\n4   alt -2.828923 0.6376717    -4.088490   -1.5693564  1.39337302 0.9126965\n5   ref -6.371880 0.6951488    -7.745110   -4.9986493          NA        NA\n6   alt -4.113039 0.6970683    -5.491299   -2.7347792  2.25884048 0.9981108\n7   ref -7.647094 0.7706202    -9.170136   -6.1240527          NA        NA\n8   alt -4.838099 0.7782572    -6.378378   -3.2978202  2.80899495 1.1072355\n  lower_cl_contr upper_cl_contr    p_value relative_reduc visit conf_level\n1             NA             NA         NA             NA     4       0.95\n2     -1.4394968       1.255884 0.89317724     0.05681725     4       0.95\n3             NA             NA         NA             NA     5       0.95\n4     -0.4092460       3.195992 0.12884023    -0.33000362     5       0.95\n5             NA             NA         NA             NA     6       0.95\n6      0.2856405       4.232041 0.02515636    -0.35450143     6       0.95\n7             NA             NA         NA             NA     7       0.95\n8      0.6186521       4.999338 0.01235349    -0.36732841     7       0.95\n\n\n\n\nFinally, use functions from the rtables and tern packages to generate a nicely formatted rtable object.\n\nCodebasic_table() %>%\n  split_cols_by(\"group\", ref_group = levels(df$group)[1]) %>%\n  split_rows_by(\"visit\", split_label = \"Visit\", label_pos = \"topleft\") %>%\n  summarize_rbmi() %>%\n  build_table(df)\n\nVisit                                       ref                alt       \n—————————————————————————————————————————————————————————————————————————\n4                                                                        \n  Adjusted Mean (SE)                   -1.616 (0.486)     -1.708 (0.475) \n    95% CI                            (-2.576, -0.656)   (-2.645, -0.770)\n  Difference in Adjusted Means (SE)                       -0.092 (0.683) \n    95% CI                                               (-1.439, 1.256) \n    Relative Reduction (%)                                     5.7%      \n    p-value (RBMI)                                            0.8932     \n5                                                                        \n  Adjusted Mean (SE)                   -4.222 (0.652)     -2.829 (0.638) \n    95% CI                            (-5.509, -2.935)   (-4.088, -1.569)\n  Difference in Adjusted Means (SE)                       1.393 (0.913)  \n    95% CI                                               (-0.409, 3.196) \n    Relative Reduction (%)                                    -33.0%     \n    p-value (RBMI)                                            0.1288     \n6                                                                        \n  Adjusted Mean (SE)                   -6.372 (0.695)     -4.113 (0.697) \n    95% CI                            (-7.745, -4.999)   (-5.491, -2.735)\n  Difference in Adjusted Means (SE)                       2.259 (0.998)  \n    95% CI                                                (0.286, 4.232) \n    Relative Reduction (%)                                    -35.5%     \n    p-value (RBMI)                                            0.0252     \n7                                                                        \n  Adjusted Mean (SE)                   -7.647 (0.771)     -4.838 (0.778) \n    95% CI                            (-9.170, -6.124)   (-6.378, -3.298)\n  Difference in Adjusted Means (SE)                       2.809 (1.107)  \n    95% CI                                                (0.619, 4.999) \n    Relative Reduction (%)                                    -36.7%     \n    p-value (RBMI)                                            0.0124     \n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n[1] broom_1.0.3          dplyr_1.1.0          tern.rbmi_0.1.2.9004\n[4] tern_0.7.10.9056     rtables_0.6.0.1      formatters_0.4.0    \n[7] magrittr_2.0.3       rbmi_1.2.3          \n\nloaded via a namespace (and not attached):\n [1] Rcpp_1.0.10          mvtnorm_1.1-3        lattice_0.20-45     \n [4] tidyr_1.3.0          prettyunits_1.1.1    ps_1.7.2            \n [7] assertthat_0.2.1     digest_0.6.31        utf8_1.2.3          \n[10] R6_2.5.1             backports_1.4.1      stats4_4.2.2        \n[13] evaluate_0.20        coda_0.19-4          ggplot2_3.4.1       \n[16] pillar_1.8.1         Rdpack_2.4           rlang_1.0.6         \n[19] callr_3.7.3          Matrix_1.5-3         checkmate_2.1.0     \n[22] rmarkdown_2.20       splines_4.2.2        TMB_1.9.2           \n[25] stringr_1.5.0        htmlwidgets_1.6.1    loo_2.5.1           \n[28] munsell_0.5.0        compiler_4.2.2       numDeriv_2016.8-1.1 \n[31] xfun_0.37            rstan_2.21.8         pkgconfig_2.0.3     \n[34] pkgbuild_1.4.0       mmrm_0.2.2           htmltools_0.5.4     \n[37] tidyselect_1.2.0     tibble_3.1.8         gridExtra_2.3       \n[40] codetools_0.2-19     matrixStats_0.63.0   fansi_1.0.4         \n[43] withr_2.5.0          crayon_1.5.2         rbibutils_2.2.13    \n[46] grid_4.2.2           nlme_3.1-162         jsonlite_1.8.4      \n[49] xtable_1.8-4         gtable_0.3.1         lifecycle_1.0.3     \n[52] StanHeaders_2.21.0-7 scales_1.2.1         RcppParallel_5.1.7  \n[55] estimability_1.4.1   cli_3.6.0            stringi_1.7.12      \n[58] vctrs_0.5.2          generics_0.1.3       tools_4.2.2         \n[61] glue_1.6.2           purrr_1.0.1          emmeans_1.8.4-1     \n[64] survival_3.5-3       processx_3.8.0       parallel_4.2.2      \n[67] fastmap_1.1.1        yaml_2.3.7           inline_0.3.19       \n[70] colorspace_2.1-0     knitr_1.42          \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R              [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/tables/other/rbmit01.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "tables/other/aovt03.html",
    "href": "tables/other/aovt03.html",
    "title": "AOVT03",
    "section": "",
    "text": "This example will focus on data from multiple visits and take the interaction between visits and arms into consideration.\n\n\nData Setup\nStandard Table\nTeal\nSession Info\n\n\n\n\nCodelibrary(scda)\nlibrary(tern)\nlibrary(dplyr)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadqs <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adqs\")\n\nadqs_in <- adqs %>%\n  filter(AVISIT %in% c(\"WEEK 1 DAY 8\", \"WEEK 2 DAY 15\", \"WEEK 5 DAY 36\")) %>%\n  droplevels() %>%\n  filter(PARAM %in% c(\"BFI All Questions\", \"Fatigue Interference\")) %>%\n  mutate(CHG = ifelse(BMEASIFL == \"Y\", CHG, NA)) # only analyze evaluable population\n\n\n\n\n\nCoderesult <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ARMCD\", ref_group = \"ARM A\") %>%\n  split_rows_by(\"PARAM\", split_fun = drop_split_levels) %>%\n  summarize_ancova(\n    vars = \"CHG\",\n    variables = list(arm = \"ARMCD\", covariates = c(\"BASE\", \"AVISIT\", \"AVISIT*ARMCD\")),\n    conf_level = 0.95,\n    var_labels = \"WEEK 1 DAY 8\",\n    table_names = \"WEEK 1 DAY 8\",\n    interaction_y = \"WEEK 1 DAY 8\",\n    interaction_item = \"AVISIT\"\n  ) %>%\n  summarize_ancova(\n    vars = \"CHG\",\n    variables = list(arm = \"ARMCD\", covariates = c(\"BASE\", \"AVISIT\", \"AVISIT*ARMCD\")),\n    conf_level = 0.95,\n    var_labels = \"WEEK 2 DAY 15\",\n    table_names = \"WEEK 2 DAY 15\",\n    interaction_y = \"WEEK 2 DAY 15\",\n    interaction_item = \"AVISIT\"\n  ) %>%\n  summarize_ancova(\n    vars = \"CHG\",\n    variables = list(arm = \"ARMCD\", covariates = c(\"BASE\", \"AVISIT\", \"AVISIT*ARMCD\")),\n    conf_level = 0.95,\n    var_labels = \"WEEK 5 DAY 36\",\n    table_names = \"WEEK 5 DAY 36\",\n    interaction_y = \"WEEK 5 DAY 36\",\n    interaction_item = \"AVISIT\"\n  ) %>%\n  build_table(adqs_in, alt_counts_df = adsl)\n\nresult\n\n                                    ARM A        ARM B           ARM C    \n                                   (N=134)      (N=134)         (N=132)   \n——————————————————————————————————————————————————————————————————————————\nBFI All Questions                                                         \n  WEEK 1 DAY 8                                                            \n    n                                68           73              62      \n    Adjusted Mean                   4.34         5.96            3.90     \n    Difference in Adjusted Means                 1.62            -0.44    \n      95% CI                                 (-1.75, 4.98)   (-3.94, 3.06)\n      p-value                                   0.3460          0.8059    \n  WEEK 2 DAY 15                                                           \n    n                                68           73              62      \n    Adjusted Mean                   12.99        11.23           9.86     \n    Difference in Adjusted Means                 -1.76           -3.13    \n      95% CI                                 (-5.12, 1.60)   (-6.64, 0.37)\n      p-value                                   0.3048          0.0795    \n  WEEK 5 DAY 36                                                           \n    n                                68           73              62      \n    Adjusted Mean                   23.88        23.08           28.21    \n    Difference in Adjusted Means                 -0.81           4.33     \n      95% CI                                 (-4.17, 2.56)   (0.83, 7.83) \n      p-value                                   0.6383          0.0155    \nFatigue Interference                                                      \n  WEEK 1 DAY 8                                                            \n    n                                68           73              62      \n    Adjusted Mean                   5.97         5.19            5.21     \n    Difference in Adjusted Means                 -0.78           -0.76    \n      95% CI                                 (-4.17, 2.61)   (-4.30, 2.78)\n      p-value                                   0.6522          0.6729    \n  WEEK 2 DAY 15                                                           \n    n                                68           73              62      \n    Adjusted Mean                   11.39        9.42            9.55     \n    Difference in Adjusted Means                 -1.96           -1.84    \n      95% CI                                 (-5.35, 1.43)   (-5.37, 1.70)\n      p-value                                   0.2560          0.3084    \n  WEEK 5 DAY 36                                                           \n    n                                68           73              62      \n    Adjusted Mean                   22.79        25.37           23.43    \n    Difference in Adjusted Means                 2.58            0.64     \n      95% CI                                 (-0.81, 5.97)   (-2.89, 4.18)\n      p-value                                   0.1353          0.7212    \n\n\n\n\n\nCode# In progress\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n[1] dplyr_1.1.0      tern_0.7.10.9056 rtables_0.6.0.1  formatters_0.4.0\n[5] magrittr_2.0.3   scda_0.1.5.9009 \n\nloaded via a namespace (and not attached):\n [1] compiler_4.2.2     pillar_1.8.1       tools_4.2.2        digest_0.6.31     \n [5] lattice_0.20-45    jsonlite_1.8.4     evaluate_0.20      lifecycle_1.0.3   \n [9] tibble_3.1.8       gtable_0.3.1       checkmate_2.1.0    pkgconfig_2.0.3   \n[13] rlang_1.0.6        Matrix_1.5-3       cli_3.6.0          yaml_2.3.7        \n[17] mvtnorm_1.1-3      xfun_0.37          fastmap_1.1.1      coda_0.19-4       \n[21] withr_2.5.0        knitr_1.42         generics_0.1.3     vctrs_0.5.2       \n[25] htmlwidgets_1.6.1  grid_4.2.2         tidyselect_1.2.0   glue_1.6.2        \n[29] R6_2.5.1           fansi_1.0.4        Rdpack_2.4         survival_3.5-3    \n[33] rmarkdown_2.20     tidyr_1.3.0        purrr_1.0.1        ggplot2_3.4.1     \n[37] emmeans_1.8.4-1    codetools_0.2-19   splines_4.2.2      backports_1.4.1   \n[41] scales_1.2.1       htmltools_0.5.4    rbibutils_2.2.13   xtable_1.8-4      \n[45] colorspace_2.1-0   utf8_1.2.3         estimability_1.4.1 munsell_0.5.0     \n[49] broom_1.0.3       \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R              [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/tables/other/aovt03.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "tables/lab-results/lbt02.html",
    "href": "tables/lab-results/lbt02.html",
    "title": "LBT02",
    "section": "",
    "text": "Data Setup\nStandard Table\nTeal\nSession Info\n\n\n\n\nCode# Preparation of an illustrative dataset\nlibrary(scda)\nlibrary(tern)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadlb <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adlb\")\n\nadlb_labels <- var_labels(adlb)\n\n# For illustration purposes, the example focuses on ALT\n# Measurements starting from baseline and excluding all screening visits\nadlb <- subset(adlb, AVISIT != \"SCREENING\" & PARAMCD == \"ALT\")\nadlb$AVISIT <- droplevels(adlb$AVISIT)\n\nvar_labels(adlb) <- adlb_labels\n\n# Ensure character variables are converted to factors and empty strings and NAs are explicit missing levels.\nadsl <- df_explicit_na(adsl)\nadlb <- df_explicit_na(adlb)\n\n\n\n\n\nCode# Define the split function\nsplit_fun <- drop_split_levels\n\nl <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(var = \"ARM\") %>%\n  add_overall_col(\"All Patients\") %>%\n  split_rows_by(\n    var = \"AVISIT\",\n    split_fun = split_fun,\n    label_pos = \"topleft\",\n    split_label = obj_label(adlb$AVISIT)\n  ) %>%\n  summarize_vars(vars = \"AVAL\")\n\nresult <- build_table(l,\n  df = adlb,\n  alt_counts_df = adsl\n)\nresult\n\nAnalysis Visit    A: Drug X    B: Placebo    C: Combination   All Patients\n                   (N=134)       (N=134)        (N=132)         (N=400)   \n——————————————————————————————————————————————————————————————————————————\nBASELINE                                                                  \n  n                  134           134            132             400     \n  Mean (SD)      19.8 (4.2)    20.2 (4.2)      20.5 (3.9)      20.1 (4.1) \n  Median            19.8          20.1            20.4            20.0    \n  Min - Max      7.0 - 30.4    8.1 - 34.6      8.8 - 28.7      7.0 - 34.6 \nWEEK 1 DAY 8                                                              \n  n                  134           134            132             400     \n  Mean (SD)      19.3 (4.0)    20.2 (4.0)      20.6 (3.9)      20.0 (4.0) \n  Median            19.2          20.1            20.4            20.0    \n  Min - Max      8.9 - 27.3    5.8 - 28.8      9.9 - 30.7      5.8 - 30.7 \nWEEK 2 DAY 15                                                             \n  n                  134           134            132             400     \n  Mean (SD)      19.7 (4.2)    20.1 (4.3)      19.2 (3.6)      19.7 (4.0) \n  Median            19.2          20.0            19.6            19.6    \n  Min - Max      7.2 - 30.5    7.2 - 30.5      8.1 - 26.7      7.2 - 30.5 \nWEEK 3 DAY 22                                                             \n  n                  134           134            132             400     \n  Mean (SD)      20.1 (3.8)    19.8 (3.9)      19.4 (3.9)      19.8 (3.9) \n  Median            20.0          19.9            18.8            19.7    \n  Min - Max      11.5 - 29.5   11.9 - 28.2    10.2 - 28.5     10.2 - 29.5 \nWEEK 4 DAY 29                                                             \n  n                  134           134            132             400     \n  Mean (SD)      20.4 (4.6)    19.6 (4.3)      19.8 (4.0)      19.9 (4.3) \n  Median            19.8          19.2            19.9            19.7    \n  Min - Max      9.9 - 34.5    11.5 - 32.0     7.8 - 29.3      7.8 - 34.5 \nWEEK 5 DAY 36                                                             \n  n                  134           134            132             400     \n  Mean (SD)      20.4 (3.9)    19.9 (4.2)      20.0 (4.2)      20.1 (4.1) \n  Median            20.7          20.1            20.5            20.4    \n  Min - Max      10.9 - 30.2   10.3 - 29.1     7.4 - 27.8      7.4 - 30.2 \n\n\n\n\n\nCodelibrary(scda)\nlibrary(teal.modules.clinical)\nlibrary(dplyr)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadlb <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adlb\")\n\n# Ensure missing and NA values are cleaned up and convert variables to factors.\nadsl <- df_explicit_na(adsl)\nadlb <- df_explicit_na(adlb)\n\napp <- init(\n  data = cdisc_data(\n    cdisc_dataset(\"ADSL\", adsl, code = 'ADSL <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\n                                        ADSL <- df_explicit_na(ADSL)'),\n    cdisc_dataset(\"ADLB\", adlb, code = 'ADLB <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adlb\")\n                                        ADLB <- df_explicit_na(ADLB)'),\n    check = TRUE\n  ),\n  modules = modules(\n    tm_t_summary_by(\n      label = \"Laboratory Test Results by Visit\",\n      dataname = \"ADLB\",\n      arm_var = choices_selected(\n        choices = variable_choices(adsl, c(\"ARM\", \"ARMCD\")),\n        selected = \"ARM\"\n      ),\n      by_vars = choices_selected(\n        choices = variable_choices(adlb, c(\"PARAM\", \"AVISIT\")), # note: order matters here. If `PARAM` is first, the split will be first by `PARAM`and then by `AVISIT`\n        selected = c(\"PARAM\", \"AVISIT\")\n      ),\n      summarize_vars = choices_selected(\n        choices = variable_choices(adlb, c(\"AVAL\")),\n        selected = c(\"AVAL\")\n      ),\n      useNA = \"ifany\",\n      paramcd = choices_selected(\n        choices = value_choices(adlb, \"PARAMCD\", \"PARAM\"),\n        selected = \"ALT\"\n      )\n    )\n  ),\n  filter = list(ADLB = list(AVAL = list()))\n)\n\n[INFO] 2023-03-10 05:39:36.6674 pid:6200 token:[] teal.modules.clinical Initializing tm_t_summary_by\n\nCodeshinyApp(app$ui, app$server)\n\n\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n [1] dplyr_1.1.0                       teal.modules.clinical_0.8.14.9026\n [3] teal_0.12.0.9023                  teal.transform_0.2.0.9011        \n [5] teal.data_0.1.2.9013              shiny_1.7.4                      \n [7] tern_0.7.10.9056                  rtables_0.6.0.1                  \n [9] formatters_0.4.0                  magrittr_2.0.3                   \n[11] scda_0.1.5.9009                  \n\nloaded via a namespace (and not attached):\n [1] sass_0.4.5               tidyr_1.3.0              jsonlite_1.8.4          \n [4] splines_4.2.2            R.utils_2.12.2           bslib_0.4.2             \n [7] teal.slice_0.2.0.9026    Rdpack_2.4               assertthat_0.2.1        \n[10] teal.code_0.3.0.9001     tern.gee_0.1.0.9002      yaml_2.3.7              \n[13] pillar_1.8.1             backports_1.4.1          lattice_0.20-45         \n[16] glue_1.6.2               teal.widgets_0.2.0.9024  digest_0.6.31           \n[19] promises_1.2.0.1         rbibutils_2.2.13         checkmate_2.1.0         \n[22] colorspace_2.1-0         R.oo_1.25.0              htmltools_0.5.4         \n[25] httpuv_1.6.9             Matrix_1.5-3             pkgconfig_2.0.3         \n[28] broom_1.0.3              logger_0.2.2             purrr_1.0.1             \n[31] xtable_1.8-4             mvtnorm_1.1-3            webshot_0.5.4           \n[34] scales_1.2.1             processx_3.8.0           fontawesome_0.5.0       \n[37] later_1.3.0              emmeans_1.8.4-1          tibble_3.1.8            \n[40] styler_1.9.1             farver_2.1.1             generics_0.1.3          \n[43] ggplot2_3.4.1            ellipsis_0.3.2           shinyvalidate_0.1.2     \n[46] cachem_1.0.7             withr_2.5.0              shinyjs_2.1.0           \n[49] geepack_1.3.9            cli_3.6.0                survival_3.5-3          \n[52] mime_0.12                memoise_2.0.1            ps_1.7.2                \n[55] estimability_1.4.1       evaluate_0.20            R.methodsS3_1.8.2       \n[58] fansi_1.0.4              R.cache_0.16.0           nlme_3.1-162            \n[61] MASS_7.3-58.3            forcats_1.0.0            textshaping_0.3.6       \n[64] teal.reporter_0.1.1.9013 tools_4.2.2              lifecycle_1.0.3         \n[67] munsell_0.5.0            callr_3.7.3              compiler_4.2.2          \n[70] jquerylib_0.1.4          systemfonts_1.0.4        rlang_1.0.6             \n[73] grid_4.2.2               htmlwidgets_1.6.1        labeling_0.4.2          \n[76] rmarkdown_2.20           shinyWidgets_0.7.6       gtable_0.3.1            \n[79] codetools_0.2-19         teal.logger_0.1.1.9004   R6_2.5.1                \n[82] knitr_1.42               fastmap_1.1.1            utf8_1.2.3              \n[85] ragg_1.2.5               Rcpp_1.0.10              vctrs_0.5.2             \n[88] tidyselect_1.2.0         xfun_0.37                coda_0.19-4             \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R                       [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/tables/lab-results/lbt02.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "tables/lab-results/lbt11.html",
    "href": "tables/lab-results/lbt11.html",
    "title": "LBT11",
    "section": "",
    "text": "Data Setup\nTime-To-Event Summary\nTime-To-Event Summary  Selecting Sections to Display\nTime-To-Event Summary  with Stratified Analysis\nTeal\nSession Info\n\n\n\n\nCodelibrary(tern)\nlibrary(scda)\nlibrary(dplyr)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadsaftte <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adaette\")\n\n# Ensure character variables are converted to factors and empty strings and NAs are explicit missing levels.\nadsl <- df_explicit_na(adsl)\nadsaftte <- df_explicit_na(adsaftte)\n\nadsl_safl <- dplyr::filter(adsl, .data$SAFFL == \"Y\")\n\nanl <- adsaftte %>%\n  dplyr::filter(\n    SAFFL == \"Y\",\n    PARAMCD == \"HYSTTEUL\"\n  ) %>%\n  dplyr::mutate(\n    AVAL = .data$AVAL * dplyr::case_when( # convert to days, if possible\n      .data$AVALU == \"WEEKS\" ~ 7,\n      .data$AVALU == \"MONTHS\" ~ 30.4375,\n      .data$AVALU == \"YEARS\" ~ 365,\n      TRUE ~ 1\n    ),\n    AVALU = factor(dplyr::case_when(\n      .data$AVALU %in% c(\"WEEKS\", \"MONTHS\", \"YEARS\") ~ factor(\"DAYS\"),\n      TRUE ~ .data$AVALU\n    ), levels = \"DAYS\"),\n    is_event = CNSR == 0, # this will be a LLT event\n    event_grp = factor(\n      dplyr::case_when(\n        CNSR == 0 ~ \"Patients with LLT event (%)\",\n        CNSR == 1 ~ \"Patients without LLT event (%)\"\n      ),\n      levels = c(\n        \"Patients with LLT event (%)\",\n        \"Patients without LLT event (%)\"\n      )\n    )\n  )\n\n\n\n\n\nCodelyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(var = \"ARMCD\", ref_group = \"ARM A\") %>%\n  count_occurrences(vars = \"event_grp\") %>%\n  surv_time(\n    vars = \"AVAL\",\n    var_labels = paste0(\"Time to 1st LLT Event (\", levels(anl$AVALU), \")\"),\n    is_event = \"is_event\",\n    table_names = \"time_to_event\"\n  ) %>%\n  coxph_pairwise(\n    vars = \"AVAL\",\n    is_event = \"is_event\",\n    var_labels = \"Unstratified Analysis\",\n    control = control_coxph(pval_method = \"log-rank\"),\n    table_names = \"coxph_unstratified\"\n  )\n\nresult <- build_table(lyt, df = anl, alt_counts_df = adsl_safl)\nresult\n\n                                     ARM A           ARM B            ARM C    \n                                    (N=134)         (N=134)          (N=132)   \n———————————————————————————————————————————————————————————————————————————————\nPatients with LLT event (%)       20 (14.9%)        9 (6.7%)        9 (6.8%)   \nPatients without LLT event (%)    114 (85.1%)     125 (93.3%)      123 (93.2%) \nTime to 1st LLT Event (DAYS)                                                   \n  Median                              NA               NA             728.0    \n  95% CI                              NA          (724.0, NA)          NA      \n  25% and 75%-ile                  618.0, NA       724.0, NA      728.0, 728.0 \n  Range (censored)               1.0 to 730.0     1.0 to 727.0    1.0 to 722.0 \n  Range (event)                  34.0 to 666.0   139.0 to 724.0   10.0 to 728.0\nUnstratified Analysis                                                          \n  p-value (log-rank)                                 0.0296          0.1708    \n  Hazard Ratio                                        0.43            0.58     \n  95% CI                                          (0.19, 0.94)    (0.26, 1.28) \n\n\n\n\n\nCodelyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(var = \"ARMCD\", ref_group = \"ARM A\") %>%\n  count_occurrences(vars = \"event_grp\") %>%\n  surv_time(\n    vars = \"AVAL\",\n    var_labels = paste0(\"Time to 1st LLT Event (\", levels(anl$AVALU), \")\"),\n    is_event = \"is_event\",\n    table_names = \"time_to_event\"\n  )\n\nresult <- build_table(lyt, df = anl, alt_counts_df = adsl_safl)\nresult\n\n                                     ARM A           ARM B            ARM C    \n                                    (N=134)         (N=134)          (N=132)   \n———————————————————————————————————————————————————————————————————————————————\nPatients with LLT event (%)       20 (14.9%)        9 (6.7%)        9 (6.8%)   \nPatients without LLT event (%)    114 (85.1%)     125 (93.3%)      123 (93.2%) \nTime to 1st LLT Event (DAYS)                                                   \n  Median                              NA               NA             728.0    \n  95% CI                              NA          (724.0, NA)          NA      \n  25% and 75%-ile                  618.0, NA       724.0, NA      728.0, 728.0 \n  Range (censored)               1.0 to 730.0     1.0 to 727.0    1.0 to 722.0 \n  Range (event)                  34.0 to 666.0   139.0 to 724.0   10.0 to 728.0\n\n\n\n\n\nCodestrata <- c(\"RACE\", \"SEX\")\n\nlyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(var = \"ARMCD\", ref_group = \"ARM A\") %>%\n  count_occurrences(vars = \"event_grp\") %>%\n  surv_time(\n    vars = \"AVAL\",\n    var_labels = paste0(\"Time to 1st LLT Event (\", levels(anl$AVALU), \")\"),\n    is_event = \"is_event\",\n    table_names = \"time_to_event\"\n  ) %>%\n  coxph_pairwise(\n    vars = \"AVAL\",\n    is_event = \"is_event\",\n    var_labels = \"Unstratified Analysis\",\n    control = control_coxph(pval_method = \"log-rank\"),\n    table_names = \"coxph_unstratified\"\n  ) %>%\n  coxph_pairwise(\n    vars = \"AVAL\",\n    is_event = \"is_event\",\n    var_labels = paste0(\"Stratified By: \", paste(strata, collapse = \", \")),\n    strat = strata,\n    table_names = \"coxph_stratified\"\n  )\n\nresult <- build_table(lyt, df = anl, alt_counts_df = adsl_safl)\nresult\n\n                                     ARM A           ARM B            ARM C    \n                                    (N=134)         (N=134)          (N=132)   \n———————————————————————————————————————————————————————————————————————————————\nPatients with LLT event (%)       20 (14.9%)        9 (6.7%)        9 (6.8%)   \nPatients without LLT event (%)    114 (85.1%)     125 (93.3%)      123 (93.2%) \nTime to 1st LLT Event (DAYS)                                                   \n  Median                              NA               NA             728.0    \n  95% CI                              NA          (724.0, NA)          NA      \n  25% and 75%-ile                  618.0, NA       724.0, NA      728.0, 728.0 \n  Range (censored)               1.0 to 730.0     1.0 to 727.0    1.0 to 722.0 \n  Range (event)                  34.0 to 666.0   139.0 to 724.0   10.0 to 728.0\nUnstratified Analysis                                                          \n  p-value (log-rank)                                 0.0296          0.1708    \n  Hazard Ratio                                        0.43            0.58     \n  95% CI                                          (0.19, 0.94)    (0.26, 1.28) \nStratified By: RACE, SEX                                                       \n  p-value (log-rank)                                 0.0862          0.1613    \n  Hazard Ratio                                        0.51            0.57     \n  95% CI                                          (0.23, 1.12)    (0.26, 1.26) \n\n\n\n\n\nCodelibrary(teal.modules.clinical)\nlibrary(scda)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadsaftte <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adaette\")\n\n# Ensure character variables are converted to factors and empty strings and NAs are explicit missing levels.\nadsl <- df_explicit_na(adsl)\nadsaftte <- df_explicit_na(adsaftte)\n\nadsl <- dplyr::filter(adsl, .data$SAFFL == \"Y\")\nadsaftte <- dplyr::filter(adsaftte, .data$SAFFL == \"Y\")\n\narm_ref_comp <- list(\n  ACTARMCD = list(\n    ref = \"ARM B\",\n    comp = c(\"ARM A\", \"ARM C\")\n  ),\n  ARM = list(\n    ref = \"B: Placebo\",\n    comp = c(\"A: Drug X\", \"C: Combination\")\n  )\n)\n\napp <- init(\n  data = cdisc_data(\n    cdisc_dataset(\n      \"ADSL\",\n      adsl,\n      code = 'ADSL <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\") %>% df_explicit_na() %>% dplyr::filter(.data$SAFFL == \"Y\")'\n    ),\n    cdisc_dataset(\n      \"ADSAFTTE\",\n      adsaftte,\n      keys = c(\"STUDYID\", \"USUBJID\", \"PARAMCD\"),\n      code = 'ADSAFTTE <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adaette\") %>% df_explicit_na() %>% dplyr::filter(.data$SAFFL == \"Y\")'\n    ),\n    check = TRUE\n  ),\n  modules = modules(\n    tm_t_tte(\n      label = \"Time To LLT Event Table\",\n      dataname = \"ADSAFTTE\",\n      arm_var = choices_selected(\n        variable_choices(adsl, c(\"ARM\", \"ARMCD\", \"ACTARMCD\")),\n        \"ARM\"\n      ),\n      arm_ref_comp = arm_ref_comp,\n      paramcd = choices_selected(\n        value_choices(adsaftte, \"PARAMCD\", \"PARAM\"),\n        \"HYSTTEUL\"\n      ),\n      strata_var = choices_selected(\n        variable_choices(adsl, c(\"RACE\", \"SEX\")),\n        c(\"RACE\", \"SEX\")\n      ),\n      time_points = choices_selected(0, NULL),\n      event_desc_var = choices_selected(\"EVNTDESC\", \"EVNTDESC\", fixed = TRUE)\n    )\n  )\n)\n\n[INFO] 2023-03-10 05:39:58.3572 pid:6278 token:[] teal.modules.clinical Initializing tm_t_tte\n\nCodeshinyApp(app$ui, app$server)\n\n\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n [1] teal.modules.clinical_0.8.14.9026 teal_0.12.0.9023                 \n [3] teal.transform_0.2.0.9011         teal.data_0.1.2.9013             \n [5] shiny_1.7.4                       dplyr_1.1.0                      \n [7] scda_0.1.5.9009                   tern_0.7.10.9056                 \n [9] rtables_0.6.0.1                   formatters_0.4.0                 \n[11] magrittr_2.0.3                   \n\nloaded via a namespace (and not attached):\n [1] sass_0.4.5               tidyr_1.3.0              jsonlite_1.8.4          \n [4] splines_4.2.2            R.utils_2.12.2           bslib_0.4.2             \n [7] teal.slice_0.2.0.9026    Rdpack_2.4               assertthat_0.2.1        \n[10] teal.code_0.3.0.9001     tern.gee_0.1.0.9002      yaml_2.3.7              \n[13] pillar_1.8.1             backports_1.4.1          lattice_0.20-45         \n[16] glue_1.6.2               teal.widgets_0.2.0.9024  digest_0.6.31           \n[19] promises_1.2.0.1         rbibutils_2.2.13         checkmate_2.1.0         \n[22] colorspace_2.1-0         R.oo_1.25.0              htmltools_0.5.4         \n[25] httpuv_1.6.9             Matrix_1.5-3             pkgconfig_2.0.3         \n[28] broom_1.0.3              logger_0.2.2             purrr_1.0.1             \n[31] xtable_1.8-4             mvtnorm_1.1-3            scales_1.2.1            \n[34] webshot_0.5.4            processx_3.8.0           fontawesome_0.5.0       \n[37] later_1.3.0              emmeans_1.8.4-1          tibble_3.1.8            \n[40] styler_1.9.1             generics_0.1.3           ggplot2_3.4.1           \n[43] ellipsis_0.3.2           shinyvalidate_0.1.2      cachem_1.0.7            \n[46] withr_2.5.0              shinyjs_2.1.0            geepack_1.3.9           \n[49] cli_3.6.0                survival_3.5-3           mime_0.12               \n[52] memoise_2.0.1            ps_1.7.2                 estimability_1.4.1      \n[55] evaluate_0.20            R.methodsS3_1.8.2        fansi_1.0.4             \n[58] R.cache_0.16.0           nlme_3.1-162             MASS_7.3-58.3           \n[61] forcats_1.0.0            teal.reporter_0.1.1.9013 tools_4.2.2             \n[64] lifecycle_1.0.3          munsell_0.5.0            callr_3.7.3             \n[67] compiler_4.2.2           jquerylib_0.1.4          rlang_1.0.6             \n[70] grid_4.2.2               htmlwidgets_1.6.1        rmarkdown_2.20          \n[73] shinyWidgets_0.7.6       gtable_0.3.1             codetools_0.2-19        \n[76] teal.logger_0.1.1.9004   R6_2.5.1                 knitr_1.42              \n[79] fastmap_1.1.1            utf8_1.2.3               Rcpp_1.0.10             \n[82] vctrs_0.5.2              tidyselect_1.2.0         xfun_0.37               \n[85] coda_0.19-4             \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R                       [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/tables/lab-results/lbt11.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "tables/lab-results/lbt11_bl.html",
    "href": "tables/lab-results/lbt11_bl.html",
    "title": "LBT11_BL",
    "section": "",
    "text": "Data Setup\nTime-To-Event Summary\nTime-To-Event Summary  Selecting Sections to Display\nTime-To-Event Summary  with Stratified Analysis\nTeal\nSession Info\n\n\n\n\nCodelibrary(tern)\nlibrary(scda)\nlibrary(dplyr)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadsaftte <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adaette\")\n\n# Ensure character variables are converted to factors and empty strings and NAs are explicit missing levels.\nadsl <- df_explicit_na(adsl)\nadsaftte <- df_explicit_na(adsaftte)\n\nadsl_safl <- dplyr::filter(adsl, .data$SAFFL == \"Y\")\n\nanl <- adsaftte %>%\n  dplyr::filter(\n    SAFFL == \"Y\",\n    PARAMCD == \"HYSTTEBL\"\n  ) %>%\n  dplyr::mutate(\n    AVAL = .data$AVAL * dplyr::case_when( # convert to days, if possible\n      .data$AVALU == \"WEEKS\" ~ 7,\n      .data$AVALU == \"MONTHS\" ~ 30.4375,\n      .data$AVALU == \"YEARS\" ~ 365,\n      TRUE ~ 1\n    ),\n    AVALU = factor(dplyr::case_when(\n      .data$AVALU %in% c(\"WEEKS\", \"MONTHS\", \"YEARS\") ~ factor(\"DAYS\"),\n      TRUE ~ .data$AVALU\n    ), levels = \"DAYS\"),\n    is_event = CNSR == 0, # this will be a LLT event\n    event_grp = factor(\n      dplyr::case_when(\n        CNSR == 0 ~ \"Patients with LLT event (%)\",\n        CNSR == 1 ~ \"Patients without LLT event (%)\"\n      ),\n      levels = c(\n        \"Patients with LLT event (%)\",\n        \"Patients without LLT event (%)\"\n      )\n    )\n  )\n\n\n\n\n\nCodelyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(var = \"ARMCD\", ref_group = \"ARM A\") %>%\n  count_occurrences(vars = \"event_grp\") %>%\n  surv_time(\n    vars = \"AVAL\",\n    var_labels = paste0(\"Time to 1st LLT Event (\", levels(anl$AVALU), \")\"),\n    is_event = \"is_event\",\n    table_names = \"time_to_event\"\n  ) %>%\n  coxph_pairwise(\n    vars = \"AVAL\",\n    is_event = \"is_event\",\n    var_labels = \"Unstratified Analysis\",\n    control = control_coxph(pval_method = \"log-rank\"),\n    table_names = \"coxph_unstratified\"\n  )\n\nresult <- build_table(lyt, df = anl, alt_counts_df = adsl_safl)\nresult\n\n                                     ARM A           ARM B           ARM C    \n                                    (N=134)         (N=134)         (N=132)   \n——————————————————————————————————————————————————————————————————————————————\nPatients with LLT event (%)       14 (10.4%)      18 (13.4%)      15 (11.4%)  \nPatients without LLT event (%)    120 (89.6%)     116 (86.6%)     117 (88.6%) \nTime to 1st LLT Event (DAYS)                                                  \n  Median                              NA              NA             721.0    \n  95% CI                              NA          (682.0, NA)     (691.0, NA) \n  25% and 75%-ile                  608.0, NA       558.0, NA       644.0, NA  \n  Range (censored)               1.0 to 729.0    1.0 to 726.0    1.0 to 723.0 \n  Range (event)                  23.0 to 608.0   36.0 to 682.0   60.0 to 721.0\nUnstratified Analysis                                                         \n  p-value (log-rank)                                0.5018          0.6414    \n  Hazard Ratio                                       1.27            0.84     \n  95% CI                                         (0.63, 2.55)    (0.41, 1.75) \n\n\n\n\n\nCodelyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(var = \"ARMCD\", ref_group = \"ARM A\") %>%\n  count_occurrences(vars = \"event_grp\") %>%\n  surv_time(\n    vars = \"AVAL\",\n    var_labels = paste0(\"Time to 1st LLT Event (\", levels(anl$AVALU), \")\"),\n    is_event = \"is_event\",\n    table_names = \"time_to_event\"\n  )\n\nresult <- build_table(lyt, df = anl, alt_counts_df = adsl_safl)\nresult\n\n                                     ARM A           ARM B           ARM C    \n                                    (N=134)         (N=134)         (N=132)   \n——————————————————————————————————————————————————————————————————————————————\nPatients with LLT event (%)       14 (10.4%)      18 (13.4%)      15 (11.4%)  \nPatients without LLT event (%)    120 (89.6%)     116 (86.6%)     117 (88.6%) \nTime to 1st LLT Event (DAYS)                                                  \n  Median                              NA              NA             721.0    \n  95% CI                              NA          (682.0, NA)     (691.0, NA) \n  25% and 75%-ile                  608.0, NA       558.0, NA       644.0, NA  \n  Range (censored)               1.0 to 729.0    1.0 to 726.0    1.0 to 723.0 \n  Range (event)                  23.0 to 608.0   36.0 to 682.0   60.0 to 721.0\n\n\n\n\n\nCodestrata <- c(\"RACE\", \"SEX\")\n\nlyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(var = \"ARMCD\", ref_group = \"ARM A\") %>%\n  count_occurrences(vars = \"event_grp\") %>%\n  surv_time(\n    vars = \"AVAL\",\n    var_labels = paste0(\"Time to 1st LLT Event (\", levels(anl$AVALU), \")\"),\n    is_event = \"is_event\",\n    table_names = \"time_to_event\"\n  ) %>%\n  coxph_pairwise(\n    vars = \"AVAL\",\n    is_event = \"is_event\",\n    var_labels = \"Unstratified Analysis\",\n    control = control_coxph(pval_method = \"log-rank\"),\n    table_names = \"coxph_unstratified\"\n  ) %>%\n  coxph_pairwise(\n    vars = \"AVAL\",\n    is_event = \"is_event\",\n    var_labels = paste0(\"Stratified By: \", paste(strata, collapse = \", \")),\n    strat = strata,\n    table_names = \"coxph_stratified\"\n  )\n\nresult <- build_table(lyt, df = anl, alt_counts_df = adsl_safl)\nresult\n\n                                     ARM A           ARM B           ARM C    \n                                    (N=134)         (N=134)         (N=132)   \n——————————————————————————————————————————————————————————————————————————————\nPatients with LLT event (%)       14 (10.4%)      18 (13.4%)      15 (11.4%)  \nPatients without LLT event (%)    120 (89.6%)     116 (86.6%)     117 (88.6%) \nTime to 1st LLT Event (DAYS)                                                  \n  Median                              NA              NA             721.0    \n  95% CI                              NA          (682.0, NA)     (691.0, NA) \n  25% and 75%-ile                  608.0, NA       558.0, NA       644.0, NA  \n  Range (censored)               1.0 to 729.0    1.0 to 726.0    1.0 to 723.0 \n  Range (event)                  23.0 to 608.0   36.0 to 682.0   60.0 to 721.0\nUnstratified Analysis                                                         \n  p-value (log-rank)                                0.5018          0.6414    \n  Hazard Ratio                                       1.27            0.84     \n  95% CI                                         (0.63, 2.55)    (0.41, 1.75) \nStratified By: RACE, SEX                                                      \n  p-value (log-rank)                                0.4000          0.7970    \n  Hazard Ratio                                       1.38            0.91     \n  95% CI                                         (0.65, 2.94)    (0.43, 1.93) \n\n\n\n\n\nCodelibrary(teal.modules.clinical)\nlibrary(scda)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadsaftte <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adaette\")\n\n# Ensure character variables are converted to factors and empty strings and NAs are explicit missing levels.\nadsl <- df_explicit_na(adsl)\nadsaftte <- df_explicit_na(adsaftte)\n\nadsl <- dplyr::filter(adsl, .data$SAFFL == \"Y\")\nadsaftte <- dplyr::filter(adsaftte, .data$SAFFL == \"Y\")\n\narm_ref_comp <- list(\n  ACTARMCD = list(\n    ref = \"ARM B\",\n    comp = c(\"ARM A\", \"ARM C\")\n  ),\n  ARM = list(\n    ref = \"B: Placebo\",\n    comp = c(\"A: Drug X\", \"C: Combination\")\n  )\n)\n\napp <- init(\n  data = cdisc_data(\n    cdisc_dataset(\n      \"ADSL\",\n      adsl,\n      code = 'ADSL <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\") %>% df_explicit_na() %>% dplyr::filter(.data$SAFFL == \"Y\")'\n    ),\n    cdisc_dataset(\n      \"ADSAFTTE\",\n      adsaftte,\n      keys = c(\"STUDYID\", \"USUBJID\", \"PARAMCD\"),\n      code = 'ADSAFTTE <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adaette\") %>% df_explicit_na() %>% dplyr::filter(.data$SAFFL == \"Y\")'\n    ),\n    check = TRUE\n  ),\n  modules = modules(\n    tm_t_tte(\n      label = \"Time To LLT Event Table\",\n      dataname = \"ADSAFTTE\",\n      arm_var = choices_selected(\n        variable_choices(adsl, c(\"ARM\", \"ARMCD\", \"ACTARMCD\")),\n        \"ARM\"\n      ),\n      arm_ref_comp = arm_ref_comp,\n      paramcd = choices_selected(\n        value_choices(adsaftte, \"PARAMCD\", \"PARAM\"),\n        \"HYSTTEBL\"\n      ),\n      strata_var = choices_selected(\n        variable_choices(adsl, c(\"RACE\", \"SEX\")),\n        c(\"RACE\", \"SEX\")\n      ),\n      time_points = choices_selected(0, NULL),\n      event_desc_var = choices_selected(\"EVNTDESC\", \"EVNTDESC\", fixed = TRUE)\n    )\n  )\n)\n\n[INFO] 2023-03-10 05:40:31.7790 pid:6358 token:[] teal.modules.clinical Initializing tm_t_tte\n\nCodeshinyApp(app$ui, app$server)\n\n\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n [1] teal.modules.clinical_0.8.14.9026 teal_0.12.0.9023                 \n [3] teal.transform_0.2.0.9011         teal.data_0.1.2.9013             \n [5] shiny_1.7.4                       dplyr_1.1.0                      \n [7] scda_0.1.5.9009                   tern_0.7.10.9056                 \n [9] rtables_0.6.0.1                   formatters_0.4.0                 \n[11] magrittr_2.0.3                   \n\nloaded via a namespace (and not attached):\n [1] sass_0.4.5               tidyr_1.3.0              jsonlite_1.8.4          \n [4] splines_4.2.2            R.utils_2.12.2           bslib_0.4.2             \n [7] teal.slice_0.2.0.9026    Rdpack_2.4               assertthat_0.2.1        \n[10] teal.code_0.3.0.9001     tern.gee_0.1.0.9002      yaml_2.3.7              \n[13] pillar_1.8.1             backports_1.4.1          lattice_0.20-45         \n[16] glue_1.6.2               teal.widgets_0.2.0.9024  digest_0.6.31           \n[19] promises_1.2.0.1         rbibutils_2.2.13         checkmate_2.1.0         \n[22] colorspace_2.1-0         R.oo_1.25.0              htmltools_0.5.4         \n[25] httpuv_1.6.9             Matrix_1.5-3             pkgconfig_2.0.3         \n[28] broom_1.0.3              logger_0.2.2             purrr_1.0.1             \n[31] xtable_1.8-4             mvtnorm_1.1-3            scales_1.2.1            \n[34] webshot_0.5.4            processx_3.8.0           fontawesome_0.5.0       \n[37] later_1.3.0              emmeans_1.8.4-1          tibble_3.1.8            \n[40] styler_1.9.1             generics_0.1.3           ggplot2_3.4.1           \n[43] ellipsis_0.3.2           shinyvalidate_0.1.2      cachem_1.0.7            \n[46] withr_2.5.0              shinyjs_2.1.0            geepack_1.3.9           \n[49] cli_3.6.0                survival_3.5-3           mime_0.12               \n[52] memoise_2.0.1            ps_1.7.2                 estimability_1.4.1      \n[55] evaluate_0.20            R.methodsS3_1.8.2        fansi_1.0.4             \n[58] R.cache_0.16.0           nlme_3.1-162             MASS_7.3-58.3           \n[61] forcats_1.0.0            teal.reporter_0.1.1.9013 tools_4.2.2             \n[64] lifecycle_1.0.3          munsell_0.5.0            callr_3.7.3             \n[67] compiler_4.2.2           jquerylib_0.1.4          rlang_1.0.6             \n[70] grid_4.2.2               htmlwidgets_1.6.1        rmarkdown_2.20          \n[73] shinyWidgets_0.7.6       gtable_0.3.1             codetools_0.2-19        \n[76] teal.logger_0.1.1.9004   R6_2.5.1                 knitr_1.42              \n[79] fastmap_1.1.1            utf8_1.2.3               Rcpp_1.0.10             \n[82] vctrs_0.5.2              tidyselect_1.2.0         xfun_0.37               \n[85] coda_0.19-4             \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R                       [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/tables/lab-results/lbt11_bl.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "tables/lab-results/lbt08.html",
    "href": "tables/lab-results/lbt08.html",
    "title": "LBT08",
    "section": "",
    "text": "Data Setup\nStandard Table\nTeal\nSession Info\n\n\n\n\nCodelibrary(scda)\nlibrary(dplyr)\nlibrary(tern)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadlb <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adlb\")\n\nadlb <- adlb %>%\n  mutate(\n    GRADDR = case_when(\n      PARAMCD == \"ALT\" ~ \"B\",\n      PARAMCD == \"CRP\" ~ \"H\",\n      PARAMCD == \"IGA\" ~ \"L\"\n    )\n  ) %>%\n  filter(SAFFL == \"Y\" & ONTRTFL == \"Y\" & GRADDR != \"\")\n\nadsl <- df_explicit_na(adsl)\nadlb <- df_explicit_na(adlb)\n\ndf <- h_adlb_worsen(\n  adlb,\n  worst_flag_low = c(\"WGRLOFL\" = \"Y\"),\n  worst_flag_high = c(\"WGRHIFL\" = \"Y\"),\n  direction_var = \"GRADDR\"\n)\n\nattributes(df$GRADDR) <- list(\"label\" = \"Direction of Abnormality\")\n\n\n\n\nNote: The direction of the shift table for each lab test is based on metadata and NCI CTCAE specifications. In addition, the worst laboratory flags must be selected appropriately to match the direction of abnormality. For example, if any lab requires a shift table for both directions, then both worst_flag_low and worst_flag_high must be specified in h_adlb_worsen. If all labs requires a shift table for only one direction, then the matching worst lab flag variable must be selected in h_adlb_worsen.\n\nCoderesult <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ARMCD\") %>%\n  split_rows_by(\"PARAMCD\", label_pos = \"topleft\", split_label = obj_label(df$PARAMCD)) %>%\n  split_rows_by(\"GRADDR\", label_pos = \"topleft\", split_label = obj_label(df$GRADDR)) %>%\n  count_abnormal_lab_worsen_by_baseline(\n    var = \"ATOXGR\",\n    variables = list(\n      id = \"USUBJID\",\n      baseline_var = \"BTOXGR\",\n      direction_var = \"GRADDR\"\n    )\n  ) %>%\n  append_topleft(\"    Highest NCI CTCAE Grade\") %>%\n  build_table(df = df, alt_counts_df = adsl)\n\nresult\n\nParameter Code                                                                \n  Direction of Abnormality        ARM A            ARM B            ARM C     \n    Highest NCI CTCAE Grade      (N=134)          (N=134)          (N=132)    \n——————————————————————————————————————————————————————————————————————————————\nALT                                                                           \n  High                                                                        \n    1                         16/121 (13.2%)   13/117 (11.1%)   17/117 (14.5%)\n    2                         14/125 (11.2%)   12/121 (9.9%)    17/120 (14.2%)\n    3                           9/129 (7%)      15/125 (12%)    13/124 (10.5%)\n    4                         12/131 (9.2%)    11/130 (8.5%)    13/129 (10.1%)\n    Any                       51/131 (38.9%)   51/130 (39.2%)   60/129 (46.5%)\n  Low                                                                         \n    1                         13/124 (10.5%)   12/121 (9.9%)     9/117 (7.7%) \n    2                         13/127 (10.2%)   17/127 (13.4%)   11/124 (8.9%) \n    3                         19/129 (14.7%)   12/128 (9.4%)    10/128 (7.8%) \n    4                          7/131 (5.3%)     7/131 (5.3%)    10/132 (7.6%) \n    Any                       52/131 (39.7%)   48/131 (36.6%)   40/132 (30.3%)\nCRP                                                                           \n  High                                                                        \n    1                         17/114 (14.9%)   13/114 (11.4%)    9/114 (7.9%) \n    2                         12/119 (10.1%)   16/119 (13.4%)   13/119 (10.9%)\n    3                         16/125 (12.8%)   10/124 (8.1%)    13/124 (10.5%)\n    4                         12/127 (9.4%)    12/127 (9.4%)    10/129 (7.8%) \n    Any                       57/127 (44.9%)   51/127 (40.2%)   45/129 (34.9%)\nIGA                                                                           \n  Low                                                                         \n    1                         16/119 (13.4%)   20/117 (17.1%)   16/120 (13.3%)\n    2                         12/127 (9.4%)     15/125 (12%)    14/123 (11.4%)\n    3                         14/129 (10.9%)   11/126 (8.7%)    13/125 (10.4%)\n    4                         10/132 (7.6%)    16/129 (12.4%)     9/129 (7%)  \n    Any                       52/132 (39.4%)   62/129 (48.1%)   52/129 (40.3%)\n\n\n\n\n\nCode# In progress\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n[1] tern_0.7.10.9056 rtables_0.6.0.1  formatters_0.4.0 magrittr_2.0.3  \n[5] dplyr_1.1.0      scda_0.1.5.9009 \n\nloaded via a namespace (and not attached):\n [1] pillar_1.8.1      compiler_4.2.2    forcats_1.0.0     tools_4.2.2      \n [5] digest_0.6.31     lattice_0.20-45   jsonlite_1.8.4    evaluate_0.20    \n [9] lifecycle_1.0.3   tibble_3.1.8      checkmate_2.1.0   gtable_0.3.1     \n[13] pkgconfig_2.0.3   rlang_1.0.6       Matrix_1.5-3      cli_3.6.0        \n[17] yaml_2.3.7        xfun_0.37         fastmap_1.1.1     withr_2.5.0      \n[21] knitr_1.42        generics_0.1.3    vctrs_0.5.2       htmlwidgets_1.6.1\n[25] grid_4.2.2        tidyselect_1.2.0  glue_1.6.2        R6_2.5.1         \n[29] fansi_1.0.4       Rdpack_2.4        survival_3.5-3    rmarkdown_2.20   \n[33] tidyr_1.3.0       purrr_1.0.1       ggplot2_3.4.1     codetools_0.2-19 \n[37] splines_4.2.2     backports_1.4.1   scales_1.2.1      htmltools_0.5.4  \n[41] rbibutils_2.2.13  colorspace_2.1-0  utf8_1.2.3        munsell_0.5.0    \n[45] broom_1.0.3      \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R              [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/tables/lab-results/lbt08.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "tables/lab-results/lbt13.html",
    "href": "tables/lab-results/lbt13.html",
    "title": "LBT13",
    "section": "",
    "text": "Data Setup\nStandard Table (Low)\nStandard Table (High)\nTable Without Patients with  Missing Baseline (Low)\nTable with Missing Baseline  Considered as Grade 0 (High)\nTable with Fill-In  of Grades (High)\nTeal\nSession Info\n\n\n\nPlease note that for each variant, the adlb dataset needs to be filtered on correct flags like WGRLOVFL, WGRHIVFL, et al., otherwise the layout function will not return the correct counts. There is an option to create a record for a lab test where no record is found at that visit. If you specified add_derived_type = \"PHANTOM\" & dtype_phantom_cond, you don’t have to use the h_adsl_adlb_merge_using_worst_flag function to preprocess your adlb dataset. Otherwise please follow the pre-processing steps below before applying the layout functions.\n\nCodelibrary(scda)\nlibrary(dplyr)\nlibrary(tern)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadlb <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adlb\")\n\nadsl <- df_explicit_na(adsl)\nadlb <- df_explicit_na(adlb)\n\n# Please note that in real clinical data, population flag like SAFFL, and parameter category like PARCAT2 needs to be\n# selected properly.\nadsl_f <- adsl %>% filter(SAFFL == \"Y\")\nadlb_f <- adlb %>% filter(PARAMCD == \"ALT\" & SAFFL == \"Y\")\n\n\n\n\nNote that the worst laboratory flag (below WGRLOVFL) must be selected appropriately to match the direction of abnormality (here Low). New grouping variables ATOXGR_GP and BTOXGR_GP are created to display the correct output.\n\nCodeadlb_f <- adlb %>% filter(WGRLOVFL == \"Y\")\n\n# Please note the step below can be skipped if you are using DTYPE PHANTOM\nadlb_out <- adsl_f %>%\n  h_adsl_adlb_merge_using_worst_flag(\n    adlb_f,\n    worst_flag = c(\"WGRLOVFL\" = \"Y\"),\n    by_visit = TRUE,\n    no_fillin_visits = c(\"SCREENING\", \"BASELINE\", \"UNSCHEDULED\")\n  )\n\n# Create new grouping variables ATOXGR_GP, BTOXGR_GP\nadlb_out <- adlb_out %>%\n  mutate(\n    ATOXGR_GP = case_when(\n      ATOXGR %in% c(0, 1, 2, 3, 4) ~ \"Not Low\",\n      ATOXGR == -1 ~ \"1\",\n      ATOXGR == -2 ~ \"2\",\n      ATOXGR == -3 ~ \"3\",\n      ATOXGR == -4 ~ \"4\",\n      ATOXGR == \"<Missing>\" ~ \"Missing\"\n    )\n  ) %>%\n  mutate(\n    BTOXGR_GP = case_when(\n      BTOXGR %in% c(0, 1, 2, 3, 4) ~ \"Not Low\",\n      BTOXGR == -1 ~ \"1\",\n      BTOXGR == -2 ~ \"2\",\n      BTOXGR == -3 ~ \"3\",\n      BTOXGR == -4 ~ \"4\",\n      BTOXGR == \"<Missing>\" ~ \"Missing\"\n    )\n  )\n\nadlb_out <- adlb_out %>% mutate(\n  AVISIT = forcats::fct_reorder(AVISIT, AVISITN),\n  ATOXGR_GP = factor(ATOXGR_GP, levels = c(\"Not Low\", \"1\", \"2\", \"3\", \"4\", \"Missing\")),\n  BTOXGR_GP = factor(BTOXGR_GP, levels = c(\"Not Low\", \"1\", \"2\", \"3\", \"4\", \"Missing\"))\n)\n\nadlb_out <- adlb_out %>%\n  var_relabel(\n    PARAMCD = \"Parameter Code\",\n    AVISIT = \"Visit\",\n    ATOXGR_GP = \"NCI CTCAE Grade at Visit\",\n    BTOXGR_GP = \"Baseline NCI CTCAE Grade\"\n  )\n\nresult <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ACTARM\") %>%\n  split_rows_by(\n    \"PARAMCD\",\n    split_fun = drop_split_levels, label_pos = \"topleft\", split_label = obj_label(adlb_out$PARAMCD)\n  ) %>%\n  split_rows_by(\n    \"AVISIT\",\n    split_fun = drop_split_levels, label_pos = \"topleft\", split_label = obj_label(adlb_out$AVISIT)\n  ) %>%\n  split_rows_by(\n    \"ATOXGR_GP\",\n    split_fun = drop_split_levels, label_pos = \"topleft\", split_label = obj_label(adlb_out$ATOXGR_GP)\n  ) %>%\n  summarize_num_patients(var = \"USUBJID\", .stats = c(\"unique_count\")) %>%\n  count_occurrences(\"BTOXGR_GP\", denom = \"n\", drop = TRUE) %>%\n  append_varlabels(adlb_out, \"BTOXGR_GP\", indent = 3L) %>%\n  build_table(df = adlb_out, alt_counts_df = adsl_f)\n\nresult\n\nParameter Code                                                             \n  Visit                                                                    \n    NCI CTCAE Grade at Visit      A: Drug X    B: Placebo    C: Combination\n      Baseline NCI CTCAE Grade     (N=134)       (N=134)        (N=132)    \n———————————————————————————————————————————————————————————————————————————\nALT                                                                        \n  WEEK 1 DAY 8                                                             \n    Not Low (n)                      122           126            126      \n      Not Low                    114 (93.4%)   114 (90.5%)    111 (88.1%)  \n      1                           1 (0.8%)      6 (4.8%)        7 (5.6%)   \n      2                           2 (1.6%)      1 (0.8%)        4 (3.2%)   \n      3                           2 (1.6%)      3 (2.4%)        4 (3.2%)   \n      4                           3 (2.5%)      2 (1.6%)           0       \n    1 (n)                             6             0              3       \n      Not Low                     5 (83.3%)         0           3 (100%)   \n      1                           1 (16.7%)         0              0       \n    2 (n)                             4             6              1       \n      Not Low                     4 (100%)      6 (100%)        1 (100%)   \n    3 (n)                             1             2              2       \n      Not Low                         0         2 (100%)        2 (100%)   \n      1                           1 (100%)          0              0       \n    4 (n)                             1             0              0       \n      Not Low                     1 (100%)          0              0       \n  WEEK 2 DAY 15                                                            \n    Not Low (n)                      119           126            119      \n      Not Low                    111 (93.3%)   114 (90.5%)    104 (87.4%)  \n      1                           2 (1.7%)      6 (4.8%)        7 (5.9%)   \n      2                           2 (1.7%)      1 (0.8%)        4 (3.4%)   \n      3                           2 (1.7%)      3 (2.4%)        4 (3.4%)   \n      4                           2 (1.7%)      2 (1.6%)           0       \n    1 (n)                             5             2              2       \n      Not Low                     4 (80.0%)     2 (100%)        2 (100%)   \n      1                           1 (20.0%)         0              0       \n    2 (n)                             4             6              3       \n      Not Low                     4 (100%)      6 (100%)        3 (100%)   \n    3 (n)                             5             0              5       \n      Not Low                     4 (80.0%)         0           5 (100%)   \n      4                           1 (20.0%)         0              0       \n    4 (n)                             1             0              3       \n      Not Low                     1 (100%)          0           3 (100%)   \n  WEEK 3 DAY 22                                                            \n    Not Low (n)                      121           119            123      \n      Not Low                    112 (92.6%)   109 (91.6%)    111 (90.2%)  \n      1                           3 (2.5%)      5 (4.2%)        6 (4.9%)   \n      2                           2 (1.7%)          0           3 (2.4%)   \n      3                           2 (1.7%)      3 (2.5%)        3 (2.4%)   \n      4                           2 (1.7%)      2 (1.7%)           0       \n    1 (n)                             1             3              4       \n      Not Low                         0         3 (100%)       3 (75.0%)   \n      3                               0             0          1 (25.0%)   \n      4                           1 (100%)          0              0       \n    2 (n)                             4             6              0       \n      Not Low                     4 (100%)      4 (66.7%)          0       \n      1                               0         1 (16.7%)          0       \n      2                               0         1 (16.7%)          0       \n    3 (n)                             5             2              2       \n      Not Low                     5 (100%)      2 (100%)       1 (50.0%)   \n      2                               0             0          1 (50.0%)   \n    4 (n)                             3             4              3       \n      Not Low                     3 (100%)      4 (100%)       2 (66.7%)   \n      1                               0             0          1 (33.3%)   \n  WEEK 4 DAY 29                                                            \n    Not Low (n)                      124           119            122      \n      Not Low                    114 (91.9%)   109 (91.6%)    107 (87.7%)  \n      1                           3 (2.4%)      5 (4.2%)        7 (5.7%)   \n      2                           2 (1.6%)      1 (0.8%)        4 (3.3%)   \n      3                           2 (1.6%)      2 (1.7%)        4 (3.3%)   \n      4                           3 (2.4%)      2 (1.7%)           0       \n    1 (n)                             2             6              3       \n      Not Low                     2 (100%)      4 (66.7%)       3 (100%)   \n      1                               0         1 (16.7%)          0       \n      3                               0         1 (16.7%)          0       \n    2 (n)                             2             3              5       \n      Not Low                     2 (100%)      3 (100%)        5 (100%)   \n    3 (n)                             4             4              2       \n      Not Low                     4 (100%)      4 (100%)        2 (100%)   \n    4 (n)                             2             2              0       \n      Not Low                     2 (100%)      2 (100%)           0       \n  WEEK 5 DAY 36                                                            \n    Not Low (n)                      118           116            121      \n      Not Low                    110 (93.2%)   107 (92.2%)    107 (88.4%)  \n      1                           1 (0.8%)      4 (3.4%)        6 (5.0%)   \n      2                           2 (1.7%)      1 (0.9%)        4 (3.3%)   \n      3                           2 (1.7%)      3 (2.6%)        4 (3.3%)   \n      4                           3 (2.5%)      1 (0.9%)           0       \n    1 (n)                             6             7              2       \n      Not Low                     6 (100%)      6 (85.7%)       2 (100%)   \n      1                               0         1 (14.3%)          0       \n    2 (n)                             4             3              4       \n      Not Low                     3 (75.0%)     3 (100%)        4 (100%)   \n      1                           1 (25.0%)         0              0       \n    3 (n)                             6             6              1       \n      Not Low                     5 (83.3%)     5 (83.3%)       1 (100%)   \n      1                           1 (16.7%)     1 (16.7%)          0       \n    4 (n)                             0             2              4       \n      Not Low                         0         1 (50.0%)      3 (75.0%)   \n      1                               0             0          1 (25.0%)   \n      4                               0         1 (50.0%)          0       \nCRP                                                                        \n  WEEK 1 DAY 8                                                             \n    Not Low (n)                      115           122            124      \n      Not Low                    103 (89.6%)   114 (93.4%)    114 (91.9%)  \n      1                           2 (1.7%)      5 (4.1%)        4 (3.2%)   \n      2                           5 (4.3%)      1 (0.8%)        1 (0.8%)   \n      3                           2 (1.7%)      1 (0.8%)        1 (0.8%)   \n      4                           3 (2.6%)      1 (0.8%)        4 (3.2%)   \n    1 (n)                             6             5              1       \n      Not Low                     6 (100%)      4 (80.0%)          0       \n      1                               0             0           1 (100%)   \n      3                               0         1 (20.0%)          0       \n    2 (n)                             8             3              5       \n      Not Low                     8 (100%)      3 (100%)       4 (80.0%)   \n      4                               0             0          1 (20.0%)   \n    3 (n)                             3             2              2       \n      Not Low                     3 (100%)      2 (100%)        2 (100%)   \n    4 (n)                             2             2              0       \n      Not Low                     2 (100%)      2 (100%)           0       \n  WEEK 2 DAY 15                                                            \n    Not Low (n)                      116           122            117      \n      Not Low                    105 (90.5%)   114 (93.4%)    106 (90.6%)  \n      1                           2 (1.7%)      5 (4.1%)        5 (4.3%)   \n      2                           5 (4.3%)          0           1 (0.9%)   \n      3                           2 (1.7%)      2 (1.6%)           0       \n      4                           2 (1.7%)      1 (0.8%)        5 (4.3%)   \n    1 (n)                             4             8              5       \n      Not Low                     4 (100%)      8 (100%)        5 (100%)   \n    2 (n)                             7             2              2       \n      Not Low                     7 (100%)      1 (50.0%)       2 (100%)   \n      2                               0         1 (50.0%)          0       \n    3 (n)                             4             0              6       \n      Not Low                     4 (100%)          0          5 (83.3%)   \n      3                               0             0          1 (16.7%)   \n    4 (n)                             3             2              2       \n      Not Low                     2 (66.7%)     2 (100%)        2 (100%)   \n      4                           1 (33.3%)         0              0       \n  WEEK 3 DAY 22                                                            \n    Not Low (n)                      119           123            120      \n      Not Low                    109 (91.6%)   115 (93.5%)    108 (90.0%)  \n      1                           1 (0.8%)      4 (3.3%)        5 (4.2%)   \n      2                           4 (3.4%)      1 (0.8%)        1 (0.8%)   \n      3                           2 (1.7%)      2 (1.6%)        1 (0.8%)   \n      4                           3 (2.5%)      1 (0.8%)        5 (4.2%)   \n    1 (n)                             7             5              4       \n      Not Low                     6 (85.7%)     4 (80.0%)       4 (100%)   \n      1                               0         1 (20.0%)          0       \n      2                           1 (14.3%)         0              0       \n    2 (n)                             3             2              4       \n      Not Low                     2 (66.7%)     2 (100%)        4 (100%)   \n      1                           1 (33.3%)         0              0       \n    3 (n)                             2             3              4       \n      Not Low                     2 (100%)      3 (100%)        4 (100%)   \n    4 (n)                             3             1              0       \n      Not Low                     3 (100%)      1 (100%)           0       \n  WEEK 4 DAY 29                                                            \n    Not Low (n)                      126           119            120      \n      Not Low                    114 (90.5%)   111 (93.3%)    108 (90.0%)  \n      1                           2 (1.6%)      4 (3.4%)        5 (4.2%)   \n      2                           5 (4.0%)      1 (0.8%)        1 (0.8%)   \n      3                           2 (1.6%)      2 (1.7%)        1 (0.8%)   \n      4                           3 (2.4%)      1 (0.8%)        5 (4.2%)   \n    1 (n)                             5             5              3       \n      Not Low                     5 (100%)      5 (100%)        3 (100%)   \n    2 (n)                             1             6              6       \n      Not Low                     1 (100%)      5 (83.3%)       6 (100%)   \n      1                               0         1 (16.7%)          0       \n    3 (n)                             1             3              2       \n      Not Low                     1 (100%)      3 (100%)        2 (100%)   \n    4 (n)                             1             1              1       \n      Not Low                     1 (100%)      1 (100%)        1 (100%)   \n  WEEK 5 DAY 36                                                            \n    Not Low (n)                      121           126            119      \n      Not Low                    111 (91.7%)   117 (92.9%)    109 (91.6%)  \n      1                           1 (0.8%)      5 (4.0%)        5 (4.2%)   \n      2                           4 (3.3%)      1 (0.8%)        1 (0.8%)   \n      3                           2 (1.7%)      2 (1.6%)        1 (0.8%)   \n      4                           3 (2.5%)      1 (0.8%)        3 (2.5%)   \n    1 (n)                             2             3              3       \n      Not Low                     1 (50.0%)     3 (100%)       2 (66.7%)   \n      2                           1 (50.0%)         0              0       \n      4                               0             0          1 (33.3%)   \n    2 (n)                             5             1              4       \n      Not Low                     5 (100%)      1 (100%)        4 (100%)   \n    3 (n)                             4             3              4       \n      Not Low                     4 (100%)      3 (100%)        4 (100%)   \n    4 (n)                             2             1              2       \n      Not Low                     1 (50.0%)     1 (100%)       1 (50.0%)   \n      1                           1 (50.0%)         0              0       \n      4                               0             0          1 (50.0%)   \nIGA                                                                        \n  WEEK 1 DAY 8                                                             \n    Not Low (n)                      120           119            119      \n      Not Low                    108 (90.0%)   105 (88.2%)    108 (90.8%)  \n      1                           7 (5.8%)      7 (5.9%)        3 (2.5%)   \n      2                           2 (1.7%)      1 (0.8%)        2 (1.7%)   \n      3                           2 (1.7%)      3 (2.5%)        4 (3.4%)   \n      4                           1 (0.8%)      3 (2.5%)        2 (1.7%)   \n    1 (n)                             4             5              6       \n      Not Low                     3 (75.0%)     5 (100%)        6 (100%)   \n      1                           1 (25.0%)         0              0       \n    2 (n)                             5             3              4       \n      Not Low                     5 (100%)      2 (66.7%)       4 (100%)   \n      1                               0         1 (33.3%)          0       \n    3 (n)                             3             4              2       \n      Not Low                     3 (100%)      4 (100%)       1 (50.0%)   \n      4                               0             0          1 (50.0%)   \n    4 (n)                             2             3              1       \n      Not Low                     1 (50.0%)     3 (100%)        1 (100%)   \n      3                           1 (50.0%)         0              0       \n  WEEK 2 DAY 15                                                            \n    Not Low (n)                      125           116            116      \n      Not Low                    112 (89.6%)   104 (89.7%)    105 (90.5%)  \n      1                           8 (6.4%)      5 (4.3%)        2 (1.7%)   \n      2                           2 (1.6%)      1 (0.9%)        2 (1.7%)   \n      3                           2 (1.6%)      3 (2.6%)        4 (3.4%)   \n      4                           1 (0.8%)      3 (2.6%)        3 (2.6%)   \n    1 (n)                             2             6              8       \n      Not Low                     2 (100%)      3 (50.0%)       8 (100%)   \n      1                               0         3 (50.0%)          0       \n    2 (n)                             2             6              4       \n      Not Low                     2 (100%)      6 (100%)        4 (100%)   \n    3 (n)                             4             2              3       \n      Not Low                     3 (75.0%)     2 (100%)        3 (100%)   \n      3                           1 (25.0%)         0              0       \n    4 (n)                             1             4              1       \n      Not Low                     1 (100%)      4 (100%)           0       \n      1                               0             0           1 (100%)   \n  WEEK 3 DAY 22                                                            \n    Not Low (n)                      118           125            116      \n      Not Low                    104 (88.1%)   110 (88.0%)    107 (92.2%)  \n      1                           8 (6.8%)      8 (6.4%)        2 (1.7%)   \n      2                           2 (1.7%)      1 (0.8%)        2 (1.7%)   \n      3                           3 (2.5%)      3 (2.4%)        3 (2.6%)   \n      4                           1 (0.8%)      3 (2.4%)        2 (1.7%)   \n    1 (n)                             8             2              6       \n      Not Low                     8 (100%)      2 (100%)       5 (83.3%)   \n      1                               0             0          1 (16.7%)   \n    2 (n)                             3             2              3       \n      Not Low                     3 (100%)      2 (100%)        3 (100%)   \n    3 (n)                             3             3              3       \n      Not Low                     3 (100%)      3 (100%)        3 (100%)   \n    4 (n)                             2             2              4       \n      Not Low                     2 (100%)      2 (100%)       2 (50.0%)   \n      3                               0             0          1 (25.0%)   \n      4                               0             0          1 (25.0%)   \n  WEEK 4 DAY 29                                                            \n    Not Low (n)                      123           115            119      \n      Not Low                    109 (88.6%)   100 (87.0%)    107 (89.9%)  \n      1                           8 (6.5%)      8 (7.0%)        3 (2.5%)   \n      2                           2 (1.6%)      1 (0.9%)        2 (1.7%)   \n      3                           3 (2.4%)      3 (2.6%)        4 (3.4%)   \n      4                           1 (0.8%)      3 (2.6%)        3 (2.5%)   \n    1 (n)                             3             7              2       \n      Not Low                     3 (100%)      7 (100%)        2 (100%)   \n    2 (n)                             2             7              4       \n      Not Low                     2 (100%)      7 (100%)        4 (100%)   \n    3 (n)                             3             2              6       \n      Not Low                     3 (100%)      2 (100%)        6 (100%)   \n    4 (n)                             3             3              1       \n      Not Low                     3 (100%)      3 (100%)        1 (100%)   \n  WEEK 5 DAY 36                                                            \n    Not Low (n)                      122           118            119      \n      Not Low                    108 (88.5%)   103 (87.3%)    108 (90.8%)  \n      1                           8 (6.6%)      8 (6.8%)        3 (2.5%)   \n      2                           2 (1.6%)      1 (0.8%)        2 (1.7%)   \n      3                           3 (2.5%)      3 (2.5%)        3 (2.5%)   \n      4                           1 (0.8%)      3 (2.5%)        3 (2.5%)   \n    1 (n)                             3             7              4       \n      Not Low                     3 (100%)      7 (100%)       3 (75.0%)   \n      3                               0             0          1 (25.0%)   \n    2 (n)                             2             3              3       \n      Not Low                     2 (100%)      3 (100%)        3 (100%)   \n    3 (n)                             4             2              3       \n      Not Low                     4 (100%)      2 (100%)        3 (100%)   \n    4 (n)                             3             4              3       \n      Not Low                     3 (100%)      4 (100%)        3 (100%)   \n\n\n\n\nNote that the worst laboratory flag (below WGRHIVFL) must be selected appropriately to match the direction of abnormality (here High). New grouping variables ATOXGR_GP and BTOXGR_GP are created to display the correct output.\n\nCodeadlb_f <- adlb %>% filter(WGRHIVFL == \"Y\")\n\n# Please note the step below can be skipped if you are using DTYPE PHANTOM\nadlb_out <- adsl_f %>%\n  h_adsl_adlb_merge_using_worst_flag(\n    adlb_f,\n    worst_flag = c(\"WGRHIVFL\" = \"Y\"),\n    by_visit = TRUE,\n    no_fillin_visits = c(\"SCREENING\", \"BASELINE\", \"UNSCHEDULED\")\n  )\n\n# Create new grouping variables ATOXGR_GP, BTOXGR_GP\nadlb_out <- adlb_out %>%\n  mutate(\n    ATOXGR_GP = case_when(\n      ATOXGR %in% c(0, -1, -2, -3, -4) ~ \"Not High\",\n      ATOXGR == 1 ~ \"1\",\n      ATOXGR == 2 ~ \"2\",\n      ATOXGR == 3 ~ \"3\",\n      ATOXGR == 4 ~ \"4\",\n      ATOXGR == \"<Missing>\" ~ \"Missing\"\n    )\n  ) %>%\n  mutate(\n    BTOXGR_GP = case_when(\n      BTOXGR %in% c(0, -1, -2, -3, -4) ~ \"Not High\",\n      BTOXGR == 1 ~ \"1\",\n      BTOXGR == 2 ~ \"2\",\n      BTOXGR == 3 ~ \"3\",\n      BTOXGR == 4 ~ \"4\",\n      BTOXGR == \"<Missing>\" ~ \"Missing\"\n    )\n  )\n\nadlb_out <- adlb_out %>% mutate(\n  AVISIT = forcats::fct_reorder(AVISIT, AVISITN),\n  ATOXGR_GP = factor(ATOXGR_GP, levels = c(\"Not High\", \"1\", \"2\", \"3\", \"4\", \"Missing\")),\n  BTOXGR_GP = factor(BTOXGR_GP, levels = c(\"Not High\", \"1\", \"2\", \"3\", \"4\", \"Missing\"))\n)\n\nadlb_out <- adlb_out %>%\n  var_relabel(\n    PARAMCD = \"Parameter Code\",\n    AVISIT = \"Visit\",\n    ATOXGR_GP = \"NCI CTCAE Grade at Visit\",\n    BTOXGR_GP = \"Baseline NCI CTCAE Grade\"\n  )\n\nresult <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ACTARM\") %>%\n  split_rows_by(\n    \"PARAMCD\",\n    split_fun = drop_split_levels, label_pos = \"topleft\", split_label = obj_label(adlb_out$PARAMCD)\n  ) %>%\n  split_rows_by(\n    \"AVISIT\",\n    split_fun = drop_split_levels, label_pos = \"topleft\", split_label = obj_label(adlb_out$AVISIT)\n  ) %>%\n  split_rows_by(\n    \"ATOXGR_GP\",\n    split_fun = drop_split_levels, label_pos = \"topleft\", split_label = obj_label(adlb_out$ATOXGR_GP)\n  ) %>%\n  summarize_num_patients(var = \"USUBJID\", .stats = c(\"unique_count\")) %>%\n  count_occurrences(\"BTOXGR_GP\", denom = \"n\", drop = TRUE) %>%\n  append_varlabels(adlb_out, \"BTOXGR_GP\", indent = 3L) %>%\n  build_table(df = adlb_out, alt_counts_df = adsl_f)\n\nresult\n\nParameter Code                                                             \n  Visit                                                                    \n    NCI CTCAE Grade at Visit      A: Drug X    B: Placebo    C: Combination\n      Baseline NCI CTCAE Grade     (N=134)       (N=134)        (N=132)    \n———————————————————————————————————————————————————————————————————————————\nALT                                                                        \n  WEEK 1 DAY 8                                                             \n    Not High (n)                     123           121            120      \n      Not High                   111 (90.2%)   107 (88.4%)    107 (89.2%)  \n      1                           3 (2.4%)      3 (2.5%)        3 (2.5%)   \n      2                           4 (3.3%)      4 (3.3%)        4 (3.3%)   \n      3                           2 (1.6%)      4 (3.3%)        4 (3.3%)   \n      4                           3 (2.4%)      3 (2.5%)        2 (1.7%)   \n    1 (n)                             3             5              3       \n      Not High                    3 (100%)      4 (80.0%)       3 (100%)   \n      3                               0         1 (20.0%)          0       \n    2 (n)                             2             2              2       \n      Not High                    2 (100%)      1 (50.0%)       2 (100%)   \n      1                               0         1 (50.0%)          0       \n    3 (n)                             3             6              3       \n      Not High                    3 (100%)      6 (100%)        3 (100%)   \n    4 (n)                             3             0              4       \n      Not High                    2 (66.7%)         0          3 (75.0%)   \n      1                           1 (33.3%)         0              0       \n      3                               0             0          1 (25.0%)   \n  WEEK 2 DAY 15                                                            \n    Not High (n)                     125           119            116      \n      Not High                   113 (90.4%)   105 (88.2%)    103 (88.8%)  \n      1                           4 (3.2%)      4 (3.4%)        3 (2.6%)   \n      2                           4 (3.2%)      4 (3.4%)        3 (2.6%)   \n      3                           2 (1.6%)      4 (3.4%)        5 (4.3%)   \n      4                           2 (1.6%)      2 (1.7%)        2 (1.7%)   \n    1 (n)                             4             6              6       \n      Not High                    3 (75.0%)     5 (83.3%)      5 (83.3%)   \n      2                               0             0          1 (16.7%)   \n      3                               0         1 (16.7%)          0       \n      4                           1 (25.0%)         0              0       \n    2 (n)                             0             4              5       \n      Not High                        0         4 (100%)        5 (100%)   \n    3 (n)                             1             3              2       \n      Not High                    1 (100%)      2 (66.7%)       2 (100%)   \n      4                               0         1 (33.3%)          0       \n    4 (n)                             4             2              3       \n      Not High                    4 (100%)      2 (100%)        3 (100%)   \n  WEEK 3 DAY 22                                                            \n    Not High (n)                     121           116            118      \n      Not High                   109 (90.1%)   102 (87.9%)    104 (88.1%)  \n      1                           3 (2.5%)      3 (2.6%)        3 (2.5%)   \n      2                           4 (3.3%)      4 (3.4%)        4 (3.4%)   \n      3                           2 (1.7%)      4 (3.4%)        5 (4.2%)   \n      4                           3 (2.5%)      3 (2.6%)        2 (1.7%)   \n    1 (n)                             6             3              3       \n      Not High                    5 (83.3%)     3 (100%)        3 (100%)   \n      1                           1 (16.7%)         0              0       \n    2 (n)                             5             6              6       \n      Not High                    5 (100%)      5 (83.3%)       6 (100%)   \n      3                               0         1 (16.7%)          0       \n    3 (n)                             1             5              3       \n      Not High                    1 (100%)      5 (100%)        3 (100%)   \n    4 (n)                             1             4              2       \n      Not High                    1 (100%)      3 (75.0%)       2 (100%)   \n      1                               0         1 (25.0%)          0       \n  WEEK 4 DAY 29                                                            \n    Not High (n)                     119           124            113      \n      Not High                   109 (91.6%)   110 (88.7%)    100 (88.5%)  \n      1                           3 (2.5%)      2 (1.6%)        2 (1.8%)   \n      2                           3 (2.5%)      4 (3.2%)        4 (3.5%)   \n      3                           2 (1.7%)      5 (4.0%)        5 (4.4%)   \n      4                           2 (1.7%)      3 (2.4%)        2 (1.8%)   \n    1 (n)                             4             2              8       \n      Not High                    4 (100%)      2 (100%)        8 (100%)   \n    2 (n)                             5             3              5       \n      Not High                    3 (60.0%)     2 (66.7%)       5 (100%)   \n      1                           1 (20.0%)     1 (33.3%)          0       \n      2                           1 (20.0%)         0              0       \n    3 (n)                             6             2              4       \n      Not High                    5 (83.3%)     2 (100%)       3 (75.0%)   \n      1                               0             0          1 (25.0%)   \n      4                           1 (16.7%)         0              0       \n    4 (n)                             0             3              2       \n      Not High                        0         2 (66.7%)       2 (100%)   \n      1                               0         1 (33.3%)          0       \n  WEEK 5 DAY 36                                                            \n    Not High (n)                     117           123            122      \n      Not High                   105 (89.7%)   109 (88.6%)    108 (88.5%)  \n      1                           3 (2.6%)      3 (2.4%)        3 (2.5%)   \n      2                           4 (3.4%)      3 (2.4%)        4 (3.3%)   \n      3                           2 (1.7%)      5 (4.1%)        5 (4.1%)   \n      4                           3 (2.6%)      3 (2.4%)        2 (1.6%)   \n    1 (n)                             6             3              4       \n      Not High                    6 (100%)      2 (66.7%)       4 (100%)   \n      2                               0         1 (33.3%)          0       \n    2 (n)                             5             4              3       \n      Not High                    4 (80.0%)     4 (100%)        3 (100%)   \n      1                           1 (20.0%)         0              0       \n    3 (n)                             2             2              1       \n      Not High                    2 (100%)      1 (50.0%)       1 (100%)   \n      1                               0         1 (50.0%)          0       \n    4 (n)                             4             2              2       \n      Not High                    4 (100%)      2 (100%)        2 (100%)   \nCRP                                                                        \n  WEEK 1 DAY 8                                                             \n    Not High (n)                     122           115            120      \n      Not High                   104 (85.2%)   98 (85.2%)     103 (85.8%)  \n      1                           5 (4.1%)      5 (4.3%)        5 (4.2%)   \n      2                           6 (4.9%)      5 (4.3%)        4 (3.3%)   \n      3                           2 (1.6%)      2 (1.7%)        5 (4.2%)   \n      4                           5 (4.1%)      5 (4.3%)        3 (2.5%)   \n    1 (n)                             3             3              1       \n      Not High                    3 (100%)      2 (66.7%)       1 (100%)   \n      4                               0         1 (33.3%)          0       \n    2 (n)                             4             5              3       \n      Not High                    3 (75.0%)     5 (100%)        3 (100%)   \n      4                           1 (25.0%)         0              0       \n    3 (n)                             2             6              6       \n      Not High                    2 (100%)      5 (83.3%)       6 (100%)   \n      3                               0         1 (16.7%)          0       \n    4 (n)                             3             5              2       \n      Not High                    3 (100%)      5 (100%)       1 (50.0%)   \n      2                               0             0          1 (50.0%)   \n  WEEK 2 DAY 15                                                            \n    Not High (n)                     124           122            115      \n      Not High                   105 (84.7%)   104 (85.2%)     97 (84.3%)  \n      1                           5 (4.0%)      5 (4.1%)        5 (4.3%)   \n      2                           6 (4.8%)      5 (4.1%)        5 (4.3%)   \n      3                           2 (1.6%)      2 (1.6%)        5 (4.3%)   \n      4                           6 (4.8%)      6 (4.9%)        3 (2.6%)   \n    1 (n)                             2             5              5       \n      Not High                    2 (100%)      5 (100%)        5 (100%)   \n    2 (n)                             2             4              6       \n      Not High                    2 (100%)      4 (100%)        6 (100%)   \n    3 (n)                             5             2              2       \n      Not High                    5 (100%)      2 (100%)        2 (100%)   \n    4 (n)                             1             1              4       \n      Not High                    1 (100%)          0           4 (100%)   \n      3                               0         1 (100%)           0       \n  WEEK 3 DAY 22                                                            \n    Not High (n)                     121           124            128      \n      Not High                   104 (86.0%)   107 (86.3%)    110 (85.9%)  \n      1                           5 (4.1%)      4 (3.2%)        5 (3.9%)   \n      2                           4 (3.3%)      5 (4.0%)        5 (3.9%)   \n      3                           2 (1.7%)      2 (1.6%)        5 (3.9%)   \n      4                           6 (5.0%)      6 (4.8%)        3 (2.3%)   \n    1 (n)                             3             5              0       \n      Not High                    3 (100%)      5 (100%)           0       \n    2 (n)                             3             2              2       \n      Not High                    1 (33.3%)     1 (50.0%)       2 (100%)   \n      1                               0         1 (50.0%)          0       \n      2                           2 (66.7%)         0              0       \n    3 (n)                             7             1              2       \n      Not High                    7 (100%)          0           2 (100%)   \n      3                               0         1 (100%)           0       \n    4 (n)                             0             2              0       \n      Not High                        0         2 (100%)           0       \n  WEEK 4 DAY 29                                                            \n    Not High (n)                     117           123            119      \n      Not High                   99 (84.6%)    106 (86.2%)    101 (84.9%)  \n      1                           4 (3.4%)      5 (4.1%)        5 (4.2%)   \n      2                           6 (5.1%)      4 (3.3%)        5 (4.2%)   \n      3                           2 (1.7%)      2 (1.6%)        5 (4.2%)   \n      4                           6 (5.1%)      6 (4.9%)        3 (2.5%)   \n    1 (n)                             5             4              7       \n      Not High                    5 (100%)      2 (50.0%)       7 (100%)   \n      2                               0         1 (25.0%)          0       \n      3                               0         1 (25.0%)          0       \n    2 (n)                             5             4              3       \n      Not High                    5 (100%)      4 (100%)        3 (100%)   \n    3 (n)                             3             1              1       \n      Not High                    3 (100%)      1 (100%)        1 (100%)   \n    4 (n)                             4             2              2       \n      Not High                    3 (75.0%)     2 (100%)        2 (100%)   \n      1                           1 (25.0%)         0              0       \n  WEEK 5 DAY 36                                                            \n    Not High (n)                     116           120            125      \n      Not High                   99 (85.3%)    104 (86.7%)    108 (86.4%)  \n      1                           5 (4.3%)      4 (3.3%)        5 (4.0%)   \n      2                           4 (3.4%)      4 (3.3%)        5 (4.0%)   \n      3                           2 (1.7%)      3 (2.5%)        4 (3.2%)   \n      4                           6 (5.2%)      5 (4.2%)        3 (2.4%)   \n    1 (n)                             7             4              1       \n      Not High                    7 (100%)      4 (100%)        1 (100%)   \n    2 (n)                             4             5              0       \n      Not High                    3 (75.0%)     4 (80.0%)          0       \n      1                               0         1 (20.0%)          0       \n      2                           1 (25.0%)         0              0       \n    3 (n)                             3             3              3       \n      Not High                    3 (100%)      2 (66.7%)      2 (66.7%)   \n      3                               0             0          1 (33.3%)   \n      4                               0         1 (33.3%)          0       \n    4 (n)                             4             2              3       \n      Not High                    3 (75.0%)     1 (50.0%)       3 (100%)   \n      2                           1 (25.0%)     1 (50.0%)          0       \nIGA                                                                        \n  WEEK 1 DAY 8                                                             \n    Not High (n)                     124           123            121      \n      Not High                   112 (90.3%)   114 (92.7%)    111 (91.7%)  \n      1                           2 (1.6%)      4 (3.3%)        6 (5.0%)   \n      2                           3 (2.4%)      3 (2.4%)        1 (0.8%)   \n      3                           3 (2.4%)      1 (0.8%)        1 (0.8%)   \n      4                           4 (3.2%)      1 (0.8%)        2 (1.7%)   \n    1 (n)                             6             4              3       \n      Not High                    5 (83.3%)     3 (75.0%)      2 (66.7%)   \n      2                               0         1 (25.0%)          0       \n      3                           1 (16.7%)         0          1 (33.3%)   \n    2 (n)                             0             4              3       \n      Not High                        0         4 (100%)       2 (66.7%)   \n      2                               0             0          1 (33.3%)   \n    3 (n)                             2             1              3       \n      Not High                    1 (50.0%)         0          2 (66.7%)   \n      2                               0             0          1 (33.3%)   \n      3                           1 (50.0%)     1 (100%)           0       \n    4 (n)                             2             2              2       \n      Not High                    1 (50.0%)     2 (100%)        2 (100%)   \n      2                           1 (50.0%)         0              0       \n  WEEK 2 DAY 15                                                            \n    Not High (n)                     119           123            117      \n      Not High                   105 (88.2%)   112 (91.1%)    104 (88.9%)  \n      1                           2 (1.7%)      4 (3.3%)        6 (5.1%)   \n      2                           4 (3.4%)      4 (3.3%)        3 (2.6%)   \n      3                           5 (4.2%)      2 (1.6%)        2 (1.7%)   \n      4                           3 (2.5%)      1 (0.8%)        2 (1.7%)   \n    1 (n)                             6             6              8       \n      Not High                    6 (100%)      6 (100%)        8 (100%)   \n    2 (n)                             6             3              4       \n      Not High                    5 (83.3%)     3 (100%)        4 (100%)   \n      4                           1 (16.7%)         0              0       \n    3 (n)                             1             2              3       \n      Not High                    1 (100%)      2 (100%)        3 (100%)   \n    4 (n)                             2             0              0       \n      Not High                    2 (100%)          0              0       \n  WEEK 3 DAY 22                                                            \n    Not High (n)                     122           121            117      \n      Not High                   107 (87.7%)   111 (91.7%)    104 (88.9%)  \n      1                           2 (1.6%)      3 (2.5%)        6 (5.1%)   \n      2                           4 (3.3%)      4 (3.3%)        3 (2.6%)   \n      3                           5 (4.1%)      2 (1.7%)        2 (1.7%)   \n      4                           4 (3.3%)      1 (0.8%)        2 (1.7%)   \n    1 (n)                             3             3              2       \n      Not High                    3 (100%)      3 (100%)        2 (100%)   \n    2 (n)                             6             5              4       \n      Not High                    6 (100%)      5 (100%)        4 (100%)   \n    3 (n)                             2             2              8       \n      Not High                    2 (100%)      2 (100%)        8 (100%)   \n    4 (n)                             1             3              1       \n      Not High                    1 (100%)      2 (66.7%)       1 (100%)   \n      1                               0         1 (33.3%)          0       \n  WEEK 4 DAY 29                                                            \n    Not High (n)                     116           114            122      \n      Not High                   101 (87.1%)   106 (93.0%)    111 (91.0%)  \n      1                           2 (1.7%)      3 (2.6%)        6 (4.9%)   \n      2                           4 (3.4%)      4 (3.5%)        3 (2.5%)   \n      3                           5 (4.3%)          0           1 (0.8%)   \n      4                           4 (3.4%)      1 (0.9%)        1 (0.8%)   \n    1 (n)                             9             3              2       \n      Not High                    9 (100%)      3 (100%)        2 (100%)   \n    2 (n)                             1             5              5       \n      Not High                    1 (100%)      5 (100%)       3 (60.0%)   \n      3                               0             0          1 (20.0%)   \n      4                               0             0          1 (20.0%)   \n    3 (n)                             4             7              2       \n      Not High                    4 (100%)      5 (71.4%)       2 (100%)   \n      3                               0         2 (28.6%)          0       \n    4 (n)                             4             5              1       \n      Not High                    4 (100%)      4 (80.0%)       1 (100%)   \n      1                               0         1 (20.0%)          0       \n  WEEK 5 DAY 36                                                            \n    Not High (n)                     118           120            123      \n      Not High                   103 (87.3%)   110 (91.7%)    111 (90.2%)  \n      1                           2 (1.7%)      4 (3.3%)        5 (4.1%)   \n      2                           4 (3.4%)      3 (2.5%)        3 (2.4%)   \n      3                           5 (4.2%)      2 (1.7%)        2 (1.6%)   \n      4                           4 (3.4%)      1 (0.8%)        2 (1.6%)   \n    1 (n)                             3             3              4       \n      Not High                    3 (100%)      2 (66.7%)       4 (100%)   \n      2                               0         1 (33.3%)          0       \n    2 (n)                             5             5              3       \n      Not High                    5 (100%)      5 (100%)       2 (66.7%)   \n      1                               0             0          1 (33.3%)   \n    3 (n)                             5             3              2       \n      Not High                    5 (100%)      3 (100%)        2 (100%)   \n    4 (n)                             3             3              0       \n      Not High                    3 (100%)      3 (100%)           0       \n\n\n\n\nNote that missing baseline values are filtered out in the pre-processing step.\n\nCodeadlb_f <- adlb %>% filter(WGRLOVFL == \"Y\")\n\n# Please note the step below can be skipped if you are using DTYPE PHANTOM\nadlb_out <- adsl_f %>%\n  h_adsl_adlb_merge_using_worst_flag(\n    adlb_f,\n    worst_flag = c(\"WGRLOVFL\" = \"Y\"),\n    by_visit = TRUE,\n    no_fillin_visits = c(\"SCREENING\", \"BASELINE\", \"UNSCHEDULED\")\n  )\n\n# Create new grouping variables ATOXGR_GP, BTOXGR_GP\nadlb_out <- adlb_out %>%\n  filter(BTOXGR != \"<Missing>\") %>% # filter out missing baseline grade\n  mutate(\n    ATOXGR_GP = case_when(\n      ATOXGR %in% c(0, 1, 2, 3, 4) ~ \"Not Low\",\n      ATOXGR == -1 ~ \"1\",\n      ATOXGR == -2 ~ \"2\",\n      ATOXGR == -3 ~ \"3\",\n      ATOXGR == -4 ~ \"4\",\n      ATOXGR == \"<Missing>\" ~ \"Missing\"\n    )\n  ) %>%\n  mutate(\n    BTOXGR_GP = case_when(\n      BTOXGR %in% c(0, 1, 2, 3, 4) ~ \"Not Low\",\n      BTOXGR == -1 ~ \"1\",\n      BTOXGR == -2 ~ \"2\",\n      BTOXGR == -3 ~ \"3\",\n      BTOXGR == -4 ~ \"4\"\n    )\n  )\n\nadlb_out <- adlb_out %>% mutate(\n  AVISIT = forcats::fct_reorder(AVISIT, AVISITN),\n  ATOXGR_GP = factor(ATOXGR_GP, levels = c(\"Not Low\", \"1\", \"2\", \"3\", \"4\", \"Missing\")),\n  BTOXGR_GP = factor(BTOXGR_GP, levels = c(\"Not Low\", \"1\", \"2\", \"3\", \"4\"))\n)\n\nadlb_out <- adlb_out %>%\n  var_relabel(\n    PARAMCD = \"Parameter Code\",\n    AVISIT = \"Visit\",\n    ATOXGR_GP = \"NCI CTCAE Grade at Visit\",\n    BTOXGR_GP = \"Baseline NCI CTCAE Grade\"\n  )\n\nresult <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ACTARM\") %>%\n  split_rows_by(\n    \"PARAMCD\",\n    split_fun = drop_split_levels, label_pos = \"topleft\", split_label = obj_label(adlb_out$PARAMCD)\n  ) %>%\n  split_rows_by(\n    \"AVISIT\",\n    split_fun = drop_split_levels, label_pos = \"topleft\", split_label = obj_label(adlb_out$AVISIT)\n  ) %>%\n  split_rows_by(\n    \"ATOXGR_GP\",\n    split_fun = drop_split_levels, label_pos = \"topleft\", split_label = obj_label(adlb_out$ATOXGR_GP)\n  ) %>%\n  summarize_num_patients(var = \"USUBJID\", .stats = c(\"unique_count\")) %>%\n  count_occurrences(\"BTOXGR_GP\", denom = \"n\", drop = TRUE) %>%\n  append_varlabels(adlb_out, \"BTOXGR_GP\", indent = 3L) %>%\n  build_table(df = adlb_out, alt_counts_df = adsl_f)\n\nresult\n\nParameter Code                                                             \n  Visit                                                                    \n    NCI CTCAE Grade at Visit      A: Drug X    B: Placebo    C: Combination\n      Baseline NCI CTCAE Grade     (N=134)       (N=134)        (N=132)    \n———————————————————————————————————————————————————————————————————————————\nALT                                                                        \n  WEEK 1 DAY 8                                                             \n    Not Low (n)                      122           126            126      \n      Not Low                    114 (93.4%)   114 (90.5%)    111 (88.1%)  \n      1                           1 (0.8%)      6 (4.8%)        7 (5.6%)   \n      2                           2 (1.6%)      1 (0.8%)        4 (3.2%)   \n      3                           2 (1.6%)      3 (2.4%)        4 (3.2%)   \n      4                           3 (2.5%)      2 (1.6%)           0       \n    1 (n)                             6             0              3       \n      Not Low                     5 (83.3%)         0           3 (100%)   \n      1                           1 (16.7%)         0              0       \n    2 (n)                             4             6              1       \n      Not Low                     4 (100%)      6 (100%)        1 (100%)   \n    3 (n)                             1             2              2       \n      Not Low                         0         2 (100%)        2 (100%)   \n      1                           1 (100%)          0              0       \n    4 (n)                             1             0              0       \n      Not Low                     1 (100%)          0              0       \n  WEEK 2 DAY 15                                                            \n    Not Low (n)                      119           126            119      \n      Not Low                    111 (93.3%)   114 (90.5%)    104 (87.4%)  \n      1                           2 (1.7%)      6 (4.8%)        7 (5.9%)   \n      2                           2 (1.7%)      1 (0.8%)        4 (3.4%)   \n      3                           2 (1.7%)      3 (2.4%)        4 (3.4%)   \n      4                           2 (1.7%)      2 (1.6%)           0       \n    1 (n)                             5             2              2       \n      Not Low                     4 (80.0%)     2 (100%)        2 (100%)   \n      1                           1 (20.0%)         0              0       \n    2 (n)                             4             6              3       \n      Not Low                     4 (100%)      6 (100%)        3 (100%)   \n    3 (n)                             5             0              5       \n      Not Low                     4 (80.0%)         0           5 (100%)   \n      4                           1 (20.0%)         0              0       \n    4 (n)                             1             0              3       \n      Not Low                     1 (100%)          0           3 (100%)   \n  WEEK 3 DAY 22                                                            \n    Not Low (n)                      121           119            123      \n      Not Low                    112 (92.6%)   109 (91.6%)    111 (90.2%)  \n      1                           3 (2.5%)      5 (4.2%)        6 (4.9%)   \n      2                           2 (1.7%)          0           3 (2.4%)   \n      3                           2 (1.7%)      3 (2.5%)        3 (2.4%)   \n      4                           2 (1.7%)      2 (1.7%)           0       \n    1 (n)                             1             3              4       \n      Not Low                         0         3 (100%)       3 (75.0%)   \n      3                               0             0          1 (25.0%)   \n      4                           1 (100%)          0              0       \n    2 (n)                             4             6              0       \n      Not Low                     4 (100%)      4 (66.7%)          0       \n      1                               0         1 (16.7%)          0       \n      2                               0         1 (16.7%)          0       \n    3 (n)                             5             2              2       \n      Not Low                     5 (100%)      2 (100%)       1 (50.0%)   \n      2                               0             0          1 (50.0%)   \n    4 (n)                             3             4              3       \n      Not Low                     3 (100%)      4 (100%)       2 (66.7%)   \n      1                               0             0          1 (33.3%)   \n  WEEK 4 DAY 29                                                            \n    Not Low (n)                      124           119            122      \n      Not Low                    114 (91.9%)   109 (91.6%)    107 (87.7%)  \n      1                           3 (2.4%)      5 (4.2%)        7 (5.7%)   \n      2                           2 (1.6%)      1 (0.8%)        4 (3.3%)   \n      3                           2 (1.6%)      2 (1.7%)        4 (3.3%)   \n      4                           3 (2.4%)      2 (1.7%)           0       \n    1 (n)                             2             6              3       \n      Not Low                     2 (100%)      4 (66.7%)       3 (100%)   \n      1                               0         1 (16.7%)          0       \n      3                               0         1 (16.7%)          0       \n    2 (n)                             2             3              5       \n      Not Low                     2 (100%)      3 (100%)        5 (100%)   \n    3 (n)                             4             4              2       \n      Not Low                     4 (100%)      4 (100%)        2 (100%)   \n    4 (n)                             2             2              0       \n      Not Low                     2 (100%)      2 (100%)           0       \n  WEEK 5 DAY 36                                                            \n    Not Low (n)                      118           116            121      \n      Not Low                    110 (93.2%)   107 (92.2%)    107 (88.4%)  \n      1                           1 (0.8%)      4 (3.4%)        6 (5.0%)   \n      2                           2 (1.7%)      1 (0.9%)        4 (3.3%)   \n      3                           2 (1.7%)      3 (2.6%)        4 (3.3%)   \n      4                           3 (2.5%)      1 (0.9%)           0       \n    1 (n)                             6             7              2       \n      Not Low                     6 (100%)      6 (85.7%)       2 (100%)   \n      1                               0         1 (14.3%)          0       \n    2 (n)                             4             3              4       \n      Not Low                     3 (75.0%)     3 (100%)        4 (100%)   \n      1                           1 (25.0%)         0              0       \n    3 (n)                             6             6              1       \n      Not Low                     5 (83.3%)     5 (83.3%)       1 (100%)   \n      1                           1 (16.7%)     1 (16.7%)          0       \n    4 (n)                             0             2              4       \n      Not Low                         0         1 (50.0%)      3 (75.0%)   \n      1                               0             0          1 (25.0%)   \n      4                               0         1 (50.0%)          0       \nCRP                                                                        \n  WEEK 1 DAY 8                                                             \n    Not Low (n)                      115           122            124      \n      Not Low                    103 (89.6%)   114 (93.4%)    114 (91.9%)  \n      1                           2 (1.7%)      5 (4.1%)        4 (3.2%)   \n      2                           5 (4.3%)      1 (0.8%)        1 (0.8%)   \n      3                           2 (1.7%)      1 (0.8%)        1 (0.8%)   \n      4                           3 (2.6%)      1 (0.8%)        4 (3.2%)   \n    1 (n)                             6             5              1       \n      Not Low                     6 (100%)      4 (80.0%)          0       \n      1                               0             0           1 (100%)   \n      3                               0         1 (20.0%)          0       \n    2 (n)                             8             3              5       \n      Not Low                     8 (100%)      3 (100%)       4 (80.0%)   \n      4                               0             0          1 (20.0%)   \n    3 (n)                             3             2              2       \n      Not Low                     3 (100%)      2 (100%)        2 (100%)   \n    4 (n)                             2             2              0       \n      Not Low                     2 (100%)      2 (100%)           0       \n  WEEK 2 DAY 15                                                            \n    Not Low (n)                      116           122            117      \n      Not Low                    105 (90.5%)   114 (93.4%)    106 (90.6%)  \n      1                           2 (1.7%)      5 (4.1%)        5 (4.3%)   \n      2                           5 (4.3%)          0           1 (0.9%)   \n      3                           2 (1.7%)      2 (1.6%)           0       \n      4                           2 (1.7%)      1 (0.8%)        5 (4.3%)   \n    1 (n)                             4             8              5       \n      Not Low                     4 (100%)      8 (100%)        5 (100%)   \n    2 (n)                             7             2              2       \n      Not Low                     7 (100%)      1 (50.0%)       2 (100%)   \n      2                               0         1 (50.0%)          0       \n    3 (n)                             4             0              6       \n      Not Low                     4 (100%)          0          5 (83.3%)   \n      3                               0             0          1 (16.7%)   \n    4 (n)                             3             2              2       \n      Not Low                     2 (66.7%)     2 (100%)        2 (100%)   \n      4                           1 (33.3%)         0              0       \n  WEEK 3 DAY 22                                                            \n    Not Low (n)                      119           123            120      \n      Not Low                    109 (91.6%)   115 (93.5%)    108 (90.0%)  \n      1                           1 (0.8%)      4 (3.3%)        5 (4.2%)   \n      2                           4 (3.4%)      1 (0.8%)        1 (0.8%)   \n      3                           2 (1.7%)      2 (1.6%)        1 (0.8%)   \n      4                           3 (2.5%)      1 (0.8%)        5 (4.2%)   \n    1 (n)                             7             5              4       \n      Not Low                     6 (85.7%)     4 (80.0%)       4 (100%)   \n      1                               0         1 (20.0%)          0       \n      2                           1 (14.3%)         0              0       \n    2 (n)                             3             2              4       \n      Not Low                     2 (66.7%)     2 (100%)        4 (100%)   \n      1                           1 (33.3%)         0              0       \n    3 (n)                             2             3              4       \n      Not Low                     2 (100%)      3 (100%)        4 (100%)   \n    4 (n)                             3             1              0       \n      Not Low                     3 (100%)      1 (100%)           0       \n  WEEK 4 DAY 29                                                            \n    Not Low (n)                      126           119            120      \n      Not Low                    114 (90.5%)   111 (93.3%)    108 (90.0%)  \n      1                           2 (1.6%)      4 (3.4%)        5 (4.2%)   \n      2                           5 (4.0%)      1 (0.8%)        1 (0.8%)   \n      3                           2 (1.6%)      2 (1.7%)        1 (0.8%)   \n      4                           3 (2.4%)      1 (0.8%)        5 (4.2%)   \n    1 (n)                             5             5              3       \n      Not Low                     5 (100%)      5 (100%)        3 (100%)   \n    2 (n)                             1             6              6       \n      Not Low                     1 (100%)      5 (83.3%)       6 (100%)   \n      1                               0         1 (16.7%)          0       \n    3 (n)                             1             3              2       \n      Not Low                     1 (100%)      3 (100%)        2 (100%)   \n    4 (n)                             1             1              1       \n      Not Low                     1 (100%)      1 (100%)        1 (100%)   \n  WEEK 5 DAY 36                                                            \n    Not Low (n)                      121           126            119      \n      Not Low                    111 (91.7%)   117 (92.9%)    109 (91.6%)  \n      1                           1 (0.8%)      5 (4.0%)        5 (4.2%)   \n      2                           4 (3.3%)      1 (0.8%)        1 (0.8%)   \n      3                           2 (1.7%)      2 (1.6%)        1 (0.8%)   \n      4                           3 (2.5%)      1 (0.8%)        3 (2.5%)   \n    1 (n)                             2             3              3       \n      Not Low                     1 (50.0%)     3 (100%)       2 (66.7%)   \n      2                           1 (50.0%)         0              0       \n      4                               0             0          1 (33.3%)   \n    2 (n)                             5             1              4       \n      Not Low                     5 (100%)      1 (100%)        4 (100%)   \n    3 (n)                             4             3              4       \n      Not Low                     4 (100%)      3 (100%)        4 (100%)   \n    4 (n)                             2             1              2       \n      Not Low                     1 (50.0%)     1 (100%)       1 (50.0%)   \n      1                           1 (50.0%)         0              0       \n      4                               0             0          1 (50.0%)   \nIGA                                                                        \n  WEEK 1 DAY 8                                                             \n    Not Low (n)                      120           119            119      \n      Not Low                    108 (90.0%)   105 (88.2%)    108 (90.8%)  \n      1                           7 (5.8%)      7 (5.9%)        3 (2.5%)   \n      2                           2 (1.7%)      1 (0.8%)        2 (1.7%)   \n      3                           2 (1.7%)      3 (2.5%)        4 (3.4%)   \n      4                           1 (0.8%)      3 (2.5%)        2 (1.7%)   \n    1 (n)                             4             5              6       \n      Not Low                     3 (75.0%)     5 (100%)        6 (100%)   \n      1                           1 (25.0%)         0              0       \n    2 (n)                             5             3              4       \n      Not Low                     5 (100%)      2 (66.7%)       4 (100%)   \n      1                               0         1 (33.3%)          0       \n    3 (n)                             3             4              2       \n      Not Low                     3 (100%)      4 (100%)       1 (50.0%)   \n      4                               0             0          1 (50.0%)   \n    4 (n)                             2             3              1       \n      Not Low                     1 (50.0%)     3 (100%)        1 (100%)   \n      3                           1 (50.0%)         0              0       \n  WEEK 2 DAY 15                                                            \n    Not Low (n)                      125           116            116      \n      Not Low                    112 (89.6%)   104 (89.7%)    105 (90.5%)  \n      1                           8 (6.4%)      5 (4.3%)        2 (1.7%)   \n      2                           2 (1.6%)      1 (0.9%)        2 (1.7%)   \n      3                           2 (1.6%)      3 (2.6%)        4 (3.4%)   \n      4                           1 (0.8%)      3 (2.6%)        3 (2.6%)   \n    1 (n)                             2             6              8       \n      Not Low                     2 (100%)      3 (50.0%)       8 (100%)   \n      1                               0         3 (50.0%)          0       \n    2 (n)                             2             6              4       \n      Not Low                     2 (100%)      6 (100%)        4 (100%)   \n    3 (n)                             4             2              3       \n      Not Low                     3 (75.0%)     2 (100%)        3 (100%)   \n      3                           1 (25.0%)         0              0       \n    4 (n)                             1             4              1       \n      Not Low                     1 (100%)      4 (100%)           0       \n      1                               0             0           1 (100%)   \n  WEEK 3 DAY 22                                                            \n    Not Low (n)                      118           125            116      \n      Not Low                    104 (88.1%)   110 (88.0%)    107 (92.2%)  \n      1                           8 (6.8%)      8 (6.4%)        2 (1.7%)   \n      2                           2 (1.7%)      1 (0.8%)        2 (1.7%)   \n      3                           3 (2.5%)      3 (2.4%)        3 (2.6%)   \n      4                           1 (0.8%)      3 (2.4%)        2 (1.7%)   \n    1 (n)                             8             2              6       \n      Not Low                     8 (100%)      2 (100%)       5 (83.3%)   \n      1                               0             0          1 (16.7%)   \n    2 (n)                             3             2              3       \n      Not Low                     3 (100%)      2 (100%)        3 (100%)   \n    3 (n)                             3             3              3       \n      Not Low                     3 (100%)      3 (100%)        3 (100%)   \n    4 (n)                             2             2              4       \n      Not Low                     2 (100%)      2 (100%)       2 (50.0%)   \n      3                               0             0          1 (25.0%)   \n      4                               0             0          1 (25.0%)   \n  WEEK 4 DAY 29                                                            \n    Not Low (n)                      123           115            119      \n      Not Low                    109 (88.6%)   100 (87.0%)    107 (89.9%)  \n      1                           8 (6.5%)      8 (7.0%)        3 (2.5%)   \n      2                           2 (1.6%)      1 (0.9%)        2 (1.7%)   \n      3                           3 (2.4%)      3 (2.6%)        4 (3.4%)   \n      4                           1 (0.8%)      3 (2.6%)        3 (2.5%)   \n    1 (n)                             3             7              2       \n      Not Low                     3 (100%)      7 (100%)        2 (100%)   \n    2 (n)                             2             7              4       \n      Not Low                     2 (100%)      7 (100%)        4 (100%)   \n    3 (n)                             3             2              6       \n      Not Low                     3 (100%)      2 (100%)        6 (100%)   \n    4 (n)                             3             3              1       \n      Not Low                     3 (100%)      3 (100%)        1 (100%)   \n  WEEK 5 DAY 36                                                            \n    Not Low (n)                      122           118            119      \n      Not Low                    108 (88.5%)   103 (87.3%)    108 (90.8%)  \n      1                           8 (6.6%)      8 (6.8%)        3 (2.5%)   \n      2                           2 (1.6%)      1 (0.8%)        2 (1.7%)   \n      3                           3 (2.5%)      3 (2.5%)        3 (2.5%)   \n      4                           1 (0.8%)      3 (2.5%)        3 (2.5%)   \n    1 (n)                             3             7              4       \n      Not Low                     3 (100%)      7 (100%)       3 (75.0%)   \n      3                               0             0          1 (25.0%)   \n    2 (n)                             2             3              3       \n      Not Low                     2 (100%)      3 (100%)        3 (100%)   \n    3 (n)                             4             2              3       \n      Not Low                     4 (100%)      2 (100%)        3 (100%)   \n    4 (n)                             3             4              3       \n      Not Low                     3 (100%)      4 (100%)        3 (100%)   \n\n\n\n\nNote that when BTOXGR is missing, the grouping variable BTOXGR_GP is now \"Not High\" instead of \"Missing\" compared to Standard Table (High).\n\nCodeadlb_f <- adlb %>% filter(WGRHIVFL == \"Y\")\n\n# Please note the step below can be skipped if you are using DTYPE PHANTOM\nadlb_out <- adsl_f %>%\n  h_adsl_adlb_merge_using_worst_flag(\n    adlb_f,\n    worst_flag = c(\"WGRHIVFL\" = \"Y\"),\n    by_visit = TRUE,\n    no_fillin_visits = c(\"SCREENING\", \"BASELINE\", \"UNSCHEDULED\")\n  )\n\n# Create new grouping variables ATOXGR_GP, BTOXGR_GP\nadlb_out <- adlb_out %>%\n  mutate(\n    ATOXGR_GP = case_when(\n      ATOXGR %in% c(0, -1, -2, -3, -4) ~ \"Not High\",\n      ATOXGR == 1 ~ \"1\",\n      ATOXGR == 2 ~ \"2\",\n      ATOXGR == 3 ~ \"3\",\n      ATOXGR == 4 ~ \"4\",\n      ATOXGR == \"<Missing>\" ~ \"Missing\"\n    )\n  ) %>%\n  mutate(\n    BTOXGR_GP = case_when(\n      BTOXGR %in% c(0, -1, -2, -3, -4, \"<Missing>\") ~ \"Not High\", # Missing BTOXGR now grouped to \"Not High\"\n      BTOXGR == 1 ~ \"1\",\n      BTOXGR == 2 ~ \"2\",\n      BTOXGR == 3 ~ \"3\",\n      BTOXGR == 4 ~ \"4\"\n    )\n  )\n\nadlb_out <- adlb_out %>% mutate(\n  AVISIT = forcats::fct_reorder(AVISIT, AVISITN),\n  ATOXGR_GP = factor(ATOXGR_GP, levels = c(\"Not High\", \"1\", \"2\", \"3\", \"4\", \"Missing\")),\n  BTOXGR_GP = factor(BTOXGR_GP, levels = c(\"Not High\", \"1\", \"2\", \"3\", \"4\", \"Missing\"))\n)\n\nadlb_out <- adlb_out %>%\n  var_relabel(\n    PARAMCD = \"Parameter Code\",\n    AVISIT = \"Visit\",\n    ATOXGR_GP = \"NCI CTCAE Grade at Visit\",\n    BTOXGR_GP = \"Baseline NCI CTCAE Grade\"\n  )\n\nresult <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ACTARM\") %>%\n  split_rows_by(\n    \"PARAMCD\",\n    split_fun = drop_split_levels, label_pos = \"topleft\", split_label = obj_label(adlb_out$PARAMCD)\n  ) %>%\n  split_rows_by(\n    \"AVISIT\",\n    split_fun = drop_split_levels, label_pos = \"topleft\", split_label = obj_label(adlb_out$AVISIT)\n  ) %>%\n  split_rows_by(\n    \"ATOXGR_GP\",\n    split_fun = drop_split_levels, label_pos = \"topleft\", split_label = obj_label(adlb_out$ATOXGR_GP)\n  ) %>%\n  summarize_num_patients(var = \"USUBJID\", .stats = c(\"unique_count\")) %>%\n  count_occurrences(\"BTOXGR_GP\", denom = \"n\", drop = TRUE) %>%\n  append_varlabels(adlb_out, \"BTOXGR_GP\", indent = 3L) %>%\n  build_table(df = adlb_out, alt_counts_df = adsl_f)\n\nresult\n\nParameter Code                                                             \n  Visit                                                                    \n    NCI CTCAE Grade at Visit      A: Drug X    B: Placebo    C: Combination\n      Baseline NCI CTCAE Grade     (N=134)       (N=134)        (N=132)    \n———————————————————————————————————————————————————————————————————————————\nALT                                                                        \n  WEEK 1 DAY 8                                                             \n    Not High (n)                     123           121            120      \n      Not High                   111 (90.2%)   107 (88.4%)    107 (89.2%)  \n      1                           3 (2.4%)      3 (2.5%)        3 (2.5%)   \n      2                           4 (3.3%)      4 (3.3%)        4 (3.3%)   \n      3                           2 (1.6%)      4 (3.3%)        4 (3.3%)   \n      4                           3 (2.4%)      3 (2.5%)        2 (1.7%)   \n    1 (n)                             3             5              3       \n      Not High                    3 (100%)      4 (80.0%)       3 (100%)   \n      3                               0         1 (20.0%)          0       \n    2 (n)                             2             2              2       \n      Not High                    2 (100%)      1 (50.0%)       2 (100%)   \n      1                               0         1 (50.0%)          0       \n    3 (n)                             3             6              3       \n      Not High                    3 (100%)      6 (100%)        3 (100%)   \n    4 (n)                             3             0              4       \n      Not High                    2 (66.7%)         0          3 (75.0%)   \n      1                           1 (33.3%)         0              0       \n      3                               0             0          1 (25.0%)   \n  WEEK 2 DAY 15                                                            \n    Not High (n)                     125           119            116      \n      Not High                   113 (90.4%)   105 (88.2%)    103 (88.8%)  \n      1                           4 (3.2%)      4 (3.4%)        3 (2.6%)   \n      2                           4 (3.2%)      4 (3.4%)        3 (2.6%)   \n      3                           2 (1.6%)      4 (3.4%)        5 (4.3%)   \n      4                           2 (1.6%)      2 (1.7%)        2 (1.7%)   \n    1 (n)                             4             6              6       \n      Not High                    3 (75.0%)     5 (83.3%)      5 (83.3%)   \n      2                               0             0          1 (16.7%)   \n      3                               0         1 (16.7%)          0       \n      4                           1 (25.0%)         0              0       \n    2 (n)                             0             4              5       \n      Not High                        0         4 (100%)        5 (100%)   \n    3 (n)                             1             3              2       \n      Not High                    1 (100%)      2 (66.7%)       2 (100%)   \n      4                               0         1 (33.3%)          0       \n    4 (n)                             4             2              3       \n      Not High                    4 (100%)      2 (100%)        3 (100%)   \n  WEEK 3 DAY 22                                                            \n    Not High (n)                     121           116            118      \n      Not High                   109 (90.1%)   102 (87.9%)    104 (88.1%)  \n      1                           3 (2.5%)      3 (2.6%)        3 (2.5%)   \n      2                           4 (3.3%)      4 (3.4%)        4 (3.4%)   \n      3                           2 (1.7%)      4 (3.4%)        5 (4.2%)   \n      4                           3 (2.5%)      3 (2.6%)        2 (1.7%)   \n    1 (n)                             6             3              3       \n      Not High                    5 (83.3%)     3 (100%)        3 (100%)   \n      1                           1 (16.7%)         0              0       \n    2 (n)                             5             6              6       \n      Not High                    5 (100%)      5 (83.3%)       6 (100%)   \n      3                               0         1 (16.7%)          0       \n    3 (n)                             1             5              3       \n      Not High                    1 (100%)      5 (100%)        3 (100%)   \n    4 (n)                             1             4              2       \n      Not High                    1 (100%)      3 (75.0%)       2 (100%)   \n      1                               0         1 (25.0%)          0       \n  WEEK 4 DAY 29                                                            \n    Not High (n)                     119           124            113      \n      Not High                   109 (91.6%)   110 (88.7%)    100 (88.5%)  \n      1                           3 (2.5%)      2 (1.6%)        2 (1.8%)   \n      2                           3 (2.5%)      4 (3.2%)        4 (3.5%)   \n      3                           2 (1.7%)      5 (4.0%)        5 (4.4%)   \n      4                           2 (1.7%)      3 (2.4%)        2 (1.8%)   \n    1 (n)                             4             2              8       \n      Not High                    4 (100%)      2 (100%)        8 (100%)   \n    2 (n)                             5             3              5       \n      Not High                    3 (60.0%)     2 (66.7%)       5 (100%)   \n      1                           1 (20.0%)     1 (33.3%)          0       \n      2                           1 (20.0%)         0              0       \n    3 (n)                             6             2              4       \n      Not High                    5 (83.3%)     2 (100%)       3 (75.0%)   \n      1                               0             0          1 (25.0%)   \n      4                           1 (16.7%)         0              0       \n    4 (n)                             0             3              2       \n      Not High                        0         2 (66.7%)       2 (100%)   \n      1                               0         1 (33.3%)          0       \n  WEEK 5 DAY 36                                                            \n    Not High (n)                     117           123            122      \n      Not High                   105 (89.7%)   109 (88.6%)    108 (88.5%)  \n      1                           3 (2.6%)      3 (2.4%)        3 (2.5%)   \n      2                           4 (3.4%)      3 (2.4%)        4 (3.3%)   \n      3                           2 (1.7%)      5 (4.1%)        5 (4.1%)   \n      4                           3 (2.6%)      3 (2.4%)        2 (1.6%)   \n    1 (n)                             6             3              4       \n      Not High                    6 (100%)      2 (66.7%)       4 (100%)   \n      2                               0         1 (33.3%)          0       \n    2 (n)                             5             4              3       \n      Not High                    4 (80.0%)     4 (100%)        3 (100%)   \n      1                           1 (20.0%)         0              0       \n    3 (n)                             2             2              1       \n      Not High                    2 (100%)      1 (50.0%)       1 (100%)   \n      1                               0         1 (50.0%)          0       \n    4 (n)                             4             2              2       \n      Not High                    4 (100%)      2 (100%)        2 (100%)   \nCRP                                                                        \n  WEEK 1 DAY 8                                                             \n    Not High (n)                     122           115            120      \n      Not High                   104 (85.2%)   98 (85.2%)     103 (85.8%)  \n      1                           5 (4.1%)      5 (4.3%)        5 (4.2%)   \n      2                           6 (4.9%)      5 (4.3%)        4 (3.3%)   \n      3                           2 (1.6%)      2 (1.7%)        5 (4.2%)   \n      4                           5 (4.1%)      5 (4.3%)        3 (2.5%)   \n    1 (n)                             3             3              1       \n      Not High                    3 (100%)      2 (66.7%)       1 (100%)   \n      4                               0         1 (33.3%)          0       \n    2 (n)                             4             5              3       \n      Not High                    3 (75.0%)     5 (100%)        3 (100%)   \n      4                           1 (25.0%)         0              0       \n    3 (n)                             2             6              6       \n      Not High                    2 (100%)      5 (83.3%)       6 (100%)   \n      3                               0         1 (16.7%)          0       \n    4 (n)                             3             5              2       \n      Not High                    3 (100%)      5 (100%)       1 (50.0%)   \n      2                               0             0          1 (50.0%)   \n  WEEK 2 DAY 15                                                            \n    Not High (n)                     124           122            115      \n      Not High                   105 (84.7%)   104 (85.2%)     97 (84.3%)  \n      1                           5 (4.0%)      5 (4.1%)        5 (4.3%)   \n      2                           6 (4.8%)      5 (4.1%)        5 (4.3%)   \n      3                           2 (1.6%)      2 (1.6%)        5 (4.3%)   \n      4                           6 (4.8%)      6 (4.9%)        3 (2.6%)   \n    1 (n)                             2             5              5       \n      Not High                    2 (100%)      5 (100%)        5 (100%)   \n    2 (n)                             2             4              6       \n      Not High                    2 (100%)      4 (100%)        6 (100%)   \n    3 (n)                             5             2              2       \n      Not High                    5 (100%)      2 (100%)        2 (100%)   \n    4 (n)                             1             1              4       \n      Not High                    1 (100%)          0           4 (100%)   \n      3                               0         1 (100%)           0       \n  WEEK 3 DAY 22                                                            \n    Not High (n)                     121           124            128      \n      Not High                   104 (86.0%)   107 (86.3%)    110 (85.9%)  \n      1                           5 (4.1%)      4 (3.2%)        5 (3.9%)   \n      2                           4 (3.3%)      5 (4.0%)        5 (3.9%)   \n      3                           2 (1.7%)      2 (1.6%)        5 (3.9%)   \n      4                           6 (5.0%)      6 (4.8%)        3 (2.3%)   \n    1 (n)                             3             5              0       \n      Not High                    3 (100%)      5 (100%)           0       \n    2 (n)                             3             2              2       \n      Not High                    1 (33.3%)     1 (50.0%)       2 (100%)   \n      1                               0         1 (50.0%)          0       \n      2                           2 (66.7%)         0              0       \n    3 (n)                             7             1              2       \n      Not High                    7 (100%)          0           2 (100%)   \n      3                               0         1 (100%)           0       \n    4 (n)                             0             2              0       \n      Not High                        0         2 (100%)           0       \n  WEEK 4 DAY 29                                                            \n    Not High (n)                     117           123            119      \n      Not High                   99 (84.6%)    106 (86.2%)    101 (84.9%)  \n      1                           4 (3.4%)      5 (4.1%)        5 (4.2%)   \n      2                           6 (5.1%)      4 (3.3%)        5 (4.2%)   \n      3                           2 (1.7%)      2 (1.6%)        5 (4.2%)   \n      4                           6 (5.1%)      6 (4.9%)        3 (2.5%)   \n    1 (n)                             5             4              7       \n      Not High                    5 (100%)      2 (50.0%)       7 (100%)   \n      2                               0         1 (25.0%)          0       \n      3                               0         1 (25.0%)          0       \n    2 (n)                             5             4              3       \n      Not High                    5 (100%)      4 (100%)        3 (100%)   \n    3 (n)                             3             1              1       \n      Not High                    3 (100%)      1 (100%)        1 (100%)   \n    4 (n)                             4             2              2       \n      Not High                    3 (75.0%)     2 (100%)        2 (100%)   \n      1                           1 (25.0%)         0              0       \n  WEEK 5 DAY 36                                                            \n    Not High (n)                     116           120            125      \n      Not High                   99 (85.3%)    104 (86.7%)    108 (86.4%)  \n      1                           5 (4.3%)      4 (3.3%)        5 (4.0%)   \n      2                           4 (3.4%)      4 (3.3%)        5 (4.0%)   \n      3                           2 (1.7%)      3 (2.5%)        4 (3.2%)   \n      4                           6 (5.2%)      5 (4.2%)        3 (2.4%)   \n    1 (n)                             7             4              1       \n      Not High                    7 (100%)      4 (100%)        1 (100%)   \n    2 (n)                             4             5              0       \n      Not High                    3 (75.0%)     4 (80.0%)          0       \n      1                               0         1 (20.0%)          0       \n      2                           1 (25.0%)         0              0       \n    3 (n)                             3             3              3       \n      Not High                    3 (100%)      2 (66.7%)      2 (66.7%)   \n      3                               0             0          1 (33.3%)   \n      4                               0         1 (33.3%)          0       \n    4 (n)                             4             2              3       \n      Not High                    3 (75.0%)     1 (50.0%)       3 (100%)   \n      2                           1 (25.0%)     1 (50.0%)          0       \nIGA                                                                        \n  WEEK 1 DAY 8                                                             \n    Not High (n)                     124           123            121      \n      Not High                   112 (90.3%)   114 (92.7%)    111 (91.7%)  \n      1                           2 (1.6%)      4 (3.3%)        6 (5.0%)   \n      2                           3 (2.4%)      3 (2.4%)        1 (0.8%)   \n      3                           3 (2.4%)      1 (0.8%)        1 (0.8%)   \n      4                           4 (3.2%)      1 (0.8%)        2 (1.7%)   \n    1 (n)                             6             4              3       \n      Not High                    5 (83.3%)     3 (75.0%)      2 (66.7%)   \n      2                               0         1 (25.0%)          0       \n      3                           1 (16.7%)         0          1 (33.3%)   \n    2 (n)                             0             4              3       \n      Not High                        0         4 (100%)       2 (66.7%)   \n      2                               0             0          1 (33.3%)   \n    3 (n)                             2             1              3       \n      Not High                    1 (50.0%)         0          2 (66.7%)   \n      2                               0             0          1 (33.3%)   \n      3                           1 (50.0%)     1 (100%)           0       \n    4 (n)                             2             2              2       \n      Not High                    1 (50.0%)     2 (100%)        2 (100%)   \n      2                           1 (50.0%)         0              0       \n  WEEK 2 DAY 15                                                            \n    Not High (n)                     119           123            117      \n      Not High                   105 (88.2%)   112 (91.1%)    104 (88.9%)  \n      1                           2 (1.7%)      4 (3.3%)        6 (5.1%)   \n      2                           4 (3.4%)      4 (3.3%)        3 (2.6%)   \n      3                           5 (4.2%)      2 (1.6%)        2 (1.7%)   \n      4                           3 (2.5%)      1 (0.8%)        2 (1.7%)   \n    1 (n)                             6             6              8       \n      Not High                    6 (100%)      6 (100%)        8 (100%)   \n    2 (n)                             6             3              4       \n      Not High                    5 (83.3%)     3 (100%)        4 (100%)   \n      4                           1 (16.7%)         0              0       \n    3 (n)                             1             2              3       \n      Not High                    1 (100%)      2 (100%)        3 (100%)   \n    4 (n)                             2             0              0       \n      Not High                    2 (100%)          0              0       \n  WEEK 3 DAY 22                                                            \n    Not High (n)                     122           121            117      \n      Not High                   107 (87.7%)   111 (91.7%)    104 (88.9%)  \n      1                           2 (1.6%)      3 (2.5%)        6 (5.1%)   \n      2                           4 (3.3%)      4 (3.3%)        3 (2.6%)   \n      3                           5 (4.1%)      2 (1.7%)        2 (1.7%)   \n      4                           4 (3.3%)      1 (0.8%)        2 (1.7%)   \n    1 (n)                             3             3              2       \n      Not High                    3 (100%)      3 (100%)        2 (100%)   \n    2 (n)                             6             5              4       \n      Not High                    6 (100%)      5 (100%)        4 (100%)   \n    3 (n)                             2             2              8       \n      Not High                    2 (100%)      2 (100%)        8 (100%)   \n    4 (n)                             1             3              1       \n      Not High                    1 (100%)      2 (66.7%)       1 (100%)   \n      1                               0         1 (33.3%)          0       \n  WEEK 4 DAY 29                                                            \n    Not High (n)                     116           114            122      \n      Not High                   101 (87.1%)   106 (93.0%)    111 (91.0%)  \n      1                           2 (1.7%)      3 (2.6%)        6 (4.9%)   \n      2                           4 (3.4%)      4 (3.5%)        3 (2.5%)   \n      3                           5 (4.3%)          0           1 (0.8%)   \n      4                           4 (3.4%)      1 (0.9%)        1 (0.8%)   \n    1 (n)                             9             3              2       \n      Not High                    9 (100%)      3 (100%)        2 (100%)   \n    2 (n)                             1             5              5       \n      Not High                    1 (100%)      5 (100%)       3 (60.0%)   \n      3                               0             0          1 (20.0%)   \n      4                               0             0          1 (20.0%)   \n    3 (n)                             4             7              2       \n      Not High                    4 (100%)      5 (71.4%)       2 (100%)   \n      3                               0         2 (28.6%)          0       \n    4 (n)                             4             5              1       \n      Not High                    4 (100%)      4 (80.0%)       1 (100%)   \n      1                               0         1 (20.0%)          0       \n  WEEK 5 DAY 36                                                            \n    Not High (n)                     118           120            123      \n      Not High                   103 (87.3%)   110 (91.7%)    111 (90.2%)  \n      1                           2 (1.7%)      4 (3.3%)        5 (4.1%)   \n      2                           4 (3.4%)      3 (2.5%)        3 (2.4%)   \n      3                           5 (4.2%)      2 (1.7%)        2 (1.6%)   \n      4                           4 (3.4%)      1 (0.8%)        2 (1.6%)   \n    1 (n)                             3             3              4       \n      Not High                    3 (100%)      2 (66.7%)       4 (100%)   \n      2                               0         1 (33.3%)          0       \n    2 (n)                             5             5              3       \n      Not High                    5 (100%)      5 (100%)       2 (66.7%)   \n      1                               0             0          1 (33.3%)   \n    3 (n)                             5             3              2       \n      Not High                    5 (100%)      3 (100%)        2 (100%)   \n    4 (n)                             3             3              0       \n      Not High                    3 (100%)      3 (100%)           0       \n\n\n\n\nPre-processing is the same as for Standard Table (High), but in order to keep all levels, the drop argument in count_occurrences is set to FALSE.\n\nCodeadlb_f <- adlb %>% filter(WGRHIVFL == \"Y\")\n\n# Please note the step below can be skipped if you are using DTYPE PHANTOM\nadlb_out <- adsl_f %>%\n  h_adsl_adlb_merge_using_worst_flag(\n    adlb_f,\n    worst_flag = c(\"WGRHIVFL\" = \"Y\"),\n    by_visit = TRUE,\n    no_fillin_visits = c(\"SCREENING\", \"BASELINE\", \"UNSCHEDULED\")\n  )\n\n# Create new grouping variables ATOXGR_GP, BTOXGR_GP\nadlb_out <- adlb_out %>%\n  mutate(\n    ATOXGR_GP = case_when(\n      ATOXGR %in% c(0, -1, -2, -3, -4) ~ \"Not High\",\n      ATOXGR == 1 ~ \"1\",\n      ATOXGR == 2 ~ \"2\",\n      ATOXGR == 3 ~ \"3\",\n      ATOXGR == 4 ~ \"4\",\n      ATOXGR == \"<Missing>\" ~ \"Missing\"\n    )\n  ) %>%\n  mutate(\n    BTOXGR_GP = case_when(\n      BTOXGR %in% c(0, -1, -2, -3, -4) ~ \"Not High\",\n      BTOXGR == 1 ~ \"1\",\n      BTOXGR == 2 ~ \"2\",\n      BTOXGR == 3 ~ \"3\",\n      BTOXGR == 4 ~ \"4\",\n      BTOXGR == \"<Missing>\" ~ \"Missing\"\n    )\n  )\n\nadlb_out <- adlb_out %>% mutate(\n  AVISIT = forcats::fct_reorder(AVISIT, AVISITN),\n  ATOXGR_GP = factor(ATOXGR_GP, levels = c(\"Not High\", \"1\", \"2\", \"3\", \"4\", \"Missing\")),\n  BTOXGR_GP = factor(BTOXGR_GP, levels = c(\"Not High\", \"1\", \"2\", \"3\", \"4\", \"Missing\"))\n)\n\nadlb_out <- adlb_out %>%\n  var_relabel(\n    PARAMCD = \"Parameter Code\",\n    AVISIT = \"Visit\",\n    ATOXGR_GP = \"NCI CTCAE Grade at Visit\",\n    BTOXGR_GP = \"Baseline NCI CTCAE Grade\"\n  )\n\nresult <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ACTARM\") %>%\n  split_rows_by(\n    \"PARAMCD\",\n    split_fun = drop_split_levels, label_pos = \"topleft\", split_label = obj_label(adlb_out$PARAMCD)\n  ) %>%\n  split_rows_by(\n    \"AVISIT\",\n    split_fun = drop_split_levels, label_pos = \"topleft\", split_label = obj_label(adlb_out$AVISIT)\n  ) %>%\n  split_rows_by(\n    \"ATOXGR_GP\",\n    split_fun = keep_split_levels(c(\"Not High\", \"1\", \"2\", \"3\", \"4\", \"Missing\")),\n    label_pos = \"topleft\",\n    split_label = obj_label(adlb_out$ATOXGR_GP)\n  ) %>%\n  summarize_num_patients(var = \"USUBJID\", .stats = c(\"unique_count\")) %>%\n  count_occurrences(\"BTOXGR_GP\", denom = \"n\", drop = FALSE) %>%\n  append_varlabels(adlb_out, \"BTOXGR_GP\", indent = 3L) %>%\n  build_table(df = adlb_out, alt_counts_df = adsl_f)\n\nresult\n\nParameter Code                                                             \n  Visit                                                                    \n    NCI CTCAE Grade at Visit      A: Drug X    B: Placebo    C: Combination\n      Baseline NCI CTCAE Grade     (N=134)       (N=134)        (N=132)    \n———————————————————————————————————————————————————————————————————————————\nALT                                                                        \n  WEEK 1 DAY 8                                                             \n    Not High (n)                     123           121            120      \n      Not High                   111 (90.2%)   107 (88.4%)    107 (89.2%)  \n      1                           3 (2.4%)      3 (2.5%)        3 (2.5%)   \n      2                           4 (3.3%)      4 (3.3%)        4 (3.3%)   \n      3                           2 (1.6%)      4 (3.3%)        4 (3.3%)   \n      4                           3 (2.4%)      3 (2.5%)        2 (1.7%)   \n      Missing                         0             0              0       \n    1 (n)                             3             5              3       \n      Not High                    3 (100%)      4 (80.0%)       3 (100%)   \n      1                               0             0              0       \n      2                               0             0              0       \n      3                               0         1 (20.0%)          0       \n      4                               0             0              0       \n      Missing                         0             0              0       \n    2 (n)                             2             2              2       \n      Not High                    2 (100%)      1 (50.0%)       2 (100%)   \n      1                               0         1 (50.0%)          0       \n      2                               0             0              0       \n      3                               0             0              0       \n      4                               0             0              0       \n      Missing                         0             0              0       \n    3 (n)                             3             6              3       \n      Not High                    3 (100%)      6 (100%)        3 (100%)   \n      1                               0             0              0       \n      2                               0             0              0       \n      3                               0             0              0       \n      4                               0             0              0       \n      Missing                         0             0              0       \n    4 (n)                             3             0              4       \n      Not High                    2 (66.7%)         0          3 (75.0%)   \n      1                           1 (33.3%)         0              0       \n      2                               0             0              0       \n      3                               0             0          1 (25.0%)   \n      4                               0             0              0       \n      Missing                         0             0              0       \n    Missing (n)                       0             0              0       \n      Not High                        0             0              0       \n      1                               0             0              0       \n      2                               0             0              0       \n      3                               0             0              0       \n      4                               0             0              0       \n      Missing                         0             0              0       \n  WEEK 2 DAY 15                                                            \n    Not High (n)                     125           119            116      \n      Not High                   113 (90.4%)   105 (88.2%)    103 (88.8%)  \n      1                           4 (3.2%)      4 (3.4%)        3 (2.6%)   \n      2                           4 (3.2%)      4 (3.4%)        3 (2.6%)   \n      3                           2 (1.6%)      4 (3.4%)        5 (4.3%)   \n      4                           2 (1.6%)      2 (1.7%)        2 (1.7%)   \n      Missing                         0             0              0       \n    1 (n)                             4             6              6       \n      Not High                    3 (75.0%)     5 (83.3%)      5 (83.3%)   \n      1                               0             0              0       \n      2                               0             0          1 (16.7%)   \n      3                               0         1 (16.7%)          0       \n      4                           1 (25.0%)         0              0       \n      Missing                         0             0              0       \n    2 (n)                             0             4              5       \n      Not High                        0         4 (100%)        5 (100%)   \n      1                               0             0              0       \n      2                               0             0              0       \n      3                               0             0              0       \n      4                               0             0              0       \n      Missing                         0             0              0       \n    3 (n)                             1             3              2       \n      Not High                    1 (100%)      2 (66.7%)       2 (100%)   \n      1                               0             0              0       \n      2                               0             0              0       \n      3                               0             0              0       \n      4                               0         1 (33.3%)          0       \n      Missing                         0             0              0       \n    4 (n)                             4             2              3       \n      Not High                    4 (100%)      2 (100%)        3 (100%)   \n      1                               0             0              0       \n      2                               0             0              0       \n      3                               0             0              0       \n      4                               0             0              0       \n      Missing                         0             0              0       \n    Missing (n)                       0             0              0       \n      Not High                        0             0              0       \n      1                               0             0              0       \n      2                               0             0              0       \n      3                               0             0              0       \n      4                               0             0              0       \n      Missing                         0             0              0       \n  WEEK 3 DAY 22                                                            \n    Not High (n)                     121           116            118      \n      Not High                   109 (90.1%)   102 (87.9%)    104 (88.1%)  \n      1                           3 (2.5%)      3 (2.6%)        3 (2.5%)   \n      2                           4 (3.3%)      4 (3.4%)        4 (3.4%)   \n      3                           2 (1.7%)      4 (3.4%)        5 (4.2%)   \n      4                           3 (2.5%)      3 (2.6%)        2 (1.7%)   \n      Missing                         0             0              0       \n    1 (n)                             6             3              3       \n      Not High                    5 (83.3%)     3 (100%)        3 (100%)   \n      1                           1 (16.7%)         0              0       \n      2                               0             0              0       \n      3                               0             0              0       \n      4                               0             0              0       \n      Missing                         0             0              0       \n    2 (n)                             5             6              6       \n      Not High                    5 (100%)      5 (83.3%)       6 (100%)   \n      1                               0             0              0       \n      2                               0             0              0       \n      3                               0         1 (16.7%)          0       \n      4                               0             0              0       \n      Missing                         0             0              0       \n    3 (n)                             1             5              3       \n      Not High                    1 (100%)      5 (100%)        3 (100%)   \n      1                               0             0              0       \n      2                               0             0              0       \n      3                               0             0              0       \n      4                               0             0              0       \n      Missing                         0             0              0       \n    4 (n)                             1             4              2       \n      Not High                    1 (100%)      3 (75.0%)       2 (100%)   \n      1                               0         1 (25.0%)          0       \n      2                               0             0              0       \n      3                               0             0              0       \n      4                               0             0              0       \n      Missing                         0             0              0       \n    Missing (n)                       0             0              0       \n      Not High                        0             0              0       \n      1                               0             0              0       \n      2                               0             0              0       \n      3                               0             0              0       \n      4                               0             0              0       \n      Missing                         0             0              0       \n  WEEK 4 DAY 29                                                            \n    Not High (n)                     119           124            113      \n      Not High                   109 (91.6%)   110 (88.7%)    100 (88.5%)  \n      1                           3 (2.5%)      2 (1.6%)        2 (1.8%)   \n      2                           3 (2.5%)      4 (3.2%)        4 (3.5%)   \n      3                           2 (1.7%)      5 (4.0%)        5 (4.4%)   \n      4                           2 (1.7%)      3 (2.4%)        2 (1.8%)   \n      Missing                         0             0              0       \n    1 (n)                             4             2              8       \n      Not High                    4 (100%)      2 (100%)        8 (100%)   \n      1                               0             0              0       \n      2                               0             0              0       \n      3                               0             0              0       \n      4                               0             0              0       \n      Missing                         0             0              0       \n    2 (n)                             5             3              5       \n      Not High                    3 (60.0%)     2 (66.7%)       5 (100%)   \n      1                           1 (20.0%)     1 (33.3%)          0       \n      2                           1 (20.0%)         0              0       \n      3                               0             0              0       \n      4                               0             0              0       \n      Missing                         0             0              0       \n    3 (n)                             6             2              4       \n      Not High                    5 (83.3%)     2 (100%)       3 (75.0%)   \n      1                               0             0          1 (25.0%)   \n      2                               0             0              0       \n      3                               0             0              0       \n      4                           1 (16.7%)         0              0       \n      Missing                         0             0              0       \n    4 (n)                             0             3              2       \n      Not High                        0         2 (66.7%)       2 (100%)   \n      1                               0         1 (33.3%)          0       \n      2                               0             0              0       \n      3                               0             0              0       \n      4                               0             0              0       \n      Missing                         0             0              0       \n    Missing (n)                       0             0              0       \n      Not High                        0             0              0       \n      1                               0             0              0       \n      2                               0             0              0       \n      3                               0             0              0       \n      4                               0             0              0       \n      Missing                         0             0              0       \n  WEEK 5 DAY 36                                                            \n    Not High (n)                     117           123            122      \n      Not High                   105 (89.7%)   109 (88.6%)    108 (88.5%)  \n      1                           3 (2.6%)      3 (2.4%)        3 (2.5%)   \n      2                           4 (3.4%)      3 (2.4%)        4 (3.3%)   \n      3                           2 (1.7%)      5 (4.1%)        5 (4.1%)   \n      4                           3 (2.6%)      3 (2.4%)        2 (1.6%)   \n      Missing                         0             0              0       \n    1 (n)                             6             3              4       \n      Not High                    6 (100%)      2 (66.7%)       4 (100%)   \n      1                               0             0              0       \n      2                               0         1 (33.3%)          0       \n      3                               0             0              0       \n      4                               0             0              0       \n      Missing                         0             0              0       \n    2 (n)                             5             4              3       \n      Not High                    4 (80.0%)     4 (100%)        3 (100%)   \n      1                           1 (20.0%)         0              0       \n      2                               0             0              0       \n      3                               0             0              0       \n      4                               0             0              0       \n      Missing                         0             0              0       \n    3 (n)                             2             2              1       \n      Not High                    2 (100%)      1 (50.0%)       1 (100%)   \n      1                               0         1 (50.0%)          0       \n      2                               0             0              0       \n      3                               0             0              0       \n      4                               0             0              0       \n      Missing                         0             0              0       \n    4 (n)                             4             2              2       \n      Not High                    4 (100%)      2 (100%)        2 (100%)   \n      1                               0             0              0       \n      2                               0             0              0       \n      3                               0             0              0       \n      4                               0             0              0       \n      Missing                         0             0              0       \n    Missing (n)                       0             0              0       \n      Not High                        0             0              0       \n      1                               0             0              0       \n      2                               0             0              0       \n      3                               0             0              0       \n      4                               0             0              0       \n      Missing                         0             0              0       \nCRP                                                                        \n  WEEK 1 DAY 8                                                             \n    Not High (n)                     122           115            120      \n      Not High                   104 (85.2%)   98 (85.2%)     103 (85.8%)  \n      1                           5 (4.1%)      5 (4.3%)        5 (4.2%)   \n      2                           6 (4.9%)      5 (4.3%)        4 (3.3%)   \n      3                           2 (1.6%)      2 (1.7%)        5 (4.2%)   \n      4                           5 (4.1%)      5 (4.3%)        3 (2.5%)   \n      Missing                         0             0              0       \n    1 (n)                             3             3              1       \n      Not High                    3 (100%)      2 (66.7%)       1 (100%)   \n      1                               0             0              0       \n      2                               0             0              0       \n      3                               0             0              0       \n      4                               0         1 (33.3%)          0       \n      Missing                         0             0              0       \n    2 (n)                             4             5              3       \n      Not High                    3 (75.0%)     5 (100%)        3 (100%)   \n      1                               0             0              0       \n      2                               0             0              0       \n      3                               0             0              0       \n      4                           1 (25.0%)         0              0       \n      Missing                         0             0              0       \n    3 (n)                             2             6              6       \n      Not High                    2 (100%)      5 (83.3%)       6 (100%)   \n      1                               0             0              0       \n      2                               0             0              0       \n      3                               0         1 (16.7%)          0       \n      4                               0             0              0       \n      Missing                         0             0              0       \n    4 (n)                             3             5              2       \n      Not High                    3 (100%)      5 (100%)       1 (50.0%)   \n      1                               0             0              0       \n      2                               0             0          1 (50.0%)   \n      3                               0             0              0       \n      4                               0             0              0       \n      Missing                         0             0              0       \n    Missing (n)                       0             0              0       \n      Not High                        0             0              0       \n      1                               0             0              0       \n      2                               0             0              0       \n      3                               0             0              0       \n      4                               0             0              0       \n      Missing                         0             0              0       \n  WEEK 2 DAY 15                                                            \n    Not High (n)                     124           122            115      \n      Not High                   105 (84.7%)   104 (85.2%)     97 (84.3%)  \n      1                           5 (4.0%)      5 (4.1%)        5 (4.3%)   \n      2                           6 (4.8%)      5 (4.1%)        5 (4.3%)   \n      3                           2 (1.6%)      2 (1.6%)        5 (4.3%)   \n      4                           6 (4.8%)      6 (4.9%)        3 (2.6%)   \n      Missing                         0             0              0       \n    1 (n)                             2             5              5       \n      Not High                    2 (100%)      5 (100%)        5 (100%)   \n      1                               0             0              0       \n      2                               0             0              0       \n      3                               0             0              0       \n      4                               0             0              0       \n      Missing                         0             0              0       \n    2 (n)                             2             4              6       \n      Not High                    2 (100%)      4 (100%)        6 (100%)   \n      1                               0             0              0       \n      2                               0             0              0       \n      3                               0             0              0       \n      4                               0             0              0       \n      Missing                         0             0              0       \n    3 (n)                             5             2              2       \n      Not High                    5 (100%)      2 (100%)        2 (100%)   \n      1                               0             0              0       \n      2                               0             0              0       \n      3                               0             0              0       \n      4                               0             0              0       \n      Missing                         0             0              0       \n    4 (n)                             1             1              4       \n      Not High                    1 (100%)          0           4 (100%)   \n      1                               0             0              0       \n      2                               0             0              0       \n      3                               0         1 (100%)           0       \n      4                               0             0              0       \n      Missing                         0             0              0       \n    Missing (n)                       0             0              0       \n      Not High                        0             0              0       \n      1                               0             0              0       \n      2                               0             0              0       \n      3                               0             0              0       \n      4                               0             0              0       \n      Missing                         0             0              0       \n  WEEK 3 DAY 22                                                            \n    Not High (n)                     121           124            128      \n      Not High                   104 (86.0%)   107 (86.3%)    110 (85.9%)  \n      1                           5 (4.1%)      4 (3.2%)        5 (3.9%)   \n      2                           4 (3.3%)      5 (4.0%)        5 (3.9%)   \n      3                           2 (1.7%)      2 (1.6%)        5 (3.9%)   \n      4                           6 (5.0%)      6 (4.8%)        3 (2.3%)   \n      Missing                         0             0              0       \n    1 (n)                             3             5              0       \n      Not High                    3 (100%)      5 (100%)           0       \n      1                               0             0              0       \n      2                               0             0              0       \n      3                               0             0              0       \n      4                               0             0              0       \n      Missing                         0             0              0       \n    2 (n)                             3             2              2       \n      Not High                    1 (33.3%)     1 (50.0%)       2 (100%)   \n      1                               0         1 (50.0%)          0       \n      2                           2 (66.7%)         0              0       \n      3                               0             0              0       \n      4                               0             0              0       \n      Missing                         0             0              0       \n    3 (n)                             7             1              2       \n      Not High                    7 (100%)          0           2 (100%)   \n      1                               0             0              0       \n      2                               0             0              0       \n      3                               0         1 (100%)           0       \n      4                               0             0              0       \n      Missing                         0             0              0       \n    4 (n)                             0             2              0       \n      Not High                        0         2 (100%)           0       \n      1                               0             0              0       \n      2                               0             0              0       \n      3                               0             0              0       \n      4                               0             0              0       \n      Missing                         0             0              0       \n    Missing (n)                       0             0              0       \n      Not High                        0             0              0       \n      1                               0             0              0       \n      2                               0             0              0       \n      3                               0             0              0       \n      4                               0             0              0       \n      Missing                         0             0              0       \n  WEEK 4 DAY 29                                                            \n    Not High (n)                     117           123            119      \n      Not High                   99 (84.6%)    106 (86.2%)    101 (84.9%)  \n      1                           4 (3.4%)      5 (4.1%)        5 (4.2%)   \n      2                           6 (5.1%)      4 (3.3%)        5 (4.2%)   \n      3                           2 (1.7%)      2 (1.6%)        5 (4.2%)   \n      4                           6 (5.1%)      6 (4.9%)        3 (2.5%)   \n      Missing                         0             0              0       \n    1 (n)                             5             4              7       \n      Not High                    5 (100%)      2 (50.0%)       7 (100%)   \n      1                               0             0              0       \n      2                               0         1 (25.0%)          0       \n      3                               0         1 (25.0%)          0       \n      4                               0             0              0       \n      Missing                         0             0              0       \n    2 (n)                             5             4              3       \n      Not High                    5 (100%)      4 (100%)        3 (100%)   \n      1                               0             0              0       \n      2                               0             0              0       \n      3                               0             0              0       \n      4                               0             0              0       \n      Missing                         0             0              0       \n    3 (n)                             3             1              1       \n      Not High                    3 (100%)      1 (100%)        1 (100%)   \n      1                               0             0              0       \n      2                               0             0              0       \n      3                               0             0              0       \n      4                               0             0              0       \n      Missing                         0             0              0       \n    4 (n)                             4             2              2       \n      Not High                    3 (75.0%)     2 (100%)        2 (100%)   \n      1                           1 (25.0%)         0              0       \n      2                               0             0              0       \n      3                               0             0              0       \n      4                               0             0              0       \n      Missing                         0             0              0       \n    Missing (n)                       0             0              0       \n      Not High                        0             0              0       \n      1                               0             0              0       \n      2                               0             0              0       \n      3                               0             0              0       \n      4                               0             0              0       \n      Missing                         0             0              0       \n  WEEK 5 DAY 36                                                            \n    Not High (n)                     116           120            125      \n      Not High                   99 (85.3%)    104 (86.7%)    108 (86.4%)  \n      1                           5 (4.3%)      4 (3.3%)        5 (4.0%)   \n      2                           4 (3.4%)      4 (3.3%)        5 (4.0%)   \n      3                           2 (1.7%)      3 (2.5%)        4 (3.2%)   \n      4                           6 (5.2%)      5 (4.2%)        3 (2.4%)   \n      Missing                         0             0              0       \n    1 (n)                             7             4              1       \n      Not High                    7 (100%)      4 (100%)        1 (100%)   \n      1                               0             0              0       \n      2                               0             0              0       \n      3                               0             0              0       \n      4                               0             0              0       \n      Missing                         0             0              0       \n    2 (n)                             4             5              0       \n      Not High                    3 (75.0%)     4 (80.0%)          0       \n      1                               0         1 (20.0%)          0       \n      2                           1 (25.0%)         0              0       \n      3                               0             0              0       \n      4                               0             0              0       \n      Missing                         0             0              0       \n    3 (n)                             3             3              3       \n      Not High                    3 (100%)      2 (66.7%)      2 (66.7%)   \n      1                               0             0              0       \n      2                               0             0              0       \n      3                               0             0          1 (33.3%)   \n      4                               0         1 (33.3%)          0       \n      Missing                         0             0              0       \n    4 (n)                             4             2              3       \n      Not High                    3 (75.0%)     1 (50.0%)       3 (100%)   \n      1                               0             0              0       \n      2                           1 (25.0%)     1 (50.0%)          0       \n      3                               0             0              0       \n      4                               0             0              0       \n      Missing                         0             0              0       \n    Missing (n)                       0             0              0       \n      Not High                        0             0              0       \n      1                               0             0              0       \n      2                               0             0              0       \n      3                               0             0              0       \n      4                               0             0              0       \n      Missing                         0             0              0       \nIGA                                                                        \n  WEEK 1 DAY 8                                                             \n    Not High (n)                     124           123            121      \n      Not High                   112 (90.3%)   114 (92.7%)    111 (91.7%)  \n      1                           2 (1.6%)      4 (3.3%)        6 (5.0%)   \n      2                           3 (2.4%)      3 (2.4%)        1 (0.8%)   \n      3                           3 (2.4%)      1 (0.8%)        1 (0.8%)   \n      4                           4 (3.2%)      1 (0.8%)        2 (1.7%)   \n      Missing                         0             0              0       \n    1 (n)                             6             4              3       \n      Not High                    5 (83.3%)     3 (75.0%)      2 (66.7%)   \n      1                               0             0              0       \n      2                               0         1 (25.0%)          0       \n      3                           1 (16.7%)         0          1 (33.3%)   \n      4                               0             0              0       \n      Missing                         0             0              0       \n    2 (n)                             0             4              3       \n      Not High                        0         4 (100%)       2 (66.7%)   \n      1                               0             0              0       \n      2                               0             0          1 (33.3%)   \n      3                               0             0              0       \n      4                               0             0              0       \n      Missing                         0             0              0       \n    3 (n)                             2             1              3       \n      Not High                    1 (50.0%)         0          2 (66.7%)   \n      1                               0             0              0       \n      2                               0             0          1 (33.3%)   \n      3                           1 (50.0%)     1 (100%)           0       \n      4                               0             0              0       \n      Missing                         0             0              0       \n    4 (n)                             2             2              2       \n      Not High                    1 (50.0%)     2 (100%)        2 (100%)   \n      1                               0             0              0       \n      2                           1 (50.0%)         0              0       \n      3                               0             0              0       \n      4                               0             0              0       \n      Missing                         0             0              0       \n    Missing (n)                       0             0              0       \n      Not High                        0             0              0       \n      1                               0             0              0       \n      2                               0             0              0       \n      3                               0             0              0       \n      4                               0             0              0       \n      Missing                         0             0              0       \n  WEEK 2 DAY 15                                                            \n    Not High (n)                     119           123            117      \n      Not High                   105 (88.2%)   112 (91.1%)    104 (88.9%)  \n      1                           2 (1.7%)      4 (3.3%)        6 (5.1%)   \n      2                           4 (3.4%)      4 (3.3%)        3 (2.6%)   \n      3                           5 (4.2%)      2 (1.6%)        2 (1.7%)   \n      4                           3 (2.5%)      1 (0.8%)        2 (1.7%)   \n      Missing                         0             0              0       \n    1 (n)                             6             6              8       \n      Not High                    6 (100%)      6 (100%)        8 (100%)   \n      1                               0             0              0       \n      2                               0             0              0       \n      3                               0             0              0       \n      4                               0             0              0       \n      Missing                         0             0              0       \n    2 (n)                             6             3              4       \n      Not High                    5 (83.3%)     3 (100%)        4 (100%)   \n      1                               0             0              0       \n      2                               0             0              0       \n      3                               0             0              0       \n      4                           1 (16.7%)         0              0       \n      Missing                         0             0              0       \n    3 (n)                             1             2              3       \n      Not High                    1 (100%)      2 (100%)        3 (100%)   \n      1                               0             0              0       \n      2                               0             0              0       \n      3                               0             0              0       \n      4                               0             0              0       \n      Missing                         0             0              0       \n    4 (n)                             2             0              0       \n      Not High                    2 (100%)          0              0       \n      1                               0             0              0       \n      2                               0             0              0       \n      3                               0             0              0       \n      4                               0             0              0       \n      Missing                         0             0              0       \n    Missing (n)                       0             0              0       \n      Not High                        0             0              0       \n      1                               0             0              0       \n      2                               0             0              0       \n      3                               0             0              0       \n      4                               0             0              0       \n      Missing                         0             0              0       \n  WEEK 3 DAY 22                                                            \n    Not High (n)                     122           121            117      \n      Not High                   107 (87.7%)   111 (91.7%)    104 (88.9%)  \n      1                           2 (1.6%)      3 (2.5%)        6 (5.1%)   \n      2                           4 (3.3%)      4 (3.3%)        3 (2.6%)   \n      3                           5 (4.1%)      2 (1.7%)        2 (1.7%)   \n      4                           4 (3.3%)      1 (0.8%)        2 (1.7%)   \n      Missing                         0             0              0       \n    1 (n)                             3             3              2       \n      Not High                    3 (100%)      3 (100%)        2 (100%)   \n      1                               0             0              0       \n      2                               0             0              0       \n      3                               0             0              0       \n      4                               0             0              0       \n      Missing                         0             0              0       \n    2 (n)                             6             5              4       \n      Not High                    6 (100%)      5 (100%)        4 (100%)   \n      1                               0             0              0       \n      2                               0             0              0       \n      3                               0             0              0       \n      4                               0             0              0       \n      Missing                         0             0              0       \n    3 (n)                             2             2              8       \n      Not High                    2 (100%)      2 (100%)        8 (100%)   \n      1                               0             0              0       \n      2                               0             0              0       \n      3                               0             0              0       \n      4                               0             0              0       \n      Missing                         0             0              0       \n    4 (n)                             1             3              1       \n      Not High                    1 (100%)      2 (66.7%)       1 (100%)   \n      1                               0         1 (33.3%)          0       \n      2                               0             0              0       \n      3                               0             0              0       \n      4                               0             0              0       \n      Missing                         0             0              0       \n    Missing (n)                       0             0              0       \n      Not High                        0             0              0       \n      1                               0             0              0       \n      2                               0             0              0       \n      3                               0             0              0       \n      4                               0             0              0       \n      Missing                         0             0              0       \n  WEEK 4 DAY 29                                                            \n    Not High (n)                     116           114            122      \n      Not High                   101 (87.1%)   106 (93.0%)    111 (91.0%)  \n      1                           2 (1.7%)      3 (2.6%)        6 (4.9%)   \n      2                           4 (3.4%)      4 (3.5%)        3 (2.5%)   \n      3                           5 (4.3%)          0           1 (0.8%)   \n      4                           4 (3.4%)      1 (0.9%)        1 (0.8%)   \n      Missing                         0             0              0       \n    1 (n)                             9             3              2       \n      Not High                    9 (100%)      3 (100%)        2 (100%)   \n      1                               0             0              0       \n      2                               0             0              0       \n      3                               0             0              0       \n      4                               0             0              0       \n      Missing                         0             0              0       \n    2 (n)                             1             5              5       \n      Not High                    1 (100%)      5 (100%)       3 (60.0%)   \n      1                               0             0              0       \n      2                               0             0              0       \n      3                               0             0          1 (20.0%)   \n      4                               0             0          1 (20.0%)   \n      Missing                         0             0              0       \n    3 (n)                             4             7              2       \n      Not High                    4 (100%)      5 (71.4%)       2 (100%)   \n      1                               0             0              0       \n      2                               0             0              0       \n      3                               0         2 (28.6%)          0       \n      4                               0             0              0       \n      Missing                         0             0              0       \n    4 (n)                             4             5              1       \n      Not High                    4 (100%)      4 (80.0%)       1 (100%)   \n      1                               0         1 (20.0%)          0       \n      2                               0             0              0       \n      3                               0             0              0       \n      4                               0             0              0       \n      Missing                         0             0              0       \n    Missing (n)                       0             0              0       \n      Not High                        0             0              0       \n      1                               0             0              0       \n      2                               0             0              0       \n      3                               0             0              0       \n      4                               0             0              0       \n      Missing                         0             0              0       \n  WEEK 5 DAY 36                                                            \n    Not High (n)                     118           120            123      \n      Not High                   103 (87.3%)   110 (91.7%)    111 (90.2%)  \n      1                           2 (1.7%)      4 (3.3%)        5 (4.1%)   \n      2                           4 (3.4%)      3 (2.5%)        3 (2.4%)   \n      3                           5 (4.2%)      2 (1.7%)        2 (1.6%)   \n      4                           4 (3.4%)      1 (0.8%)        2 (1.6%)   \n      Missing                         0             0              0       \n    1 (n)                             3             3              4       \n      Not High                    3 (100%)      2 (66.7%)       4 (100%)   \n      1                               0             0              0       \n      2                               0         1 (33.3%)          0       \n      3                               0             0              0       \n      4                               0             0              0       \n      Missing                         0             0              0       \n    2 (n)                             5             5              3       \n      Not High                    5 (100%)      5 (100%)       2 (66.7%)   \n      1                               0             0          1 (33.3%)   \n      2                               0             0              0       \n      3                               0             0              0       \n      4                               0             0              0       \n      Missing                         0             0              0       \n    3 (n)                             5             3              2       \n      Not High                    5 (100%)      3 (100%)        2 (100%)   \n      1                               0             0              0       \n      2                               0             0              0       \n      3                               0             0              0       \n      4                               0             0              0       \n      Missing                         0             0              0       \n    4 (n)                             3             3              0       \n      Not High                    3 (100%)      3 (100%)           0       \n      1                               0             0              0       \n      2                               0             0              0       \n      3                               0             0              0       \n      4                               0             0              0       \n      Missing                         0             0              0       \n    Missing (n)                       0             0              0       \n      Not High                        0             0              0       \n      1                               0             0              0       \n      2                               0             0              0       \n      3                               0             0              0       \n      4                               0             0              0       \n      Missing                         0             0              0       \n\n\n\n\n\nCodelibrary(scda)\nlibrary(dplyr)\nlibrary(teal.modules.clinical)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadlb <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adlb\")\n\napp <- init(\n  data = cdisc_data(\n    cdisc_dataset(\"ADSL\", adsl, code = 'ADSL <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")'),\n    cdisc_dataset(\"ADLB\", adlb,\n      code = 'ADLB <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adlb\")'\n    ),\n    check = TRUE\n  ),\n  modules = modules(\n    tm_t_shift_by_grade(\n      label = \"Grade Laboratory Abnormality Table\",\n      dataname = \"ADLB\",\n      arm_var = choices_selected(\n        choices = variable_choices(adsl, subset = c(\"ARM\", \"ARMCD\")),\n        selected = \"ARM\"\n      ),\n      paramcd = choices_selected(\n        choices = value_choices(adlb, \"PARAMCD\", \"PARAM\"),\n        selected = \"ALT\"\n      ),\n      worst_flag_var = choices_selected(\n        choices = variable_choices(adlb, subset = c(\"WGRLOVFL\", \"WGRLOFL\", \"WGRHIVFL\", \"WGRHIFL\")),\n        selected = c(\"WGRLOVFL\")\n      ),\n      worst_flag_indicator = choices_selected(\n        value_choices(adlb, \"WGRLOVFL\"),\n        selected = \"Y\", fixed = TRUE\n      ),\n      anl_toxgrade_var = choices_selected(\n        choices = variable_choices(adlb, subset = c(\"ATOXGR\")),\n        selected = c(\"ATOXGR\"),\n        fixed = TRUE\n      ),\n      base_toxgrade_var = choices_selected(\n        choices = variable_choices(adlb, subset = c(\"BTOXGR\")),\n        selected = c(\"BTOXGR\"),\n        fixed = TRUE\n      ),\n      add_total = FALSE\n    )\n  ),\n  filter = list(\n    ADSL = list(SAFFL = \"Y\")\n  )\n)\n\n[INFO] 2023-03-10 05:41:41.7303 pid:6482 token:[] teal.modules.clinical Initializing tm_t_shift_by_grade\n\nCodeshinyApp(app$ui, app$server)\n\n\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n [1] teal.modules.clinical_0.8.14.9026 teal_0.12.0.9023                 \n [3] teal.transform_0.2.0.9011         teal.data_0.1.2.9013             \n [5] shiny_1.7.4                       tern_0.7.10.9056                 \n [7] rtables_0.6.0.1                   formatters_0.4.0                 \n [9] magrittr_2.0.3                    dplyr_1.1.0                      \n[11] scda_0.1.5.9009                  \n\nloaded via a namespace (and not attached):\n [1] sass_0.4.5               tidyr_1.3.0              jsonlite_1.8.4          \n [4] splines_4.2.2            R.utils_2.12.2           bslib_0.4.2             \n [7] teal.slice_0.2.0.9026    Rdpack_2.4               assertthat_0.2.1        \n[10] teal.code_0.3.0.9001     tern.gee_0.1.0.9002      yaml_2.3.7              \n[13] pillar_1.8.1             backports_1.4.1          lattice_0.20-45         \n[16] glue_1.6.2               teal.widgets_0.2.0.9024  digest_0.6.31           \n[19] promises_1.2.0.1         rbibutils_2.2.13         checkmate_2.1.0         \n[22] colorspace_2.1-0         R.oo_1.25.0              htmltools_0.5.4         \n[25] httpuv_1.6.9             Matrix_1.5-3             pkgconfig_2.0.3         \n[28] broom_1.0.3              logger_0.2.2             purrr_1.0.1             \n[31] xtable_1.8-4             mvtnorm_1.1-3            webshot_0.5.4           \n[34] scales_1.2.1             processx_3.8.0           fontawesome_0.5.0       \n[37] later_1.3.0              emmeans_1.8.4-1          tibble_3.1.8            \n[40] styler_1.9.1             generics_0.1.3           ggplot2_3.4.1           \n[43] ellipsis_0.3.2           shinyvalidate_0.1.2      cachem_1.0.7            \n[46] withr_2.5.0              shinyjs_2.1.0            geepack_1.3.9           \n[49] cli_3.6.0                survival_3.5-3           mime_0.12               \n[52] memoise_2.0.1            ps_1.7.2                 estimability_1.4.1      \n[55] evaluate_0.20            R.methodsS3_1.8.2        fansi_1.0.4             \n[58] R.cache_0.16.0           nlme_3.1-162             MASS_7.3-58.3           \n[61] forcats_1.0.0            teal.reporter_0.1.1.9013 tools_4.2.2             \n[64] lifecycle_1.0.3          munsell_0.5.0            callr_3.7.3             \n[67] compiler_4.2.2           jquerylib_0.1.4          rlang_1.0.6             \n[70] grid_4.2.2               htmlwidgets_1.6.1        rmarkdown_2.20          \n[73] shinyWidgets_0.7.6       gtable_0.3.1             codetools_0.2-19        \n[76] teal.logger_0.1.1.9004   R6_2.5.1                 knitr_1.42              \n[79] fastmap_1.1.1            utf8_1.2.3               Rcpp_1.0.10             \n[82] vctrs_0.5.2              tidyselect_1.2.0         xfun_0.37               \n[85] coda_0.19-4             \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R                       [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/tables/lab-results/lbt13.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "tables/lab-results/lbt14.html",
    "href": "tables/lab-results/lbt14.html",
    "title": "LBT14",
    "section": "",
    "text": "Data Setup\nStandard Table (High)\nStandard Table (Low)\nTable Without Patients with  Missing Baseline (High)\nTable with Missing Baseline  Considered as Grade 0 (Low)\nTable with Fill-In of Grades\nTeal\nSession Info\n\n\n\nPlease note that for each variant, the adlb dataset needs to be filtered on correct flags like WGRLOFL, WGRHIFL, et al., otherwise the layout function will not return the correct counts. There is an option to create a record for a lab test where no record is found at that visit. If you specified add_derived_type = \"PHANTOM\" & dtype_phantom_cond, you don’t have to use the h_adsl_adlb_merge_using_worst_flag function to preprocess your adlb dataset. Otherwise please follow the pre-processing steps below before applying the layout functions.\n\nCodelibrary(scda)\nlibrary(dplyr)\nlibrary(tern)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadlb <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adlb\")\n\nadsl <- df_explicit_na(adsl)\nadlb <- df_explicit_na(adlb)\n\n# Please note that in real clinical data, population flag like SAFFL, and parameter category like PARCAT2 needs to be\n# selected properly.\nadsl_f <- adsl %>% filter(SAFFL == \"Y\")\nadlb_f <- adlb %>% filter(PARAMCD == \"ALT\" & SAFFL == \"Y\")\n\n\n\n\nNote that the worst laboratory flag (below WGRHIFL) must be selected appropriately in the pre-processing step. New grouping variables ATOXGR_GP (post-baseline) and BTOXGR_GP (baseline) are created to display the correct output.\n\nCodeadlb_f <- adlb %>% filter(WGRHIFL == \"Y\")\n\n# Please note the step below can be skipped if you are using DTYPE PHANTOM\nadlb_out <- h_adsl_adlb_merge_using_worst_flag(adsl_f, adlb_f, worst_flag = c(\"WGRHIFL\" = \"Y\"))\n\n# Create new grouping variables ATOXGR_GP, BTOXGR_GP\nadlb_out <- adlb_out %>%\n  mutate(\n    ATOXGR_GP = case_when(\n      ATOXGR %in% c(0, -1, -2, -3, -4) ~ \"Not High\",\n      ATOXGR == 1 ~ \"1\",\n      ATOXGR == 2 ~ \"2\",\n      ATOXGR == 3 ~ \"3\",\n      ATOXGR == 4 ~ \"4\",\n      ATOXGR == \"<Missing>\" ~ \"Missing\"\n    )\n  ) %>%\n  mutate(\n    BTOXGR_GP = case_when(\n      BTOXGR %in% c(0, -1, -2, -3, -4) ~ \"Not High\",\n      BTOXGR == 1 ~ \"1\",\n      BTOXGR == 2 ~ \"2\",\n      BTOXGR == 3 ~ \"3\",\n      BTOXGR == 4 ~ \"4\",\n      BTOXGR == \"<Missing>\" ~ \"Missing\"\n    )\n  )\n\nadlb_out <- adlb_out %>% mutate(\n  ATOXGR_GP = factor(ATOXGR_GP, levels = c(\"Not High\", \"1\", \"2\", \"3\", \"4\", \"Missing\")),\n  BTOXGR_GP = factor(BTOXGR_GP, levels = c(\"Not High\", \"1\", \"2\", \"3\", \"4\", \"Missing\"))\n)\n\nadlb_out <- adlb_out %>%\n  var_relabel(\n    PARAMCD = \"Parameter Code\",\n    ATOXGR_GP = \"Post-baseline NCI CTCAE Grade\",\n    BTOXGR_GP = \"Baseline NCI CTCAE Grade\"\n  )\n\nresult <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ACTARM\") %>%\n  split_rows_by(\n    \"PARAMCD\",\n    split_fun = drop_split_levels, label_pos = \"topleft\", split_label = obj_label(adlb_out$PARAMCD)\n  ) %>%\n  split_rows_by(\n    \"BTOXGR_GP\",\n    split_fun = drop_split_levels, label_pos = \"topleft\", split_label = obj_label(adlb_out$BTOXGR_GP)\n  ) %>%\n  summarize_num_patients(var = \"USUBJID\", .stats = c(\"unique_count\")) %>%\n  count_occurrences(\"ATOXGR_GP\", denom = \"n\", drop = TRUE, .indent_mods = 4L) %>%\n  append_varlabels(adlb_out, \"ATOXGR_GP\", indent = 2L) %>%\n  build_table(df = adlb_out, alt_counts_df = adsl_f)\n\nresult\n\nParameter Code                                                              \n  Baseline NCI CTCAE Grade          A: Drug X    B: Placebo   C: Combination\n    Post-baseline NCI CTCAE Grade    (N=134)      (N=134)        (N=132)    \n————————————————————————————————————————————————————————————————————————————\nALT                                                                         \n  Not High (n)                         121          118            118      \n            Not High                72 (59.5%)   70 (59.3%)     59 (50.0%)  \n            1                       16 (13.2%)   13 (11.0%)     17 (14.4%)  \n            2                       13 (10.7%)   12 (10.2%)     18 (15.3%)  \n            3                        9 (7.4%)    14 (11.9%)     12 (10.2%)  \n            4                       11 (9.1%)     9 (7.6%)      12 (10.2%)  \n  1 (n)                                 4            4              3       \n            Not High                1 (25.0%)    1 (25.0%)      2 (66.7%)   \n            1                       1 (25.0%)        0              0       \n            2                       1 (25.0%)        0              0       \n            3                           0        1 (25.0%)      1 (33.3%)   \n            4                       1 (25.0%)    2 (50.0%)          0       \n  2 (n)                                 4            4              4       \n            Not High                3 (75.0%)    3 (75.0%)      3 (75.0%)   \n            1                           0        1 (25.0%)      1 (25.0%)   \n            2                       1 (25.0%)        0              0       \n  3 (n)                                 2            5              5       \n            Not High                 2 (100%)    2 (40.0%)      4 (80.0%)   \n            1                           0        2 (40.0%)          0       \n            2                           0        1 (20.0%)          0       \n            4                           0            0          1 (20.0%)   \n  4 (n)                                 3            3              2       \n            Not High                1 (33.3%)    2 (66.7%)       2 (100%)   \n            1                       1 (33.3%)        0              0       \n            3                       1 (33.3%)    1 (33.3%)          0       \nCRP                                                                         \n  Not High (n)                         115          115            114      \n            Not High                60 (52.2%)   68 (59.1%)     70 (61.4%)  \n            1                       17 (14.8%)   13 (11.3%)      9 (7.9%)   \n            2                       12 (10.4%)   14 (12.2%)     13 (11.4%)  \n            3                       16 (13.9%)   10 (8.7%)      13 (11.4%)  \n            4                       10 (8.7%)    10 (8.7%)       9 (7.9%)   \n  1 (n)                                 5            5              5       \n            Not High                4 (80.0%)    3 (60.0%)       5 (100%)   \n            2                           0        2 (40.0%)          0       \n            4                       1 (20.0%)        0              0       \n  2 (n)                                 6            5              5       \n            Not High                3 (50.0%)    3 (60.0%)      4 (80.0%)   \n            1                           0        1 (20.0%)          0       \n            2                       2 (33.3%)        0              0       \n            4                       1 (16.7%)    1 (20.0%)      1 (20.0%)   \n  3 (n)                                 2            3              5       \n            Not High                 2 (100%)    1 (33.3%)      4 (80.0%)   \n            3                           0        1 (33.3%)      1 (20.0%)   \n            4                           0        1 (33.3%)          0       \n  4 (n)                                 6            6              3       \n            Not High                5 (83.3%)    4 (66.7%)       3 (100%)   \n            1                           0        1 (16.7%)          0       \n            2                       1 (16.7%)        0              0       \n            3                           0        1 (16.7%)          0       \nIGA                                                                         \n  Not High (n)                         119          123            119      \n            Not High                61 (51.3%)   69 (56.1%)     74 (62.2%)  \n            1                       24 (20.2%)   12 (9.8%)      13 (10.9%)  \n            2                       13 (10.9%)   20 (16.3%)     12 (10.1%)  \n            3                       11 (9.2%)    11 (8.9%)      16 (13.4%)  \n            4                       10 (8.4%)    11 (8.9%)       4 (3.4%)   \n  1 (n)                                 2            4              6       \n            Not High                 2 (100%)    2 (50.0%)      5 (83.3%)   \n            2                           0            0          1 (16.7%)   \n            4                           0        2 (50.0%)          0       \n  2 (n)                                 4            4              3       \n            Not High                3 (75.0%)    2 (50.0%)      1 (33.3%)   \n            1                           0        2 (50.0%)          0       \n            2                           0            0          1 (33.3%)   \n            3                           0            0          1 (33.3%)   \n            4                       1 (25.0%)        0              0       \n  3 (n)                                 5            2              2       \n            Not High                3 (60.0%)        0          1 (50.0%)   \n            1                       1 (20.0%)        0              0       \n            2                           0            0          1 (50.0%)   \n            3                       1 (20.0%)     2 (100%)          0       \n  4 (n)                                 4            1              2       \n            Not High                3 (75.0%)     1 (100%)      1 (50.0%)   \n            2                       1 (25.0%)        0          1 (50.0%)   \n\n\n\n\nNote that the worst laboratory flag (below WGRLOFL) must be selected appropriately in the pre-processing step. New grouping variables ATOXGR_GP (post-baseline) and BTOXGR_GP (baseline) are created to display the correct output.\n\nCodeadlb_f <- adlb %>% filter(WGRLOFL == \"Y\")\n\n# Please note the step below can be skipped if you are using DTYPE PHANTOM\nadlb_out <- h_adsl_adlb_merge_using_worst_flag(adsl_f, adlb_f, worst_flag = c(\"WGRLOFL\" = \"Y\"))\n\n# Create new grouping variables ATOXGR_GP, BTOXGR_GP\nadlb_out <- adlb_out %>%\n  mutate(\n    ATOXGR_GP = case_when(\n      ATOXGR %in% c(0, 1, 2, 3, 4) ~ \"Not Low\",\n      ATOXGR == -1 ~ \"1\",\n      ATOXGR == -2 ~ \"2\",\n      ATOXGR == -3 ~ \"3\",\n      ATOXGR == -4 ~ \"4\",\n      ATOXGR == \"<Missing>\" ~ \"Missing\"\n    )\n  ) %>%\n  mutate(\n    BTOXGR_GP = case_when(\n      BTOXGR %in% c(0, 1, 2, 3, 4) ~ \"Not Low\",\n      BTOXGR == -1 ~ \"1\",\n      BTOXGR == -2 ~ \"2\",\n      BTOXGR == -3 ~ \"3\",\n      BTOXGR == -4 ~ \"4\",\n      BTOXGR == \"<Missing>\" ~ \"Missing\"\n    )\n  )\n\nadlb_out <- adlb_out %>% mutate(\n  ATOXGR_GP = factor(ATOXGR_GP, levels = c(\"Not Low\", \"1\", \"2\", \"3\", \"4\", \"Missing\")),\n  BTOXGR_GP = factor(BTOXGR_GP, levels = c(\"Not Low\", \"1\", \"2\", \"3\", \"4\", \"Missing\"))\n)\n\nadlb_out <- adlb_out %>%\n  var_relabel(\n    PARAMCD = \"Parameter Code\",\n    ATOXGR_GP = \"Post-baseline NCI CTCAE Grade\",\n    BTOXGR_GP = \"Baseline NCI CTCAE Grade\"\n  )\n\nresult <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ACTARM\") %>%\n  split_rows_by(\n    \"PARAMCD\",\n    split_fun = drop_split_levels, label_pos = \"topleft\", split_label = obj_label(adlb_out$PARAMCD)\n  ) %>%\n  split_rows_by(\n    \"BTOXGR_GP\",\n    split_fun = drop_split_levels, label_pos = \"topleft\", split_label = obj_label(adlb_out$BTOXGR_GP)\n  ) %>%\n  summarize_num_patients(var = \"USUBJID\", .stats = c(\"unique_count\")) %>%\n  count_occurrences(\"ATOXGR_GP\", denom = \"n\", drop = TRUE, .indent_mods = 4L) %>%\n  append_varlabels(adlb_out, \"ATOXGR_GP\", indent = 2L) %>%\n  build_table(df = adlb_out, alt_counts_df = adsl_f)\n\nresult\n\nParameter Code                                                              \n  Baseline NCI CTCAE Grade          A: Drug X    B: Placebo   C: Combination\n    Post-baseline NCI CTCAE Grade    (N=134)      (N=134)        (N=132)    \n————————————————————————————————————————————————————————————————————————————\nALT                                                                         \n  Not Low (n)                          124          122            117      \n            Not Low                 74 (59.7%)   76 (62.3%)     80 (68.4%)  \n            1                       13 (10.5%)   12 (9.8%)       9 (7.7%)   \n            2                       13 (10.5%)   16 (13.1%)     11 (9.4%)   \n            3                       17 (13.7%)   11 (9.0%)       9 (7.7%)   \n            4                        7 (5.6%)     7 (5.7%)       8 (6.8%)   \n  1 (n)                                 3            6              7       \n            Not Low                     0        2 (33.3%)      5 (71.4%)   \n            1                       1 (33.3%)    2 (33.3%)          0       \n            2                           0        1 (16.7%)          0       \n            3                       2 (66.7%)    1 (16.7%)          0       \n            4                           0            0          2 (28.6%)   \n  2 (n)                                 2            1              4       \n            Not Low                  2 (100%)        0          3 (75.0%)   \n            2                           0         1 (100%)          0       \n            3                           0            0          1 (25.0%)   \n  3 (n)                                 2            3              4       \n            Not Low                  2 (100%)    2 (66.7%)      3 (75.0%)   \n            1                           0        1 (33.3%)      1 (25.0%)   \n  4 (n)                                 3            2              0       \n            Not Low                 2 (66.7%)    1 (50.0%)          0       \n            3                       1 (33.3%)        0              0       \n            4                           0        1 (50.0%)          0       \nCRP                                                                         \n  Not Low (n)                          122          125            120      \n            Not Low                 67 (54.9%)   81 (64.8%)     70 (58.3%)  \n            1                       14 (11.5%)   17 (13.6%)     13 (10.8%)  \n            2                       20 (16.4%)   11 (8.8%)      16 (13.3%)  \n            3                       12 (9.8%)     9 (7.2%)      17 (14.2%)  \n            4                        9 (7.4%)     7 (5.6%)       4 (3.3%)   \n  1 (n)                                 2            5              5       \n            Not Low                     0        3 (60.0%)      4 (80.0%)   \n            1                           0        1 (20.0%)      1 (20.0%)   \n            2                       1 (50.0%)    1 (20.0%)          0       \n            4                       1 (50.0%)        0              0       \n  2 (n)                                 5            1              1       \n            Not Low                 3 (60.0%)        0           1 (100%)   \n            1                       2 (40.0%)        0              0       \n            2                           0         1 (100%)          0       \n  3 (n)                                 2            2              1       \n            Not Low                  2 (100%)    1 (50.0%)          0       \n            1                           0        1 (50.0%)          0       \n            3                           0            0           1 (100%)   \n  4 (n)                                 3            1              5       \n            Not Low                 2 (66.7%)     1 (100%)      3 (60.0%)   \n            1                           0            0          1 (20.0%)   \n            4                       1 (33.3%)        0          1 (20.0%)   \nIGA                                                                         \n  Not Low (n)                          120          119            120      \n            Not Low                 69 (57.5%)   58 (48.7%)     70 (58.3%)  \n            1                       16 (13.3%)   20 (16.8%)     16 (13.3%)  \n            2                       12 (10.0%)   14 (11.8%)     14 (11.7%)  \n            3                       14 (11.7%)   11 (9.2%)      13 (10.8%)  \n            4                        9 (7.5%)    16 (13.4%)      7 (5.8%)   \n  1 (n)                                 8            8              3       \n            Not Low                 7 (87.5%)    4 (50.0%)      2 (66.7%)   \n            1                       1 (12.5%)    3 (37.5%)          0       \n            2                           0        1 (12.5%)          0       \n            4                           0            0          1 (33.3%)   \n  2 (n)                                 2            1              2       \n            Not Low                  2 (100%)     1 (100%)       2 (100%)   \n  3 (n)                                 3            3              4       \n            Not Low                 1 (33.3%)     3 (100%)      2 (50.0%)   \n            1                           0            0          1 (25.0%)   \n            3                       1 (33.3%)        0              0       \n            4                       1 (33.3%)        0          1 (25.0%)   \n  4 (n)                                 1            3              3       \n            Not Low                  1 (100%)     3 (100%)      1 (33.3%)   \n            3                           0            0          1 (33.3%)   \n            4                           0            0          1 (33.3%)   \n\n\n\n\nNote that missing baseline values are filtered out in the pre-processing step.\n\nCodeadlb_f <- adlb %>% filter(WGRHIFL == \"Y\")\n\n# Please note the step below can be skipped if you are using DTYPE PHANTOM\nadlb_out <- h_adsl_adlb_merge_using_worst_flag(adsl_f, adlb_f, worst_flag = c(\"WGRHIFL\" = \"Y\"))\n\n# Create new grouping variables ATOXGR_GP, BTOXGR_GP\nadlb_out <- adlb_out %>%\n  filter(BTOXGR != \"<Missing>\") %>%\n  mutate(\n    ATOXGR_GP = case_when(\n      ATOXGR %in% c(0, -1, -2, -3, -4) ~ \"Not High\",\n      ATOXGR == 1 ~ \"1\",\n      ATOXGR == 2 ~ \"2\",\n      ATOXGR == 3 ~ \"3\",\n      ATOXGR == 4 ~ \"4\",\n      ATOXGR == \"<Missing>\" ~ \"Missing\"\n    )\n  ) %>%\n  mutate(\n    BTOXGR_GP = case_when(\n      BTOXGR %in% c(0, -1, -2, -3, -4) ~ \"Not High\",\n      BTOXGR == 1 ~ \"1\",\n      BTOXGR == 2 ~ \"2\",\n      BTOXGR == 3 ~ \"3\",\n      BTOXGR == 4 ~ \"4\"\n    )\n  )\n\nadlb_out <- adlb_out %>% mutate(\n  ATOXGR_GP = factor(ATOXGR_GP, levels = c(\"Not High\", \"1\", \"2\", \"3\", \"4\", \"Missing\")),\n  BTOXGR_GP = factor(BTOXGR_GP, levels = c(\"Not High\", \"1\", \"2\", \"3\", \"4\"))\n)\n\nadlb_out <- adlb_out %>%\n  var_relabel(\n    PARAMCD = \"Parameter Code\",\n    ATOXGR_GP = \"Post-baseline NCI CTCAE Grade\",\n    BTOXGR_GP = \"Baseline NCI CTCAE Grade\"\n  )\n\nresult <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ACTARM\") %>%\n  split_rows_by(\n    \"PARAMCD\",\n    split_fun = drop_split_levels, label_pos = \"topleft\", split_label = obj_label(adlb_out$PARAMCD)\n  ) %>%\n  split_rows_by(\n    \"BTOXGR_GP\",\n    split_fun = drop_split_levels, label_pos = \"topleft\", split_label = obj_label(adlb_out$BTOXGR_GP)\n  ) %>%\n  summarize_num_patients(var = \"USUBJID\", .stats = c(\"unique_count\")) %>%\n  count_occurrences(\"ATOXGR_GP\", denom = \"n\", drop = TRUE, .indent_mods = 4L) %>%\n  append_varlabels(adlb_out, \"ATOXGR_GP\", indent = 2L) %>%\n  build_table(df = adlb_out, alt_counts_df = adsl_f)\n\nresult\n\nParameter Code                                                              \n  Baseline NCI CTCAE Grade          A: Drug X    B: Placebo   C: Combination\n    Post-baseline NCI CTCAE Grade    (N=134)      (N=134)        (N=132)    \n————————————————————————————————————————————————————————————————————————————\nALT                                                                         \n  Not High (n)                         121          118            118      \n            Not High                72 (59.5%)   70 (59.3%)     59 (50.0%)  \n            1                       16 (13.2%)   13 (11.0%)     17 (14.4%)  \n            2                       13 (10.7%)   12 (10.2%)     18 (15.3%)  \n            3                        9 (7.4%)    14 (11.9%)     12 (10.2%)  \n            4                       11 (9.1%)     9 (7.6%)      12 (10.2%)  \n  1 (n)                                 4            4              3       \n            Not High                1 (25.0%)    1 (25.0%)      2 (66.7%)   \n            1                       1 (25.0%)        0              0       \n            2                       1 (25.0%)        0              0       \n            3                           0        1 (25.0%)      1 (33.3%)   \n            4                       1 (25.0%)    2 (50.0%)          0       \n  2 (n)                                 4            4              4       \n            Not High                3 (75.0%)    3 (75.0%)      3 (75.0%)   \n            1                           0        1 (25.0%)      1 (25.0%)   \n            2                       1 (25.0%)        0              0       \n  3 (n)                                 2            5              5       \n            Not High                 2 (100%)    2 (40.0%)      4 (80.0%)   \n            1                           0        2 (40.0%)          0       \n            2                           0        1 (20.0%)          0       \n            4                           0            0          1 (20.0%)   \n  4 (n)                                 3            3              2       \n            Not High                1 (33.3%)    2 (66.7%)       2 (100%)   \n            1                       1 (33.3%)        0              0       \n            3                       1 (33.3%)    1 (33.3%)          0       \nCRP                                                                         \n  Not High (n)                         115          115            114      \n            Not High                60 (52.2%)   68 (59.1%)     70 (61.4%)  \n            1                       17 (14.8%)   13 (11.3%)      9 (7.9%)   \n            2                       12 (10.4%)   14 (12.2%)     13 (11.4%)  \n            3                       16 (13.9%)   10 (8.7%)      13 (11.4%)  \n            4                       10 (8.7%)    10 (8.7%)       9 (7.9%)   \n  1 (n)                                 5            5              5       \n            Not High                4 (80.0%)    3 (60.0%)       5 (100%)   \n            2                           0        2 (40.0%)          0       \n            4                       1 (20.0%)        0              0       \n  2 (n)                                 6            5              5       \n            Not High                3 (50.0%)    3 (60.0%)      4 (80.0%)   \n            1                           0        1 (20.0%)          0       \n            2                       2 (33.3%)        0              0       \n            4                       1 (16.7%)    1 (20.0%)      1 (20.0%)   \n  3 (n)                                 2            3              5       \n            Not High                 2 (100%)    1 (33.3%)      4 (80.0%)   \n            3                           0        1 (33.3%)      1 (20.0%)   \n            4                           0        1 (33.3%)          0       \n  4 (n)                                 6            6              3       \n            Not High                5 (83.3%)    4 (66.7%)       3 (100%)   \n            1                           0        1 (16.7%)          0       \n            2                       1 (16.7%)        0              0       \n            3                           0        1 (16.7%)          0       \nIGA                                                                         \n  Not High (n)                         119          123            119      \n            Not High                61 (51.3%)   69 (56.1%)     74 (62.2%)  \n            1                       24 (20.2%)   12 (9.8%)      13 (10.9%)  \n            2                       13 (10.9%)   20 (16.3%)     12 (10.1%)  \n            3                       11 (9.2%)    11 (8.9%)      16 (13.4%)  \n            4                       10 (8.4%)    11 (8.9%)       4 (3.4%)   \n  1 (n)                                 2            4              6       \n            Not High                 2 (100%)    2 (50.0%)      5 (83.3%)   \n            2                           0            0          1 (16.7%)   \n            4                           0        2 (50.0%)          0       \n  2 (n)                                 4            4              3       \n            Not High                3 (75.0%)    2 (50.0%)      1 (33.3%)   \n            1                           0        2 (50.0%)          0       \n            2                           0            0          1 (33.3%)   \n            3                           0            0          1 (33.3%)   \n            4                       1 (25.0%)        0              0       \n  3 (n)                                 5            2              2       \n            Not High                3 (60.0%)        0          1 (50.0%)   \n            1                       1 (20.0%)        0              0       \n            2                           0            0          1 (50.0%)   \n            3                       1 (20.0%)     2 (100%)          0       \n  4 (n)                                 4            1              2       \n            Not High                3 (75.0%)     1 (100%)      1 (50.0%)   \n            2                       1 (25.0%)        0          1 (50.0%)   \n\n\n\n\nNote that when BTOXGR is missing, the grouping variable BTOXGR_GP now is \"Not Low\" instead of \"Missing\" compared to Standard Table (High).\n\nCodeadlb_f <- adlb %>% filter(WGRLOFL == \"Y\")\n\n# Please note the step below can be skipped if you are using DTYPE PHANTOM\nadlb_out <- h_adsl_adlb_merge_using_worst_flag(adsl_f, adlb_f, worst_flag = c(\"WGRLOFL\" = \"Y\"))\n\n# Create new grouping variables ATOXGR_GP, BTOXGR_GP\nadlb_out <- adlb_out %>%\n  mutate(\n    ATOXGR_GP = case_when(\n      ATOXGR %in% c(0, 1, 2, 3, 4) ~ \"Not Low\",\n      ATOXGR == -1 ~ \"1\",\n      ATOXGR == -2 ~ \"2\",\n      ATOXGR == -3 ~ \"3\",\n      ATOXGR == -4 ~ \"4\",\n      ATOXGR == \"<Missing>\" ~ \"Missing\"\n    )\n  ) %>%\n  mutate(\n    BTOXGR_GP = case_when(\n      BTOXGR %in% c(0, 1, 2, 3, 4, \"<Missing>\") ~ \"Not Low\",\n      BTOXGR == -1 ~ \"1\",\n      BTOXGR == -2 ~ \"2\",\n      BTOXGR == -3 ~ \"3\",\n      BTOXGR == -4 ~ \"4\"\n    )\n  )\n\nadlb_out <- adlb_out %>% mutate(\n  ATOXGR_GP = factor(ATOXGR_GP, levels = c(\"Not Low\", \"1\", \"2\", \"3\", \"4\", \"Missing\")),\n  BTOXGR_GP = factor(BTOXGR_GP, levels = c(\"Not Low\", \"1\", \"2\", \"3\", \"4\"))\n)\n\nadlb_out <- adlb_out %>%\n  var_relabel(\n    PARAMCD = \"Parameter Code\",\n    ATOXGR_GP = \"Post-baseline NCI CTCAE Grade\",\n    BTOXGR_GP = \"Baseline NCI CTCAE Grade\"\n  )\n\nresult <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ACTARM\") %>%\n  split_rows_by(\n    \"PARAMCD\",\n    split_fun = drop_split_levels, label_pos = \"topleft\", split_label = obj_label(adlb_out$PARAMCD)\n  ) %>%\n  split_rows_by(\n    \"BTOXGR_GP\",\n    split_fun = drop_split_levels, label_pos = \"topleft\", split_label = obj_label(adlb_out$BTOXGR_GP)\n  ) %>%\n  summarize_num_patients(var = \"USUBJID\", .stats = c(\"unique_count\")) %>%\n  count_occurrences(\"ATOXGR_GP\", denom = \"n\", drop = TRUE, .indent_mods = 4L) %>%\n  append_varlabels(adlb_out, \"ATOXGR_GP\", indent = 2L) %>%\n  build_table(df = adlb_out, alt_counts_df = adsl_f)\n\nresult\n\nParameter Code                                                              \n  Baseline NCI CTCAE Grade          A: Drug X    B: Placebo   C: Combination\n    Post-baseline NCI CTCAE Grade    (N=134)      (N=134)        (N=132)    \n————————————————————————————————————————————————————————————————————————————\nALT                                                                         \n  Not Low (n)                          124          122            117      \n            Not Low                 74 (59.7%)   76 (62.3%)     80 (68.4%)  \n            1                       13 (10.5%)   12 (9.8%)       9 (7.7%)   \n            2                       13 (10.5%)   16 (13.1%)     11 (9.4%)   \n            3                       17 (13.7%)   11 (9.0%)       9 (7.7%)   \n            4                        7 (5.6%)     7 (5.7%)       8 (6.8%)   \n  1 (n)                                 3            6              7       \n            Not Low                     0        2 (33.3%)      5 (71.4%)   \n            1                       1 (33.3%)    2 (33.3%)          0       \n            2                           0        1 (16.7%)          0       \n            3                       2 (66.7%)    1 (16.7%)          0       \n            4                           0            0          2 (28.6%)   \n  2 (n)                                 2            1              4       \n            Not Low                  2 (100%)        0          3 (75.0%)   \n            2                           0         1 (100%)          0       \n            3                           0            0          1 (25.0%)   \n  3 (n)                                 2            3              4       \n            Not Low                  2 (100%)    2 (66.7%)      3 (75.0%)   \n            1                           0        1 (33.3%)      1 (25.0%)   \n  4 (n)                                 3            2              0       \n            Not Low                 2 (66.7%)    1 (50.0%)          0       \n            3                       1 (33.3%)        0              0       \n            4                           0        1 (50.0%)          0       \nCRP                                                                         \n  Not Low (n)                          122          125            120      \n            Not Low                 67 (54.9%)   81 (64.8%)     70 (58.3%)  \n            1                       14 (11.5%)   17 (13.6%)     13 (10.8%)  \n            2                       20 (16.4%)   11 (8.8%)      16 (13.3%)  \n            3                       12 (9.8%)     9 (7.2%)      17 (14.2%)  \n            4                        9 (7.4%)     7 (5.6%)       4 (3.3%)   \n  1 (n)                                 2            5              5       \n            Not Low                     0        3 (60.0%)      4 (80.0%)   \n            1                           0        1 (20.0%)      1 (20.0%)   \n            2                       1 (50.0%)    1 (20.0%)          0       \n            4                       1 (50.0%)        0              0       \n  2 (n)                                 5            1              1       \n            Not Low                 3 (60.0%)        0           1 (100%)   \n            1                       2 (40.0%)        0              0       \n            2                           0         1 (100%)          0       \n  3 (n)                                 2            2              1       \n            Not Low                  2 (100%)    1 (50.0%)          0       \n            1                           0        1 (50.0%)          0       \n            3                           0            0           1 (100%)   \n  4 (n)                                 3            1              5       \n            Not Low                 2 (66.7%)     1 (100%)      3 (60.0%)   \n            1                           0            0          1 (20.0%)   \n            4                       1 (33.3%)        0          1 (20.0%)   \nIGA                                                                         \n  Not Low (n)                          120          119            120      \n            Not Low                 69 (57.5%)   58 (48.7%)     70 (58.3%)  \n            1                       16 (13.3%)   20 (16.8%)     16 (13.3%)  \n            2                       12 (10.0%)   14 (11.8%)     14 (11.7%)  \n            3                       14 (11.7%)   11 (9.2%)      13 (10.8%)  \n            4                        9 (7.5%)    16 (13.4%)      7 (5.8%)   \n  1 (n)                                 8            8              3       \n            Not Low                 7 (87.5%)    4 (50.0%)      2 (66.7%)   \n            1                       1 (12.5%)    3 (37.5%)          0       \n            2                           0        1 (12.5%)          0       \n            4                           0            0          1 (33.3%)   \n  2 (n)                                 2            1              2       \n            Not Low                  2 (100%)     1 (100%)       2 (100%)   \n  3 (n)                                 3            3              4       \n            Not Low                 1 (33.3%)     3 (100%)      2 (50.0%)   \n            1                           0            0          1 (25.0%)   \n            3                       1 (33.3%)        0              0       \n            4                       1 (33.3%)        0          1 (25.0%)   \n  4 (n)                                 1            3              3       \n            Not Low                  1 (100%)     3 (100%)      1 (33.3%)   \n            3                           0            0          1 (33.3%)   \n            4                           0            0          1 (33.3%)   \n\n\n\n\nPre-processing is the same as Standard Table (High), but in order to keep all levels, the drop argument in count_occurrences is set to FALSE.\n\nCodeadlb_f <- adlb %>% filter(WGRHIFL == \"Y\")\n\n# Please note the step below can be skipped if you are using DTYPE PHANTOM\nadlb_out <- h_adsl_adlb_merge_using_worst_flag(adsl_f, adlb_f, worst_flag = c(\"WGRHIFL\" = \"Y\"))\n\n# Create new grouping variables ATOXGR_GP, BTOXGR_GP\nadlb_out <- adlb_out %>%\n  mutate(\n    ATOXGR_GP = case_when(\n      ATOXGR %in% c(0, -1, -2, -3, -4) ~ \"Not High\",\n      ATOXGR == 1 ~ \"1\",\n      ATOXGR == 2 ~ \"2\",\n      ATOXGR == 3 ~ \"3\",\n      ATOXGR == 4 ~ \"4\",\n      ATOXGR == \"<Missing>\" ~ \"Missing\"\n    )\n  ) %>%\n  mutate(\n    BTOXGR_GP = case_when(\n      BTOXGR %in% c(0, -1, -2, -3, -4) ~ \"Not High\",\n      BTOXGR == 1 ~ \"1\",\n      BTOXGR == 2 ~ \"2\",\n      BTOXGR == 3 ~ \"3\",\n      BTOXGR == 4 ~ \"4\",\n      BTOXGR == \"<Missing>\" ~ \"Missing\"\n    )\n  )\n\nadlb_out <- adlb_out %>% mutate(\n  ATOXGR_GP = factor(ATOXGR_GP, levels = c(\"Not High\", \"1\", \"2\", \"3\", \"4\", \"Missing\")),\n  BTOXGR_GP = factor(BTOXGR_GP, levels = c(\"Not High\", \"1\", \"2\", \"3\", \"4\", \"Missing\"))\n)\n\nadlb_out <- adlb_out %>%\n  var_relabel(\n    PARAMCD = \"Parameter Code\",\n    ATOXGR_GP = \"Post-baseline NCI CTCAE Grade\",\n    BTOXGR_GP = \"Baseline NCI CTCAE Grade\"\n  )\n\nresult <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ACTARM\") %>%\n  split_rows_by(\n    \"PARAMCD\",\n    split_fun = drop_split_levels, label_pos = \"topleft\", split_label = obj_label(adlb_out$PARAMCD)\n  ) %>%\n  split_rows_by(\n    \"BTOXGR_GP\",\n    split_fun = keep_split_levels(c(\"Not High\", \"1\", \"2\", \"3\", \"4\", \"Missing\")),\n    label_pos = \"topleft\",\n    split_label = obj_label(adlb_out$BTOXGR_GP)\n  ) %>%\n  summarize_num_patients(var = \"USUBJID\", .stats = c(\"unique_count\")) %>%\n  count_occurrences(\"ATOXGR_GP\", denom = \"n\", drop = FALSE, .indent_mods = 4L) %>%\n  append_varlabels(adlb_out, \"ATOXGR_GP\", indent = 2L) %>%\n  build_table(df = adlb_out, alt_counts_df = adsl_f)\n\nresult\n\nParameter Code                                                              \n  Baseline NCI CTCAE Grade          A: Drug X    B: Placebo   C: Combination\n    Post-baseline NCI CTCAE Grade    (N=134)      (N=134)        (N=132)    \n————————————————————————————————————————————————————————————————————————————\nALT                                                                         \n  Not High (n)                         121          118            118      \n            Not High                72 (59.5%)   70 (59.3%)     59 (50.0%)  \n            1                       16 (13.2%)   13 (11.0%)     17 (14.4%)  \n            2                       13 (10.7%)   12 (10.2%)     18 (15.3%)  \n            3                        9 (7.4%)    14 (11.9%)     12 (10.2%)  \n            4                       11 (9.1%)     9 (7.6%)      12 (10.2%)  \n            Missing                     0            0              0       \n  1 (n)                                 4            4              3       \n            Not High                1 (25.0%)    1 (25.0%)      2 (66.7%)   \n            1                       1 (25.0%)        0              0       \n            2                       1 (25.0%)        0              0       \n            3                           0        1 (25.0%)      1 (33.3%)   \n            4                       1 (25.0%)    2 (50.0%)          0       \n            Missing                     0            0              0       \n  2 (n)                                 4            4              4       \n            Not High                3 (75.0%)    3 (75.0%)      3 (75.0%)   \n            1                           0        1 (25.0%)      1 (25.0%)   \n            2                       1 (25.0%)        0              0       \n            3                           0            0              0       \n            4                           0            0              0       \n            Missing                     0            0              0       \n  3 (n)                                 2            5              5       \n            Not High                 2 (100%)    2 (40.0%)      4 (80.0%)   \n            1                           0        2 (40.0%)          0       \n            2                           0        1 (20.0%)          0       \n            3                           0            0              0       \n            4                           0            0          1 (20.0%)   \n            Missing                     0            0              0       \n  4 (n)                                 3            3              2       \n            Not High                1 (33.3%)    2 (66.7%)       2 (100%)   \n            1                       1 (33.3%)        0              0       \n            2                           0            0              0       \n            3                       1 (33.3%)    1 (33.3%)          0       \n            4                           0            0              0       \n            Missing                     0            0              0       \n  Missing (n)                           0            0              0       \n            Not High                    0            0              0       \n            1                           0            0              0       \n            2                           0            0              0       \n            3                           0            0              0       \n            4                           0            0              0       \n            Missing                     0            0              0       \nCRP                                                                         \n  Not High (n)                         115          115            114      \n            Not High                60 (52.2%)   68 (59.1%)     70 (61.4%)  \n            1                       17 (14.8%)   13 (11.3%)      9 (7.9%)   \n            2                       12 (10.4%)   14 (12.2%)     13 (11.4%)  \n            3                       16 (13.9%)   10 (8.7%)      13 (11.4%)  \n            4                       10 (8.7%)    10 (8.7%)       9 (7.9%)   \n            Missing                     0            0              0       \n  1 (n)                                 5            5              5       \n            Not High                4 (80.0%)    3 (60.0%)       5 (100%)   \n            1                           0            0              0       \n            2                           0        2 (40.0%)          0       \n            3                           0            0              0       \n            4                       1 (20.0%)        0              0       \n            Missing                     0            0              0       \n  2 (n)                                 6            5              5       \n            Not High                3 (50.0%)    3 (60.0%)      4 (80.0%)   \n            1                           0        1 (20.0%)          0       \n            2                       2 (33.3%)        0              0       \n            3                           0            0              0       \n            4                       1 (16.7%)    1 (20.0%)      1 (20.0%)   \n            Missing                     0            0              0       \n  3 (n)                                 2            3              5       \n            Not High                 2 (100%)    1 (33.3%)      4 (80.0%)   \n            1                           0            0              0       \n            2                           0            0              0       \n            3                           0        1 (33.3%)      1 (20.0%)   \n            4                           0        1 (33.3%)          0       \n            Missing                     0            0              0       \n  4 (n)                                 6            6              3       \n            Not High                5 (83.3%)    4 (66.7%)       3 (100%)   \n            1                           0        1 (16.7%)          0       \n            2                       1 (16.7%)        0              0       \n            3                           0        1 (16.7%)          0       \n            4                           0            0              0       \n            Missing                     0            0              0       \n  Missing (n)                           0            0              0       \n            Not High                    0            0              0       \n            1                           0            0              0       \n            2                           0            0              0       \n            3                           0            0              0       \n            4                           0            0              0       \n            Missing                     0            0              0       \nIGA                                                                         \n  Not High (n)                         119          123            119      \n            Not High                61 (51.3%)   69 (56.1%)     74 (62.2%)  \n            1                       24 (20.2%)   12 (9.8%)      13 (10.9%)  \n            2                       13 (10.9%)   20 (16.3%)     12 (10.1%)  \n            3                       11 (9.2%)    11 (8.9%)      16 (13.4%)  \n            4                       10 (8.4%)    11 (8.9%)       4 (3.4%)   \n            Missing                     0            0              0       \n  1 (n)                                 2            4              6       \n            Not High                 2 (100%)    2 (50.0%)      5 (83.3%)   \n            1                           0            0              0       \n            2                           0            0          1 (16.7%)   \n            3                           0            0              0       \n            4                           0        2 (50.0%)          0       \n            Missing                     0            0              0       \n  2 (n)                                 4            4              3       \n            Not High                3 (75.0%)    2 (50.0%)      1 (33.3%)   \n            1                           0        2 (50.0%)          0       \n            2                           0            0          1 (33.3%)   \n            3                           0            0          1 (33.3%)   \n            4                       1 (25.0%)        0              0       \n            Missing                     0            0              0       \n  3 (n)                                 5            2              2       \n            Not High                3 (60.0%)        0          1 (50.0%)   \n            1                       1 (20.0%)        0              0       \n            2                           0            0          1 (50.0%)   \n            3                       1 (20.0%)     2 (100%)          0       \n            4                           0            0              0       \n            Missing                     0            0              0       \n  4 (n)                                 4            1              2       \n            Not High                3 (75.0%)     1 (100%)      1 (50.0%)   \n            1                           0            0              0       \n            2                       1 (25.0%)        0          1 (50.0%)   \n            3                           0            0              0       \n            4                           0            0              0       \n            Missing                     0            0              0       \n  Missing (n)                           0            0              0       \n            Not High                    0            0              0       \n            1                           0            0              0       \n            2                           0            0              0       \n            3                           0            0              0       \n            4                           0            0              0       \n            Missing                     0            0              0       \n\n\n\n\n\nCodelibrary(scda)\nlibrary(dplyr)\nlibrary(teal.modules.clinical)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadlb <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adlb\")\n\napp <- init(\n  data = cdisc_data(\n    cdisc_dataset(\"ADSL\", adsl, code = 'ADSL <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")'),\n    cdisc_dataset(\"ADLB\", adlb,\n      code = 'ADLB <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adlb\")'\n    ),\n    check = TRUE\n  ),\n  modules = modules(\n    tm_t_shift_by_grade(\n      label = \"Grade Laboratory Abnormality Table\",\n      dataname = \"ADLB\",\n      arm_var = choices_selected(\n        choices = variable_choices(adsl, subset = c(\"ARM\", \"ARMCD\")),\n        selected = \"ARM\"\n      ),\n      paramcd = choices_selected(\n        choices = value_choices(adlb, \"PARAMCD\", \"PARAM\"),\n        selected = \"ALT\"\n      ),\n      worst_flag_var = choices_selected(\n        choices = variable_choices(adlb, subset = c(\"WGRLOVFL\", \"WGRLOFL\", \"WGRHIVFL\", \"WGRHIFL\")),\n        selected = c(\"WGRHIFL\")\n      ),\n      worst_flag_indicator = choices_selected(\n        value_choices(adlb, \"WGRLOVFL\"),\n        selected = \"Y\", fixed = TRUE\n      ),\n      anl_toxgrade_var = choices_selected(\n        choices = variable_choices(adlb, subset = c(\"ATOXGR\")),\n        selected = c(\"ATOXGR\"),\n        fixed = TRUE\n      ),\n      base_toxgrade_var = choices_selected(\n        choices = variable_choices(adlb, subset = c(\"BTOXGR\")),\n        selected = c(\"BTOXGR\"),\n        fixed = TRUE\n      ),\n      add_total = FALSE\n    )\n  ),\n  filter = list(\n    ADSL = list(SAFFL = \"Y\")\n  )\n)\n\n[INFO] 2023-03-10 05:42:32.5459 pid:6558 token:[] teal.modules.clinical Initializing tm_t_shift_by_grade\n\nCodeshinyApp(app$ui, app$server)\n\n\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n [1] teal.modules.clinical_0.8.14.9026 teal_0.12.0.9023                 \n [3] teal.transform_0.2.0.9011         teal.data_0.1.2.9013             \n [5] shiny_1.7.4                       tern_0.7.10.9056                 \n [7] rtables_0.6.0.1                   formatters_0.4.0                 \n [9] magrittr_2.0.3                    dplyr_1.1.0                      \n[11] scda_0.1.5.9009                  \n\nloaded via a namespace (and not attached):\n [1] sass_0.4.5               tidyr_1.3.0              jsonlite_1.8.4          \n [4] splines_4.2.2            R.utils_2.12.2           bslib_0.4.2             \n [7] teal.slice_0.2.0.9026    Rdpack_2.4               assertthat_0.2.1        \n[10] teal.code_0.3.0.9001     tern.gee_0.1.0.9002      yaml_2.3.7              \n[13] pillar_1.8.1             backports_1.4.1          lattice_0.20-45         \n[16] glue_1.6.2               teal.widgets_0.2.0.9024  digest_0.6.31           \n[19] promises_1.2.0.1         rbibutils_2.2.13         checkmate_2.1.0         \n[22] colorspace_2.1-0         R.oo_1.25.0              htmltools_0.5.4         \n[25] httpuv_1.6.9             Matrix_1.5-3             pkgconfig_2.0.3         \n[28] broom_1.0.3              logger_0.2.2             purrr_1.0.1             \n[31] xtable_1.8-4             mvtnorm_1.1-3            webshot_0.5.4           \n[34] scales_1.2.1             processx_3.8.0           fontawesome_0.5.0       \n[37] later_1.3.0              emmeans_1.8.4-1          tibble_3.1.8            \n[40] styler_1.9.1             generics_0.1.3           ggplot2_3.4.1           \n[43] ellipsis_0.3.2           shinyvalidate_0.1.2      cachem_1.0.7            \n[46] withr_2.5.0              shinyjs_2.1.0            geepack_1.3.9           \n[49] cli_3.6.0                survival_3.5-3           mime_0.12               \n[52] memoise_2.0.1            ps_1.7.2                 estimability_1.4.1      \n[55] evaluate_0.20            R.methodsS3_1.8.2        fansi_1.0.4             \n[58] R.cache_0.16.0           nlme_3.1-162             MASS_7.3-58.3           \n[61] forcats_1.0.0            teal.reporter_0.1.1.9013 tools_4.2.2             \n[64] lifecycle_1.0.3          munsell_0.5.0            callr_3.7.3             \n[67] compiler_4.2.2           jquerylib_0.1.4          rlang_1.0.6             \n[70] grid_4.2.2               htmlwidgets_1.6.1        rmarkdown_2.20          \n[73] shinyWidgets_0.7.6       gtable_0.3.1             codetools_0.2-19        \n[76] teal.logger_0.1.1.9004   R6_2.5.1                 knitr_1.42              \n[79] fastmap_1.1.1            utf8_1.2.3               Rcpp_1.0.10             \n[82] vctrs_0.5.2              tidyselect_1.2.0         xfun_0.37               \n[85] coda_0.19-4             \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R                       [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/tables/lab-results/lbt14.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "tables/lab-results/lbt12_bl.html",
    "href": "tables/lab-results/lbt12_bl.html",
    "title": "LBT12_BL",
    "section": "",
    "text": "Data Setup\nStandard Table\nTeal\nSession Info\n\n\n\n\nCodelibrary(scda)\nlibrary(dplyr)\nlibrary(tern)\n\nadhy <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adhy\")\n\nanl <- adhy\nanl$APERIODC <- as.factor(anl$APERIODC) # to ensure the table is built even if there is no patients after filtering\nanl$ACTARM <- as.factor(anl$ACTARM) # to ensure the table is built even if there is no patients after filtering\n\nanl <- anl %>%\n  filter(\n    SAFFL == \"Y\",\n    PARAMCD %in% c(\"ASTPBASE\", \"ALTPBASE\", \"ALTASTPB\") & AVISIT == \"POST-BASELINE\"\n  ) %>%\n  mutate(\n    ARM_AVALC = factor(\n      case_when(\n        AVALC == \"Y\" ~ as.character(ACTARM),\n        TRUE ~ \"Criteria not met\"\n      ),\n      levels = c(levels(anl$ACTARM), \"Criteria not met\")\n    ),\n    PARAM = factor(\n      case_when(\n        PARAMCD == \"ASTPBASE\" ~ \"AST>3x Baseline\",\n        PARAMCD == \"ALTPBASE\" ~ \"ALT>3x Baseline\",\n        PARAMCD == \"ALTASTPB\" ~ \"AST>3x Baseline or ALT>3x Baseline\"\n      ),\n      levels = c(\"AST>3x Baseline\", \"ALT>3x Baseline\", \"AST>3x Baseline or ALT>3x Baseline\")\n    ),\n    TITLE = factor(\"First Elevated Result Occurring During\")\n  )\n\nanl <- df_explicit_na(anl)\n\n\n\n\n\nCoderesult <- basic_table() %>%\n  split_cols_by(\"TITLE\") %>%\n  split_cols_by(\"APERIODC\") %>%\n  split_rows_by(\"PARAM\") %>%\n  split_rows_by(\"ACTARM\", split_fun = drop_split_levels, child_labels = \"hidden\") %>%\n  count_occurrences(\"ARM_AVALC\", .stats = \"fraction\", denom = \"n\", drop = TRUE) %>%\n  build_table(anl)\n\ncriteria_fun <- function(tr) {\n  row_label <- obj_label(tr)\n  dplyr::if_else(row_label == \"Criteria not met\", TRUE, FALSE)\n}\n\nresult <- result %>% trim_rows(criteria = criteria_fun)\nresult\n\n                                      First Elevated Result Occurring During  \n                                          PERIOD 1              PERIOD 2      \n——————————————————————————————————————————————————————————————————————————————\nAST>3x Baseline                                                               \n  A: Drug X                            14/134 (10.4%)         8/134 (6.0%)    \n  B: Placebo                            11/134 (8.2%)         11/134 (8.2%)   \n  C: Combination                       15/132 (11.4%)        14/132 (10.6%)   \nALT>3x Baseline                                                               \n  A: Drug X                             7/134 (5.2%)         20/134 (14.9%)   \n  B: Placebo                            10/134 (7.5%)         9/134 (6.7%)    \n  C: Combination                        12/132 (9.1%)         8/132 (6.1%)    \nAST>3x Baseline or ALT>3x Baseline                                            \n  A: Drug X                             8/134 (6.0%)         22/134 (16.4%)   \n  B: Placebo                           19/134 (14.2%)        15/134 (11.2%)   \n  C: Combination                       14/132 (10.6%)         13/132 (9.8%)   \n\n\n\n\n\nCode# In progress\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n[1] tern_0.7.10.9056 rtables_0.6.0.1  formatters_0.4.0 magrittr_2.0.3  \n[5] dplyr_1.1.0      scda_0.1.5.9009 \n\nloaded via a namespace (and not attached):\n [1] pillar_1.8.1      compiler_4.2.2    forcats_1.0.0     tools_4.2.2      \n [5] digest_0.6.31     lattice_0.20-45   jsonlite_1.8.4    evaluate_0.20    \n [9] lifecycle_1.0.3   tibble_3.1.8      checkmate_2.1.0   gtable_0.3.1     \n[13] pkgconfig_2.0.3   rlang_1.0.6       Matrix_1.5-3      cli_3.6.0        \n[17] yaml_2.3.7        xfun_0.37         fastmap_1.1.1     withr_2.5.0      \n[21] knitr_1.42        generics_0.1.3    vctrs_0.5.2       htmlwidgets_1.6.1\n[25] grid_4.2.2        tidyselect_1.2.0  glue_1.6.2        R6_2.5.1         \n[29] fansi_1.0.4       Rdpack_2.4        survival_3.5-3    rmarkdown_2.20   \n[33] tidyr_1.3.0       purrr_1.0.1       ggplot2_3.4.1     codetools_0.2-19 \n[37] splines_4.2.2     backports_1.4.1   scales_1.2.1      htmltools_0.5.4  \n[41] rbibutils_2.2.13  colorspace_2.1-0  utf8_1.2.3        munsell_0.5.0    \n[45] broom_1.0.3      \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R              [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/tables/lab-results/lbt12_bl.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "tables/lab-results/lbt05.html",
    "href": "tables/lab-results/lbt05.html",
    "title": "LBT05",
    "section": "",
    "text": "Data Setup\nStandard Table\nTable Showing  All Categories\nTable with  Study-Specific  MLAs\nTable of Lab Abnormalities Showing  All Categories But Only for Parameter  Codes with At Least One Abnormality\nSession Info\n\n\n\n\nCodelibrary(scda)\nlibrary(dplyr)\nlibrary(tern)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadlb <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adlb\")\n\n# Ensure character variables are converted to factors and empty strings and NAs are explicit missing levels.\nadsl <- df_explicit_na(adsl)\nadlb <- df_explicit_na(adlb)\n\n# Modify ANRIND and create AVALCAT1/PARCAT2\n# PARCAT2 is just used for filtering, but in order to be the\n# filtering as realistic as possible, will create the variable.\nqntls <- adlb %>%\n  group_by(PARAMCD) %>%\n  summarise(as_tibble(t(quantile(AVAL, probs = c(0.1, 0.9)))), .groups = \"drop_last\") %>%\n  rename(q1 = 2, q2 = 3)\n\nadlb <- adlb %>%\n  left_join(qntls, by = \"PARAMCD\")\n\navalcat1 <- c(\"LAST\", \"REPLICATED\", \"SINGLE\")\n\nset.seed(1)\nadlb <- adlb %>%\n  group_by(USUBJID, PARAMCD, BASETYPE) %>%\n  mutate(\n    ANRIND = factor(\n      case_when(\n        ANRIND == \"LOW\" & AVAL <= q1 ~ \"LOW LOW\",\n        ANRIND == \"HIGH\" & AVAL >= q2 ~ \"HIGH HIGH\",\n        TRUE ~ as.character(ANRIND)\n      ),\n      levels = c(\"\", \"HIGH\", \"HIGH HIGH\", \"LOW\", \"LOW LOW\", \"NORMAL\")\n    ),\n    AVALCAT1 = factor(\n      case_when(\n        ANRIND %in% c(\"HIGH HIGH\", \"LOW LOW\") ~\n          sample(x = avalcat1, size = n(), replace = TRUE, prob = c(0.3, 0.6, 0.1)),\n        TRUE ~ \"\"\n      ),\n      levels = c(\"\", avalcat1)\n    ),\n    PARCAT2 = factor(ifelse(ANRIND %in% c(\"HIGH HIGH\", \"LOW LOW\"), \"LS\",\n      sample(c(\"SI\", \"CV\", \"LS\"), size = n(), replace = TRUE)\n    ))\n  ) %>%\n  select(-q1, -q2)\n\n# Pre-processing steps\nadlb_f <- adlb %>%\n  filter(ONTRTFL == \"Y\" & PARCAT2 == \"LS\" & SAFFL == \"Y\" & !is.na(AVAL)) %>%\n  mutate(abn_dir = factor(case_when(\n    ANRIND == \"LOW LOW\" ~ \"Low\",\n    ANRIND == \"HIGH HIGH\" ~ \"High\",\n    TRUE ~ \"\"\n  )))\n\n# Construct analysis map\nmap <- unique(\n  adlb_f[\n    adlb_f$abn_dir %in% c(\"Low\", \"High\") & adlb_f$AVALCAT1 != \"<Missing>\", c(\"PARAM\", \"abn_dir\")\n  ]\n) %>%\n  lapply(as.character) %>%\n  as.data.frame() %>%\n  arrange(PARAM, desc(abn_dir))\n\n\n\n\n\nCode# remove all marked abnormalities for ALT so that it can be demonstrated that\n# just the `Any Abnormality` row is shown when there is no marked abnormality.\nadlb_f2 <- adlb_f\nlevels(adlb_f2$abn_dir) <- c(levels(adlb_f2$abn_dir), \"<Missing>\")\nlevels(adlb_f2$AVALCAT1) <- c(levels(adlb_f2$AVALCAT1), \"<Missing>\")\nadlb_f2$abn_dir[adlb_f2$PARAMCD == \"ALT\"] <- \"<Missing>\"\nadlb_f2$AVALCAT1[adlb_f2$PARAMCD == \"ALT\"] <- \"<Missing>\"\n\nadlb_f2 <- df_explicit_na(adlb_f2, na_level = \"<Missing>\")\n\nlyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ACTARMCD\") %>%\n  split_rows_by(\n    \"PARAM\",\n    label_pos = \"topleft\",\n    split_label = \"Laboratory Test\"\n  ) %>%\n  summarize_num_patients(var = \"USUBJID\", .stats = \"unique_count\") %>%\n  append_topleft(\"  Direction of Abnormality\") %>%\n  split_rows_by(\"abn_dir\", split_fun = trim_levels_to_map(map)) %>%\n  count_abnormal_by_marked(\n    var = \"AVALCAT1\",\n    variables = list(id = \"USUBJID\", param = \"PARAM\", direction = \"abn_dir\")\n  )\n\nresult <- build_table(lyt, df = adlb_f2, alt_counts_df = adsl)\n\nall_zero_or_na_not_any <- function(tr) {\n  if (!is(tr, \"TableRow\") || is(tr, \"LabelRow\") || obj_label(tr) == \"Any Abnormality\") {\n    return(FALSE)\n  }\n  rvs <- unlist(unname(row_values(tr)))\n  all(is.na(rvs) | rvs == 0 | !is.finite(rvs))\n}\n\nresult <- trim_rows(result, criteria = all_zero_or_na_not_any)\nresult\n\nLaboratory Test                              ARM A       ARM B       ARM C   \n  Direction of Abnormality                  (N=134)     (N=134)     (N=132)  \n—————————————————————————————————————————————————————————————————————————————\nAlanine Aminotransferase Measurement (n)      129         126         126    \n  Low                                                                        \n    Any Abnormality                            0           0           0     \n  High                                                                       \n    Any Abnormality                            0           0           0     \nC-Reactive Protein Measurement (n)            132         129         125    \n  Low                                                                        \n    Single, not last                       2 (1.5%)        0           0     \n    Last or replicated                     10 (7.6%)   7 (5.4%)     7 (5.6%) \n    Any Abnormality                        12 (9.1%)   7 (5.4%)     7 (5.6%) \n  High                                                                       \n    Single, not last                       1 (0.8%)    2 (1.6%)     1 (0.8%) \n    Last or replicated                     10 (7.6%)    9 (7%)     12 (9.6%) \n    Any Abnormality                        11 (8.3%)   11 (8.5%)   13 (10.4%)\nImmunoglobulin A Measurement (n)              128         130         127    \n  Low                                                                        \n    Single, not last                       2 (1.6%)    1 (0.8%)     1 (0.8%) \n    Last or replicated                     5 (3.9%)    8 (6.2%)    10 (7.9%) \n    Any Abnormality                        7 (5.5%)    9 (6.9%)    11 (8.7%) \n  High                                                                       \n    Single, not last                           0           0        1 (0.8%) \n    Last or replicated                     4 (3.1%)    9 (6.9%)     5 (3.9%) \n    Any Abnormality                        4 (3.1%)    9 (6.9%)     6 (4.7%) \n\n\n\n\n\nCodeadlb_f <- df_explicit_na(adlb_f, na_level = \"<Missing>\") # abn_dir has \"\"\n\nlyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ACTARMCD\") %>%\n  split_rows_by(\n    \"PARAM\",\n    label_pos = \"topleft\",\n    split_label = \"Laboratory Test\"\n  ) %>%\n  summarize_num_patients(var = \"USUBJID\", .stats = \"unique_count\") %>%\n  append_topleft(\"  Direction of Abnormality\") %>%\n  split_rows_by(\"abn_dir\", split_fun = trim_levels_to_map(map)) %>%\n  count_abnormal_by_marked(\n    var = \"AVALCAT1\",\n    variables = list(id = \"USUBJID\", param = \"PARAM\", direction = \"abn_dir\")\n  )\n\nresult <- build_table(lyt, df = adlb_f, alt_counts_df = adsl)\n\nresult\n\nLaboratory Test                              ARM A       ARM B        ARM C   \n  Direction of Abnormality                  (N=134)     (N=134)      (N=132)  \n——————————————————————————————————————————————————————————————————————————————\nAlanine Aminotransferase Measurement (n)      129         126          126    \n  Low                                                                         \n    Single, not last                           0           0            0     \n    Last or replicated                     5 (3.9%)    13 (10.3%)     5 (4%)  \n    Any Abnormality                        5 (3.9%)    13 (10.3%)     5 (4%)  \n  High                                                                        \n    Single, not last                       1 (0.8%)     1 (0.8%)     1 (0.8%) \n    Last or replicated                     8 (6.2%)    11 (8.7%)     6 (4.8%) \n    Any Abnormality                         9 (7%)     12 (9.5%)     7 (5.6%) \nC-Reactive Protein Measurement (n)            132         129          125    \n  Low                                                                         \n    Single, not last                       2 (1.5%)        0            0     \n    Last or replicated                     10 (7.6%)    7 (5.4%)     7 (5.6%) \n    Any Abnormality                        12 (9.1%)    7 (5.4%)     7 (5.6%) \n  High                                                                        \n    Single, not last                       1 (0.8%)     2 (1.6%)     1 (0.8%) \n    Last or replicated                     10 (7.6%)     9 (7%)     12 (9.6%) \n    Any Abnormality                        11 (8.3%)   11 (8.5%)    13 (10.4%)\nImmunoglobulin A Measurement (n)              128         130          127    \n  Low                                                                         \n    Single, not last                       2 (1.6%)     1 (0.8%)     1 (0.8%) \n    Last or replicated                     5 (3.9%)     8 (6.2%)    10 (7.9%) \n    Any Abnormality                        7 (5.5%)     9 (6.9%)    11 (8.7%) \n  High                                                                        \n    Single, not last                           0           0         1 (0.8%) \n    Last or replicated                     4 (3.1%)     9 (6.9%)     5 (3.9%) \n    Any Abnormality                        4 (3.1%)     9 (6.9%)     6 (4.7%) \n\n\n\n\n\nCode# This variant reflects user modifications made to the laboratory analysis data set related to Safety Lab Standardization metadata.\n# There is no unique layout level variation.\n\n\n\n\n\nCode# adlb_f2 is used so that it can be demonstrated that\n# only parameters with at least one marked abnormality are displayed.\n# Create an empirical map removing rows belonging to \"ALT\" which does not contain abnormalities\nlyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ACTARMCD\") %>%\n  split_rows_by(\n    \"PARAM\",\n    label_pos = \"topleft\",\n    split_label = \"Laboratory Test\",\n    split_fun = trim_levels_in_group(\"abn_dir\", drop_outlevs = TRUE)\n  ) %>%\n  summarize_num_patients(var = \"USUBJID\", .stats = \"unique_count\") %>%\n  append_topleft(\"  Direction of Abnormality\") %>%\n  split_rows_by(\"abn_dir\") %>%\n  count_abnormal_by_marked(\n    var = \"AVALCAT1\",\n    variables = list(id = \"USUBJID\", param = \"PARAM\", direction = \"abn_dir\")\n  )\n\n# we should still use the prune_table() function to obtain the desired output.\nresult <- build_table(lyt, df = adlb_f2, alt_counts_df = adsl) %>%\n  prune_table()\nresult\n\nLaboratory Test                        ARM A       ARM B       ARM C   \n  Direction of Abnormality            (N=134)     (N=134)     (N=132)  \n———————————————————————————————————————————————————————————————————————\nC-Reactive Protein Measurement (n)      132         129         125    \n  Low                                                                  \n    Single, not last                 2 (1.5%)        0           0     \n    Last or replicated               10 (7.6%)   7 (5.4%)     7 (5.6%) \n    Any Abnormality                  12 (9.1%)   7 (5.4%)     7 (5.6%) \n  High                                                                 \n    Single, not last                 1 (0.8%)    2 (1.6%)     1 (0.8%) \n    Last or replicated               10 (7.6%)    9 (7%)     12 (9.6%) \n    Any Abnormality                  11 (8.3%)   11 (8.5%)   13 (10.4%)\nImmunoglobulin A Measurement (n)        128         130         127    \n  Low                                                                  \n    Single, not last                 2 (1.6%)    1 (0.8%)     1 (0.8%) \n    Last or replicated               5 (3.9%)    8 (6.2%)    10 (7.9%) \n    Any Abnormality                  7 (5.5%)    9 (6.9%)    11 (8.7%) \n  High                                                                 \n    Single, not last                     0           0        1 (0.8%) \n    Last or replicated               4 (3.1%)    9 (6.9%)     5 (3.9%) \n    Any Abnormality                  4 (3.1%)    9 (6.9%)     6 (4.7%) \n\nCode# Another approach would be to create an empirical map by removing the ALT records\n# and use it in `trim_levels_to_map`.\n# this is an a posteriori approach, though.\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n[1] tern_0.7.10.9056 rtables_0.6.0.1  formatters_0.4.0 magrittr_2.0.3  \n[5] dplyr_1.1.0      scda_0.1.5.9009 \n\nloaded via a namespace (and not attached):\n [1] pillar_1.8.1      compiler_4.2.2    forcats_1.0.0     tools_4.2.2      \n [5] digest_0.6.31     lattice_0.20-45   jsonlite_1.8.4    evaluate_0.20    \n [9] lifecycle_1.0.3   tibble_3.1.8      checkmate_2.1.0   gtable_0.3.1     \n[13] pkgconfig_2.0.3   rlang_1.0.6       Matrix_1.5-3      cli_3.6.0        \n[17] yaml_2.3.7        xfun_0.37         fastmap_1.1.1     withr_2.5.0      \n[21] knitr_1.42        generics_0.1.3    vctrs_0.5.2       htmlwidgets_1.6.1\n[25] grid_4.2.2        tidyselect_1.2.0  glue_1.6.2        R6_2.5.1         \n[29] fansi_1.0.4       Rdpack_2.4        survival_3.5-3    rmarkdown_2.20   \n[33] tidyr_1.3.0       purrr_1.0.1       ggplot2_3.4.1     codetools_0.2-19 \n[37] splines_4.2.2     backports_1.4.1   scales_1.2.1      htmltools_0.5.4  \n[41] rbibutils_2.2.13  colorspace_2.1-0  utf8_1.2.3        munsell_0.5.0    \n[45] broom_1.0.3      \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R              [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/tables/lab-results/lbt05.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "tables/lab-results/lbt06.html",
    "href": "tables/lab-results/lbt06.html",
    "title": "LBT06",
    "section": "",
    "text": "Data Setup\nStandard Table for  Single Lab Test\nStandard Table for  Multiple Lab Tests\nTeal\nSession Info\n\n\n\n\nCodelibrary(scda)\nlibrary(tern)\nlibrary(dplyr)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadlb <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adlb\")\n\n# Ensure character variables are converted to factors and empty strings and NAs are explicit missing levels.\nadsl <- df_explicit_na(adsl)\nadlb <- df_explicit_na(adlb)\n# Please note that df_explict_na has a na_level argument defaulting to \"<Missing>\",\n# Please don't change the na_level to anything other than NA, empty string or the default \"<Missing>\".\n\nadlb_f <- adlb %>%\n  dplyr::filter(ABLFL != \"Y\") %>%\n  dplyr::filter(!(AVISIT %in% c(\"SCREENING\", \"BASELINE\"))) %>%\n  dplyr::mutate(AVISIT = droplevels(AVISIT)) %>%\n  var_relabel(AVISIT = \"Visit\")\n\nadlb_f_crp <- adlb_f %>% dplyr::filter(PARAMCD == \"CRP\")\n\n\n\n\n\nCode# Define the split function\nsplit_fun <- drop_split_levels\n\nlyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ARM\") %>%\n  split_rows_by(\"AVISIT\", split_fun = split_fun, label_pos = \"topleft\", split_label = obj_label(adlb_f_crp$AVISIT)) %>%\n  count_abnormal_by_baseline(\n    \"ANRIND\",\n    abnormal = c(Low = \"LOW\", High = \"HIGH\"),\n    .indent_mods = 4L\n  ) %>%\n  append_varlabels(adlb_f_crp, \"ANRIND\", indent = 1L) %>%\n  append_topleft(\"    Baseline Status\")\n\nresult <- build_table(\n  lyt = lyt,\n  df = adlb_f_crp,\n  alt_counts_df = adsl\n) %>%\n  trim_rows()\n\nresult\n\nVisit                                                                                  \n  Analysis Reference Range Indicator     A: Drug X        B: Placebo     C: Combination\n    Baseline Status                       (N=134)          (N=134)          (N=132)    \n———————————————————————————————————————————————————————————————————————————————————————\nWEEK 1 DAY 8                                                                           \n  Low                                                                                  \n            Not low baseline status    19/122 (15.6%)   11/125 (8.8%)      6/120 (5%)  \n            Low baseline status             0/12         1/9 (11.1%)      2/12 (16.7%) \n            Total                      19/134 (14.2%)    12/134 (9%)      8/132 (6.1%) \n  High                                                                                 \n            Not high baseline status   11/115 (9.6%)    17/115 (14.8%)   11/114 (9.6%) \n            High baseline status        1/19 (5.3%)      2/19 (10.5%)     1/18 (5.6%)  \n            Total                       12/134 (9%)     19/134 (14.2%)   12/132 (9.1%) \nWEEK 2 DAY 15                                                                          \n  Low                                                                                  \n            Not low baseline status    17/122 (13.9%)   11/125 (8.8%)    14/120 (11.7%)\n            Low baseline status         1/12 (8.3%)      1/9 (11.1%)      1/12 (8.3%)  \n            Total                      18/134 (13.4%)    12/134 (9%)     15/132 (11.4%)\n  High                                                                                 \n            Not high baseline status   10/115 (8.7%)    11/115 (9.6%)    17/114 (14.9%)\n            High baseline status            0/19         1/19 (5.3%)          0/18     \n            Total                      10/134 (7.5%)     12/134 (9%)     17/132 (12.9%)\nWEEK 3 DAY 22                                                                          \n  Low                                                                                  \n            Not low baseline status    13/122 (10.7%)    10/125 (8%)      12/120 (10%) \n            Low baseline status         2/12 (16.7%)     1/9 (11.1%)          0/12     \n            Total                      15/134 (11.2%)   11/134 (8.2%)    12/132 (9.1%) \n  High                                                                                 \n            Not high baseline status   11/115 (9.6%)      8/115 (7%)      4/114 (3.5%) \n            High baseline status        2/19 (10.5%)     2/19 (10.5%)         0/18     \n            Total                      13/134 (9.7%)    10/134 (7.5%)      4/132 (3%)  \nWEEK 4 DAY 29                                                                          \n  Low                                                                                  \n            Not low baseline status     8/122 (6.6%)    14/125 (11.2%)    12/120 (10%) \n            Low baseline status             0/12         1/9 (11.1%)          0/12     \n            Total                        8/134 (6%)     15/134 (11.2%)   12/132 (9.1%) \n  High                                                                                 \n            Not high baseline status   16/115 (13.9%)    9/115 (7.8%)    13/114 (11.4%)\n            High baseline status        1/19 (5.3%)      2/19 (10.5%)         0/18     \n            Total                      17/134 (12.7%)   11/134 (8.2%)    13/132 (9.8%) \nWEEK 5 DAY 36                                                                          \n  Low                                                                                  \n            Not low baseline status     11/122 (9%)      8/125 (6.4%)    11/120 (9.2%) \n            Low baseline status         2/12 (16.7%)         0/9          2/12 (16.7%) \n            Total                      13/134 (9.7%)      8/134 (6%)     13/132 (9.8%) \n  High                                                                                 \n            Not high baseline status   16/115 (13.9%)   11/115 (9.6%)     6/114 (5.3%) \n            High baseline status        2/19 (10.5%)     3/19 (15.8%)     1/18 (5.6%)  \n            Total                      18/134 (13.4%)   14/134 (10.4%)    7/132 (5.3%) \n\n\n\n\n\nCode# The following code generates one large table for multiple lab tests.\n# If separate tables are needed for each lab test per GDSR standard, use the code for \"single lab test\".\n\nlyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ARM\") %>%\n  split_rows_by(\"PARAM\", split_fun = split_fun, label_pos = \"topleft\", split_label = obj_label(adlb_f$PARAM)) %>%\n  split_rows_by(\"AVISIT\", split_fun = split_fun, label_pos = \"topleft\", split_label = obj_label(adlb_f$AVISIT)) %>%\n  count_abnormal_by_baseline(\n    \"ANRIND\",\n    abnormal = c(Low = \"LOW\", High = \"HIGH\"),\n    .indent_mods = 4L\n  ) %>%\n  append_varlabels(adlb_f, \"ANRIND\", indent = 2L) %>%\n  append_topleft(\"      Baseline Status\")\n\nresult <- build_table(\n  lyt = lyt,\n  df = adlb_f,\n  alt_counts_df = adsl\n) %>%\n  trim_rows()\n\nresult\n\nParameter                                                                                \n  Visit                                                                                  \n    Analysis Reference Range Indicator     A: Drug X        B: Placebo     C: Combination\n      Baseline Status                       (N=134)          (N=134)          (N=132)    \n—————————————————————————————————————————————————————————————————————————————————————————\nAlanine Aminotransferase Measurement                                                     \n  WEEK 1 DAY 8                                                                           \n    Low                                                                                  \n              Not low baseline status    10/124 (8.1%)     8/122 (6.6%)     6/117 (5.1%) \n              Low baseline status          2/10 (20%)          0/12             0/15     \n              Total                       12/134 (9%)       8/134 (6%)      6/132 (4.5%) \n    High                                                                                 \n              Not high baseline status   10/121 (8.3%)    11/118 (9.3%)    11/118 (9.3%) \n              High baseline status        1/13 (7.7%)      2/16 (12.5%)     1/14 (7.1%)  \n              Total                      11/134 (8.2%)    13/134 (9.7%)    12/132 (9.1%) \n  WEEK 2 DAY 15                                                                          \n    Low                                                                                  \n              Not low baseline status    13/124 (10.5%)    8/122 (6.6%)    13/117 (11.1%)\n              Low baseline status          2/10 (20%)          0/12             0/15     \n              Total                      15/134 (11.2%)     8/134 (6%)     13/132 (9.8%) \n    High                                                                                 \n              Not high baseline status    8/121 (6.6%)     13/118 (11%)    15/118 (12.7%)\n              High baseline status        1/13 (7.7%)      2/16 (12.5%)     1/14 (7.1%)  \n              Total                       9/134 (6.7%)    15/134 (11.2%)   16/132 (12.1%)\n  WEEK 3 DAY 22                                                                          \n    Low                                                                                  \n              Not low baseline status    12/124 (9.7%)    13/122 (10.7%)    6/117 (5.1%) \n              Low baseline status          1/10 (10%)      2/12 (16.7%)      3/15 (20%)  \n              Total                      13/134 (9.7%)    15/134 (11.2%)    9/132 (6.8%) \n    High                                                                                 \n              Not high baseline status   12/121 (9.9%)    16/118 (13.6%)   14/118 (11.9%)\n              High baseline status        1/13 (7.7%)      2/16 (12.5%)         0/14     \n              Total                      13/134 (9.7%)    18/134 (13.4%)   14/132 (10.6%)\n  WEEK 4 DAY 29                                                                          \n    Low                                                                                  \n              Not low baseline status    10/124 (8.1%)    13/122 (10.7%)   10/117 (8.5%) \n              Low baseline status             0/10         2/12 (16.7%)         0/15     \n              Total                      10/134 (7.5%)    15/134 (11.2%)   10/132 (7.6%) \n    High                                                                                 \n              Not high baseline status   12/121 (9.9%)     8/118 (6.8%)    18/118 (15.3%)\n              High baseline status        3/13 (23.1%)     2/16 (12.5%)     1/14 (7.1%)  \n              Total                      15/134 (11.2%)   10/134 (7.5%)    19/132 (14.4%)\n  WEEK 5 DAY 36                                                                          \n    Low                                                                                  \n              Not low baseline status    14/124 (11.3%)   15/122 (12.3%)   10/117 (8.5%) \n              Low baseline status          2/10 (20%)       3/12 (25%)      1/15 (6.7%)  \n              Total                      16/134 (11.9%)   18/134 (13.4%)   11/132 (8.3%) \n    High                                                                                 \n              Not high baseline status   16/121 (13.2%)    9/118 (7.6%)    10/118 (8.5%) \n              High baseline status        1/13 (7.7%)      2/16 (12.5%)         0/14     \n              Total                      17/134 (12.7%)   11/134 (8.2%)    10/132 (7.6%) \nC-Reactive Protein Measurement                                                           \n  WEEK 1 DAY 8                                                                           \n    Low                                                                                  \n              Not low baseline status    19/122 (15.6%)   11/125 (8.8%)      6/120 (5%)  \n              Low baseline status             0/12         1/9 (11.1%)      2/12 (16.7%) \n              Total                      19/134 (14.2%)    12/134 (9%)      8/132 (6.1%) \n    High                                                                                 \n              Not high baseline status   11/115 (9.6%)    17/115 (14.8%)   11/114 (9.6%) \n              High baseline status        1/19 (5.3%)      2/19 (10.5%)     1/18 (5.6%)  \n              Total                       12/134 (9%)     19/134 (14.2%)   12/132 (9.1%) \n  WEEK 2 DAY 15                                                                          \n    Low                                                                                  \n              Not low baseline status    17/122 (13.9%)   11/125 (8.8%)    14/120 (11.7%)\n              Low baseline status         1/12 (8.3%)      1/9 (11.1%)      1/12 (8.3%)  \n              Total                      18/134 (13.4%)    12/134 (9%)     15/132 (11.4%)\n    High                                                                                 \n              Not high baseline status   10/115 (8.7%)    11/115 (9.6%)    17/114 (14.9%)\n              High baseline status            0/19         1/19 (5.3%)          0/18     \n              Total                      10/134 (7.5%)     12/134 (9%)     17/132 (12.9%)\n  WEEK 3 DAY 22                                                                          \n    Low                                                                                  \n              Not low baseline status    13/122 (10.7%)    10/125 (8%)      12/120 (10%) \n              Low baseline status         2/12 (16.7%)     1/9 (11.1%)          0/12     \n              Total                      15/134 (11.2%)   11/134 (8.2%)    12/132 (9.1%) \n    High                                                                                 \n              Not high baseline status   11/115 (9.6%)      8/115 (7%)      4/114 (3.5%) \n              High baseline status        2/19 (10.5%)     2/19 (10.5%)         0/18     \n              Total                      13/134 (9.7%)    10/134 (7.5%)      4/132 (3%)  \n  WEEK 4 DAY 29                                                                          \n    Low                                                                                  \n              Not low baseline status     8/122 (6.6%)    14/125 (11.2%)    12/120 (10%) \n              Low baseline status             0/12         1/9 (11.1%)          0/12     \n              Total                        8/134 (6%)     15/134 (11.2%)   12/132 (9.1%) \n    High                                                                                 \n              Not high baseline status   16/115 (13.9%)    9/115 (7.8%)    13/114 (11.4%)\n              High baseline status        1/19 (5.3%)      2/19 (10.5%)         0/18     \n              Total                      17/134 (12.7%)   11/134 (8.2%)    13/132 (9.8%) \n  WEEK 5 DAY 36                                                                          \n    Low                                                                                  \n              Not low baseline status     11/122 (9%)      8/125 (6.4%)    11/120 (9.2%) \n              Low baseline status         2/12 (16.7%)         0/9          2/12 (16.7%) \n              Total                      13/134 (9.7%)      8/134 (6%)     13/132 (9.8%) \n    High                                                                                 \n              Not high baseline status   16/115 (13.9%)   11/115 (9.6%)     6/114 (5.3%) \n              High baseline status        2/19 (10.5%)     3/19 (15.8%)     1/18 (5.6%)  \n              Total                      18/134 (13.4%)   14/134 (10.4%)    7/132 (5.3%) \nImmunoglobulin A Measurement                                                             \n  WEEK 1 DAY 8                                                                           \n    Low                                                                                  \n              Not low baseline status     12/120 (10%)    14/119 (11.8%)    12/120 (10%) \n              Low baseline status         2/14 (14.3%)     1/15 (6.7%)      1/12 (8.3%)  \n              Total                      14/134 (10.4%)   15/134 (11.2%)   13/132 (9.8%) \n    High                                                                                 \n              Not high baseline status    7/119 (5.9%)     9/123 (7.3%)     8/119 (6.7%) \n              High baseline status         3/15 (20%)      2/11 (18.2%)     3/13 (23.1%) \n              Total                      10/134 (7.5%)    11/134 (8.2%)    11/132 (8.3%) \n  WEEK 2 DAY 15                                                                          \n    Low                                                                                  \n              Not low baseline status     8/120 (6.7%)    15/119 (12.6%)   15/120 (12.5%)\n              Low baseline status         1/14 (7.1%)       3/15 (20%)      1/12 (8.3%)  \n              Total                       9/134 (6.7%)    18/134 (13.4%)   16/132 (12.1%)\n    High                                                                                 \n              Not high baseline status   14/119 (11.8%)   11/123 (8.9%)    15/119 (12.6%)\n              High baseline status        1/15 (6.7%)          0/11             0/13     \n              Total                      15/134 (11.2%)   11/134 (8.2%)    15/132 (11.4%)\n  WEEK 3 DAY 22                                                                          \n    Low                                                                                  \n              Not low baseline status    16/120 (13.3%)    9/119 (7.6%)    13/120 (10.8%)\n              Low baseline status             0/14             0/15          3/12 (25%)  \n              Total                      16/134 (11.9%)    9/134 (6.7%)    16/132 (12.1%)\n    High                                                                                 \n              Not high baseline status   12/119 (10.1%)   12/123 (9.8%)    15/119 (12.6%)\n              High baseline status            0/15         1/11 (9.1%)          0/13     \n              Total                       12/134 (9%)     13/134 (9.7%)    15/132 (11.4%)\n  WEEK 4 DAY 29                                                                          \n    Low                                                                                  \n              Not low baseline status    11/120 (9.2%)     19/119 (16%)    13/120 (10.8%)\n              Low baseline status             0/14             0/15             0/12     \n              Total                      11/134 (8.2%)    19/134 (14.2%)   13/132 (9.8%) \n    High                                                                                 \n              Not high baseline status   18/119 (15.1%)   17/123 (13.8%)    8/119 (6.7%) \n              High baseline status            0/15         3/11 (27.3%)     2/13 (15.4%) \n              Total                      18/134 (13.4%)   20/134 (14.9%)   10/132 (7.6%) \n  WEEK 5 DAY 36                                                                          \n    Low                                                                                  \n              Not low baseline status     12/120 (10%)    16/119 (13.4%)    12/120 (10%) \n              Low baseline status             0/14             0/15         1/12 (8.3%)  \n              Total                       12/134 (9%)     16/134 (11.9%)   13/132 (9.8%) \n    High                                                                                 \n              Not high baseline status   16/119 (13.4%)   13/123 (10.6%)    8/119 (6.7%) \n              High baseline status            0/15         1/11 (9.1%)      1/13 (7.7%)  \n              Total                      16/134 (11.9%)   14/134 (10.4%)    9/132 (6.8%) \n\n\n\n\n\nCode# In progress\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n[1] dplyr_1.1.0      tern_0.7.10.9056 rtables_0.6.0.1  formatters_0.4.0\n[5] magrittr_2.0.3   scda_0.1.5.9009 \n\nloaded via a namespace (and not attached):\n [1] compiler_4.2.2    pillar_1.8.1      forcats_1.0.0     tools_4.2.2      \n [5] digest_0.6.31     lattice_0.20-45   jsonlite_1.8.4    evaluate_0.20    \n [9] lifecycle_1.0.3   tibble_3.1.8      gtable_0.3.1      checkmate_2.1.0  \n[13] pkgconfig_2.0.3   rlang_1.0.6       Matrix_1.5-3      cli_3.6.0        \n[17] yaml_2.3.7        xfun_0.37         fastmap_1.1.1     withr_2.5.0      \n[21] knitr_1.42        generics_0.1.3    vctrs_0.5.2       htmlwidgets_1.6.1\n[25] grid_4.2.2        tidyselect_1.2.0  glue_1.6.2        R6_2.5.1         \n[29] fansi_1.0.4       Rdpack_2.4        survival_3.5-3    rmarkdown_2.20   \n[33] tidyr_1.3.0       purrr_1.0.1       ggplot2_3.4.1     codetools_0.2-19 \n[37] splines_4.2.2     backports_1.4.1   scales_1.2.1      htmltools_0.5.4  \n[41] rbibutils_2.2.13  colorspace_2.1-0  utf8_1.2.3        munsell_0.5.0    \n[45] broom_1.0.3      \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R              [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/tables/lab-results/lbt06.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "tables/lab-results/lbt07.html",
    "href": "tables/lab-results/lbt07.html",
    "title": "LBT07",
    "section": "",
    "text": "Data Setup\nStandard Table\nTeal\nSession Info\n\n\n\n\nCodelibrary(scda)\nlibrary(tern)\nlibrary(dplyr)\nlibrary(forcats)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadlb <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adlb\")\n\nadlb_labels <- var_labels(adlb)\n\n# Ensure character variables are converted to factors and empty strings and NAs are explicit missing levels.\nadsl <- df_explicit_na(adsl)\nadlb <- df_explicit_na(adlb)\n\n# Select worst post-baseline records.\nadlb_f <- adlb %>%\n  filter(!AVISIT %in% c(\"SCREENING\", \"BASELINE\")) %>%\n  filter(ATOXGR != \"<Missing>\") %>%\n  filter(ONTRTFL == \"Y\") %>%\n  filter(WGRLOFL == \"Y\" | WGRHIFL == \"Y\") %>%\n  droplevels()\n\nvar_labels(adlb_f) <- adlb_labels\n\n# Derive GRADE_DIR and GRADE_ANL to use in layout from ATOXGR\nadlb_f <- adlb_f %>%\n  mutate(\n    GRADE_DIR = factor(\n      case_when(\n        ATOXGR %in% c(\"-1\", \"-2\", \"-3\", \"-4\") ~ \"LOW\",\n        ATOXGR == \"0\" ~ \"ZERO\",\n        ATOXGR %in% c(\"1\", \"2\", \"3\", \"4\") ~ \"HIGH\"\n      ),\n      levels = c(\"LOW\", \"ZERO\", \"HIGH\")\n    ),\n    GRADE_ANL = fct_relevel(\n      fct_recode(ATOXGR,\n        `1` = \"-1\", `2` = \"-2\", `3` = \"-3\", `4` = \"-4\"\n      ),\n      c(\"0\", \"1\", \"2\", \"3\", \"4\")\n    )\n  ) %>%\n  var_relabel(\n    GRADE_DIR = \"Direction of Abnormality\",\n    GRADE_ANL = \"Analysis Grade\"\n  )\n\n# Construct analysis map\nmap <- unique(adlb_f[adlb_f$GRADE_DIR != \"ZERO\", c(\"PARAM\", \"GRADE_DIR\", \"GRADE_ANL\")]) %>%\n  lapply(as.character) %>%\n  as.data.frame() %>%\n  arrange(PARAM, desc(GRADE_DIR), GRADE_ANL)\n\n\n\n\n\nCodelyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ARMCD\") %>%\n  split_rows_by(\n    \"PARAM\",\n    label_pos = \"topleft\",\n    split_label = obj_label(adlb_f$PARAM)\n  ) %>%\n  summarize_num_patients(\n    var = \"USUBJID\",\n    required = \"ATOXGR\",\n    .stats = \"unique_count\"\n  ) %>%\n  split_rows_by(\n    \"GRADE_DIR\",\n    label_pos = \"topleft\",\n    split_label = obj_label(adlb_f$GRADE_DIR),\n    split_fun = trim_levels_to_map(map)\n  ) %>%\n  count_abnormal_by_worst_grade(\n    var = \"GRADE_ANL\",\n    variables = list(id = \"USUBJID\", param = \"PARAM\", grade_dir = \"GRADE_DIR\"),\n    .indent_mods = 4L\n  ) %>%\n  append_topleft(\"    Highest NCI CTCAE Grade\")\n\nresult <- build_table(\n  lyt = lyt,\n  df = adlb_f,\n  alt_counts_df = adsl\n)\n\nresult\n\nParameter                                                                      \n  Direction of Abnormality                   ARM A        ARM B        ARM C   \n    Highest NCI CTCAE Grade                 (N=134)      (N=134)      (N=132)  \n———————————————————————————————————————————————————————————————————————————————\nAlanine Aminotransferase Measurement (n)      134          133          132    \n  LOW                                                                          \n            1                              14 (10.4%)   15 (11.3%)   10 (7.6%) \n            2                              13 (9.7%)    18 (13.5%)   11 (8.3%) \n            3                              20 (14.9%)    12 (9%)     10 (7.6%) \n            4                               7 (5.2%)      8 (6%)     10 (7.6%) \n            Any                            54 (40.3%)   53 (39.8%)   41 (31.1%)\n  HIGH                                                                         \n            1                              18 (13.4%)    16 (12%)    18 (13.6%)\n            2                              15 (11.2%)   13 (9.8%)    17 (12.9%)\n            3                              10 (7.5%)     16 (12%)    13 (9.8%) \n            4                               12 (9%)     11 (8.3%)    13 (9.8%) \n            Any                             55 (41%)    56 (42.1%)   61 (46.2%)\nC-Reactive Protein Measurement (n)            134          134          132    \n  LOW                                                                          \n            1                              16 (11.9%)   19 (14.2%)   15 (11.4%)\n            2                              21 (15.7%)   13 (9.7%)    16 (12.1%)\n            3                               12 (9%)      9 (6.7%)    18 (13.6%)\n            4                              11 (8.2%)     7 (5.2%)     5 (3.8%) \n            Any                            60 (44.8%)   48 (35.8%)   54 (40.9%)\n  HIGH                                                                         \n            1                              17 (12.7%)   15 (11.2%)    9 (6.8%) \n            2                              15 (11.2%)   16 (11.9%)   13 (9.8%) \n            3                              16 (11.9%)    12 (9%)     14 (10.6%)\n            4                               12 (9%)      12 (9%)     10 (7.6%) \n            Any                            60 (44.8%)    55 (41%)    46 (34.8%)\nImmunoglobulin A Measurement (n)              133          133          132    \n  LOW                                                                          \n            1                              17 (12.8%)   23 (17.3%)   17 (12.9%)\n            2                               12 (9%)     15 (11.3%)   14 (10.6%)\n            3                              15 (11.3%)   11 (8.3%)    14 (10.6%)\n            4                              10 (7.5%)     16 (12%)    10 (7.6%) \n            Any                            54 (40.6%)   65 (48.9%)   55 (41.7%)\n  HIGH                                                                         \n            1                              25 (18.8%)   14 (10.5%)   13 (9.8%) \n            2                              14 (10.5%)   19 (14.3%)   16 (12.1%)\n            3                               12 (9%)      12 (9%)     17 (12.9%)\n            4                              11 (8.3%)    13 (9.8%)      4 (3%)  \n            Any                            62 (46.6%)   58 (43.6%)   50 (37.9%)\n\n\n\n\n\nCodelibrary(teal.modules.clinical)\nlibrary(scda)\nlibrary(dplyr)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadlb <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adlb\") %>%\n  filter(!AVISIT %in% c(\"SCREENING\", \"BASELINE\"))\n\napp <- init(\n  data = cdisc_data(\n    cdisc_dataset(\"ADSL\", adsl, code = 'ADSL <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")'),\n    cdisc_dataset(\"ADLB\", adlb,\n      code = 'ADLB <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adlb\") %>%\n    filter(!AVISIT %in% c(\"SCREENING\", \"BASELINE\"))'\n    ),\n    check = TRUE\n  ),\n  modules = modules(\n    tm_t_abnormality_by_worst_grade(\n      label = \"Laboratory Test Results with Highest Grade Post-Baseline\",\n      dataname = \"ADLB\",\n      arm_var = choices_selected(\n        choices = variable_choices(adsl, subset = c(\"ARM\", \"ARMCD\")),\n        selected = \"ARM\"\n      ),\n      paramcd = choices_selected(\n        choices = value_choices(adlb, \"PARAMCD\", \"PARAM\"),\n        selected = c(\"ALT\", \"CRP\", \"IGA\")\n      ),\n      add_total = FALSE\n    )\n  ),\n  filter = (\n    list(\n      ADSL = list(SAFFL = \"Y\"),\n      ADLB = list(ONTRTFL = \"Y\")\n    )\n  )\n)\n\n[INFO] 2023-03-10 05:43:56.3002 pid:6764 token:[] teal.modules.clinical Initializing tm_t_abnormality_by_worst_grade\n\nCodeshinyApp(app$ui, app$server)\n\n\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n [1] teal.modules.clinical_0.8.14.9026 teal_0.12.0.9023                 \n [3] teal.transform_0.2.0.9011         teal.data_0.1.2.9013             \n [5] shiny_1.7.4                       forcats_1.0.0                    \n [7] dplyr_1.1.0                       tern_0.7.10.9056                 \n [9] rtables_0.6.0.1                   formatters_0.4.0                 \n[11] magrittr_2.0.3                    scda_0.1.5.9009                  \n\nloaded via a namespace (and not attached):\n [1] sass_0.4.5               tidyr_1.3.0              jsonlite_1.8.4          \n [4] splines_4.2.2            R.utils_2.12.2           bslib_0.4.2             \n [7] teal.slice_0.2.0.9026    Rdpack_2.4               assertthat_0.2.1        \n[10] teal.code_0.3.0.9001     tern.gee_0.1.0.9002      yaml_2.3.7              \n[13] pillar_1.8.1             backports_1.4.1          lattice_0.20-45         \n[16] glue_1.6.2               teal.widgets_0.2.0.9024  digest_0.6.31           \n[19] promises_1.2.0.1         rbibutils_2.2.13         checkmate_2.1.0         \n[22] colorspace_2.1-0         R.oo_1.25.0              htmltools_0.5.4         \n[25] httpuv_1.6.9             Matrix_1.5-3             pkgconfig_2.0.3         \n[28] broom_1.0.3              logger_0.2.2             purrr_1.0.1             \n[31] xtable_1.8-4             mvtnorm_1.1-3            webshot_0.5.4           \n[34] scales_1.2.1             processx_3.8.0           fontawesome_0.5.0       \n[37] later_1.3.0              emmeans_1.8.4-1          tibble_3.1.8            \n[40] styler_1.9.1             generics_0.1.3           ggplot2_3.4.1           \n[43] ellipsis_0.3.2           shinyvalidate_0.1.2      cachem_1.0.7            \n[46] withr_2.5.0              shinyjs_2.1.0            geepack_1.3.9           \n[49] cli_3.6.0                survival_3.5-3           mime_0.12               \n[52] memoise_2.0.1            ps_1.7.2                 estimability_1.4.1      \n[55] evaluate_0.20            R.methodsS3_1.8.2        fansi_1.0.4             \n[58] R.cache_0.16.0           nlme_3.1-162             MASS_7.3-58.3           \n[61] teal.reporter_0.1.1.9013 tools_4.2.2              lifecycle_1.0.3         \n[64] munsell_0.5.0            callr_3.7.3              compiler_4.2.2          \n[67] jquerylib_0.1.4          rlang_1.0.6              grid_4.2.2              \n[70] htmlwidgets_1.6.1        rmarkdown_2.20           shinyWidgets_0.7.6      \n[73] gtable_0.3.1             codetools_0.2-19         teal.logger_0.1.1.9004  \n[76] R6_2.5.1                 knitr_1.42               fastmap_1.1.1           \n[79] utf8_1.2.3               Rcpp_1.0.10              vctrs_0.5.2             \n[82] tidyselect_1.2.0         xfun_0.37                coda_0.19-4             \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R                       [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/tables/lab-results/lbt07.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "tables/lab-results/lbt10.html",
    "href": "tables/lab-results/lbt10.html",
    "title": "LBT10",
    "section": "",
    "text": "Data Setup\nStandard Table\nTable Selecting Sections\nTeal\nSession Info\n\n\n\n\nCodelibrary(scda)\nlibrary(dplyr)\nlibrary(tern)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadhy <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adhy\")\n\nadhy_liver <- adhy %>%\n  filter(PARAMCD %in% c(\n    \"BL2AL2CU\", \"BL2AS2CU\", \"BG2AL2CU\", \"BG2AS2CU\", \"B2A2L2CU\", \"B2A2S2CU\", \"B2A5L2CU\", \"B2A5S2CU\"\n  )) %>%\n  mutate(PARAMCAT = case_when(\n    PARAMCD %in% c(\"BL2AL2CU\", \"BL2AS2CU\") ~ \"Total Bilirubin <= 2xULN\",\n    PARAMCD %in% c(\"BG2AL2CU\", \"BG2AS2CU\") ~ \"Total Bilirubin > 2xULN\",\n    PARAMCD %in% c(\"B2A2L2CU\", \"B2A2S2CU\") ~ \"Total Bilirubin > 2xULN and Alkaline Phosphatase <= 2xULN\",\n    PARAMCD %in% c(\"B2A5L2CU\", \"B2A5S2CU\") ~ \"Total Bilirubin > 2xULN and Alkaline Phosphatase <= 5xULN\"\n  )) %>%\n  mutate(AVALC_FORMAT = case_when(\n    PARAMCD %in% c(\"BL2AL2CU\", \"BG2AL2CU\", \"B2A2L2CU\", \"B2A5L2CU\") & AVALC == \"Y\" ~ \"ALT >3xULN at 2 Visits\",\n    PARAMCD %in% c(\"BL2AS2CU\", \"BG2AS2CU\", \"B2A2S2CU\", \"B2A5S2CU\") & AVALC == \"Y\" ~ \"AST >3xULN at 2 Visits\",\n    TRUE ~ \"Criteria not met\"\n  ))\n\n# Ensure character variables are converted to factors and empty strings and NAs are explicit missing levels.\nadsl <- df_explicit_na(adsl)\nanl <- df_explicit_na(adhy_liver)\n\n\n\n\n\nCodetbl <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ACTARMCD\") %>%\n  split_rows_by(\"PARAMCAT\") %>%\n  split_rows_by(\"PARAM\", split_fun = drop_split_levels, child_labels = \"hidden\") %>%\n  count_occurrences(\n    vars = \"AVALC_FORMAT\",\n    .stats = c(\"fraction\"),\n    denom = \"n\",\n    drop = TRUE\n  ) %>%\n  build_table(anl, alt_counts_df = adsl)\n\ncriteria_fun <- function(tr) {\n  row_label <- obj_label(tr)\n  ifelse(row_label == \"Criteria not met\", TRUE, FALSE)\n}\n\nresult <- tbl %>% trim_rows(criteria = criteria_fun)\nresult\n\n                               ARM A            ARM B            ARM C     \n                              (N=134)          (N=134)          (N=132)    \n———————————————————————————————————————————————————————————————————————————\nTotal Bilirubin <= 2xULN                                                   \n  ALT >3xULN at 2 Visits   20/134 (14.9%)   21/134 (15.7%)   20/132 (15.2%)\n  AST >3xULN at 2 Visits   30/134 (22.4%)   25/134 (18.7%)   27/132 (20.5%)\nTotal Bilirubin > 2xULN                                                    \n  ALT >3xULN at 2 Visits   24/134 (17.9%)   32/134 (23.9%)   24/132 (18.2%)\n  AST >3xULN at 2 Visits   33/134 (24.6%)   29/134 (21.6%)   25/132 (18.9%)\n\n\n\n\n\nCodetbl2 <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ACTARMCD\") %>%\n  split_rows_by(\"PARAMCAT\", split_fun = remove_split_levels(\"Total Bilirubin > 2xULN\")) %>%\n  split_rows_by(\"PARAM\", split_fun = drop_split_levels, child_labels = \"hidden\") %>%\n  count_occurrences(\n    vars = \"AVALC_FORMAT\",\n    .stats = c(\"fraction\"),\n    denom = \"n\",\n    drop = TRUE\n  ) %>%\n  build_table(anl, alt_counts_df = adsl)\n\ncriteria_fun <- function(tr) {\n  row_label <- obj_label(tr)\n  ifelse(row_label == \"Criteria not met\", TRUE, FALSE)\n}\n\nresult <- tbl2 %>% trim_rows(criteria = criteria_fun)\nresult\n\n                               ARM A            ARM B            ARM C     \n                              (N=134)          (N=134)          (N=132)    \n———————————————————————————————————————————————————————————————————————————\nTotal Bilirubin <= 2xULN                                                   \n  ALT >3xULN at 2 Visits   20/134 (14.9%)   21/134 (15.7%)   20/132 (15.2%)\n  AST >3xULN at 2 Visits   30/134 (22.4%)   25/134 (18.7%)   27/132 (20.5%)\n\n\n\n\n\nCode# In progress\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n[1] tern_0.7.10.9056 rtables_0.6.0.1  formatters_0.4.0 magrittr_2.0.3  \n[5] dplyr_1.1.0      scda_0.1.5.9009 \n\nloaded via a namespace (and not attached):\n [1] pillar_1.8.1      compiler_4.2.2    forcats_1.0.0     tools_4.2.2      \n [5] digest_0.6.31     lattice_0.20-45   jsonlite_1.8.4    evaluate_0.20    \n [9] lifecycle_1.0.3   tibble_3.1.8      checkmate_2.1.0   gtable_0.3.1     \n[13] pkgconfig_2.0.3   rlang_1.0.6       Matrix_1.5-3      cli_3.6.0        \n[17] yaml_2.3.7        xfun_0.37         fastmap_1.1.1     withr_2.5.0      \n[21] knitr_1.42        generics_0.1.3    vctrs_0.5.2       htmlwidgets_1.6.1\n[25] grid_4.2.2        tidyselect_1.2.0  glue_1.6.2        R6_2.5.1         \n[29] fansi_1.0.4       Rdpack_2.4        survival_3.5-3    rmarkdown_2.20   \n[33] tidyr_1.3.0       purrr_1.0.1       ggplot2_3.4.1     codetools_0.2-19 \n[37] splines_4.2.2     backports_1.4.1   scales_1.2.1      htmltools_0.5.4  \n[41] rbibutils_2.2.13  colorspace_2.1-0  utf8_1.2.3        munsell_0.5.0    \n[45] broom_1.0.3      \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R              [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/tables/lab-results/lbt10.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "tables/lab-results/lbt15.html",
    "href": "tables/lab-results/lbt15.html",
    "title": "LBT15",
    "section": "",
    "text": "Data Setup\nStandard Table\nTable Modifying Cut Point\nTeal\nSession Info\n\n\n\nBecause the scda dataset adlb doesn’t have the PARCAT1 variable, this variable is created from LBCAT in pre-processing.\n\nCodelibrary(scda)\nlibrary(tern)\nlibrary(dplyr)\nlibrary(forcats)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadlb <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adlb\")\n\nadlb <- adlb %>%\n  mutate(\n    BTOXGR = case_when(\n      as.character(BTOXGR) == \"\" ~ \"0\",\n      TRUE ~ as.character(BTOXGR)\n    )\n  ) %>%\n  filter(ATOXGR %in% as.character(c(-4:4))) %>%\n  filter(BTOXGR %in% as.character(c(-4:4))) %>%\n  mutate(\n    BTOXGR = factor(BTOXGR, levels = c(-4:4)),\n    ATOXGR = factor(ATOXGR, levels = c(-4:4)),\n    PARCAT1 = LBCAT\n  )\n\nadlb <- adlb %>%\n  mutate(\n    ATOXGR_CAT = fct_collapse(ATOXGR,\n      \"LOW\" = c(\"-3\", \"-4\"),\n      \"MODERATE/NORMAL\" = c(\"-2\", \"-1\", \"0\", \"1\", \"2\"),\n      \"HIGH\" = c(\"3\", \"4\")\n    ),\n    BTOXGR_CAT = fct_collapse(BTOXGR,\n      \"LOW\" = c(\"-3\", \"-4\"),\n      \"MODERATE/NORMAL\" = c(\"-2\", \"-1\", \"0\", \"1\", \"2\"),\n      \"HIGH\" = c(\"3\", \"4\")\n    )\n  ) %>%\n  filter(ONTRTFL == \"Y\")\n\nadlb_alt_cut <- adlb %>%\n  mutate(\n    ATOXGR_CAT = fct_collapse(ATOXGR,\n      \"LOW\" = c(\"-2\", \"-3\", \"-4\"),\n      \"MODERATE/NORMAL\" = c(\"-1\", \"0\", \"1\"),\n      \"HIGH\" = c(\"2\", \"3\", \"4\")\n    ),\n    BTOXGR_CAT = fct_collapse(BTOXGR,\n      \"LOW\" = c(\"-2\", \"-3\", \"-4\"),\n      \"MODERATE/NORMAL\" = c(\"-1\", \"0\", \"1\"),\n      \"HIGH\" = c(\"2\", \"3\", \"4\")\n    )\n  ) %>%\n  filter(ONTRTFL == \"Y\")\n\nadlb <- adlb %>% var_relabel(\n  PARCAT1 = \"Category for Lab Test\",\n  PARAM = \"Parameter\"\n)\n\n\n\n\n\nCode# Argument exclude_base_abn must be TRUE to include patients with normal or abnormal in the opposite direction in the denom\n# So for \"High\" direction, subjects with baseline grade 3-4 are not in the denom.\nlyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(var = \"ARM\") %>%\n  add_overall_col(\"All Patients\") %>%\n  split_rows_by(\"PARCAT1\", split_fun = drop_split_levels, label_pos = \"topleft\", split_label = obj_label(adlb$PARCAT1)) %>%\n  split_rows_by(\"PARAM\", split_fun = drop_split_levels, label_pos = \"topleft\", split_label = obj_label(adlb$PARAM)) %>%\n  count_abnormal(\n    var = \"ATOXGR_CAT\",\n    abnormal = list(low = \"LOW\", high = \"HIGH\"),\n    variables = list(id = \"USUBJID\", baseline = \"BTOXGR_CAT\"),\n    exclude_base_abn = TRUE,\n    .indent_mods = 4L\n  ) %>%\n  append_topleft(\"            Direction of Abnormality\")\n\nresult <- build_table(lyt, adlb, alt_counts_df = adsl)\nresult\n\nCategory for Lab Test                                                                                     \n  Parameter                                A: Drug X        B: Placebo     C: Combination    All Patients \n            Direction of Abnormality        (N=134)          (N=134)          (N=132)          (N=400)    \n——————————————————————————————————————————————————————————————————————————————————————————————————————————\nCHEMISTRY                                                                                                 \n  Alanine Aminotransferase Measurement                                                                    \n            low                          30/129 (23.3%)   22/129 (17.1%)   26/128 (20.3%)   78/386 (20.2%)\n            high                         26/129 (20.2%)   30/126 (23.8%)   31/125 (24.8%)   87/380 (22.9%)\n  C-Reactive Protein Measurement                                                                          \n            low                          25/129 (19.4%)   25/131 (19.1%)   28/126 (22.2%)   78/386 (20.2%)\n            high                         31/126 (24.6%)   24/125 (19.2%)    31/124 (25%)    86/375 (22.9%)\nIMMUNOLOGY                                                                                                \n  Immunoglobulin A Measurement                                                                            \n            low                           26/130 (20%)    30/128 (23.4%)    25/125 (20%)    81/383 (21.1%)\n            high                         24/125 (19.2%)   27/131 (20.6%)   25/128 (19.5%)   76/384 (19.8%)\n\n\n\n\n\nCoderesult <- build_table(lyt, adlb_alt_cut, alt_counts_df = adsl)\nresult\n\nCategory for Lab Test                                                                                      \n  Parameter                                A: Drug X        B: Placebo     C: Combination    All Patients  \n            Direction of Abnormality        (N=134)          (N=134)          (N=132)           (N=400)    \n———————————————————————————————————————————————————————————————————————————————————————————————————————————\nCHEMISTRY                                                                                                  \n  Alanine Aminotransferase Measurement                                                                     \n            low                          46/127 (36.2%)   40/128 (31.2%)   38/124 (30.6%)   124/379 (32.7%)\n            high                         43/125 (34.4%)   44/122 (36.1%)   48/121 (39.7%)   135/368 (36.7%)\n  C-Reactive Protein Measurement                                                                           \n            low                          50/124 (40.3%)   38/130 (29.2%)   44/125 (35.2%)   132/379 (34.8%)\n            high                         43/120 (35.8%)   41/120 (34.2%)   46/119 (38.7%)   130/359 (36.2%)\nIMMUNOLOGY                                                                                                 \n  Immunoglobulin A Measurement                                                                             \n            low                          40/128 (31.2%)   46/127 (36.2%)   42/123 (34.1%)   128/378 (33.9%)\n            high                         38/121 (31.4%)   49/127 (38.6%)   39/125 (31.2%)   126/373 (33.8%)\n\n\n\n\nThe current module tm_t_abnormality is only displaying rows that are not all-zero, so the result could be a little different from static output where all-zero rows can be shown.\n\nCodelibrary(teal.modules.clinical)\nlibrary(forcats)\nlibrary(scda)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadlb <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adlb\") %>%\n  mutate(\n    BTOXGR = case_when(\n      as.character(BTOXGR) == \"\" ~ \"0\",\n      TRUE ~ as.character(BTOXGR)\n    )\n  ) %>%\n  filter(ATOXGR %in% as.character(c(-4:4))) %>%\n  filter(BTOXGR %in% as.character(c(-4:4))) %>%\n  mutate(\n    BTOXGR = factor(BTOXGR, levels = c(-4:4)),\n    ATOXGR = factor(ATOXGR, levels = c(-4:4))\n  ) %>%\n  mutate(\n    ATOXGR_CAT = fct_collapse(ATOXGR,\n      \"LOW\" = c(\"-3\", \"-4\"),\n      \"MODERATE/NORMAL\" = c(\"-2\", \"-1\", \"0\", \"1\", \"2\"),\n      \"HIGH\" = c(\"3\", \"4\")\n    ),\n    BTOXGR_CAT = fct_collapse(BTOXGR,\n      \"LOW\" = c(\"-3\", \"-4\"),\n      \"MODERATE/NORMAL\" = c(\"-2\", \"-1\", \"0\", \"1\", \"2\"),\n      \"HIGH\" = c(\"3\", \"4\")\n    )\n  ) %>%\n  filter(ONTRTFL == \"Y\") %>%\n  var_relabel(ATOXGR_CAT = \"Direction of Abnormality\")\n\napp <- init(\n  data = cdisc_data(\n    cdisc_dataset(\"ADSL\", adsl, code = 'ADSL <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")'),\n    cdisc_dataset(\"ADLB\", adlb, code = '\n                  ADLB <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adlb\") %>%\n                    mutate(\n                      BTOXGR = case_when(\n                        as.character(BTOXGR) == \"\" ~ \"0\",\n                        TRUE ~ as.character(BTOXGR)\n                      )\n                    ) %>%\n                    filter(ATOXGR %in% as.character(c(-4:4))) %>%\n                    filter(BTOXGR %in% as.character(c(-4:4))) %>%\n                    mutate(\n                      BTOXGR = factor(BTOXGR, levels = c(-4:4)),\n                      ATOXGR = factor(ATOXGR, levels = c(-4:4))\n                    )%>%\n                    mutate(\n                      ATOXGR_CAT = fct_collapse(ATOXGR,\n                                                \"LOW\" = c(\"-3\", \"-4\"),\n                                                \"MODERATE/NORMAL\" = c(\"-2\", \"-1\", \"0\", \"1\", \"2\"),\n                                                \"HIGH\" = c(\"3\", \"4\")\n                      ),\n                      BTOXGR_CAT = fct_collapse(BTOXGR,\n                                                \"LOW\" = c(\"-3\", \"-4\"),\n                                                \"MODERATE/NORMAL\" = c(\"-2\", \"-1\", \"0\", \"1\", \"2\"),\n                                                \"HIGH\" = c(\"3\", \"4\")\n                      )\n                    ) %>%\n                    filter(ONTRTFL == \"Y\") %>%\n                    var_relabel(ATOXGR_CAT = \"Direction of Abnormality\")\n                '),\n    check = TRUE\n  ),\n  modules = modules(\n    tm_t_abnormality(\n      label = \"Abnormality Table\",\n      dataname = \"ADLB\",\n      arm_var = choices_selected(\n        choices = variable_choices(adsl, subset = c(\"ARM\", \"ARMCD\")),\n        selected = \"ARM\"\n      ),\n      by_vars = choices_selected(\n        choices = variable_choices(adlb, subset = c(\"PARAM\")),\n        selected = c(\"PARAM\"),\n        keep_order = TRUE\n      ),\n      grade = choices_selected(\n        choices = variable_choices(adlb, subset = \"ATOXGR_CAT\"),\n        selected = \"ATOXGR_CAT\",\n        fixed = TRUE\n      ),\n      baseline_var = choices_selected(\n        choices = variable_choices(adlb, subset = \"BTOXGR_CAT\"),\n        selected = \"BTOXGR_CAT\",\n        fixed = TRUE\n      ),\n      abnormal = list(low = \"LOW\", high = \"HIGH\"),\n      exclude_base_abn = TRUE\n    )\n  )\n)\n\n[INFO] 2023-03-10 05:44:36.1914 pid:6883 token:[] teal.modules.clinical Initializing tm_t_abnormality\n\nCodeshinyApp(app$ui, app$server)\n\n\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n [1] teal.modules.clinical_0.8.14.9026 teal_0.12.0.9023                 \n [3] teal.transform_0.2.0.9011         teal.data_0.1.2.9013             \n [5] shiny_1.7.4                       forcats_1.0.0                    \n [7] dplyr_1.1.0                       tern_0.7.10.9056                 \n [9] rtables_0.6.0.1                   formatters_0.4.0                 \n[11] magrittr_2.0.3                    scda_0.1.5.9009                  \n\nloaded via a namespace (and not attached):\n [1] sass_0.4.5               tidyr_1.3.0              jsonlite_1.8.4          \n [4] splines_4.2.2            R.utils_2.12.2           bslib_0.4.2             \n [7] teal.slice_0.2.0.9026    Rdpack_2.4               assertthat_0.2.1        \n[10] teal.code_0.3.0.9001     tern.gee_0.1.0.9002      yaml_2.3.7              \n[13] pillar_1.8.1             backports_1.4.1          lattice_0.20-45         \n[16] glue_1.6.2               teal.widgets_0.2.0.9024  digest_0.6.31           \n[19] promises_1.2.0.1         rbibutils_2.2.13         checkmate_2.1.0         \n[22] colorspace_2.1-0         R.oo_1.25.0              htmltools_0.5.4         \n[25] httpuv_1.6.9             Matrix_1.5-3             pkgconfig_2.0.3         \n[28] broom_1.0.3              logger_0.2.2             purrr_1.0.1             \n[31] xtable_1.8-4             mvtnorm_1.1-3            webshot_0.5.4           \n[34] scales_1.2.1             processx_3.8.0           fontawesome_0.5.0       \n[37] later_1.3.0              emmeans_1.8.4-1          tibble_3.1.8            \n[40] styler_1.9.1             generics_0.1.3           ggplot2_3.4.1           \n[43] ellipsis_0.3.2           shinyvalidate_0.1.2      cachem_1.0.7            \n[46] withr_2.5.0              shinyjs_2.1.0            geepack_1.3.9           \n[49] cli_3.6.0                survival_3.5-3           mime_0.12               \n[52] memoise_2.0.1            ps_1.7.2                 estimability_1.4.1      \n[55] evaluate_0.20            R.methodsS3_1.8.2        fansi_1.0.4             \n[58] R.cache_0.16.0           nlme_3.1-162             MASS_7.3-58.3           \n[61] teal.reporter_0.1.1.9013 tools_4.2.2              lifecycle_1.0.3         \n[64] munsell_0.5.0            callr_3.7.3              compiler_4.2.2          \n[67] jquerylib_0.1.4          rlang_1.0.6              grid_4.2.2              \n[70] htmlwidgets_1.6.1        rmarkdown_2.20           shinyWidgets_0.7.6      \n[73] gtable_0.3.1             codetools_0.2-19         teal.logger_0.1.1.9004  \n[76] R6_2.5.1                 knitr_1.42               fastmap_1.1.1           \n[79] utf8_1.2.3               Rcpp_1.0.10              vctrs_0.5.2             \n[82] tidyselect_1.2.0         xfun_0.37                coda_0.19-4             \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R                       [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/tables/lab-results/lbt15.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "tables/lab-results/lbt12.html",
    "href": "tables/lab-results/lbt12.html",
    "title": "LBT12",
    "section": "",
    "text": "Data Setup\nStandard Table\nTeal\nSession Info\n\n\n\n\nCodelibrary(scda)\nlibrary(dplyr)\nlibrary(tern)\n\nadhy <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adhy\")\n\nanl <- adhy\nanl$APERIODC <- as.factor(anl$APERIODC) # to ensure the table is built even if there is no patients after filtering\nanl$ACTARM <- as.factor(anl$ACTARM) # to ensure the table is built even if there is no patients after filtering\n\nanl <- anl %>%\n  filter(\n    SAFFL == \"Y\",\n    PARAMCD %in% c(\"ASTPULN\", \"ALTPULN\", \"ALTASTPU\") & AVISIT == \"POST-BASELINE\"\n  ) %>%\n  mutate(\n    ARM_AVALC = factor(\n      case_when(\n        AVALC == \"Y\" ~ as.character(ACTARM),\n        TRUE ~ \"Criteria not met\"\n      ),\n      levels = c(levels(anl$ACTARM), \"Criteria not met\")\n    ),\n    PARAM = factor(\n      case_when(\n        PARAMCD == \"ASTPULN\" ~ \"AST >3x ULN\",\n        PARAMCD == \"ALTPULN\" ~ \"ALT >3x ULN\",\n        PARAMCD == \"ALTASTPU\" ~ \"AST >3x ULN or ALT >x3 ULN\"\n      ),\n      levels = c(\"AST >3x ULN\", \"ALT >3x ULN\", \"AST >3x ULN or ALT >x3 ULN\")\n    ),\n    TITLE = factor(\"First Elevated Result Occurring During\")\n  )\n\nanl <- df_explicit_na(anl)\n\n\n\n\n\nCoderesult <- basic_table() %>%\n  split_cols_by(\"TITLE\") %>%\n  split_cols_by(\"APERIODC\") %>%\n  split_rows_by(\"PARAM\") %>%\n  split_rows_by(\"ACTARM\", split_fun = drop_split_levels, child_labels = \"hidden\") %>%\n  count_occurrences(\"ARM_AVALC\", .stats = \"fraction\", denom = \"n\", drop = TRUE) %>%\n  build_table(anl)\n\ncriteria_fun <- function(tr) {\n  row_label <- obj_label(tr)\n  dplyr::if_else(row_label == \"Criteria not met\", TRUE, FALSE)\n}\n\nresult <- result %>% trim_rows(criteria = criteria_fun)\nresult\n\n                              First Elevated Result Occurring During  \n                                  PERIOD 1              PERIOD 2      \n——————————————————————————————————————————————————————————————————————\nAST >3x ULN                                                           \n  A: Drug X                     11/134 (8.2%)        21/134 (15.7%)   \n  B: Placebo                   17/134 (12.7%)        16/134 (11.9%)   \n  C: Combination                10/132 (7.6%)         8/132 (6.1%)    \nALT >3x ULN                                                           \n  A: Drug X                    14/134 (10.4%)         8/134 (6.0%)    \n  B: Placebo                   24/134 (17.9%)        18/134 (13.4%)   \n  C: Combination               16/132 (12.1%)         10/132 (7.6%)   \nAST >3x ULN or ALT >x3 ULN                                            \n  A: Drug X                    14/134 (10.4%)        15/134 (11.2%)   \n  B: Placebo                    8/134 (6.0%)          13/134 (9.7%)   \n  C: Combination                11/132 (8.3%)         12/132 (9.1%)   \n\n\n\n\n\nCode# In progress\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n[1] tern_0.7.10.9056 rtables_0.6.0.1  formatters_0.4.0 magrittr_2.0.3  \n[5] dplyr_1.1.0      scda_0.1.5.9009 \n\nloaded via a namespace (and not attached):\n [1] pillar_1.8.1      compiler_4.2.2    forcats_1.0.0     tools_4.2.2      \n [5] digest_0.6.31     lattice_0.20-45   jsonlite_1.8.4    evaluate_0.20    \n [9] lifecycle_1.0.3   tibble_3.1.8      checkmate_2.1.0   gtable_0.3.1     \n[13] pkgconfig_2.0.3   rlang_1.0.6       Matrix_1.5-3      cli_3.6.0        \n[17] yaml_2.3.7        xfun_0.37         fastmap_1.1.1     withr_2.5.0      \n[21] knitr_1.42        generics_0.1.3    vctrs_0.5.2       htmlwidgets_1.6.1\n[25] grid_4.2.2        tidyselect_1.2.0  glue_1.6.2        R6_2.5.1         \n[29] fansi_1.0.4       Rdpack_2.4        survival_3.5-3    rmarkdown_2.20   \n[33] tidyr_1.3.0       purrr_1.0.1       ggplot2_3.4.1     codetools_0.2-19 \n[37] splines_4.2.2     backports_1.4.1   scales_1.2.1      htmltools_0.5.4  \n[41] rbibutils_2.2.13  colorspace_2.1-0  utf8_1.2.3        munsell_0.5.0    \n[45] broom_1.0.3      \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R              [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/tables/lab-results/lbt12.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "tables/lab-results/lbt09.html",
    "href": "tables/lab-results/lbt09.html",
    "title": "LBT09",
    "section": "",
    "text": "Data Setup\nStandard Table\nTable Selecting Sections\nTeal\nSession Info\n\n\n\n\nCodelibrary(scda)\nlibrary(dplyr)\nlibrary(tern)\n\nadhy <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adhy\")\n\n# Ensure character variables are converted to factors and empty strings and NAs are explicit missing levels.\nadhy_liver <- df_explicit_na(adhy)\n\n# Define values of interest in PARAMCD variable.\nparamcd_tbili_alt <- c(\"BLAL\", \"BGAL\", \"BA2AL\", \"BA5AL\")\nparamcd_tbili_ast <- c(\"BLAS\", \"BGAS\", \"BA2AS\", \"BA5AS\")\n\n# Select LBT09 parameters.\nadhy_liver <- adhy_liver %>%\n  filter(\n    SAFFL == \"Y\",\n    AVISIT %in% c(\"BASELINE\", \"POST-BASELINE\"),\n    PARAMCD %in% c(paramcd_tbili_alt, paramcd_tbili_ast)\n  )\n\n# Let's be explicit about factor levels for AVISIT and PARAMCD.\nadhy_liver <- adhy_liver %>%\n  mutate(\n    AVISIT = factor(AVISIT, levels = c(\"BASELINE\", \"POST-BASELINE\")),\n    PARAMCD = factor(PARAMCD, levels = c(paramcd_tbili_alt, paramcd_tbili_ast))\n  )\n\n# Create indicator and category variables.\nadhy_liver <- adhy_liver %>%\n  mutate(\n    TBILI_CAT = factor( # Create TBILI_CAT categories variable - this is needed so we get the right nesting in the table.\n      case_when(\n        PARAMCD %in% c(paramcd_tbili_alt[1], paramcd_tbili_ast[1]) ~ \"Total Bilirubin <= 2xULN\",\n        PARAMCD %in% c(paramcd_tbili_alt[2], paramcd_tbili_ast[2]) ~ \"Total Bilirubin > 2xULN\",\n        PARAMCD %in% c(paramcd_tbili_alt[3], paramcd_tbili_ast[3]) ~ \"Total Bilirubin > 2xULN and Alkaline Phosphatase <= 2xULN\",\n        PARAMCD %in% c(paramcd_tbili_alt[4], paramcd_tbili_ast[4]) ~ \"Total Bilirubin > 2xULN and Alkaline Phosphatase <= 5xULN\"\n      ),\n      levels = c(\n        \"Total Bilirubin <= 2xULN\",\n        \"Total Bilirubin > 2xULN\",\n        \"Total Bilirubin > 2xULN and Alkaline Phosphatase <= 2xULN\",\n        \"Total Bilirubin > 2xULN and Alkaline Phosphatase <= 5xULN\"\n      )\n    ),\n    ALTAST_CAT = factor( # Create ALTAST_CAT categories variable - this will be the labels for different ALT/AST categories displayed in the table.\n      case_when(\n        PARAMCD %in% paramcd_tbili_alt & AVALC == \">3-5ULN\" ~ \"ALT >3 - <= 5xULN\",\n        PARAMCD %in% paramcd_tbili_alt & AVALC == \">5-10ULN\" ~ \"ALT >5 - <= 10xULN\",\n        PARAMCD %in% paramcd_tbili_alt & AVALC == \">10-20ULN\" ~ \"ALT >10 - <= 20xULN\",\n        PARAMCD %in% paramcd_tbili_alt & AVALC == \">20ULN\" ~ \"ALT > 20xULN\",\n        PARAMCD %in% paramcd_tbili_ast & AVALC == \">3-5ULN\" ~ \"AST >3 - <= 5xULN\",\n        PARAMCD %in% paramcd_tbili_ast & AVALC == \">5-10ULN\" ~ \"AST >5 - <= 10xULN\",\n        PARAMCD %in% paramcd_tbili_ast & AVALC == \">10-20ULN\" ~ \"AST >10 - <= 20xULN\",\n        PARAMCD %in% paramcd_tbili_ast & AVALC == \">20ULN\" ~ \"AST > 20xULN\",\n        TRUE ~ \"Criteria not met\"\n      ),\n      levels = c(\n        \"ALT >3 - <= 5xULN\", \"ALT >5 - <= 10xULN\", \"ALT >10 - <= 20xULN\",\n        \"20\" = \"ALT > 20xULN\",\n        \"AST >3 - <= 5xULN\", \"AST >5 - <= 10xULN\", \"AST >10 - <= 20xULN\", \"AST > 20xULN\",\n        \"Criteria not met\"\n      )\n    ),\n    ALTAST_ind = factor(\n      case_when(\n        PARAMCD %in% paramcd_tbili_alt ~ \"ALT\",\n        PARAMCD %in% paramcd_tbili_ast ~ \"AST\"\n      ),\n      levels = c(\"ALT\", \"AST\")\n    )\n  )\n\nmap <- data.frame(\n  ALTAST_ind = c(rep(\"ALT\", 5), rep(\"AST\", 5)),\n  ALTAST_CAT = c(\n    \"ALT >3 - <= 5xULN\", \"ALT >5 - <= 10xULN\", \"ALT >10 - <= 20xULN\",\n    \"20\" = \"ALT > 20xULN\", \"Criteria not met\",\n    \"AST >3 - <= 5xULN\", \"AST >5 - <= 10xULN\", \"AST >10 - <= 20xULN\", \"AST > 20xULN\", \"Criteria not met\"\n  ),\n  stringsAsFactors = FALSE\n)\n\n\n\n\n\nCoderesult <- basic_table() %>%\n  split_cols_by(\"ARM\") %>%\n  split_cols_by(\"AVISIT\") %>%\n  split_rows_by(\"TBILI_CAT\") %>%\n  # below split helps us get the right denominator between ALT/AST but it can be hidden\n  split_rows_by(\"ALTAST_ind\", split_fun = trim_levels_to_map(map), child_labels = \"hidden\") %>%\n  count_occurrences(\n    vars = \"ALTAST_CAT\",\n    .stats = \"fraction\",\n    denom = \"n\",\n    drop = FALSE\n  ) %>%\n  append_topleft(\"Liver Laboratory Test Criterion\") %>%\n  build_table(df = adhy_liver)\n\n# trim away rows with criteria not met\ncriteria_fun <- function(tr) {\n  row_label <- obj_label(tr)\n  ifelse(row_label == \"Criteria not met\", TRUE, FALSE)\n}\n\nresult <- result %>% trim_rows(criteria = criteria_fun)\nresult\n\nLiver Laboratory Test Criterion                                        A: Drug X                        B: Placebo                      C: Combination         \n                                                               BASELINE      POST-BASELINE       BASELINE      POST-BASELINE       BASELINE      POST-BASELINE \n———————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————\nTotal Bilirubin <= 2xULN                                                                                                                                       \n  ALT >3 - <= 5xULN                                         23/134 (17.2%)   15/134 (11.2%)   25/134 (18.7%)   27/134 (20.1%)   27/132 (20.5%)   30/132 (22.7%)\n  ALT >5 - <= 10xULN                                        28/134 (20.9%)   29/134 (21.6%)   29/134 (21.6%)   19/134 (14.2%)   36/132 (27.3%)   29/132 (22.0%)\n  ALT >10 - <= 20xULN                                       24/134 (17.9%)   30/134 (22.4%)   32/134 (23.9%)   33/134 (24.6%)   28/132 (21.2%)   24/132 (18.2%)\n  ALT > 20xULN                                              32/134 (23.9%)   35/134 (26.1%)   24/134 (17.9%)   23/134 (17.2%)   20/132 (15.2%)   26/132 (19.7%)\n  AST >3 - <= 5xULN                                         31/134 (23.1%)   34/134 (25.4%)   30/134 (22.4%)   26/134 (19.4%)   34/132 (25.8%)   24/132 (18.2%)\n  AST >5 - <= 10xULN                                        25/134 (18.7%)   25/134 (18.7%)   26/134 (19.4%)   26/134 (19.4%)   22/132 (16.7%)   27/132 (20.5%)\n  AST >10 - <= 20xULN                                       22/134 (16.4%)   29/134 (21.6%)   16/134 (11.9%)   22/134 (16.4%)   34/132 (25.8%)   19/132 (14.4%)\n  AST > 20xULN                                              20/134 (14.9%)   16/134 (11.9%)   28/134 (20.9%)   31/134 (23.1%)   21/132 (15.9%)   39/132 (29.5%)\nTotal Bilirubin > 2xULN                                                                                                                                        \n  ALT >3 - <= 5xULN                                         40/134 (29.9%)   28/134 (20.9%)   31/134 (23.1%)   28/134 (20.9%)   18/132 (13.6%)   32/132 (24.2%)\n  ALT >5 - <= 10xULN                                        24/134 (17.9%)   29/134 (21.6%)   30/134 (22.4%)   37/134 (27.6%)   33/132 (25.0%)   24/132 (18.2%)\n  ALT >10 - <= 20xULN                                       24/134 (17.9%)   22/134 (16.4%)   26/134 (19.4%)   18/134 (13.4%)   21/132 (15.9%)   30/132 (22.7%)\n  ALT > 20xULN                                              19/134 (14.2%)   33/134 (24.6%)   23/134 (17.2%)   19/134 (14.2%)   30/132 (22.7%)   22/132 (16.7%)\n  AST >3 - <= 5xULN                                         17/134 (12.7%)   27/134 (20.1%)   36/134 (26.9%)   25/134 (18.7%)   26/132 (19.7%)   34/132 (25.8%)\n  AST >5 - <= 10xULN                                        25/134 (18.7%)   28/134 (20.9%)   24/134 (17.9%)   28/134 (20.9%)   20/132 (15.2%)   23/132 (17.4%)\n  AST >10 - <= 20xULN                                       36/134 (26.9%)   28/134 (20.9%)   16/134 (11.9%)   26/134 (19.4%)   33/132 (25.0%)   26/132 (19.7%)\n  AST > 20xULN                                              30/134 (22.4%)   21/134 (15.7%)   30/134 (22.4%)   24/134 (17.9%)   24/132 (18.2%)   25/132 (18.9%)\nTotal Bilirubin > 2xULN and Alkaline Phosphatase <= 2xULN                                                                                                      \n  ALT >3 - <= 5xULN                                         24/134 (17.9%)   22/134 (16.4%)   28/134 (20.9%)   23/134 (17.2%)   38/132 (28.8%)   23/132 (17.4%)\n  ALT >5 - <= 10xULN                                        26/134 (19.4%)   25/134 (18.7%)   19/134 (14.2%)   22/134 (16.4%)   32/132 (24.2%)   32/132 (24.2%)\n  ALT >10 - <= 20xULN                                       26/134 (19.4%)   30/134 (22.4%)   31/134 (23.1%)   30/134 (22.4%)   21/132 (15.9%)   27/132 (20.5%)\n  ALT > 20xULN                                              30/134 (22.4%)   28/134 (20.9%)   24/134 (17.9%)   36/134 (26.9%)   20/132 (15.2%)   23/132 (17.4%)\n  AST >3 - <= 5xULN                                         37/134 (27.6%)   25/134 (18.7%)   31/134 (23.1%)   26/134 (19.4%)   24/132 (18.2%)   36/132 (27.3%)\n  AST >5 - <= 10xULN                                        25/134 (18.7%)   32/134 (23.9%)   29/134 (21.6%)   30/134 (22.4%)   26/132 (19.7%)   24/132 (18.2%)\n  AST >10 - <= 20xULN                                       25/134 (18.7%)   31/134 (23.1%)   28/134 (20.9%)   22/134 (16.4%)   29/132 (22.0%)   23/132 (17.4%)\n  AST > 20xULN                                              26/134 (19.4%)   25/134 (18.7%)   23/134 (17.2%)   30/134 (22.4%)   23/132 (17.4%)   24/132 (18.2%)\nTotal Bilirubin > 2xULN and Alkaline Phosphatase <= 5xULN                                                                                                      \n  ALT >3 - <= 5xULN                                         24/134 (17.9%)   21/134 (15.7%)   30/134 (22.4%)   17/134 (12.7%)   28/132 (21.2%)   31/132 (23.5%)\n  ALT >5 - <= 10xULN                                        36/134 (26.9%)   28/134 (20.9%)   25/134 (18.7%)   27/134 (20.1%)   26/132 (19.7%)   29/132 (22.0%)\n  ALT >10 - <= 20xULN                                       30/134 (22.4%)   21/134 (15.7%)   28/134 (20.9%)   36/134 (26.9%)   25/132 (18.9%)   24/132 (18.2%)\n  ALT > 20xULN                                              14/134 (10.4%)   28/134 (20.9%)   25/134 (18.7%)   27/134 (20.1%)   31/132 (23.5%)   23/132 (17.4%)\n  AST >3 - <= 5xULN                                         21/134 (15.7%)   26/134 (19.4%)   29/134 (21.6%)   31/134 (23.1%)   33/132 (25.0%)   19/132 (14.4%)\n  AST >5 - <= 10xULN                                        29/134 (21.6%)   26/134 (19.4%)   24/134 (17.9%)   26/134 (19.4%)   23/132 (17.4%)   32/132 (24.2%)\n  AST >10 - <= 20xULN                                       29/134 (21.6%)   31/134 (23.1%)   28/134 (20.9%)   22/134 (16.4%)   22/132 (16.7%)   21/132 (15.9%)\n  AST > 20xULN                                              34/134 (25.4%)   21/134 (15.7%)   19/134 (14.2%)   28/134 (20.9%)   21/132 (15.9%)   33/132 (25.0%)\n\n\n\n\n\nCoderesult <- basic_table() %>%\n  split_cols_by(\"ARM\") %>%\n  split_cols_by(\"AVISIT\") %>%\n  split_rows_by(\"TBILI_CAT\", split_fun = remove_split_levels(\"Total Bilirubin > 2xULN and Alkaline Phosphatase <= 2xULN\")) %>%\n  # below split helps us get the right denominator between ALT/AST but it can be hidden\n  split_rows_by(\"ALTAST_ind\", split_fun = trim_levels_to_map(map), child_labels = \"hidden\") %>%\n  count_occurrences(\n    vars = \"ALTAST_CAT\",\n    .stats = \"fraction\",\n    denom = \"n\",\n    drop = FALSE\n  ) %>%\n  append_topleft(\"Liver Laboratory Test Criterion\") %>%\n  build_table(df = adhy_liver)\n\n# trim away rows with criteria not met\ncriteria_fun <- function(tr) {\n  row_label <- obj_label(tr)\n  ifelse(row_label == \"Criteria not met\", TRUE, FALSE)\n}\n\nresult <- result %>% trim_rows(criteria = criteria_fun)\nresult\n\nLiver Laboratory Test Criterion                                        A: Drug X                        B: Placebo                      C: Combination         \n                                                               BASELINE      POST-BASELINE       BASELINE      POST-BASELINE       BASELINE      POST-BASELINE \n———————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————\nTotal Bilirubin <= 2xULN                                                                                                                                       \n  ALT >3 - <= 5xULN                                         23/134 (17.2%)   15/134 (11.2%)   25/134 (18.7%)   27/134 (20.1%)   27/132 (20.5%)   30/132 (22.7%)\n  ALT >5 - <= 10xULN                                        28/134 (20.9%)   29/134 (21.6%)   29/134 (21.6%)   19/134 (14.2%)   36/132 (27.3%)   29/132 (22.0%)\n  ALT >10 - <= 20xULN                                       24/134 (17.9%)   30/134 (22.4%)   32/134 (23.9%)   33/134 (24.6%)   28/132 (21.2%)   24/132 (18.2%)\n  ALT > 20xULN                                              32/134 (23.9%)   35/134 (26.1%)   24/134 (17.9%)   23/134 (17.2%)   20/132 (15.2%)   26/132 (19.7%)\n  AST >3 - <= 5xULN                                         31/134 (23.1%)   34/134 (25.4%)   30/134 (22.4%)   26/134 (19.4%)   34/132 (25.8%)   24/132 (18.2%)\n  AST >5 - <= 10xULN                                        25/134 (18.7%)   25/134 (18.7%)   26/134 (19.4%)   26/134 (19.4%)   22/132 (16.7%)   27/132 (20.5%)\n  AST >10 - <= 20xULN                                       22/134 (16.4%)   29/134 (21.6%)   16/134 (11.9%)   22/134 (16.4%)   34/132 (25.8%)   19/132 (14.4%)\n  AST > 20xULN                                              20/134 (14.9%)   16/134 (11.9%)   28/134 (20.9%)   31/134 (23.1%)   21/132 (15.9%)   39/132 (29.5%)\nTotal Bilirubin > 2xULN                                                                                                                                        \n  ALT >3 - <= 5xULN                                         40/134 (29.9%)   28/134 (20.9%)   31/134 (23.1%)   28/134 (20.9%)   18/132 (13.6%)   32/132 (24.2%)\n  ALT >5 - <= 10xULN                                        24/134 (17.9%)   29/134 (21.6%)   30/134 (22.4%)   37/134 (27.6%)   33/132 (25.0%)   24/132 (18.2%)\n  ALT >10 - <= 20xULN                                       24/134 (17.9%)   22/134 (16.4%)   26/134 (19.4%)   18/134 (13.4%)   21/132 (15.9%)   30/132 (22.7%)\n  ALT > 20xULN                                              19/134 (14.2%)   33/134 (24.6%)   23/134 (17.2%)   19/134 (14.2%)   30/132 (22.7%)   22/132 (16.7%)\n  AST >3 - <= 5xULN                                         17/134 (12.7%)   27/134 (20.1%)   36/134 (26.9%)   25/134 (18.7%)   26/132 (19.7%)   34/132 (25.8%)\n  AST >5 - <= 10xULN                                        25/134 (18.7%)   28/134 (20.9%)   24/134 (17.9%)   28/134 (20.9%)   20/132 (15.2%)   23/132 (17.4%)\n  AST >10 - <= 20xULN                                       36/134 (26.9%)   28/134 (20.9%)   16/134 (11.9%)   26/134 (19.4%)   33/132 (25.0%)   26/132 (19.7%)\n  AST > 20xULN                                              30/134 (22.4%)   21/134 (15.7%)   30/134 (22.4%)   24/134 (17.9%)   24/132 (18.2%)   25/132 (18.9%)\nTotal Bilirubin > 2xULN and Alkaline Phosphatase <= 5xULN                                                                                                      \n  ALT >3 - <= 5xULN                                         24/134 (17.9%)   21/134 (15.7%)   30/134 (22.4%)   17/134 (12.7%)   28/132 (21.2%)   31/132 (23.5%)\n  ALT >5 - <= 10xULN                                        36/134 (26.9%)   28/134 (20.9%)   25/134 (18.7%)   27/134 (20.1%)   26/132 (19.7%)   29/132 (22.0%)\n  ALT >10 - <= 20xULN                                       30/134 (22.4%)   21/134 (15.7%)   28/134 (20.9%)   36/134 (26.9%)   25/132 (18.9%)   24/132 (18.2%)\n  ALT > 20xULN                                              14/134 (10.4%)   28/134 (20.9%)   25/134 (18.7%)   27/134 (20.1%)   31/132 (23.5%)   23/132 (17.4%)\n  AST >3 - <= 5xULN                                         21/134 (15.7%)   26/134 (19.4%)   29/134 (21.6%)   31/134 (23.1%)   33/132 (25.0%)   19/132 (14.4%)\n  AST >5 - <= 10xULN                                        29/134 (21.6%)   26/134 (19.4%)   24/134 (17.9%)   26/134 (19.4%)   23/132 (17.4%)   32/132 (24.2%)\n  AST >10 - <= 20xULN                                       29/134 (21.6%)   31/134 (23.1%)   28/134 (20.9%)   22/134 (16.4%)   22/132 (16.7%)   21/132 (15.9%)\n  AST > 20xULN                                              34/134 (25.4%)   21/134 (15.7%)   19/134 (14.2%)   28/134 (20.9%)   21/132 (15.9%)   33/132 (25.0%)\n\n\n\n\n\nCode# In progress\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n[1] tern_0.7.10.9056 rtables_0.6.0.1  formatters_0.4.0 magrittr_2.0.3  \n[5] dplyr_1.1.0      scda_0.1.5.9009 \n\nloaded via a namespace (and not attached):\n [1] pillar_1.8.1      compiler_4.2.2    forcats_1.0.0     tools_4.2.2      \n [5] digest_0.6.31     lattice_0.20-45   jsonlite_1.8.4    evaluate_0.20    \n [9] lifecycle_1.0.3   tibble_3.1.8      checkmate_2.1.0   gtable_0.3.1     \n[13] pkgconfig_2.0.3   rlang_1.0.6       Matrix_1.5-3      cli_3.6.0        \n[17] yaml_2.3.7        xfun_0.37         fastmap_1.1.1     withr_2.5.0      \n[21] knitr_1.42        generics_0.1.3    vctrs_0.5.2       htmlwidgets_1.6.1\n[25] grid_4.2.2        tidyselect_1.2.0  glue_1.6.2        R6_2.5.1         \n[29] fansi_1.0.4       Rdpack_2.4        survival_3.5-3    rmarkdown_2.20   \n[33] tidyr_1.3.0       purrr_1.0.1       ggplot2_3.4.1     codetools_0.2-19 \n[37] splines_4.2.2     backports_1.4.1   scales_1.2.1      htmltools_0.5.4  \n[41] rbibutils_2.2.13  colorspace_2.1-0  utf8_1.2.3        munsell_0.5.0    \n[45] broom_1.0.3      \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R              [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/tables/lab-results/lbt09.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "tables/lab-results/lbt10_bl.html",
    "href": "tables/lab-results/lbt10_bl.html",
    "title": "LBT10_BL",
    "section": "",
    "text": "Data Setup\nStandard Table\nTable Selecting Sections\nTeal\nSession Info\n\n\n\n\nCodelibrary(scda)\nlibrary(dplyr)\nlibrary(tern)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadhy <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adhy\")\n\nadhy_liver <- adhy %>%\n  filter(PARAMCD %in% c(\n    \"BL2AL2CB\", \"BL2AS2CB\", \"BG2AL2CB\", \"BG2AS2CB\", \"B2A2L2CB\", \"B2A2S2CB\", \"B2A5L2CB\", \"B2A5S2CB\"\n  )) %>%\n  mutate(PARAMCAT = case_when(\n    PARAMCD %in% c(\"BL2AL2CB\", \"BL2AS2CB\") ~ \"Total Bilirubin <= 2xULN\",\n    PARAMCD %in% c(\"BG2AL2CB\", \"BG2AS2CB\") ~ \"Total Bilirubin > 2xULN\",\n    PARAMCD %in% c(\"B2A2L2CB\", \"B2A2S2CB\") ~ \"Total Bilirubin > 2xULN and Alkaline Phosphatase <= 2xULN\",\n    PARAMCD %in% c(\"B2A5L2CB\", \"B2A5S2CB\") ~ \"Total Bilirubin > 2xULN and Alkaline Phosphatase <= 5xULN\"\n  )) %>%\n  mutate(AVALC_FORMAT = case_when(\n    PARAMCD %in% c(\"BL2AL2CB\", \"BG2AL2CB\", \"B2A2L2CB\", \"B2A5L2CB\") & AVALC == \"Y\" ~ \"ALT >3xULN at 2 Visits\",\n    PARAMCD %in% c(\"BL2AS2CB\", \"BG2AS2CB\", \"B2A2S2CB\", \"B2A5S2CB\") & AVALC == \"Y\" ~ \"AST >3xULN at 2 Visits\",\n    TRUE ~ \"Criteria not met\"\n  ))\n\n# Ensure character variables are converted to factors and empty strings and NAs are explicit missing levels.\nadsl <- df_explicit_na(adsl)\nanl <- df_explicit_na(adhy_liver)\n\n\n\n\n\nCodetbl <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ACTARMCD\") %>%\n  split_rows_by(\"PARAMCAT\") %>%\n  split_rows_by(\"PARAM\", split_fun = drop_split_levels, child_labels = \"hidden\") %>%\n  count_occurrences(\n    vars = \"AVALC_FORMAT\",\n    .stats = c(\"fraction\"),\n    denom = \"n\",\n    drop = TRUE\n  ) %>%\n  build_table(anl, alt_counts_df = adsl)\n\ncriteria_fun <- function(tr) {\n  row_label <- obj_label(tr)\n  ifelse(row_label == \"Criteria not met\", TRUE, FALSE)\n}\n\nresult <- tbl %>% trim_rows(criteria = criteria_fun)\nresult\n\n                               ARM A            ARM B            ARM C     \n                              (N=134)          (N=134)          (N=132)    \n———————————————————————————————————————————————————————————————————————————\nTotal Bilirubin <= 2xULN                                                   \n  ALT >3xULN at 2 Visits   25/134 (18.7%)   20/134 (14.9%)   27/132 (20.5%)\n  AST >3xULN at 2 Visits   22/134 (16.4%)   14/134 (10.4%)   37/132 (28.0%)\nTotal Bilirubin > 2xULN                                                    \n  ALT >3xULN at 2 Visits   26/134 (19.4%)   31/134 (23.1%)   23/132 (17.4%)\n  AST >3xULN at 2 Visits   30/134 (22.4%)   27/134 (20.1%)   26/132 (19.7%)\n\n\n\n\n\nCodetbl2 <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ACTARMCD\") %>%\n  split_rows_by(\"PARAMCAT\", split_fun = remove_split_levels(\"Total Bilirubin > 2xULN\")) %>%\n  split_rows_by(\"PARAM\", split_fun = drop_split_levels, child_labels = \"hidden\") %>%\n  count_occurrences(\n    vars = \"AVALC_FORMAT\",\n    .stats = c(\"fraction\"),\n    denom = \"n\",\n    drop = TRUE\n  ) %>%\n  build_table(anl, alt_counts_df = adsl)\n\ncriteria_fun <- function(tr) {\n  row_label <- obj_label(tr)\n  ifelse(row_label == \"Criteria not met\", TRUE, FALSE)\n}\n\nresult <- tbl2 %>% trim_rows(criteria = criteria_fun)\nresult\n\n                               ARM A            ARM B            ARM C     \n                              (N=134)          (N=134)          (N=132)    \n———————————————————————————————————————————————————————————————————————————\nTotal Bilirubin <= 2xULN                                                   \n  ALT >3xULN at 2 Visits   25/134 (18.7%)   20/134 (14.9%)   27/132 (20.5%)\n  AST >3xULN at 2 Visits   22/134 (16.4%)   14/134 (10.4%)   37/132 (28.0%)\n\n\n\n\n\nCode# In progress\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n[1] tern_0.7.10.9056 rtables_0.6.0.1  formatters_0.4.0 magrittr_2.0.3  \n[5] dplyr_1.1.0      scda_0.1.5.9009 \n\nloaded via a namespace (and not attached):\n [1] pillar_1.8.1      compiler_4.2.2    forcats_1.0.0     tools_4.2.2      \n [5] digest_0.6.31     lattice_0.20-45   jsonlite_1.8.4    evaluate_0.20    \n [9] lifecycle_1.0.3   tibble_3.1.8      checkmate_2.1.0   gtable_0.3.1     \n[13] pkgconfig_2.0.3   rlang_1.0.6       Matrix_1.5-3      cli_3.6.0        \n[17] yaml_2.3.7        xfun_0.37         fastmap_1.1.1     withr_2.5.0      \n[21] knitr_1.42        generics_0.1.3    vctrs_0.5.2       htmlwidgets_1.6.1\n[25] grid_4.2.2        tidyselect_1.2.0  glue_1.6.2        R6_2.5.1         \n[29] fansi_1.0.4       Rdpack_2.4        survival_3.5-3    rmarkdown_2.20   \n[33] tidyr_1.3.0       purrr_1.0.1       ggplot2_3.4.1     codetools_0.2-19 \n[37] splines_4.2.2     backports_1.4.1   scales_1.2.1      htmltools_0.5.4  \n[41] rbibutils_2.2.13  colorspace_2.1-0  utf8_1.2.3        munsell_0.5.0    \n[45] broom_1.0.3      \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R              [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/tables/lab-results/lbt10_bl.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "tables/lab-results/lbt01.html",
    "href": "tables/lab-results/lbt01.html",
    "title": "LBT01",
    "section": "",
    "text": "Data Setup\nStandard Table\nTeal\nSession Info\n\n\n\nIn order to generate the LBT01 standard tabulation, the adlb dataset may be pre-processed so as to discriminate baseline from follow-up visits.\n\nCodelibrary(scda)\nlibrary(tern)\nlibrary(dplyr)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadlb <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adlb\")\n\n# Ensure character variables are converted to factors and empty strings and NAs are explicit missing levels.\nadsl <- df_explicit_na(adsl)\nadlb <- df_explicit_na(adlb)\n\n# For illustration purpose, the example focuses on \"Alanine Aminotransferase\n# Measurement\" starting from baseline, while excluding visit at week 1 for\n# subjects who were prescribed a placebo.\nadlb_f <- adlb %>%\n  dplyr::filter(\n    PARAM == \"Alanine Aminotransferase Measurement\" &\n      !(ARM == \"B: Placebo\" & AVISIT == \"WEEK 1 DAY 8\") &\n      AVISIT != \"SCREENING\"\n  )\n\n\n\n\n\nCode# Define the split function\nsplit_fun <- drop_split_levels\n\nlyt <- basic_table() %>%\n  split_cols_by(\"ARM\") %>%\n  split_rows_by(\"AVISIT\", split_fun = split_fun, label_pos = \"topleft\", split_label = obj_label(adlb_f$AVISIT)) %>%\n  split_cols_by_multivar(\n    vars = c(\"AVAL\", \"CHG\"),\n    varlabels = c(\"Analysis Value\", \"Absolute Change from Baseline\")\n  ) %>%\n  summarize_colvars()\n\nresult <- build_table(lyt, adlb_f)\nresult\n\nAnalysis Visit                     A: Drug X                                        B: Placebo                                     C: Combination                \n                 Analysis Value   Absolute Change from Baseline   Analysis Value   Absolute Change from Baseline   Analysis Value   Absolute Change from Baseline\n—————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————\nBASELINE                                                                                                                                                         \n  n                   134                      134                     134                      134                     132                      132             \n  Mean (SD)        19.8 (4.2)               0.0 (0.0)               20.2 (4.2)               0.0 (0.0)               20.5 (3.9)               0.0 (0.0)          \n  Median              19.8                     0.0                     20.1                     0.0                     20.4                     0.0             \n  Min - Max        7.0 - 30.4               0.0 - 0.0               8.1 - 34.6               0.0 - 0.0               8.8 - 28.7               0.0 - 0.0          \nWEEK 1 DAY 8                                                                                                                                                     \n  n                   134                      134                      0                        0                      132                      132             \n  Mean (SD)        19.3 (4.0)              -0.5 (5.9)                   NA                      NA                   20.6 (3.9)               0.1 (5.5)          \n  Median              19.2                    -0.5                      NA                      NA                      20.4                     0.0             \n  Min - Max        8.9 - 27.3             -12.5 - 19.7                  NA                      NA                   9.9 - 30.7             -13.7 - 15.5         \nWEEK 2 DAY 15                                                                                                                                                    \n  n                   134                      134                     134                      134                     132                      132             \n  Mean (SD)        19.7 (4.2)              -0.1 (6.0)               20.1 (4.3)              -0.0 (6.3)               19.2 (3.6)              -1.2 (5.5)          \n  Median              19.2                     0.0                     20.0                    -0.4                     19.6                    -0.5             \n  Min - Max        7.2 - 30.5             -13.2 - 17.2              7.2 - 30.5             -18.4 - 14.4              8.1 - 26.7             -14.3 - 15.6         \nWEEK 3 DAY 22                                                                                                                                                    \n  n                   134                      134                     134                      134                     132                      132             \n  Mean (SD)        20.1 (3.8)               0.3 (5.8)               19.8 (3.9)              -0.3 (5.6)               19.4 (3.9)              -1.0 (5.6)          \n  Median              20.0                     0.5                     19.9                    -0.2                     18.8                    -1.1             \n  Min - Max       11.5 - 29.5             -16.0 - 16.3             11.9 - 28.2             -18.5 - 15.0             10.2 - 28.5             -12.3 - 11.1         \nWEEK 4 DAY 29                                                                                                                                                    \n  n                   134                      134                     134                      134                     132                      132             \n  Mean (SD)        20.4 (4.6)               0.6 (6.5)               19.6 (4.3)              -0.5 (6.3)               19.8 (4.0)              -0.6 (5.3)          \n  Median              19.8                     0.4                     19.2                    -1.2                     19.9                    -0.6             \n  Min - Max        9.9 - 34.5             -17.0 - 18.8             11.5 - 32.0             -16.6 - 17.2              7.8 - 29.3             -12.1 - 15.3         \nWEEK 5 DAY 36                                                                                                                                                    \n  n                   134                      134                     134                      134                     132                      132             \n  Mean (SD)        20.4 (3.9)               0.6 (6.1)               19.9 (4.2)              -0.3 (6.3)               20.0 (4.2)              -0.5 (5.6)          \n  Median              20.7                     0.9                     20.1                     0.7                     20.5                    -1.0             \n  Min - Max       10.9 - 30.2             -16.0 - 16.1             10.3 - 29.1             -19.0 - 12.6              7.4 - 27.8             -15.6 - 16.6         \n\n\n\n\n\nCodelibrary(teal.modules.clinical)\nlibrary(scda)\nlibrary(dplyr)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadlb <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adlb\")\n\n# Ensure character variables are converted to factors and empty strings and NAs are explicit missing levels.\nadsl <- df_explicit_na(adsl)\nadlb <- df_explicit_na(adlb)\n\napp <- init(\n  data = cdisc_data(\n    cdisc_dataset(\"ADSL\",\n      adsl,\n      code = 'ADSL <- df_explicit_na(synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\"))'\n    ),\n    cdisc_dataset(\"ADLB\",\n      adlb,\n      code = 'ADLB <- df_explicit_na(synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adlb\"))'\n    ),\n    check = TRUE\n  ),\n  modules = modules(\n    tm_t_summary_by(\n      label = \"Laboratory Test Results and Change from Baseline by Visit\",\n      dataname = \"ADLB\",\n      arm_var = choices_selected(\n        choices = variable_choices(adsl, c(\"ARM\", \"ARMCD\")),\n        selected = \"ARM\"\n      ),\n      by_vars = choices_selected(\n        choices = variable_choices(adlb, c(\"PARAM\", \"AVISIT\")),\n        selected = c(\"AVISIT\")\n      ),\n      summarize_vars = choices_selected(\n        choices = variable_choices(adlb, c(\"AVAL\", \"CHG\")),\n        selected = c(\"AVAL\", \"CHG\")\n      ),\n      useNA = \"ifany\",\n      paramcd = choices_selected(\n        choices = value_choices(adlb, \"PARAMCD\", \"PARAM\"),\n        selected = \"ALT\"\n      ),\n      parallel_vars = TRUE\n    )\n  ),\n  filter = list(ADLB = list(AVAL = list()))\n)\n\n[INFO] 2023-03-10 05:45:27.2928 pid:7088 token:[] teal.modules.clinical Initializing tm_t_summary_by\n\nCodeshinyApp(app$ui, app$server)\n\n\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n [1] teal.modules.clinical_0.8.14.9026 teal_0.12.0.9023                 \n [3] teal.transform_0.2.0.9011         teal.data_0.1.2.9013             \n [5] shiny_1.7.4                       dplyr_1.1.0                      \n [7] tern_0.7.10.9056                  rtables_0.6.0.1                  \n [9] formatters_0.4.0                  magrittr_2.0.3                   \n[11] scda_0.1.5.9009                  \n\nloaded via a namespace (and not attached):\n [1] sass_0.4.5               tidyr_1.3.0              jsonlite_1.8.4          \n [4] splines_4.2.2            R.utils_2.12.2           bslib_0.4.2             \n [7] teal.slice_0.2.0.9026    Rdpack_2.4               assertthat_0.2.1        \n[10] teal.code_0.3.0.9001     tern.gee_0.1.0.9002      yaml_2.3.7              \n[13] pillar_1.8.1             backports_1.4.1          lattice_0.20-45         \n[16] glue_1.6.2               teal.widgets_0.2.0.9024  digest_0.6.31           \n[19] promises_1.2.0.1         rbibutils_2.2.13         checkmate_2.1.0         \n[22] colorspace_2.1-0         R.oo_1.25.0              htmltools_0.5.4         \n[25] httpuv_1.6.9             Matrix_1.5-3             pkgconfig_2.0.3         \n[28] broom_1.0.3              logger_0.2.2             purrr_1.0.1             \n[31] xtable_1.8-4             mvtnorm_1.1-3            webshot_0.5.4           \n[34] scales_1.2.1             processx_3.8.0           fontawesome_0.5.0       \n[37] later_1.3.0              emmeans_1.8.4-1          tibble_3.1.8            \n[40] styler_1.9.1             farver_2.1.1             generics_0.1.3          \n[43] ggplot2_3.4.1            ellipsis_0.3.2           shinyvalidate_0.1.2     \n[46] cachem_1.0.7             withr_2.5.0              shinyjs_2.1.0           \n[49] geepack_1.3.9            cli_3.6.0                survival_3.5-3          \n[52] mime_0.12                memoise_2.0.1            ps_1.7.2                \n[55] estimability_1.4.1       evaluate_0.20            R.methodsS3_1.8.2       \n[58] fansi_1.0.4              R.cache_0.16.0           nlme_3.1-162            \n[61] MASS_7.3-58.3            forcats_1.0.0            textshaping_0.3.6       \n[64] teal.reporter_0.1.1.9013 tools_4.2.2              lifecycle_1.0.3         \n[67] munsell_0.5.0            callr_3.7.3              compiler_4.2.2          \n[70] jquerylib_0.1.4          systemfonts_1.0.4        rlang_1.0.6             \n[73] grid_4.2.2               htmlwidgets_1.6.1        labeling_0.4.2          \n[76] rmarkdown_2.20           shinyWidgets_0.7.6       gtable_0.3.1            \n[79] codetools_0.2-19         teal.logger_0.1.1.9004   R6_2.5.1                \n[82] knitr_1.42               fastmap_1.1.1            utf8_1.2.3              \n[85] ragg_1.2.5               Rcpp_1.0.10              vctrs_0.5.2             \n[88] tidyselect_1.2.0         xfun_0.37                coda_0.19-4             \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R                       [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/tables/lab-results/lbt01.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "tables/lab-results/lbt04.html",
    "href": "tables/lab-results/lbt04.html",
    "title": "LBT04",
    "section": "",
    "text": "Data Setup\nStandard Table\nTeal\nSession Info\n\n\n\n\nCodelibrary(scda)\nlibrary(dplyr)\nlibrary(tern)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadlb <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adlb\")\n\n# Ensure character variables are converted to factors and empty strings and NAs are explicit missing levels.\nadsl <- df_explicit_na(adsl)\nadlb <- df_explicit_na(adlb)\n\nadlb <- adlb %>%\n  mutate(ONTRTFL = ifelse(AVISIT %in% c(\"SCREENING\", \"BASELINE\"), \"\", \"Y\")) %>%\n  var_relabel(PARAM = \"Laboratory Test\")\n\nadlb_f <- adlb %>%\n  dplyr::filter(ONTRTFL == \"Y\")\n\n# We derive the PARCAT1 variable from LBCAT as an example of how to work with real data.\nadlb_f$PARCAT1 <- adlb_f$LBCAT\n\n# Create a map based on the rule that at least one record with ANRLO > 0 as low, at least one ANRHI is not missing as\n# high using the h_map_for_count_abnormal with method as \"range\".\nmap <- h_map_for_count_abnormal(\n  df = adlb_f,\n  variables = list(anl = \"ANRIND\", split_rows = c(\"PARCAT1\", \"PARAM\"), range_low = \"ANRLO\", range_high = \"ANRHI\"),\n  abnormal = list(low = \"LOW\", high = \"HIGH\"),\n  method = \"range\",\n  na_level = \"<Missing>\"\n)\n\n\n\n\n\nCodelyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ARM\") %>%\n  split_rows_by(\"PARCAT1\", split_fun = trim_levels_to_map(map = map)) %>%\n  split_rows_by(\"PARAM\",\n    split_fun = trim_levels_to_map(map = map),\n    label_pos = \"topleft\",\n    split_label = obj_label(adlb_f$PARAM)\n  ) %>%\n  count_abnormal(\n    var = \"ANRIND\",\n    abnormal = list(Low = \"LOW\", High = \"HIGH\"),\n    exclude_base_abn = TRUE\n  ) %>%\n  append_varlabels(adlb_f, \"ANRIND\", indent = 2L)\n\nresult <- build_table(lyt = lyt, df = adlb_f, alt_counts_df = adsl)\n\nresult\n\n  Laboratory Test                          A: Drug X        B: Placebo     C: Combination\n    Analysis Reference Range Indicator      (N=134)          (N=134)          (N=132)    \n—————————————————————————————————————————————————————————————————————————————————————————\nCHEMISTRY                                                                                \n  Alanine Aminotransferase Measurement                                                   \n    Low                                  50/124 (40.3%)   46/122 (37.7%)   37/117 (31.6%)\n    High                                 49/121 (40.5%)   48/118 (40.7%)    59/118 (50%) \n  C-Reactive Protein Measurement                                                         \n    Low                                  55/122 (45.1%)   44/125 (35.2%)   50/120 (41.7%)\n    High                                 55/115 (47.8%)   47/115 (40.9%)   44/114 (38.6%)\nIMMUNOLOGY                                                                               \n  Immunoglobulin A Measurement                                                           \n    Low                                  51/120 (42.5%)   61/119 (51.3%)   50/120 (41.7%)\n    High                                 58/119 (48.7%)   54/123 (43.9%)   45/119 (37.8%)\n\n\n\n\n\nCodelibrary(teal.modules.clinical)\nlibrary(scda)\nlibrary(dplyr)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadlb <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adlb\") %>%\n  mutate(ONTRTFL = ifelse(AVISIT %in% c(\"SCREENING\", \"BASELINE\"), \"\", \"Y\")) %>%\n  var_relabel(PARAM = \"Laboratory Test\")\n\napp <- init(\n  data = cdisc_data(\n    cdisc_dataset(\"ADSL\", adsl, code = 'ADSL <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")'),\n    cdisc_dataset(\"ADLB\", adlb, code = '\n                  ADLB <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adlb\") %>%\n                mutate(ONTRTFL = ifelse(AVISIT %in% c(\"SCREENING\", \"BASELINE\"), \"\", \"Y\")) %>%\n                var_relabel(PARAM = \"Laboratory Test\")'),\n    check = TRUE\n  ),\n  modules = modules(\n    tm_t_abnormality(\n      label = \"Abnormality Table\",\n      dataname = \"ADLB\",\n      arm_var = choices_selected(\n        choices = variable_choices(adsl, subset = c(\"ARM\", \"ARMCD\")),\n        selected = \"ARM\"\n      ),\n      by_vars = choices_selected(\n        choices = variable_choices(adlb, subset = c(\"LBCAT\", \"PARAM\", \"AVISIT\")),\n        selected = c(\"LBCAT\", \"PARAM\"),\n        keep_order = TRUE\n      ),\n      grade = choices_selected(\n        choices = variable_choices(adlb, subset = \"ANRIND\"),\n        selected = \"ANRIND\",\n        fixed = TRUE\n      ),\n      abnormal = list(low = \"LOW\", high = \"HIGH\"),\n      exclude_base_abn = TRUE\n    )\n  )\n)\n\n[INFO] 2023-03-10 05:45:58.0257 pid:7166 token:[] teal.modules.clinical Initializing tm_t_abnormality\n\nCodeshinyApp(app$ui, app$server)\n\n\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n [1] teal.modules.clinical_0.8.14.9026 teal_0.12.0.9023                 \n [3] teal.transform_0.2.0.9011         teal.data_0.1.2.9013             \n [5] shiny_1.7.4                       tern_0.7.10.9056                 \n [7] rtables_0.6.0.1                   formatters_0.4.0                 \n [9] magrittr_2.0.3                    dplyr_1.1.0                      \n[11] scda_0.1.5.9009                  \n\nloaded via a namespace (and not attached):\n [1] sass_0.4.5               tidyr_1.3.0              jsonlite_1.8.4          \n [4] splines_4.2.2            R.utils_2.12.2           bslib_0.4.2             \n [7] teal.slice_0.2.0.9026    Rdpack_2.4               assertthat_0.2.1        \n[10] teal.code_0.3.0.9001     tern.gee_0.1.0.9002      yaml_2.3.7              \n[13] pillar_1.8.1             backports_1.4.1          lattice_0.20-45         \n[16] glue_1.6.2               teal.widgets_0.2.0.9024  digest_0.6.31           \n[19] promises_1.2.0.1         rbibutils_2.2.13         checkmate_2.1.0         \n[22] colorspace_2.1-0         R.oo_1.25.0              htmltools_0.5.4         \n[25] httpuv_1.6.9             Matrix_1.5-3             pkgconfig_2.0.3         \n[28] broom_1.0.3              logger_0.2.2             purrr_1.0.1             \n[31] xtable_1.8-4             mvtnorm_1.1-3            webshot_0.5.4           \n[34] scales_1.2.1             processx_3.8.0           fontawesome_0.5.0       \n[37] later_1.3.0              emmeans_1.8.4-1          tibble_3.1.8            \n[40] styler_1.9.1             generics_0.1.3           ggplot2_3.4.1           \n[43] ellipsis_0.3.2           shinyvalidate_0.1.2      cachem_1.0.7            \n[46] withr_2.5.0              shinyjs_2.1.0            geepack_1.3.9           \n[49] cli_3.6.0                survival_3.5-3           mime_0.12               \n[52] memoise_2.0.1            ps_1.7.2                 estimability_1.4.1      \n[55] evaluate_0.20            R.methodsS3_1.8.2        fansi_1.0.4             \n[58] R.cache_0.16.0           nlme_3.1-162             MASS_7.3-58.3           \n[61] forcats_1.0.0            teal.reporter_0.1.1.9013 tools_4.2.2             \n[64] lifecycle_1.0.3          munsell_0.5.0            callr_3.7.3             \n[67] compiler_4.2.2           jquerylib_0.1.4          rlang_1.0.6             \n[70] grid_4.2.2               htmlwidgets_1.6.1        rmarkdown_2.20          \n[73] shinyWidgets_0.7.6       gtable_0.3.1             codetools_0.2-19        \n[76] teal.logger_0.1.1.9004   R6_2.5.1                 knitr_1.42              \n[79] fastmap_1.1.1            utf8_1.2.3               Rcpp_1.0.10             \n[82] vctrs_0.5.2              tidyselect_1.2.0         xfun_0.37               \n[85] coda_0.19-4             \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R                       [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/tables/lab-results/lbt04.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "tables/lab-results/lbt03.html",
    "href": "tables/lab-results/lbt03.html",
    "title": "LBT03",
    "section": "",
    "text": "Data Setup\nStandard Table\nTeal\nSession Info\n\n\n\nFor illustration purposes, this example focuses on “C-Reactive Protein Measurement” starting from baseline, while excluding visit at week 1 for subjects who were randomized to the placebo group.\n\nCodelibrary(scda)\nlibrary(dplyr)\nlibrary(tern)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadlb <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adlb\")\n\n# Ensure character variables are converted to factors and empty strings and NAs are explicit missing levels.\nadsl <- df_explicit_na(adsl)\nadlb <- df_explicit_na(adlb)\n\nsaved_labels <- var_labels(adlb)\n\nadlb_f <- adlb %>%\n  filter(\n    PARAM == \"C-Reactive Protein Measurement\",\n    !(ARM == \"B: Placebo\" &\n      AVISIT == \"WEEK 1 DAY 8\"),\n    AVISIT != \"SCREENING\"\n  ) %>%\n  dplyr::mutate(\n    AVISIT = droplevels(AVISIT),\n    ABLFLL = ABLFL == \"Y\"\n  )\n\nvar_labels(adlb_f) <- c(saved_labels, \"\")\n\n\n\n\nThe LBT03 template is the result of a junction between the analysis of AVAL at baseline and CHG at visit time. AVAL is summarized for baseline visits and and CHG is summarized for post-baseline visits.\n\nCode# Define the split function\nsplit_fun <- drop_split_levels\n\nlyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ARM\") %>%\n  split_rows_by(\"AVISIT\", split_fun = split_fun, label_pos = \"topleft\", split_label = obj_label(adlb_f$AVISIT)) %>%\n  summarize_change(\n    \"CHG\",\n    variables = list(value = \"AVAL\", baseline_flag = \"ABLFLL\"),\n    na.rm = TRUE\n  )\n\nresult <- build_table(\n  lyt = lyt,\n  df = adlb_f,\n  alt_counts_df = adsl\n)\n\nresult\n\nAnalysis Visit    A: Drug X      B: Placebo    C: Combination\n                   (N=134)        (N=134)         (N=132)    \n—————————————————————————————————————————————————————————————\nBASELINE                                                     \n  n                  134            134             132      \n  Mean (SD)      0.97 (0.24)    1.00 (0.20)     1.01 (0.21)  \n  Median             0.99           1.00            1.00     \n  Min - Max      0.47 - 1.63    0.50 - 1.58     0.51 - 1.56  \nWEEK 1 DAY 8                                                 \n  n                  134             0              132      \n  Mean (SD)      0.07 (0.31)         NA         0.00 (0.33)  \n  Median             0.07            NA            -0.01     \n  Min - Max      -0.71 - 1.03        NA         -0.80 - 0.75 \nWEEK 2 DAY 15                                                \n  n                  134            134             132      \n  Mean (SD)      0.02 (0.31)    0.02 (0.27)     -0.03 (0.28) \n  Median             0.01           0.02           -0.04     \n  Min - Max      -0.85 - 0.76   -0.55 - 0.68    -0.76 - 0.50 \nWEEK 3 DAY 22                                                \n  n                  134            134             132      \n  Mean (SD)      0.03 (0.31)    -0.02 (0.27)    -0.01 (0.30) \n  Median             0.08           0.00           -0.03     \n  Min - Max      -0.92 - 0.79   -0.77 - 0.75    -0.72 - 0.86 \nWEEK 4 DAY 29                                                \n  n                  134            134             132      \n  Mean (SD)      0.07 (0.31)    -0.02 (0.28)    -0.01 (0.29) \n  Median             0.08          -0.03            0.02     \n  Min - Max      -0.78 - 1.04   -0.62 - 0.59    -0.82 - 0.82 \nWEEK 5 DAY 36                                                \n  n                  134            134             132      \n  Mean (SD)      0.02 (0.33)    0.02 (0.28)     -0.03 (0.29) \n  Median            -0.01           0.01           -0.04     \n  Min - Max      -1.00 - 0.84   -0.64 - 0.83    -0.84 - 0.79 \n\n\nIn the final step, a new variable is derived from AVISIT that can specify the method of estimation of the evaluated change.\n\nCodeadlb_f <- adlb_f %>% mutate(AVISIT_header = recode(AVISIT,\n  \"BASELINE\" = \"BASELINE\",\n  \"WEEK 1 DAY 8\" = \"WEEK 1 DAY 8 value minus baseline\",\n  \"WEEK 2 DAY 15\" = \"WEEK 2 DAY 15 value minus baseline\",\n  \"WEEK 3 DAY 22\" = \"WEEK 3 DAY 22 value minus baseline\",\n  \"WEEK 4 DAY 29\" = \"WEEK 4 DAY 29 value minus baseline\",\n  \"WEEK 5 DAY 36\" = \"WEEK 5 DAY 36 value minus baseline\"\n))\n\n# Define the split function\nsplit_fun <- drop_split_levels\n\nlyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ARM\") %>%\n  split_rows_by(\"AVISIT_header\",\n    split_fun = split_fun,\n    label_pos = \"topleft\",\n    split_label = obj_label(adlb_f$AVISIT)\n  ) %>%\n  summarize_change(\n    \"CHG\",\n    variables = list(value = \"AVAL\", baseline_flag = \"ABLFLL\"),\n    na.rm = TRUE\n  )\n\nresult <- build_table(\n  lyt = lyt,\n  df = adlb_f,\n  alt_counts_df = adsl\n)\n\nresult\n\nAnalysis Visit                        A: Drug X      B: Placebo    C: Combination\n                                       (N=134)        (N=134)         (N=132)    \n—————————————————————————————————————————————————————————————————————————————————\nBASELINE                                                                         \n  n                                      134            134             132      \n  Mean (SD)                          0.97 (0.24)    1.00 (0.20)     1.01 (0.21)  \n  Median                                 0.99           1.00            1.00     \n  Min - Max                          0.47 - 1.63    0.50 - 1.58     0.51 - 1.56  \nWEEK 1 DAY 8 value minus baseline                                                \n  n                                      134             0              132      \n  Mean (SD)                          0.07 (0.31)         NA         0.00 (0.33)  \n  Median                                 0.07            NA            -0.01     \n  Min - Max                          -0.71 - 1.03        NA         -0.80 - 0.75 \nWEEK 2 DAY 15 value minus baseline                                               \n  n                                      134            134             132      \n  Mean (SD)                          0.02 (0.31)    0.02 (0.27)     -0.03 (0.28) \n  Median                                 0.01           0.02           -0.04     \n  Min - Max                          -0.85 - 0.76   -0.55 - 0.68    -0.76 - 0.50 \nWEEK 3 DAY 22 value minus baseline                                               \n  n                                      134            134             132      \n  Mean (SD)                          0.03 (0.31)    -0.02 (0.27)    -0.01 (0.30) \n  Median                                 0.08           0.00           -0.03     \n  Min - Max                          -0.92 - 0.79   -0.77 - 0.75    -0.72 - 0.86 \nWEEK 4 DAY 29 value minus baseline                                               \n  n                                      134            134             132      \n  Mean (SD)                          0.07 (0.31)    -0.02 (0.28)    -0.01 (0.29) \n  Median                                 0.08          -0.03            0.02     \n  Min - Max                          -0.78 - 1.04   -0.62 - 0.59    -0.82 - 0.82 \nWEEK 5 DAY 36 value minus baseline                                               \n  n                                      134            134             132      \n  Mean (SD)                          0.02 (0.33)    0.02 (0.28)     -0.03 (0.29) \n  Median                                -0.01           0.01           -0.04     \n  Min - Max                          -1.00 - 0.84   -0.64 - 0.83    -0.84 - 0.79 \n\n\n\n\nHere, we pre-process and manually define the variable “Baseline or Absolute Change from Baseline”.\n\nCodelibrary(scda)\nlibrary(teal.modules.clinical)\nlibrary(dplyr)\n\nadsl <- df_explicit_na(synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\"))\nadlb <- df_explicit_na(synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adlb\")) %>%\n  filter(\n    !(ARM == \"B: Placebo\" & AVISIT == \"WEEK 1 DAY 8\"),\n    AVISIT != \"SCREENING\"\n  ) %>%\n  dplyr::mutate(\n    AVISIT = droplevels(AVISIT),\n    ABLFLL = ABLFL == \"Y\",\n    AVISIT_header = recode(AVISIT,\n      \"BASELINE\" = \"BASELINE\",\n      \"WEEK 1 DAY 8\" = \"WEEK 1 DAY 8 value minus baseline\",\n      \"WEEK 2 DAY 15\" = \"WEEK 2 DAY 15 value minus baseline\",\n      \"WEEK 3 DAY 22\" = \"WEEK 3 DAY 22 value minus baseline\",\n      \"WEEK 4 DAY 29\" = \"WEEK 4 DAY 29 value minus baseline\",\n      \"WEEK 5 DAY 36\" = \"WEEK 5 DAY 36 value minus baseline\"\n    )\n  ) %>%\n  dplyr::group_by(USUBJID, PARAM) %>%\n  dplyr::mutate(\n    AVAL_CHG = AVAL - (!ABLFLL) * sum(AVAL * ABLFLL)\n  ) %>%\n  dplyr::ungroup() %>%\n  var_relabel(\n    AVAL_CHG = \"Baseline or Absolute Change from Baseline\",\n    ABLFLL = \"Baseline Flag (TRUE/FALSE)\",\n    AVISIT_header = \"Analysis Visit\"\n  )\n\napp <- init(\n  data = cdisc_data(\n    cdisc_dataset(\"ADSL\", adsl, code = 'ADSL <- df_explicit_na(synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\"))'),\n    cdisc_dataset(\"ADLB\", adlb, code = '\n                  ADLB <- df_explicit_na(synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adlb\")) %>%\n                  filter(\n                    !(ARM == \"B: Placebo\" & AVISIT == \"WEEK 1 DAY 8\"),\n                    AVISIT != \"SCREENING\"\n                  ) %>%\n                  dplyr::mutate(\n                    AVISIT = droplevels(AVISIT),\n                    ABLFLL = ABLFL == \"Y\",\n                    AVISIT_header = recode(AVISIT,\n                           \"BASELINE\" = \"BASELINE\",\n                           \"WEEK 1 DAY 8\" = \"WEEK 1 DAY 8 value minus baseline\",\n                           \"WEEK 2 DAY 15\" = \"WEEK 2 DAY 15 value minus baseline\",\n                           \"WEEK 3 DAY 22\" = \"WEEK 3 DAY 22 value minus baseline\",\n                           \"WEEK 4 DAY 29\" = \"WEEK 4 DAY 29 value minus baseline\",\n                           \"WEEK 5 DAY 36\" = \"WEEK 5 DAY 36 value minus baseline\"\n                           )\n                  ) %>%\n                  dplyr::group_by(USUBJID, PARAM) %>%\n                  dplyr::mutate(\n                    AVAL_CHG = AVAL - (!ABLFLL) * sum(AVAL * ABLFLL)\n                  ) %>%\n                  dplyr::ungroup()  %>%\n                  var_relabel(\n                    AVAL_CHG = \"Baseline or Absolute Change from Baseline\",\n                    ABLFLL = \"Baseline Flag (TRUE/FALSE)\",\n                    AVISIT_header = \"Analysis Visit\"\n                  )'),\n    check = TRUE\n  ),\n  modules = modules(\n    tm_t_summary_by(\n      label = \"Laboratory Test Results Change from Baseline by Visit\",\n      dataname = \"ADLB\",\n      arm_var = choices_selected(\n        choices = variable_choices(adsl, c(\"ARM\", \"ARMCD\")),\n        selected = \"ARM\"\n      ),\n      by_vars = choices_selected(\n        choices = variable_choices(adlb, c(\"PARAM\", \"AVISIT_header\")), # note: order matters here. If `PARAM` is first, the split will be first by `PARAM`and then by `AVISIT`\n        selected = c(\"PARAM\", \"AVISIT_header\")\n      ),\n      summarize_vars = choices_selected(\n        choices = variable_choices(adlb, c(\"AVAL\", \"CHG\", \"AVAL_CHG\")),\n        selected = c(\"AVAL_CHG\")\n      ),\n      useNA = \"ifany\",\n      paramcd = choices_selected(\n        choices = value_choices(adlb, \"PARAMCD\", \"PARAM\"),\n        selected = \"CRP\"\n      )\n    )\n  ),\n  filter = list(ADLB = list(AVAL = list()))\n)\n\n[INFO] 2023-03-10 05:46:31.3635 pid:7242 token:[] teal.modules.clinical Initializing tm_t_summary_by\n\nCodeshinyApp(app$ui, app$server)\n\n\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n [1] teal.modules.clinical_0.8.14.9026 teal_0.12.0.9023                 \n [3] teal.transform_0.2.0.9011         teal.data_0.1.2.9013             \n [5] shiny_1.7.4                       tern_0.7.10.9056                 \n [7] rtables_0.6.0.1                   formatters_0.4.0                 \n [9] magrittr_2.0.3                    dplyr_1.1.0                      \n[11] scda_0.1.5.9009                  \n\nloaded via a namespace (and not attached):\n [1] sass_0.4.5               tidyr_1.3.0              jsonlite_1.8.4          \n [4] splines_4.2.2            R.utils_2.12.2           bslib_0.4.2             \n [7] teal.slice_0.2.0.9026    Rdpack_2.4               assertthat_0.2.1        \n[10] teal.code_0.3.0.9001     tern.gee_0.1.0.9002      yaml_2.3.7              \n[13] pillar_1.8.1             backports_1.4.1          lattice_0.20-45         \n[16] glue_1.6.2               teal.widgets_0.2.0.9024  digest_0.6.31           \n[19] promises_1.2.0.1         rbibutils_2.2.13         checkmate_2.1.0         \n[22] colorspace_2.1-0         R.oo_1.25.0              htmltools_0.5.4         \n[25] httpuv_1.6.9             Matrix_1.5-3             pkgconfig_2.0.3         \n[28] broom_1.0.3              logger_0.2.2             purrr_1.0.1             \n[31] xtable_1.8-4             mvtnorm_1.1-3            webshot_0.5.4           \n[34] scales_1.2.1             processx_3.8.0           fontawesome_0.5.0       \n[37] later_1.3.0              emmeans_1.8.4-1          tibble_3.1.8            \n[40] styler_1.9.1             farver_2.1.1             generics_0.1.3          \n[43] ggplot2_3.4.1            ellipsis_0.3.2           shinyvalidate_0.1.2     \n[46] cachem_1.0.7             withr_2.5.0              shinyjs_2.1.0           \n[49] geepack_1.3.9            cli_3.6.0                survival_3.5-3          \n[52] mime_0.12                memoise_2.0.1            ps_1.7.2                \n[55] estimability_1.4.1       evaluate_0.20            R.methodsS3_1.8.2       \n[58] fansi_1.0.4              R.cache_0.16.0           nlme_3.1-162            \n[61] MASS_7.3-58.3            forcats_1.0.0            textshaping_0.3.6       \n[64] teal.reporter_0.1.1.9013 tools_4.2.2              lifecycle_1.0.3         \n[67] munsell_0.5.0            callr_3.7.3              compiler_4.2.2          \n[70] jquerylib_0.1.4          systemfonts_1.0.4        rlang_1.0.6             \n[73] grid_4.2.2               htmlwidgets_1.6.1        labeling_0.4.2          \n[76] rmarkdown_2.20           shinyWidgets_0.7.6       gtable_0.3.1            \n[79] codetools_0.2-19         teal.logger_0.1.1.9004   R6_2.5.1                \n[82] knitr_1.42               fastmap_1.1.1            utf8_1.2.3              \n[85] ragg_1.2.5               Rcpp_1.0.10              vctrs_0.5.2             \n[88] tidyselect_1.2.0         xfun_0.37                coda_0.19-4             \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R                       [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/tables/lab-results/lbt03.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "tables/pharmacokinetic/pkpt03.html",
    "href": "tables/pharmacokinetic/pkpt03.html",
    "title": "PKPT03",
    "section": "",
    "text": "Data Setup\nStandard Table\nTeal\nSession Info\n\n\n\n\nCodelibrary(scda)\nlibrary(dplyr)\nlibrary(tern)\n\nadpp <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adpp\")\nadpp <- adpp %>% filter(PPSPEC == \"Plasma\", AVISIT == \"CYCLE 1 DAY 1\")\n\n\n\n\n\nCode# lyt creation\nlyt <- basic_table() %>%\n  split_rows_by(\n    var = \"ARMCD\",\n    split_fun = trim_levels_in_group(\"ARMCD\"),\n    label_pos = \"topleft\",\n    split_label = \"Treatment Arm\"\n  ) %>%\n  split_rows_by(\n    var = \"PKPARAM\",\n    label_pos = \"topleft\",\n    split_label = \"PK Parameter\"\n  ) %>%\n  analyze_vars_in_cols(\n    vars = \"AVAL\",\n    .stats = c(\n      \"n\", \"mean\", \"sd\", \"cv\",\n      \"geom_mean\", \"geom_cv\", \"median\",\n      \"min\", \"max\"\n    ),\n    .labels = c(\n      n = \"n\",\n      mean = \"Mean\",\n      sd = \"SD\",\n      cv = \"CV (%)\",\n      geom_mean = \"Geometric Mean\",\n      geom_cv = \"CV % Geometric Mean\",\n      median = \"Median\",\n      min = \"Minimum\",\n      max = \"Maximum\"\n    ),\n    .formats = c(\n      n = \"xx.\",\n      mean = sprintf_format(\"%.3e\"),\n      sd = sprintf_format(\"%.3e\"),\n      cv = \"xx.x\",\n      median = sprintf_format(\"%.3e\"),\n      geom_mean = sprintf_format(\"%.3e\"),\n      geom_cv = \"xx.x\",\n      min = sprintf_format(\"%.3e\"),\n      max = sprintf_format(\"%.3e\")\n    )\n  )\n\n\nPlasma Drug X\n\nCodeadpp0 <- adpp %>%\n  filter(PPCAT == \"Plasma Drug X\") %>%\n  h_pkparam_sort() %>%\n  mutate(PKPARAM = factor(paste0(TLG_DISPLAY, \" (\", AVALU, \")\"))) %>%\n  mutate(PKPARAM = reorder(PKPARAM, TLG_ORDER))\n\nresult <- build_table(lyt, df = adpp0)\nmain_title(result) <- paste(\"Summary of\", unique(adpp0$PPSPEC), \"PK Parameter by Treatment Arm, PK Population\")\nsubtitles(result) <- paste(\"Analyte:\", unique(adpp0$PPCAT), \"\\nVisit:\", unique(adpp0$AVISIT))\nresult\n\nSummary of Plasma PK Parameter by Treatment Arm, PK Population\nAnalyte: Plasma Drug X \nVisit: CYCLE 1 DAY 1\n\n——————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————\nTreatment Arm                                                                                                                             \n  PK Parameter              n      Mean         SD       CV (%)   Geometric Mean   CV % Geometric Mean    Median      Minimum     Maximum \n——————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————\nARM A                                                                                                                                     \n  Cmax (ug/mL)                                                                                                                            \n                           134   3.025e+01   6.239e+00    20.6      2.961e+01             21.0           2.986e+01   1.753e+01   4.871e+01\n  AUCinf obs (day*ug/mL)                                                                                                                  \n                           134   2.028e+02   3.766e+01    18.6      1.994e+02             18.7           1.971e+02   1.253e+02   3.110e+02\n  CL obs (ml/day/kg)                                                                                                                      \n                           134   5.043e+00   1.041e+00    20.6      4.929e+00             22.4           5.078e+00   2.255e+00   7.395e+00\nARM C                                                                                                                                     \n  Cmax (ug/mL)                                                                                                                            \n                           132   3.004e+01   5.457e+00    18.2      2.954e+01             18.9           2.977e+01   1.585e+01   4.757e+01\n  AUCinf obs (day*ug/mL)                                                                                                                  \n                           132   1.955e+02   3.785e+01    19.4      1.917e+02             20.1           1.962e+02   1.030e+02   3.145e+02\n  CL obs (ml/day/kg)                                                                                                                      \n                           132   5.009e+00   9.846e-01    19.7      4.907e+00             21.1           4.969e+00   2.102e+00   7.489e+00\n\n\nPlasma Drug Y\n\nCodeadpp1 <- adpp %>%\n  filter(PPCAT == \"Plasma Drug Y\") %>%\n  h_pkparam_sort() %>%\n  mutate(PKPARAM = factor(paste0(TLG_DISPLAY, \" (\", AVALU, \")\"))) %>%\n  mutate(PKPARAM = reorder(PKPARAM, TLG_ORDER))\n\nresult <- build_table(lyt, df = adpp1)\nmain_title(result) <- paste(\"Summary of\", unique(adpp1$PPSPEC), \"PK Parameter by Treatment Arm, PK Population\")\nsubtitles(result) <- paste(\"Analyte:\", unique(adpp1$PPCAT), \"\\nVisit:\", unique(adpp1$AVISIT))\nresult\n\nSummary of Plasma PK Parameter by Treatment Arm, PK Population\nAnalyte: Plasma Drug Y \nVisit: CYCLE 1 DAY 1\n\n——————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————\nTreatment Arm                                                                                                                             \n  PK Parameter              n      Mean         SD       CV (%)   Geometric Mean   CV % Geometric Mean    Median      Minimum     Maximum \n——————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————\nARM C                                                                                                                                     \n  Cmax (ug/mL)                                                                                                                            \n                           132   2.990e+01   5.550e+00    18.6      2.935e+01             20.1           2.969e+01   1.406e+01   4.345e+01\n  AUCinf obs (day*ug/mL)                                                                                                                  \n                           132   1.986e+02   3.792e+01    19.1      1.952e+02             18.9           1.953e+02   1.264e+02   3.183e+02\n  CL obs (ml/day/kg)                                                                                                                      \n                           132   4.955e+00   8.951e-01    18.1      4.873e+00             18.7           4.936e+00   2.987e+00   7.211e+00\n\n\n\n\n\n\nCode# In progress\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n[1] tern_0.7.10.9056 rtables_0.6.0.1  formatters_0.4.0 magrittr_2.0.3  \n[5] dplyr_1.1.0      scda_0.1.5.9009 \n\nloaded via a namespace (and not attached):\n [1] pillar_1.8.1      compiler_4.2.2    tools_4.2.2       digest_0.6.31    \n [5] lattice_0.20-45   jsonlite_1.8.4    evaluate_0.20     lifecycle_1.0.3  \n [9] tibble_3.1.8      checkmate_2.1.0   gtable_0.3.1      pkgconfig_2.0.3  \n[13] rlang_1.0.6       Matrix_1.5-3      cli_3.6.0         yaml_2.3.7       \n[17] xfun_0.37         fastmap_1.1.1     withr_2.5.0       knitr_1.42       \n[21] generics_0.1.3    vctrs_0.5.2       htmlwidgets_1.6.1 grid_4.2.2       \n[25] tidyselect_1.2.0  glue_1.6.2        R6_2.5.1          fansi_1.0.4      \n[29] Rdpack_2.4        survival_3.5-3    rmarkdown_2.20    tidyr_1.3.0      \n[33] purrr_1.0.1       ggplot2_3.4.1     codetools_0.2-19  splines_4.2.2    \n[37] backports_1.4.1   scales_1.2.1      htmltools_0.5.4   rbibutils_2.2.13 \n[41] colorspace_2.1-0  utf8_1.2.3        munsell_0.5.0     broom_1.0.3      \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R              [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/tables/pharmacokinetic/pkpt03.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "tables/pharmacokinetic/pkpt07.html",
    "href": "tables/pharmacokinetic/pkpt07.html",
    "title": "PKPT07",
    "section": "",
    "text": "Data Setup\nStandard Table – Urine\nTeal\nSession Info\n\n\n\n\nCodelibrary(scda)\nlibrary(dplyr)\nlibrary(tern)\nlibrary(stringr)\n\nadpp <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adpp\")\nadpp <- adpp %>% filter(AVISIT == \"CYCLE 1 DAY 1\", str_detect(tolower(PARAM), regex(\"norm by dose\", ignore_case = TRUE)))\n\n\n\n\n\nCode# lyt creation\nlyt <- basic_table() %>%\n  split_rows_by(\n    var = \"ARMCD\",\n    split_fun = trim_levels_in_group(\"ARMCD\"),\n    label_pos = \"topleft\",\n    split_label = \"Treatment Arm\"\n  ) %>%\n  split_rows_by(\n    var = \"PKPARAM\",\n    label_pos = \"topleft\",\n    split_label = \"PK Parameter\"\n  ) %>%\n  analyze_vars_in_cols(\n    vars = \"AVAL\",\n    .stats = c(\n      \"n\", \"mean\", \"sd\", \"cv\",\n      \"geom_mean\", \"geom_cv\", \"median\",\n      \"min\", \"max\"\n    ),\n    .labels = c(\n      n = \"n\",\n      mean = \"Mean\",\n      sd = \"SD\",\n      cv = \"CV (%)\",\n      geom_mean = \"Geometric Mean\",\n      geom_cv = \"CV % Geometric Mean\",\n      median = \"Median\",\n      min = \"Minimum\",\n      max = \"Maximum\"\n    ),\n    .formats = c(\n      n = \"xx.\",\n      mean = sprintf_format(\"%.3e\"),\n      sd = sprintf_format(\"%.3e\"),\n      cv = \"xx.x\",\n      median = sprintf_format(\"%.3e\"),\n      geom_mean = sprintf_format(\"%.3e\"),\n      geom_cv = \"xx.x\",\n      min = sprintf_format(\"%.3e\"),\n      max = sprintf_format(\"%.3e\")\n    )\n  )\n\n\nPlasma Drug X\n\nCodeadpp0 <- adpp %>%\n  filter(PPCAT == \"Plasma Drug X\") %>%\n  h_pkparam_sort() %>%\n  mutate(PKPARAM = factor(paste0(TLG_DISPLAY, \" (\", AVALU, \")\"))) %>%\n  mutate(PKPARAM = reorder(PKPARAM, TLG_ORDER))\n\nresult <- build_table(lyt, df = adpp0)\nmain_title(result) <- paste(\"Summary of\", unique(adpp0$PPSPEC), \"PK Parameter by Treatment Arm, PK Population\")\nsubtitles(result) <- paste(\"Analyte:\", unique(adpp0$PPCAT), \"\\nVisit:\", unique(adpp0$AVISIT))\nresult\n\nSummary of Urine PK Parameter by Treatment Arm, PK Population\nAnalyte: Plasma Drug X \nVisit: CYCLE 1 DAY 1\n\n——————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————\nTreatment Arm                                                                                                                         \n  PK Parameter          n      Mean         SD       CV (%)   Geometric Mean   CV % Geometric Mean    Median      Minimum     Maximum \n——————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————\nARM A                                                                                                                                 \n  RENALCLD (L/hr/mg)                                                                                                                  \n                       134   4.873e-03   9.654e-04    19.8      4.772e-03             21.2           4.967e-03   2.385e-03   7.258e-03\nARM C                                                                                                                                 \n  RENALCLD (L/hr/mg)                                                                                                                  \n                       132   5.110e-03   9.339e-04    18.3      5.019e-03             19.7           5.151e-03   2.356e-03   7.407e-03\n\n\nPlasma Drug Y\n\nCodeadpp1 <- adpp %>%\n  filter(PPCAT == \"Plasma Drug Y\") %>%\n  h_pkparam_sort() %>%\n  mutate(PKPARAM = factor(paste0(TLG_DISPLAY, \" (\", AVALU, \")\"))) %>%\n  mutate(PKPARAM = reorder(PKPARAM, TLG_ORDER))\n\nresult <- build_table(lyt, df = adpp1)\nmain_title(result) <- paste(\"Summary of\", unique(adpp1$PPSPEC), \"PK Parameter by Treatment Arm, PK Population\")\nsubtitles(result) <- paste(\"Analyte:\", unique(adpp1$PPCAT), \"\\nVisit:\", unique(adpp1$AVISIT))\nresult\n\nSummary of Urine PK Parameter by Treatment Arm, PK Population\nAnalyte: Plasma Drug Y \nVisit: CYCLE 1 DAY 1\n\n——————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————\nTreatment Arm                                                                                                                         \n  PK Parameter          n      Mean         SD       CV (%)   Geometric Mean   CV % Geometric Mean    Median      Minimum     Maximum \n——————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————\nARM C                                                                                                                                 \n  RENALCLD (L/hr/mg)                                                                                                                  \n                       132   5.093e-03   1.032e-03    20.3      4.985e-03             21.4           5.017e-03   2.356e-03   7.939e-03\n\n\n\n\n\n\nCode# In progress\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n[1] stringr_1.5.0    tern_0.7.10.9056 rtables_0.6.0.1  formatters_0.4.0\n[5] magrittr_2.0.3   dplyr_1.1.0      scda_0.1.5.9009 \n\nloaded via a namespace (and not attached):\n [1] pillar_1.8.1      compiler_4.2.2    tools_4.2.2       digest_0.6.31    \n [5] lattice_0.20-45   jsonlite_1.8.4    evaluate_0.20     lifecycle_1.0.3  \n [9] tibble_3.1.8      checkmate_2.1.0   gtable_0.3.1      pkgconfig_2.0.3  \n[13] rlang_1.0.6       Matrix_1.5-3      cli_3.6.0         yaml_2.3.7       \n[17] xfun_0.37         fastmap_1.1.1     withr_2.5.0       knitr_1.42       \n[21] generics_0.1.3    vctrs_0.5.2       htmlwidgets_1.6.1 grid_4.2.2       \n[25] tidyselect_1.2.0  glue_1.6.2        R6_2.5.1          fansi_1.0.4      \n[29] Rdpack_2.4        survival_3.5-3    rmarkdown_2.20    tidyr_1.3.0      \n[33] purrr_1.0.1       ggplot2_3.4.1     codetools_0.2-19  splines_4.2.2    \n[37] backports_1.4.1   scales_1.2.1      htmltools_0.5.4   rbibutils_2.2.13 \n[41] colorspace_2.1-0  utf8_1.2.3        stringi_1.7.12    munsell_0.5.0    \n[45] broom_1.0.3      \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R              [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/tables/pharmacokinetic/pkpt07.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "tables/pharmacokinetic/pkpt04.html",
    "href": "tables/pharmacokinetic/pkpt04.html",
    "title": "PKPT04",
    "section": "",
    "text": "Data Setup\nStandard Table\nTeal\nSession Info\n\n\n\n\nCodelibrary(scda)\nlibrary(dplyr)\nlibrary(tern)\n\nadpp <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adpp\")\nadpp <- adpp %>% filter(PPSPEC == \"Urine\", AVISIT == \"CYCLE 1 DAY 1\")\n\n\n\n\n\nCode# lyt creation\nlyt <- basic_table() %>%\n  split_cols_by(\n    var = \"ARMCD\",\n    split_fun = trim_levels_in_group(\"ARMCD\"),\n    # label_pos = \"topleft\",\n    split_label = \"Treatment Arm\"\n  ) %>%\n  split_rows_by(\n    var = \"PKPARAM\",\n    label_pos = \"topleft\",\n    split_label = \"PK Parameter\"\n  ) %>%\n  tern::summarize_vars(\n    vars = \"AVAL\",\n    .stats = c(\"n\", \"mean_sd\", \"cv\", \"geom_mean\", \"geom_cv\", \"median\", \"range\"),\n    .formats = c(\n      n = \"xx.\",\n      mean_sd = sprintf_format(\"%.3e (%.3e)\"),\n      cv = \"xx.x\",\n      geom_mean = sprintf_format(\"%.3e\"),\n      geom_cv = \"xx.x\",\n      median = sprintf_format(\"%.3e\"),\n      range = sprintf_format(\"%.3e - %.3e\")\n    )\n  )\n\n\nPlasma Drug X\n\nCodeadpp0 <- adpp %>%\n  filter(PPCAT == \"Plasma Drug X\") %>%\n  h_pkparam_sort() %>%\n  mutate(PKPARAM = factor(paste0(TLG_DISPLAY, \" (\", AVALU, \")\"))) %>%\n  mutate(PKPARAM = reorder(PKPARAM, TLG_ORDER))\n\nresult <- build_table(lyt, df = adpp0)\nmain_title(result) <- paste(\"Summary of\", unique(adpp0$PPSPEC), \"PK Parameter by Treatment Arm, PK Population\")\nsubtitles(result) <- paste(\"Analyte:\", unique(adpp0$PPCAT), \"\\nVisit:\", unique(adpp0$AVISIT))\nresult\n\nSummary of Urine PK Parameter by Treatment Arm, PK Population\nAnalyte: Plasma Drug X \nVisit: CYCLE 1 DAY 1\n\n—————————————————————————————————————————————————————————————————————\nPK Parameter                    ARM A                   ARM C        \n—————————————————————————————————————————————————————————————————————\nAe (mg)                                                              \n  n                              268                     264         \n  Mean (SD)             1.551e+00 (3.385e-01)   1.535e+00 (2.978e-01)\n  CV (%)                        21.8                    19.4         \n  Geometric Mean              1.513e+00               1.505e+00      \n  CV % Geometric Mean           23.0                    20.3         \n  Median                      1.547e+00               1.547e+00      \n  Min - Max             7.021e-01 - 2.464e+00   8.502e-01 - 2.208e+00\nFe (%)                                                               \n  n                              268                     264         \n  Mean (SD)             1.571e+01 (3.348e+00)   1.609e+01 (3.103e+00)\n  CV (%)                        21.3                    19.3         \n  Geometric Mean              1.534e+01               1.578e+01      \n  CV % Geometric Mean           22.2                    20.2         \n  Median                      1.577e+01               1.604e+01      \n  Min - Max             8.147e+00 - 2.452e+01   8.503e+00 - 2.443e+01\nCLR (L/hr)                                                           \n  n                              134                     132         \n  Mean (SD)             4.918e-02 (9.611e-03)   5.024e-02 (1.050e-02)\n  CV (%)                        19.5                    20.9         \n  Geometric Mean              4.818e-02               4.913e-02      \n  CV % Geometric Mean           21.0                    21.9         \n  Median                      4.909e-02               4.984e-02      \n  Min - Max             2.488e-02 - 7.511e-02   2.505e-02 - 8.560e-02\nRENALCLD (L/hr/mg)                                                   \n  n                              134                     132         \n  Mean (SD)             4.873e-03 (9.654e-04)   5.110e-03 (9.339e-04)\n  CV (%)                        19.8                    18.3         \n  Geometric Mean              4.772e-03               5.019e-03      \n  CV % Geometric Mean           21.2                    19.7         \n  Median                      4.967e-03               5.151e-03      \n  Min - Max             2.385e-03 - 7.258e-03   2.356e-03 - 7.407e-03\n\n\nPlasma Drug Y\n\nCodeadpp1 <- adpp %>%\n  filter(PPCAT == \"Plasma Drug Y\") %>%\n  h_pkparam_sort() %>%\n  mutate(PKPARAM = factor(paste0(TLG_DISPLAY, \" (\", AVALU, \")\"))) %>%\n  mutate(PKPARAM = reorder(PKPARAM, TLG_ORDER))\n\nresult <- build_table(lyt, df = adpp1)\nmain_title(result) <- paste(\"Summary of\", unique(adpp1$PPSPEC), \"PK Parameter by Treatment Arm, PK Population\")\nsubtitles(result) <- paste(\"Analyte:\", unique(adpp1$PPCAT), \"\\nVisit:\", unique(adpp1$AVISIT))\nresult\n\nSummary of Urine PK Parameter by Treatment Arm, PK Population\nAnalyte: Plasma Drug Y \nVisit: CYCLE 1 DAY 1\n\n—————————————————————————————————————————————\nPK Parameter                    ARM C        \n—————————————————————————————————————————————\nAe (mg)                                      \n  n                              264         \n  Mean (SD)             1.598e+00 (3.154e-01)\n  CV (%)                        19.7         \n  Geometric Mean              1.565e+00      \n  CV % Geometric Mean           21.4         \n  Median                      1.603e+00      \n  Min - Max             8.574e-01 - 2.257e+00\nFe (%)                                       \n  n                              264         \n  Mean (SD)             1.583e+01 (3.077e+00)\n  CV (%)                        19.4         \n  Geometric Mean              1.552e+01      \n  CV % Geometric Mean           20.2         \n  Median                      1.570e+01      \n  Min - Max             8.311e+00 - 2.378e+01\nCLR (L/hr)                                   \n  n                              132         \n  Mean (SD)             4.966e-02 (1.009e-02)\n  CV (%)                        20.3         \n  Geometric Mean              4.857e-02      \n  CV % Geometric Mean           22.0         \n  Median                      4.912e-02      \n  Min - Max             1.839e-02 - 7.761e-02\nRENALCLD (L/hr/mg)                           \n  n                              132         \n  Mean (SD)             5.093e-03 (1.032e-03)\n  CV (%)                        20.3         \n  Geometric Mean              4.985e-03      \n  CV % Geometric Mean           21.4         \n  Median                      5.017e-03      \n  Min - Max             2.356e-03 - 7.939e-03\n\n\n\n\n\n\nCode# In progress\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n[1] tern_0.7.10.9056 rtables_0.6.0.1  formatters_0.4.0 magrittr_2.0.3  \n[5] dplyr_1.1.0      scda_0.1.5.9009 \n\nloaded via a namespace (and not attached):\n [1] pillar_1.8.1      compiler_4.2.2    tools_4.2.2       digest_0.6.31    \n [5] lattice_0.20-45   jsonlite_1.8.4    evaluate_0.20     lifecycle_1.0.3  \n [9] tibble_3.1.8      checkmate_2.1.0   gtable_0.3.1      pkgconfig_2.0.3  \n[13] rlang_1.0.6       Matrix_1.5-3      cli_3.6.0         yaml_2.3.7       \n[17] xfun_0.37         fastmap_1.1.1     withr_2.5.0       knitr_1.42       \n[21] generics_0.1.3    vctrs_0.5.2       htmlwidgets_1.6.1 grid_4.2.2       \n[25] tidyselect_1.2.0  glue_1.6.2        R6_2.5.1          fansi_1.0.4      \n[29] Rdpack_2.4        survival_3.5-3    rmarkdown_2.20    tidyr_1.3.0      \n[33] purrr_1.0.1       ggplot2_3.4.1     codetools_0.2-19  splines_4.2.2    \n[37] backports_1.4.1   scales_1.2.1      htmltools_0.5.4   rbibutils_2.2.13 \n[41] colorspace_2.1-0  utf8_1.2.3        munsell_0.5.0     broom_1.0.3      \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R              [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/tables/pharmacokinetic/pkpt04.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "tables/pharmacokinetic/adat04a.html",
    "href": "tables/pharmacokinetic/adat04a.html",
    "title": "ADAT04A",
    "section": "",
    "text": "Data Setup\nSummary of Treatment Emergent NAbs\nTeal\nSession Info\n\n\n\n\nCodelibrary(tern)\nlibrary(dplyr)\nlibrary(scda)\nlibrary(tibble)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadab <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adab\")\n\ncombodf <- tribble(\n  ~valname, ~label, ~levelcombo, ~exargs,\n  \"all_X\", \"All Drug X\", c(\"A: Drug X\", \"C: Combination\"), list(),\n  \"all_pt\", \"All Patients\", c(\"A: Drug X\", \"B: Placebo\", \"C: Combination\"), list()\n)\n\n# Ensure character variables are converted to factors and empty strings and NAs are explicit missing levels.\nadsl <- df_explicit_na(adsl)\n\n# Baseline Pts\nadab_b <- df_explicit_na(adab) %>%\n  filter(\n    ABLFL == \"Y\",\n    ADABLFL == \"Y\",\n    PARAM %in% c(\n      \"ADA interpreted per sample result\",\n      \"NAB interpreted per sample result\"\n    )\n  ) %>%\n  select(-PARAMCD, -AVALC, -AVALU) %>%\n  tidyr::pivot_wider(\n    names_from = PARAM,\n    values_from = AVAL\n  ) %>%\n  mutate_at(\n    c(\"ADA interpreted per sample result\", \"NAB interpreted per sample result\"),\n    as.logical\n  ) %>%\n  mutate(\n    ADABLFL = ADABLFL == \"Y\",\n    PADABLFL = `ADA interpreted per sample result` == \"TRUE\",\n    PNABBLFL = `NAB interpreted per sample result` == \"TRUE\",\n    NNABBLFL = `NAB interpreted per sample result` == \"FALSE\"\n  ) %>%\n  var_relabel(\n    ADABLFL = \"Baseline evaluable patients for ADA\",\n    PADABLFL = \"Patients with a positive ADA sample at baseline\",\n    PNABBLFL = \"Patients with a positive NAb sample at baseline\",\n    NNABBLFL = \"Patient with no positive NAb samples at baseline\"\n  )\n\n# Post Baseline Treatment Enhanced NAb positive Pts\nadab_pb <- df_explicit_na(adab) %>%\n  filter(\n    ABLFL != \"Y\",\n    ADAPBLFL == \"Y\",\n    PARAM %in% c(\n      \"ADA interpreted per sample result\",\n      \"Treatment Emergent - Positive, Neutralizing Antibody\",\n      \"Treatment induced ADA, Neutralizing Antibody\",\n      \"Treatment enhanced ADA, Neutralizing Antibody\",\n      \"NAB interpreted per sample result\",\n      \"Treatment unaffected, Neutralizing Antibody\"\n    )\n  ) %>%\n  select(-PARAMCD, -AVALC, -AVALU, -ARELTM2, -NRELTM2) %>%\n  unique() %>%\n  tidyr::pivot_wider(\n    names_from = PARAM,\n    values_from = AVAL\n  ) %>%\n  mutate_at(\n    c(\n      \"ADA interpreted per sample result\", \"NAB interpreted per sample result\",\n      \"Treatment Emergent - Positive, Neutralizing Antibody\",\n      \"Treatment induced ADA, Neutralizing Antibody\",\n      \"Treatment enhanced ADA, Neutralizing Antibody\",\n      \"Treatment unaffected, Neutralizing Antibody\"\n    ),\n    as.logical\n  ) %>%\n  mutate(\n    ADAPBLFL = ADAPBLFL == \"Y\",\n    ADAPFL = `ADA interpreted per sample result` == \"TRUE\",\n    TENABPFL = `Treatment Emergent - Positive, Neutralizing Antibody` == \"TRUE\",\n    TINPBFL = `Treatment induced ADA, Neutralizing Antibody` == \"TRUE\",\n    TENPBFL = `Treatment enhanced ADA, Neutralizing Antibody` == \"TRUE\",\n    NABNFL = `NAB interpreted per sample result` == \"FALSE\",\n    TUNPBFL = `Treatment unaffected, Neutralizing Antibody` == \"TRUE\"\n  ) %>%\n  var_relabel(\n    ADAPBLFL = \"Post-baseline evaluable patients for ADA\",\n    ADAPFL = \"Patients positive for ADA\",\n    TENABPFL = \"Patients positive for Treatment Emergent NAb\",\n    TINPBFL = \"Treatment-induced NAb\",\n    TENPBFL = \"Treatment-enhanced NAb\",\n    NABNFL = \"Patients negative for NAb\",\n    TUNPBFL = \"Treatment unaffected\"\n  )\n\n\n\n\n\nCode# Layout for Baseline Prevalence of NAbs\nlyt_bl <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\n    \"ACTARM\",\n    split_fun = add_combo_levels(combodf)\n  ) %>%\n  count_patients_with_flags(\n    \"USUBJID\",\n    flag_variables = formatters::var_labels(adab_b[, c(\"ADABLFL\", \"PADABLFL\")]),\n    table_names = \"t1\",\n    .stats = \"count\",\n    var_labels = \"Baseline Prevalence of NAbs\",\n    show_labels = \"visible\"\n  ) %>%\n  count_patients_with_flags(\n    \"USUBJID\",\n    flag_variables = var_labels(adab_b[, \"PNABBLFL\"]),\n    table_names = \"t2\",\n    .indent_mods = 1L\n  ) %>%\n  count_patients_with_flags(\n    \"USUBJID\",\n    flag_variables = var_labels(adab_b[, \"NNABBLFL\"]),\n    .stats = \"count\",\n    table_names = \"t3\",\n    .indent_mods = 1L,\n    show_labels = \"hidden\"\n  )\n\n# Layout for incidence of NAbs\nlyt_pb <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\n    \"ACTARM\",\n    split_fun = add_combo_levels(combodf)\n  ) %>%\n  count_patients_with_flags(\n    \"USUBJID\",\n    flag_variables = formatters::var_labels(adab_pb[, c(\"ADAPBLFL\", \"ADAPFL\")]),\n    .stats = \"count\",\n    var_labels = \"Incidence of Treatment Emergent NAbs\",\n    show_labels = \"visible\",\n    table_names = \"tb1\"\n  ) %>%\n  count_patients_with_flags(\n    \"USUBJID\",\n    flag_variables = formatters::var_labels(data.frame(TENABPFL = adab_pb[, \"TENABPFL\"])),\n    table_names = \"tb2\",\n    .indent_mods = 1L,\n    show_labels = \"hidden\"\n  ) %>%\n  count_patients_with_flags(\n    \"USUBJID\",\n    flag_variables = formatters::var_labels(adab_pb[, c(\"TINPBFL\", \"TENPBFL\")]),\n    .stats = \"count\",\n    table_names = \"tb3\",\n    .indent_mods = 1L,\n    show_labels = \"hidden\"\n  ) %>%\n  count_patients_with_flags(\n    \"USUBJID\",\n    flag_variables = formatters::var_labels(data.frame(NABNFL = adab_pb[, \"NABNFL\"])),\n    table_names = \"tb4\",\n    .indent_mods = 1L,\n    show_labels = \"hidden\"\n  ) %>%\n  count_patients_with_flags(\n    \"USUBJID\",\n    flag_variables = formatters::var_labels(data.frame(TUNPBFL = adab_pb[, \"TUNPBFL\"])),\n    .stats = \"count\",\n    table_names = \"tb5\",\n    .indent_mods = 1L,\n    show_labels = \"hidden\"\n  )\n\nresult_1 <- build_table(lyt_bl, df = adab_b, alt_counts_df = adsl)\nresult_2 <- build_table(lyt_pb, df = adab_pb, alt_counts_df = adsl)\n\n# Combine tables\nresult <- rbind(result_1, result_2)\n\n# Change the column order\nresult <- cbind_rtables(result[, 1], result[, 3]) %>%\n  cbind_rtables(result[, 4]) %>%\n  cbind_rtables(result[, 2]) %>%\n  cbind_rtables(result[, 5])\n\nmain_title(result) <- paste(\n  \"Baseline Prevalence and Incidence of Treatment Emergent NAbs\"\n)\nsubtitles(result) <- paste(\"Protocol:\", unique(adab$PARCAT1)[1])\nmain_footer(result) <- paste(\n  \"NAb = Neutralizing Antibodies ADA = Anti-Drug Antibodies (is also referred to as ATA, or Anti-Therapeutic Antibodies) Baseline evaluable patient for ADA = a patient with an ADA assay result from a baseline sample(s)\n  Baseline evaluable patient for NAb = a patient with a NAb assay result from a baseline sample(s)\n  Post-baseline evaluable patient for ADA = a patient with an ADA assay result from at least one post-baseline sample\n  Post-baseline evaluable patient for NAb = a patient with a NAb assay result from at least one post-baseline sample\n  Number of patients positive for ADA = the number of post-baseline evaluable patients for ADA determined to have Treatment Emergent ADA during the study period.\nNumber of patients positive for Treatment Emergent NAb = the number (and percentage) of post-baseline evaluable patients for ADA determined to have treatment-induced NAb or treatment-enhanced NAb during the study period.\nTreatment-induced = a patient with negative or missing baseline result(s) and at least one positive post-baseline result. Treatment-enhanced = a patient with positive result at baseline who has one or more post-baseline titer results that are at least 0.60 t.u. greater than the baseline titer result.\nNumber of patients negative for Treatment Emergent NAb = number of post-baseline evaluable patients with negative or missing baseline NAb result(s) and all negative post-baseline NAb results, or a patient who is NAb treatment unaffected.\nTreatment unaffected = A post-baseline evaluable patient with a positive result at baseline and (a) where all post-baseline titer results are less than 0.60 t.u. greater than the baseline titer result, OR (b) where all post-baseline results are negative or missing. For any positive sample with titer result less than the minimum reportable titer or any positive sample where a titer cannot be obtained, titer value is imputed as equal to the minimum reportable titer.\"\n)\nresult\n\nBaseline Prevalence and Incidence of Treatment Emergent NAbs\nProtocol: A: Drug X Antibody\n\n——————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————\n                                                     A: Drug X    C: Combination   All Drug X    B: Placebo   All Patients\n                                                      (N=134)        (N=132)         (N=266)      (N=134)       (N=400)   \n——————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————\nBaseline Prevalence of NAbs                                                                                               \n  Baseline evaluable patients for ADA                   134            132             266           0            266     \n  Patients with a positive ADA sample at baseline       63              64             127           0            127     \nPatients with a positive NAb sample at baseline     63 (47.0%)      64 (48.5%)     127 (47.7%)       NA       127 (47.7%) \nPatient with no positive NAb samples at baseline        71              68             139           0            139     \nIncidence of Treatment Emergent NAbs                                                                                      \n  Post-baseline evaluable patients for ADA              134            132             266           0            266     \n  Patients positive for ADA                             101             90             191           0            191     \nPatients positive for Treatment Emergent NAb        38 (28.4%)      26 (19.7%)     64 (24.1%)        NA        64 (24.1%) \nTreatment-induced NAb                                   38              26             64            0             64     \nTreatment-enhanced NAb                                   0              0               0            0             0      \nPatients negative for NAb                           106 (79.1%)     99 (75.0%)     205 (77.1%)       NA       205 (77.1%) \nTreatment unaffected                                    63              64             127           0            127     \n——————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————\n\nNAb = Neutralizing Antibodies ADA = Anti-Drug Antibodies (is also referred to as ATA, or Anti-Therapeutic Antibodies) Baseline evaluable patient for ADA = a patient with an ADA assay result from a baseline sample(s)\n  Baseline evaluable patient for NAb = a patient with a NAb assay result from a baseline sample(s)\n  Post-baseline evaluable patient for ADA = a patient with an ADA assay result from at least one post-baseline sample\n  Post-baseline evaluable patient for NAb = a patient with a NAb assay result from at least one post-baseline sample\n  Number of patients positive for ADA = the number of post-baseline evaluable patients for ADA determined to have Treatment Emergent ADA during the study period.\nNumber of patients positive for Treatment Emergent NAb = the number (and percentage) of post-baseline evaluable patients for ADA determined to have treatment-induced NAb or treatment-enhanced NAb during the study period.\nTreatment-induced = a patient with negative or missing baseline result(s) and at least one positive post-baseline result. Treatment-enhanced = a patient with positive result at baseline who has one or more post-baseline titer results that are at least 0.60 t.u. greater than the baseline titer result.\nNumber of patients negative for Treatment Emergent NAb = number of post-baseline evaluable patients with negative or missing baseline NAb result(s) and all negative post-baseline NAb results, or a patient who is NAb treatment unaffected.\nTreatment unaffected = A post-baseline evaluable patient with a positive result at baseline and (a) where all post-baseline titer results are less than 0.60 t.u. greater than the baseline titer result, OR (b) where all post-baseline results are negative or missing. For any positive sample with titer result less than the minimum reportable titer or any positive sample where a titer cannot be obtained, titer value is imputed as equal to the minimum reportable titer.\n\n\n\n\n\nCode# In progress\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n[1] tibble_3.1.8     scda_0.1.5.9009  dplyr_1.1.0      tern_0.7.10.9056\n[5] rtables_0.6.0.1  formatters_0.4.0 magrittr_2.0.3  \n\nloaded via a namespace (and not attached):\n [1] compiler_4.2.2    pillar_1.8.1      forcats_1.0.0     tools_4.2.2      \n [5] digest_0.6.31     lattice_0.20-45   jsonlite_1.8.4    evaluate_0.20    \n [9] lifecycle_1.0.3   gtable_0.3.1      checkmate_2.1.0   pkgconfig_2.0.3  \n[13] rlang_1.0.6       Matrix_1.5-3      cli_3.6.0         yaml_2.3.7       \n[17] xfun_0.37         fastmap_1.1.1     withr_2.5.0       knitr_1.42       \n[21] generics_0.1.3    vctrs_0.5.2       htmlwidgets_1.6.1 grid_4.2.2       \n[25] tidyselect_1.2.0  glue_1.6.2        R6_2.5.1          fansi_1.0.4      \n[29] Rdpack_2.4        survival_3.5-3    rmarkdown_2.20    ggplot2_3.4.1    \n[33] purrr_1.0.1       tidyr_1.3.0       codetools_0.2-19  splines_4.2.2    \n[37] backports_1.4.1   scales_1.2.1      htmltools_0.5.4   rbibutils_2.2.13 \n[41] colorspace_2.1-0  utf8_1.2.3        munsell_0.5.0     broom_1.0.3      \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R              [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/tables/pharmacokinetic/adat04a.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "tables/pharmacokinetic/pkpt05.html",
    "href": "tables/pharmacokinetic/pkpt05.html",
    "title": "PKPT05",
    "section": "",
    "text": "Data Setup\nStandard Table\nTeal\nSession Info\n\n\n\n\nCodelibrary(scda)\nlibrary(dplyr)\nlibrary(tern)\n\nadpp <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adpp\")\nadpp <- adpp %>% filter(PPSPEC == \"Urine\", AVISIT == \"CYCLE 1 DAY 1\")\n\n\n\n\n\nCode# lyt creation\nlyt <- basic_table() %>%\n  split_rows_by(\n    var = \"ARMCD\",\n    split_fun = trim_levels_in_group(\"ARMCD\"),\n    label_pos = \"topleft\",\n    split_label = \"Treatment Arm\"\n  ) %>%\n  split_rows_by(\n    var = \"PKPARAM\",\n    label_pos = \"topleft\",\n    split_label = \"PK Parameter\"\n  ) %>%\n  analyze_vars_in_cols(\n    vars = \"AVAL\",\n    .stats = c(\n      \"n\", \"mean\", \"sd\", \"cv\",\n      \"geom_mean\", \"geom_cv\", \"median\",\n      \"min\", \"max\"\n    ),\n    .labels = c(\n      n = \"n\",\n      mean = \"Mean\",\n      sd = \"SD\",\n      cv = \"CV (%)\",\n      geom_mean = \"Geometric Mean\",\n      geom_cv = \"CV % Geometric Mean\",\n      median = \"Median\",\n      min = \"Minimum\",\n      max = \"Maximum\"\n    ),\n    .formats = c(\n      n = \"xx.\",\n      mean = sprintf_format(\"%.3e\"),\n      sd = sprintf_format(\"%.3e\"),\n      cv = \"xx.x\",\n      median = sprintf_format(\"%.3e\"),\n      geom_mean = sprintf_format(\"%.3e\"),\n      geom_cv = \"xx.x\",\n      min = sprintf_format(\"%.3e\"),\n      max = sprintf_format(\"%.3e\")\n    )\n  )\n\n\nPlasma Drug X\n\nCodeadpp0 <- adpp %>%\n  filter(PPCAT == \"Plasma Drug X\") %>%\n  h_pkparam_sort() %>%\n  mutate(PKPARAM = factor(paste0(TLG_DISPLAY, \" (\", AVALU, \")\"))) %>%\n  mutate(PKPARAM = reorder(PKPARAM, TLG_ORDER))\n\nresult <- build_table(lyt, df = adpp0)\nmain_title(result) <- paste(\"Summary of\", unique(adpp0$PPSPEC), \"PK Parameter by Treatment Arm, PK Population\")\nsubtitles(result) <- paste(\"Analyte:\", unique(adpp0$PPCAT), \"\\nVisit:\", unique(adpp0$AVISIT))\nresult\n\nSummary of Urine PK Parameter by Treatment Arm, PK Population\nAnalyte: Plasma Drug X \nVisit: CYCLE 1 DAY 1\n\n——————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————\nTreatment Arm                                                                                                                         \n  PK Parameter          n      Mean         SD       CV (%)   Geometric Mean   CV % Geometric Mean    Median      Minimum     Maximum \n——————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————\nARM A                                                                                                                                 \n  Ae (mg)                                                                                                                             \n                       268   1.551e+00   3.385e-01    21.8      1.513e+00             23.0           1.547e+00   7.021e-01   2.464e+00\n  Fe (%)                                                                                                                              \n                       268   1.571e+01   3.348e+00    21.3      1.534e+01             22.2           1.577e+01   8.147e+00   2.452e+01\n  CLR (L/hr)                                                                                                                          \n                       134   4.918e-02   9.611e-03    19.5      4.818e-02             21.0           4.909e-02   2.488e-02   7.511e-02\n  RENALCLD (L/hr/mg)                                                                                                                  \n                       134   4.873e-03   9.654e-04    19.8      4.772e-03             21.2           4.967e-03   2.385e-03   7.258e-03\nARM C                                                                                                                                 \n  Ae (mg)                                                                                                                             \n                       264   1.535e+00   2.978e-01    19.4      1.505e+00             20.3           1.547e+00   8.502e-01   2.208e+00\n  Fe (%)                                                                                                                              \n                       264   1.609e+01   3.103e+00    19.3      1.578e+01             20.2           1.604e+01   8.503e+00   2.443e+01\n  CLR (L/hr)                                                                                                                          \n                       132   5.024e-02   1.050e-02    20.9      4.913e-02             21.9           4.984e-02   2.505e-02   8.560e-02\n  RENALCLD (L/hr/mg)                                                                                                                  \n                       132   5.110e-03   9.339e-04    18.3      5.019e-03             19.7           5.151e-03   2.356e-03   7.407e-03\n\n\nPlasma Drug Y\n\nCodeadpp1 <- adpp %>%\n  filter(PPCAT == \"Plasma Drug Y\") %>%\n  h_pkparam_sort() %>%\n  mutate(PKPARAM = factor(paste0(TLG_DISPLAY, \" (\", AVALU, \")\"))) %>%\n  mutate(PKPARAM = reorder(PKPARAM, TLG_ORDER))\n\nresult <- build_table(lyt, df = adpp1)\nmain_title(result) <- paste(\"Summary of\", unique(adpp1$PPSPEC), \"PK Parameter by Treatment Arm, PK Population\")\nsubtitles(result) <- paste(\"Analyte:\", unique(adpp1$PPCAT), \"\\nVisit:\", unique(adpp1$AVISIT))\nresult\n\nSummary of Urine PK Parameter by Treatment Arm, PK Population\nAnalyte: Plasma Drug Y \nVisit: CYCLE 1 DAY 1\n\n——————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————\nTreatment Arm                                                                                                                         \n  PK Parameter          n      Mean         SD       CV (%)   Geometric Mean   CV % Geometric Mean    Median      Minimum     Maximum \n——————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————\nARM C                                                                                                                                 \n  Ae (mg)                                                                                                                             \n                       264   1.598e+00   3.154e-01    19.7      1.565e+00             21.4           1.603e+00   8.574e-01   2.257e+00\n  Fe (%)                                                                                                                              \n                       264   1.583e+01   3.077e+00    19.4      1.552e+01             20.2           1.570e+01   8.311e+00   2.378e+01\n  CLR (L/hr)                                                                                                                          \n                       132   4.966e-02   1.009e-02    20.3      4.857e-02             22.0           4.912e-02   1.839e-02   7.761e-02\n  RENALCLD (L/hr/mg)                                                                                                                  \n                       132   5.093e-03   1.032e-03    20.3      4.985e-03             21.4           5.017e-03   2.356e-03   7.939e-03\n\n\n\n\n\n\nCode# In progress\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n[1] tern_0.7.10.9056 rtables_0.6.0.1  formatters_0.4.0 magrittr_2.0.3  \n[5] dplyr_1.1.0      scda_0.1.5.9009 \n\nloaded via a namespace (and not attached):\n [1] pillar_1.8.1      compiler_4.2.2    tools_4.2.2       digest_0.6.31    \n [5] lattice_0.20-45   jsonlite_1.8.4    evaluate_0.20     lifecycle_1.0.3  \n [9] tibble_3.1.8      checkmate_2.1.0   gtable_0.3.1      pkgconfig_2.0.3  \n[13] rlang_1.0.6       Matrix_1.5-3      cli_3.6.0         yaml_2.3.7       \n[17] xfun_0.37         fastmap_1.1.1     withr_2.5.0       knitr_1.42       \n[21] generics_0.1.3    vctrs_0.5.2       htmlwidgets_1.6.1 grid_4.2.2       \n[25] tidyselect_1.2.0  glue_1.6.2        R6_2.5.1          fansi_1.0.4      \n[29] Rdpack_2.4        survival_3.5-3    rmarkdown_2.20    tidyr_1.3.0      \n[33] purrr_1.0.1       ggplot2_3.4.1     codetools_0.2-19  splines_4.2.2    \n[37] backports_1.4.1   scales_1.2.1      htmltools_0.5.4   rbibutils_2.2.13 \n[41] colorspace_2.1-0  utf8_1.2.3        munsell_0.5.0     broom_1.0.3      \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R              [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/tables/pharmacokinetic/pkpt05.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "tables/pharmacokinetic/adat01.html",
    "href": "tables/pharmacokinetic/adat01.html",
    "title": "ADAT01",
    "section": "",
    "text": "Data Setup\nStandard Table\nTeal\nSession Info\n\n\n\n\nCodelibrary(tern)\nlibrary(dplyr)\nlibrary(scda)\nlibrary(tibble)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadab <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adab\")\n\ncombodf <- tribble(\n  ~valname, ~label, ~levelcombo, ~exargs,\n  \"all_X\", \"All Drug X\", c(\"A: Drug X\", \"C: Combination\"), list(),\n  \"all_pt\", \"All Patients\", c(\"A: Drug X\", \"B: Placebo\", \"C: Combination\"), list()\n)\n\n# Ensure character variables are converted to factors and empty strings and NAs are explicit missing levels.\nadsl <- df_explicit_na(adsl)\nadab <- adab %>%\n  filter(PARCAT1 == \"A: Drug X Antibody\") %>%\n  select(-ARELTM2, -NRELTM2)\n\n# Baseline Pts\nadab_b <- df_explicit_na(adab) %>%\n  filter(\n    ABLFL == \"Y\",\n    ADABLFL == \"Y\",\n    PARAM %in% c(\"ADA interpreted per sample result\")\n  ) %>%\n  select(-PARAMCD, -AVALC, -AVALU) %>%\n  tidyr::pivot_wider(\n    names_from = PARAM,\n    values_from = AVAL\n  ) %>%\n  mutate_at(\n    c(\"ADA interpreted per sample result\"),\n    as.logical\n  ) %>%\n  mutate(\n    ADABLFL = ADABLFL == \"Y\",\n    PADABLFL = `ADA interpreted per sample result` == \"TRUE\",\n    NADABLFL = `ADA interpreted per sample result` == \"FALSE\"\n  ) %>%\n  var_relabel(\n    ADABLFL = \"Baseline evaluable patients\",\n    PADABLFL = \"Patient with a positive sample at baseline\",\n    NADABLFL = \"Patient with no positive samples at baseline\"\n  )\n\n# Post Baseline Treatment Enhanced NAb positive Pts\nadab_pb <- df_explicit_na(adab) %>%\n  filter(\n    ABLFL != \"Y\",\n    ADAPBLFL == \"Y\",\n    PARAM %in% c(\n      \"ADA interpreted per sample result\",\n      \"Treatment Emergent - Positive\",\n      \"Treatment induced ADA\",\n      \"Treatment enhanced ADA\",\n      \"Treatment Emergent - Negative\",\n      \"Treatment unaffected\"\n    )\n  ) %>%\n  select(-PARAMCD, -AVALC, -AVALU) %>%\n  unique() %>%\n  tidyr::pivot_wider(\n    names_from = PARAM,\n    values_from = AVAL\n  ) %>%\n  mutate_at(\n    c(\n      \"ADA interpreted per sample result\", \"Treatment Emergent - Positive\",\n      \"Treatment induced ADA\", \"Treatment enhanced ADA\",\n      \"Treatment Emergent - Negative\", \"Treatment unaffected\"\n    ),\n    as.logical\n  ) %>%\n  mutate(\n    ADAPBLFL = ADAPBLFL == \"Y\",\n    PTEFL = `Treatment Emergent - Positive` == \"TRUE\",\n    TIFL = `Treatment induced ADA` == \"TRUE\",\n    TEFL = `Treatment enhanced ADA` == \"TRUE\",\n    NTEFL = `Treatment Emergent - Negative` == \"TRUE\",\n    TUFL = `Treatment unaffected` == \"TRUE\"\n  ) %>%\n  var_relabel(\n    ADAPBLFL = \"Post-baseline evaluable patients\",\n    PTEFL = \"Patient positive for Treatment Emergent ADA\",\n    TIFL = \"Treatment-induced ADA\",\n    TEFL = \"Treatment-enhanced ADA\",\n    NTEFL = \"Patient negative for Treatment Emergent ADA\",\n    TUFL = \"Treatment unaffected\"\n  )\n\n\n\n\n\nCode# Layout for Baseline Prevalence of NAbs\nlyt_bl <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\n    \"ACTARM\",\n    split_fun = add_combo_levels(combodf)\n  ) %>%\n  count_patients_with_flags(\n    \"USUBJID\",\n    flag_variables = formatters::var_labels(adab_b[, c(\"ADABLFL\")]),\n    .stats = \"count\",\n    var_labels = \"Baseline Prevalence of ADAs\",\n    show_labels = \"visible\",\n    table_names = \"t1\"\n  ) %>%\n  count_patients_with_flags(\n    \"USUBJID\",\n    flag_variables = var_labels(adab_b[, \"PADABLFL\"]),\n    table_names = \"t2\",\n    .indent_mods = 1L,\n    var_labels = \"a\",\n    show_labels = \"hidden\"\n  ) %>%\n  count_patients_with_flags(\n    \"USUBJID\",\n    flag_variables = formatters::var_labels(adab_b[, c(\"NADABLFL\")]),\n    .stats = \"count\",\n    show_labels = \"hidden\",\n    .indent_mods = 1L,\n    table_names = \"t3\"\n  )\n\n# Layout for incidence of NAbs\nlyt_pb <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\n    \"ACTARM\",\n    split_fun = add_combo_levels(combodf)\n  ) %>%\n  count_patients_with_flags(\n    \"USUBJID\",\n    flag_variables = formatters::var_labels(adab_pb[, c(\"ADAPBLFL\")]),\n    .stats = \"count\",\n    var_labels = \"Incidence of Treatment Emergent ADAs\",\n    show_labels = \"visible\",\n    table_names = \"tb1\"\n  ) %>%\n  count_patients_with_flags(\n    \"USUBJID\",\n    flag_variables = formatters::var_labels(data.frame(PTEFL = adab_pb[, \"PTEFL\"])),\n    table_names = \"tb2\",\n    .indent_mods = 1L,\n    show_labels = \"hidden\"\n  ) %>%\n  count_patients_with_flags(\n    \"USUBJID\",\n    flag_variables = formatters::var_labels(adab_pb[, c(\"TIFL\", \"TEFL\")]),\n    .stats = \"count\",\n    table_names = \"tb3\",\n    .indent_mods = 2L,\n    show_labels = \"hidden\"\n  ) %>%\n  count_patients_with_flags(\n    \"USUBJID\",\n    flag_variables = formatters::var_labels(data.frame(NTEFL = adab_pb[, \"NTEFL\"])),\n    table_names = \"tb4\",\n    .indent_mods = 1L,\n    show_labels = \"hidden\"\n  ) %>%\n  count_patients_with_flags(\n    \"USUBJID\",\n    flag_variables = formatters::var_labels(data.frame(TUFL = adab_pb[, \"TUFL\"])),\n    .stats = \"count\",\n    table_names = \"tb5\",\n    .indent_mods = 2L,\n    show_labels = \"hidden\"\n  )\n\nresult_1 <- build_table(lyt_bl, df = adab_b, alt_counts_df = adsl)\nresult_2 <- build_table(lyt_pb, df = adab_pb, alt_counts_df = adsl)\n\n# Combine tables.\nresult_1@col_info <- result_2@col_info\nresult <- rbind(result_1, result_2)\n\n# Change the column order.\nresult <- cbind_rtables(result[, 1], result[, 3]) %>%\n  cbind_rtables(result[, 4]) %>%\n  cbind_rtables(result[, 2]) %>%\n  cbind_rtables(result[, 5])\n\nmain_title(result) <- paste(\n  \"Baseline Prevalence and Incidence of Treatment Emergent ADA\"\n)\nmain_footer(result) <- paste(\n  \"ADA = Anti-Drug Antibodies (is also referred to as ATA, or Anti-Therapeutic Antibodies) Baseline evaluable patient = a patient with an ADA assay result from a baseline sample(s)\n  Post-baseline evaluable patient = a patient with an ADA assay result from at least one post-baseline sample Number of patients positive for Treatment Emergent\n  ADA = the number (and percentage) of post-baseline evaluable patients determined to have treatment-induced ADA or treatment-enhanced ADA during the study period.\n  Treatment-induced ADA = a patient with negative or missing baseline ADA result(s) and at least one positive post-baseline ADA result.\n  Treatment-enhanced ADA = a patient with positive ADA result at baseline who has one or more post-baseline titer results that are at least 0.60 t.u. greater than the baseline titer result.\n  Number of patients negative for Treatment Emergent ADA = number of post-baseline evaluable patients with negative or missing baseline ADA result(s) and all negative post-baseline results, or a patient who is treatment unaffected.\n  Treatment unaffected = A post-baseline evaluable patient with a positive ADA result at baseline and (a) where all post-baseline titer results are less than 0.60 t.u. greater than the baseline titer result, OR (b) where all post-baseline results are negative or missing.\n  For any positive sample with titer result less than the minimum reportable titer or any positive sample where a titer cannot be obtained, titer value is imputed as equal to the minimum reportable titer.\"\n)\nresult\n\nBaseline Prevalence and Incidence of Treatment Emergent ADA\n\n————————————————————————————————————————————————————————————————————————————————————————————————————————————————————\n                                               A: Drug X    C: Combination   All Drug X    B: Placebo   All Patients\n                                                (N=134)        (N=132)         (N=266)      (N=134)       (N=400)   \n————————————————————————————————————————————————————————————————————————————————————————————————————————————————————\nBaseline Prevalence of ADAs                                                                                         \n  Baseline evaluable patients                     134            132             266           0            266     \nPatient with a positive sample at baseline     63 (47.0%)     64 (48.5%)     127 (47.7%)       NA       127 (47.7%) \nPatient with no positive samples at baseline       71             68             139           0            139     \nIncidence of Treatment Emergent ADAs                                                                                \n  Post-baseline evaluable patients                134            132             266           0            266     \nPatient positive for Treatment Emergent ADA    38 (28.4%)     26 (19.7%)     64 (24.1%)        NA        64 (24.1%) \nTreatment-induced ADA                              38             26             64            0             64     \nTreatment-enhanced ADA                             0              0               0            0             0      \nPatient negative for Treatment Emergent ADA    96 (71.6%)    106 (80.3%)     202 (75.9%)       NA       202 (75.9%) \nTreatment unaffected                               63             64             127           0            127     \n————————————————————————————————————————————————————————————————————————————————————————————————————————————————————\n\nADA = Anti-Drug Antibodies (is also referred to as ATA, or Anti-Therapeutic Antibodies) Baseline evaluable patient = a patient with an ADA assay result from a baseline sample(s)\n  Post-baseline evaluable patient = a patient with an ADA assay result from at least one post-baseline sample Number of patients positive for Treatment Emergent\n  ADA = the number (and percentage) of post-baseline evaluable patients determined to have treatment-induced ADA or treatment-enhanced ADA during the study period.\n  Treatment-induced ADA = a patient with negative or missing baseline ADA result(s) and at least one positive post-baseline ADA result.\n  Treatment-enhanced ADA = a patient with positive ADA result at baseline who has one or more post-baseline titer results that are at least 0.60 t.u. greater than the baseline titer result.\n  Number of patients negative for Treatment Emergent ADA = number of post-baseline evaluable patients with negative or missing baseline ADA result(s) and all negative post-baseline results, or a patient who is treatment unaffected.\n  Treatment unaffected = A post-baseline evaluable patient with a positive ADA result at baseline and (a) where all post-baseline titer results are less than 0.60 t.u. greater than the baseline titer result, OR (b) where all post-baseline results are negative or missing.\n  For any positive sample with titer result less than the minimum reportable titer or any positive sample where a titer cannot be obtained, titer value is imputed as equal to the minimum reportable titer.\n\n\n\n\n\nCode# In progress\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n[1] tibble_3.1.8     scda_0.1.5.9009  dplyr_1.1.0      tern_0.7.10.9056\n[5] rtables_0.6.0.1  formatters_0.4.0 magrittr_2.0.3  \n\nloaded via a namespace (and not attached):\n [1] compiler_4.2.2    pillar_1.8.1      forcats_1.0.0     tools_4.2.2      \n [5] digest_0.6.31     lattice_0.20-45   jsonlite_1.8.4    evaluate_0.20    \n [9] lifecycle_1.0.3   gtable_0.3.1      checkmate_2.1.0   pkgconfig_2.0.3  \n[13] rlang_1.0.6       Matrix_1.5-3      cli_3.6.0         yaml_2.3.7       \n[17] xfun_0.37         fastmap_1.1.1     withr_2.5.0       knitr_1.42       \n[21] generics_0.1.3    vctrs_0.5.2       htmlwidgets_1.6.1 grid_4.2.2       \n[25] tidyselect_1.2.0  glue_1.6.2        R6_2.5.1          fansi_1.0.4      \n[29] Rdpack_2.4        survival_3.5-3    rmarkdown_2.20    ggplot2_3.4.1    \n[33] purrr_1.0.1       tidyr_1.3.0       codetools_0.2-19  splines_4.2.2    \n[37] backports_1.4.1   scales_1.2.1      htmltools_0.5.4   rbibutils_2.2.13 \n[41] colorspace_2.1-0  utf8_1.2.3        munsell_0.5.0     broom_1.0.3      \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R              [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/tables/pharmacokinetic/adat01.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "tables/pharmacokinetic/adat02.html",
    "href": "tables/pharmacokinetic/adat02.html",
    "title": "ADAT02",
    "section": "",
    "text": "Data Setup\nStandard Table\nTeal\nSession Info\n\n\n\n\nCodelibrary(tern)\nlibrary(dplyr)\nlibrary(scda)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadab <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adab\")\n\n# Ensure character variables are converted to factors and empty strings and NAs are explicit missing levels.\nadsl <- df_explicit_na(adsl)\nadab <- df_explicit_na(adab) %>%\n  filter(\n    ADAPBLFL == \"Y\",\n    !PARAM %in% c(\n      \"NAB interpreted per sample result\",\n      \"NAB Status of a patient\",\n      \"Treatment enhanced ADA\"\n    )\n  ) %>%\n  select(-PARAMCD, -AVALC, -AVALU, -ARELTM2, -NRELTM2) %>%\n  unique() %>%\n  tidyr::pivot_wider(\n    names_from = PARAM,\n    values_from = AVAL\n  ) %>%\n  mutate_at(\n    c(\"Treatment induced ADA\", \"Transient ADA\", \"Persistent ADA\"),\n    as.logical\n  ) %>%\n  mutate(\n    ADAPBLFL = ADAPBLFL == \"Y\",\n    TI_ADA = `Treatment induced ADA`\n  ) %>%\n  var_relabel(\n    ADAPBLFL = \"Post-baseline evaluable patients\",\n    TI_ADA = \"Treatment-induced ADA patients\"\n  )\n\nadab_ti <- adab %>%\n  filter(`Treatment induced ADA`)\n\n\n\n\n\nCode# Layout for post-baseline evaluable patient variables from adab dataset.\nlyt_adab <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\n    \"ACTARM\",\n    split_fun = drop_split_levels\n  ) %>%\n  count_patients_with_flags(\n    \"USUBJID\",\n    flag_variables = var_labels(data.frame(ADAPBLFL = adab[, \"ADAPBLFL\"])),\n    .stats = \"count\",\n    table_names = \"post_baseline\"\n  ) %>%\n  count_patients_with_flags(\n    \"USUBJID\",\n    flag_variables = var_labels(data.frame(TI_ADA = adab[, \"TI_ADA\"]))\n  )\n\n# Layout for treatment-induced patient variables from adab dataset.\nlyt_adab_ti <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\n    \"ACTARM\",\n    split_fun = drop_split_levels\n  ) %>%\n  count_patients_with_flags(\n    \"USUBJID\",\n    flag_variables = c(\"Transient ADA\", \"Persistent ADA\"),\n    var_labels = \"Treatment-induced ADA patients with\",\n    show_labels = \"visible\"\n  ) %>%\n  summarize_vars(\n    \"Time to onset of ADA\",\n    .stats = \"median\",\n    nested = FALSE,\n    .labels = c(median = \"Median time to onset of ADA (weeks)\")\n  ) %>%\n  summarize_vars(\n    \"Antibody titer units\",\n    .stats = \"range\",\n    nested = FALSE,\n    .labels = c(range = \"ADA titer range (min - max)\")\n  )\n\nresult_adab <- build_table(lyt_adab, df = adab, alt_counts_df = adsl)\nresult_adab_ti <- build_table(lyt_adab_ti, df = adab_ti, alt_counts_df = adsl)\n\n# Combine tables.\ncol_info(result_adab) <- col_info(result_adab_ti)\nresult <- rbind(\n  result_adab,\n  result_adab_ti\n)\n\nmain_title(result) <- paste(\n  \"Summary of Patients with Treatment-Induced ADA, PK Population\"\n)\nsubtitles(result) <- paste(\"Protocol:\", unique(adab$PARCAT1)[1])\nmain_footer(result) <- paste(\n  \"ADA = Anti-Drug Antibodies (is also referred to as ATA, or Anti-Therapeutic\n  Antibodies)\n  Treatment-induced ADA = negative or missing baseline.\n  ADA result(s) and at least one positive post-baseline ADA result.\n  Transient ADA = ADA positive result detected (a) at only one post-baseline\n  sampling timepoint (excluding last timepoint) OR (b) at 2 or more timepoints\n  during treatment where the first and last ADA positive samples are separated\n  by a period of < 16 weeks, irrespective of any negative samples in between.\n  Persistent ADA = ADA positive result detected (a) at the last post-baseline\n  sampling timepoint, OR (b) at 2 or more time points during treatment where\n  the first and last ADA positive samples are separated by a period ≥ 16\n  weeks, irrespective of any negative samples in between.\"\n)\nresult\n\nSummary of Patients with Treatment-Induced ADA, PK Population\nProtocol: A: Drug X Antibody\n\n—————————————————————————————————————————————————————————————————\n                                      A: Drug X    C: Combination\n                                       (N=134)        (N=132)    \n—————————————————————————————————————————————————————————————————\nPost-baseline evaluable patients         134            132      \nTreatment-induced ADA patients        38 (28.4%)     26 (19.7%)  \nTreatment-induced ADA patients with                              \n  Transient ADA                           0              0       \n  Persistent ADA                      38 (100%)      26 (100%)   \nMedian time to onset of ADA (weeks)      0.1            0.1      \nADA titer range (min - max)           1.0 - 1.4      1.0 - 1.4   \n—————————————————————————————————————————————————————————————————\n\nADA = Anti-Drug Antibodies (is also referred to as ATA, or Anti-Therapeutic\n  Antibodies)\n  Treatment-induced ADA = negative or missing baseline.\n  ADA result(s) and at least one positive post-baseline ADA result.\n  Transient ADA = ADA positive result detected (a) at only one post-baseline\n  sampling timepoint (excluding last timepoint) OR (b) at 2 or more timepoints\n  during treatment where the first and last ADA positive samples are separated\n  by a period of < 16 weeks, irrespective of any negative samples in between.\n  Persistent ADA = ADA positive result detected (a) at the last post-baseline\n  sampling timepoint, OR (b) at 2 or more time points during treatment where\n  the first and last ADA positive samples are separated by a period ≥ 16\n  weeks, irrespective of any negative samples in between.\n\n\n\n\n\nCode# In progress\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n[1] scda_0.1.5.9009  dplyr_1.1.0      tern_0.7.10.9056 rtables_0.6.0.1 \n[5] formatters_0.4.0 magrittr_2.0.3  \n\nloaded via a namespace (and not attached):\n [1] compiler_4.2.2    pillar_1.8.1      forcats_1.0.0     tools_4.2.2      \n [5] digest_0.6.31     lattice_0.20-45   jsonlite_1.8.4    evaluate_0.20    \n [9] lifecycle_1.0.3   tibble_3.1.8      gtable_0.3.1      checkmate_2.1.0  \n[13] pkgconfig_2.0.3   rlang_1.0.6       Matrix_1.5-3      cli_3.6.0        \n[17] yaml_2.3.7        xfun_0.37         fastmap_1.1.1     withr_2.5.0      \n[21] knitr_1.42        generics_0.1.3    vctrs_0.5.2       htmlwidgets_1.6.1\n[25] grid_4.2.2        tidyselect_1.2.0  glue_1.6.2        R6_2.5.1         \n[29] fansi_1.0.4       Rdpack_2.4        survival_3.5-3    rmarkdown_2.20   \n[33] ggplot2_3.4.1     purrr_1.0.1       tidyr_1.3.0       codetools_0.2-19 \n[37] splines_4.2.2     backports_1.4.1   scales_1.2.1      htmltools_0.5.4  \n[41] rbibutils_2.2.13  colorspace_2.1-0  utf8_1.2.3        munsell_0.5.0    \n[45] broom_1.0.3      \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R              [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/tables/pharmacokinetic/adat02.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "tables/pharmacokinetic/pkpt06.html",
    "href": "tables/pharmacokinetic/pkpt06.html",
    "title": "PKPT06",
    "section": "",
    "text": "Data Setup\nStandard Table\nTeal\nSession Info\n\n\n\n\nCodelibrary(scda)\nlibrary(dplyr)\nlibrary(tern)\nlibrary(stringr)\n\nadpp <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adpp\")\nadpp <- adpp %>% filter(AVISIT == \"CYCLE 1 DAY 1\", str_detect(tolower(PARAM), regex(\"norm by dose\", ignore_case = TRUE)))\n\n\n\n\n\nCode# lyt creation\nlyt <- basic_table() %>%\n  split_cols_by(\n    var = \"ARMCD\",\n    split_fun = trim_levels_in_group(\"ARMCD\"),\n    # label_pos = \"topleft\",\n    split_label = \"Treatment Arm\"\n  ) %>%\n  split_rows_by(\n    var = \"PKPARAM\",\n    label_pos = \"topleft\",\n    split_label = \"PK Parameter\"\n  ) %>%\n  tern::summarize_vars(\n    vars = \"AVAL\",\n    .stats = c(\"n\", \"mean_sd\", \"cv\", \"geom_mean\", \"geom_cv\", \"median\", \"range\"),\n    .formats = c(\n      n = \"xx.\",\n      mean_sd = sprintf_format(\"%.3e (%.3e)\"),\n      cv = \"xx.x\",\n      geom_mean = sprintf_format(\"%.3e\"),\n      geom_cv = \"xx.x\",\n      median = sprintf_format(\"%.3e\"),\n      range = sprintf_format(\"%.3e - %.3e\")\n    )\n  )\n\n\nPlasma Drug X\n\nCodeadpp0 <- adpp %>%\n  filter(PPCAT == \"Plasma Drug X\") %>%\n  h_pkparam_sort() %>%\n  mutate(PKPARAM = factor(paste0(TLG_DISPLAY, \" (\", AVALU, \")\"))) %>%\n  mutate(PKPARAM = reorder(PKPARAM, TLG_ORDER))\n\nresult <- build_table(lyt, df = adpp0)\nmain_title(result) <- paste(\"Summary of Dose-Normalized PK Parameter by Treatment Arm, PK Population\")\nsubtitles(result) <- paste(\"Analyte:\", unique(adpp0$PPCAT), \"\\nVisit:\", unique(adpp0$AVISIT))\nresult\n\nSummary of Dose-Normalized PK Parameter by Treatment Arm, PK Population\nAnalyte: Plasma Drug X \nVisit: CYCLE 1 DAY 1\n\n—————————————————————————————————————————————————————————————————————\nPK Parameter                    ARM A                   ARM C        \n—————————————————————————————————————————————————————————————————————\nRENALCLD (L/hr/mg)                                                   \n  n                              134                     132         \n  Mean (SD)             4.873e-03 (9.654e-04)   5.110e-03 (9.339e-04)\n  CV (%)                        19.8                    18.3         \n  Geometric Mean              4.772e-03               5.019e-03      \n  CV % Geometric Mean           21.2                    19.7         \n  Median                      4.967e-03               5.151e-03      \n  Min - Max             2.385e-03 - 7.258e-03   2.356e-03 - 7.407e-03\n\n\nPlasma Drug Y\n\nCodeadpp1 <- adpp %>%\n  filter(PPCAT == \"Plasma Drug Y\") %>%\n  h_pkparam_sort() %>%\n  mutate(PKPARAM = factor(paste0(TLG_DISPLAY, \" (\", AVALU, \")\"))) %>%\n  mutate(PKPARAM = reorder(PKPARAM, TLG_ORDER))\n\nresult <- build_table(lyt, df = adpp1)\nmain_title(result) <- paste(\"Summary of Dose-Normalized PK Parameter by Treatment Arm, PK Population\")\nsubtitles(result) <- paste(\"Analyte:\", unique(adpp1$PPCAT), \"\\nVisit:\", unique(adpp1$AVISIT))\nresult\n\nSummary of Dose-Normalized PK Parameter by Treatment Arm, PK Population\nAnalyte: Plasma Drug Y \nVisit: CYCLE 1 DAY 1\n\n—————————————————————————————————————————————\nPK Parameter                    ARM C        \n—————————————————————————————————————————————\nRENALCLD (L/hr/mg)                           \n  n                              132         \n  Mean (SD)             5.093e-03 (1.032e-03)\n  CV (%)                        20.3         \n  Geometric Mean              4.985e-03      \n  CV % Geometric Mean           21.4         \n  Median                      5.017e-03      \n  Min - Max             2.356e-03 - 7.939e-03\n\n\n\n\n\n\nCode# In progress\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n[1] stringr_1.5.0    tern_0.7.10.9056 rtables_0.6.0.1  formatters_0.4.0\n[5] magrittr_2.0.3   dplyr_1.1.0      scda_0.1.5.9009 \n\nloaded via a namespace (and not attached):\n [1] pillar_1.8.1      compiler_4.2.2    tools_4.2.2       digest_0.6.31    \n [5] lattice_0.20-45   jsonlite_1.8.4    evaluate_0.20     lifecycle_1.0.3  \n [9] tibble_3.1.8      checkmate_2.1.0   gtable_0.3.1      pkgconfig_2.0.3  \n[13] rlang_1.0.6       Matrix_1.5-3      cli_3.6.0         yaml_2.3.7       \n[17] xfun_0.37         fastmap_1.1.1     withr_2.5.0       knitr_1.42       \n[21] generics_0.1.3    vctrs_0.5.2       htmlwidgets_1.6.1 grid_4.2.2       \n[25] tidyselect_1.2.0  glue_1.6.2        R6_2.5.1          fansi_1.0.4      \n[29] Rdpack_2.4        survival_3.5-3    rmarkdown_2.20    tidyr_1.3.0      \n[33] purrr_1.0.1       ggplot2_3.4.1     codetools_0.2-19  splines_4.2.2    \n[37] backports_1.4.1   scales_1.2.1      htmltools_0.5.4   rbibutils_2.2.13 \n[41] colorspace_2.1-0  utf8_1.2.3        stringi_1.7.12    munsell_0.5.0    \n[45] broom_1.0.3      \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R              [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/tables/pharmacokinetic/pkpt06.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "tables/pharmacokinetic/pkpt02.html",
    "href": "tables/pharmacokinetic/pkpt02.html",
    "title": "PKPT02",
    "section": "",
    "text": "Data Setup\nStandard Table – Plasma\nTeal\nSession Info\n\n\n\n\nCodelibrary(scda)\nlibrary(dplyr)\nlibrary(tern)\n\nadpp <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adpp\")\nadpp <- adpp %>% filter(PPSPEC == \"Plasma\", AVISIT == \"CYCLE 1 DAY 1\")\n\n\n\n\n\nCode# lyt creation\nlyt <- basic_table() %>%\n  split_cols_by(\n    var = \"ARMCD\",\n    split_fun = trim_levels_in_group(\"ARMCD\"),\n    # label_pos = \"topleft\",\n    split_label = \"Treatment Arm\"\n  ) %>%\n  split_rows_by(\n    var = \"PKPARAM\",\n    label_pos = \"topleft\",\n    split_label = \"PK Parameter\"\n  ) %>%\n  tern::summarize_vars(\n    vars = \"AVAL\",\n    .stats = c(\"n\", \"mean_sd\", \"cv\", \"geom_mean\", \"geom_cv\", \"median\", \"range\"),\n    .formats = c(\n      n = \"xx.\",\n      mean_sd = sprintf_format(\"%.3e (%.3e)\"),\n      cv = \"xx.x\",\n      geom_mean = sprintf_format(\"%.3e\"),\n      geom_cv = \"xx.x\",\n      median = sprintf_format(\"%.3e\"),\n      range = sprintf_format(\"%.3e - %.3e\")\n    )\n  )\n\n\nPlasma Drug X\n\nCodeadpp0 <- adpp %>%\n  filter(PPCAT == \"Plasma Drug X\") %>%\n  h_pkparam_sort() %>%\n  mutate(PKPARAM = factor(paste0(TLG_DISPLAY, \" (\", AVALU, \")\"))) %>%\n  mutate(PKPARAM = reorder(PKPARAM, TLG_ORDER))\n\nresult <- build_table(lyt, df = adpp0)\nmain_title(result) <- paste(\"Summary of\", unique(adpp0$PPSPEC), \"PK Parameter by Treatment Arm, PK Population\")\nsubtitles(result) <- paste(\"Analyte:\", unique(adpp0$PPCAT), \"\\nVisit:\", unique(adpp0$AVISIT))\nresult\n\nSummary of Plasma PK Parameter by Treatment Arm, PK Population\nAnalyte: Plasma Drug X \nVisit: CYCLE 1 DAY 1\n\n——————————————————————————————————————————————————————————————————————\nPK Parameter                     ARM A                   ARM C        \n——————————————————————————————————————————————————————————————————————\nCmax (ug/mL)                                                          \n  n                               134                     132         \n  Mean (SD)              3.025e+01 (6.239e+00)   3.004e+01 (5.457e+00)\n  CV (%)                         20.6                    18.2         \n  Geometric Mean               2.961e+01               2.954e+01      \n  CV % Geometric Mean            21.0                    18.9         \n  Median                       2.986e+01               2.977e+01      \n  Min - Max              1.753e+01 - 4.871e+01   1.585e+01 - 4.757e+01\nAUCinf obs (day*ug/mL)                                                \n  n                               134                     132         \n  Mean (SD)              2.028e+02 (3.766e+01)   1.955e+02 (3.785e+01)\n  CV (%)                         18.6                    19.4         \n  Geometric Mean               1.994e+02               1.917e+02      \n  CV % Geometric Mean            18.7                    20.1         \n  Median                       1.971e+02               1.962e+02      \n  Min - Max              1.253e+02 - 3.110e+02   1.030e+02 - 3.145e+02\nCL obs (ml/day/kg)                                                    \n  n                               134                     132         \n  Mean (SD)              5.043e+00 (1.041e+00)   5.009e+00 (9.846e-01)\n  CV (%)                         20.6                    19.7         \n  Geometric Mean               4.929e+00               4.907e+00      \n  CV % Geometric Mean            22.4                    21.1         \n  Median                       5.078e+00               4.969e+00      \n  Min - Max              2.255e+00 - 7.395e+00   2.102e+00 - 7.489e+00\n\n\nPlasma Drug Y\n\nCodeadpp1 <- adpp %>%\n  filter(PPCAT == \"Plasma Drug Y\") %>%\n  h_pkparam_sort() %>%\n  mutate(PKPARAM = factor(paste0(TLG_DISPLAY, \" (\", AVALU, \")\"))) %>%\n  mutate(PKPARAM = reorder(PKPARAM, TLG_ORDER))\n\nresult <- build_table(lyt, df = adpp1)\nmain_title(result) <- paste(\"Summary of\", unique(adpp1$PPSPEC), \"PK Parameter by Treatment Arm, PK Population\")\nsubtitles(result) <- paste(\"Analyte:\", unique(adpp1$PPCAT), \"\\nVisit:\", unique(adpp1$AVISIT))\nresult\n\nSummary of Plasma PK Parameter by Treatment Arm, PK Population\nAnalyte: Plasma Drug Y \nVisit: CYCLE 1 DAY 1\n\n——————————————————————————————————————————————\nPK Parameter                     ARM C        \n——————————————————————————————————————————————\nCmax (ug/mL)                                  \n  n                               132         \n  Mean (SD)              2.990e+01 (5.550e+00)\n  CV (%)                         18.6         \n  Geometric Mean               2.935e+01      \n  CV % Geometric Mean            20.1         \n  Median                       2.969e+01      \n  Min - Max              1.406e+01 - 4.345e+01\nAUCinf obs (day*ug/mL)                        \n  n                               132         \n  Mean (SD)              1.986e+02 (3.792e+01)\n  CV (%)                         19.1         \n  Geometric Mean               1.952e+02      \n  CV % Geometric Mean            18.9         \n  Median                       1.953e+02      \n  Min - Max              1.264e+02 - 3.183e+02\nCL obs (ml/day/kg)                            \n  n                               132         \n  Mean (SD)              4.955e+00 (8.951e-01)\n  CV (%)                         18.1         \n  Geometric Mean               4.873e+00      \n  CV % Geometric Mean            18.7         \n  Median                       4.936e+00      \n  Min - Max              2.987e+00 - 7.211e+00\n\n\n\n\n\n\nCode# In progress\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n[1] tern_0.7.10.9056 rtables_0.6.0.1  formatters_0.4.0 magrittr_2.0.3  \n[5] dplyr_1.1.0      scda_0.1.5.9009 \n\nloaded via a namespace (and not attached):\n [1] pillar_1.8.1      compiler_4.2.2    tools_4.2.2       digest_0.6.31    \n [5] lattice_0.20-45   jsonlite_1.8.4    evaluate_0.20     lifecycle_1.0.3  \n [9] tibble_3.1.8      checkmate_2.1.0   gtable_0.3.1      pkgconfig_2.0.3  \n[13] rlang_1.0.6       Matrix_1.5-3      cli_3.6.0         yaml_2.3.7       \n[17] xfun_0.37         fastmap_1.1.1     withr_2.5.0       knitr_1.42       \n[21] generics_0.1.3    vctrs_0.5.2       htmlwidgets_1.6.1 grid_4.2.2       \n[25] tidyselect_1.2.0  glue_1.6.2        R6_2.5.1          fansi_1.0.4      \n[29] Rdpack_2.4        survival_3.5-3    rmarkdown_2.20    tidyr_1.3.0      \n[33] purrr_1.0.1       ggplot2_3.4.1     codetools_0.2-19  splines_4.2.2    \n[37] backports_1.4.1   scales_1.2.1      htmltools_0.5.4   rbibutils_2.2.13 \n[41] colorspace_2.1-0  utf8_1.2.3        munsell_0.5.0     broom_1.0.3      \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R              [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/tables/pharmacokinetic/pkpt02.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "tables/pharmacokinetic/adat03.html",
    "href": "tables/pharmacokinetic/adat03.html",
    "title": "ADAT03",
    "section": "",
    "text": "Data Setup\nStandard Table (μg/mL)\nTeal\nSession Info\n\n\n\n\nCodelibrary(dplyr)\nlibrary(scda)\nlibrary(tern)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadab <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adab\")\nadpc <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adpc\")\n\n# Ensure character variables are converted to factors and empty strings and NAs are explicit missing levels.\nadsl <- df_explicit_na(adsl)\nadab <- df_explicit_na(adab)\nadpc <- df_explicit_na(adpc)\n\n# Adjust zzz parameter\nmax_conc <- 15\n\nadpc <- adpc %>% select(USUBJID, NRELTM1, AVAL, AVALU, AVALC)\n\nanl <- adab %>%\n  filter(., PARAM == \"ADA interpreted per sample result\") %>%\n  select(-AVAL, AVALC, AVALU)\n\nanl <- merge(anl, adpc, by = c(\"USUBJID\", \"NRELTM1\")) %>%\n  mutate(AVAL_LT = ifelse(AVAL <= max_conc, TRUE, FALSE))\n\n\n\n\n\nCode# parameters in columns\nadat03_stats <- c(\"n\", \"mean\", \"sd\", \"median\", \"min\", \"max\", \"cv\", \"geom_mean\", \"count_fraction\")\nadat03_lbls <- c(\n  n = \"Total Number\\nof Measurable\\n Samples\",\n  mean = \"Mean\",\n  sd = \"SD\",\n  median = \"Median\",\n  min = \"Minimum\",\n  max = \"Maximum\",\n  cv = \"CV (%)\",\n  geom_mean = \"Geometric Mean\",\n  count_fraction = paste0(\"Samples with\\nConcentration\\n≤ \", max_conc, \"μg/mL\")\n)\nadat03_fmts <- c(\n  n = \"xx.\",\n  mean = sprintf_format(\"%.3e\"),\n  sd = sprintf_format(\"%.3e\"),\n  median = sprintf_format(\"%.3e\"),\n  min = sprintf_format(\"%.3e\"),\n  max = sprintf_format(\"%.3e\"),\n  cv = \"xx.x\",\n  geom_mean = sprintf_format(\"%.3e\"),\n  count_fraction = format_count_fraction\n)\n\nafun_list <- lapply(\n  1:9,\n  function(i) make_afun(s_summary, .stats = adat03_stats[i], .formats = adat03_fmts[i], .labels = \"Overall\")\n)\n\n# lyt creation\nlyt <- basic_table() %>%\n  split_rows_by(\n    var = \"ARM\",\n    label_pos = \"topleft\",\n    split_label = \"Treatment Group\",\n    split_fun = drop_split_levels,\n    section_div = \"\"\n  ) %>%\n  add_rowcounts() %>%\n  split_rows_by(\n    var = \"VISIT\",\n    label_pos = \"topleft\",\n    split_label = \"Visit\"\n  ) %>%\n  analyze_vars_in_cols(\n    vars = c(rep(\"AVAL\", 8), \"AVAL_LT\"),\n    .stats = adat03_stats,\n    .labels = adat03_lbls,\n    .formats = adat03_fmts\n  ) %>%\n  analyze_colvars(\n    afun_list,\n    nested = FALSE,\n    extra_args = list(\".labels\" = \"Overall\")\n  )\n\nresult <- build_table(lyt, anl, alt_counts_df = adsl)\n\nmain_title(result) <- paste(\n  \"Summary of Serum Concentrations (μg/mL) at Timepoints Where ADA Samples Were Collected and Analyzed\\n\n  Protocol:\", unique(adab$PARCAT1)[1]\n)\nsubtitles(result) <- paste(\"Analyte:\", unique(adab$PARAMCD)[1])\nfnotes_at_path(result, rowpath = NULL, colpath = c(\"multivars\", \"AVAL\")) <- \"Refers to the total no. of measurable ADA samples that have a corresponding measurable drug concentration sample (i.e. results with\nvalid numeric values and LTRs). LTR results on post-dose samples are replaced by aaa µg/mL i.e. half of MQC value.\"\nfnotes_at_path(result, rowpath = NULL, colpath = c(\"multivars\", \"AVAL_LT\")) <- \"In validation, the assay was able to detect yyy ng/mL of surrogate ADA in the presence of zzz µg/mL of [drug]. BLQ = Below Limit of\nQuantitation, LTR = Lower than Reportable, MQC = Minimum Quantifiable Concentration, ADA = Anti-Drug Antibodies (is also referred to as ATA,\nor Anti-Therapeutic Antibodies). RXXXXXXX is also known as [drug]\"\n\nresult\n\nSummary of Serum Concentrations (μg/mL) at Timepoints Where ADA Samples Were Collected and Analyzed\n\n  Protocol: A: Drug X Antibody\nAnalyte: R1800000\n\n—————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————\nTreatment Group                                                                                                                              \n  Visit                   Total Number                                                                                          Samples with \n                          of Measurable                                                                                         Concentration\n                           Samples {1}      Mean         SD        Median      Minimum     Maximum    CV (%)   Geometric Mean   ≤ 15μg/mL {2}\n—————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————\nA: Drug X (N=670)                                                                                                                            \n  Day 1                                                                                                                                      \n                               536        3.152e+00   5.516e+00   0.000e+00   0.000e+00   1.557e+01   175.0          NA          531 (99.1%) \n  Day 2                                                                                                                                      \n                               134        1.618e+01   1.626e+00   1.619e+01   1.260e+01   1.986e+01    10.0      1.610e+01       39 (29.1%)  \n\nC: Combination (N=1056)                                                                                                                      \n  Day 1                                                                                                                                      \n                               792        6.459e+00   9.961e+00   0.000e+00   0.000e+00   3.100e+01   154.2          NA          654 (82.6%) \n  Day 2                                                                                                                                      \n                               264        2.468e+01   8.645e+00   2.251e+01   1.264e+01   3.947e+01    35.0      2.315e+01       28 (10.6%)  \n\nOverall                       1726        8.975e+00   1.104e+01   0.000e+00   0.000e+00   3.947e+01   123.0          NA         1252 (72.5%) \n—————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————\n\n{1} - Refers to the total no. of measurable ADA samples that have a corresponding measurable drug concentration sample (i.e. results with\nvalid numeric values and LTRs). LTR results on post-dose samples are replaced by aaa µg/mL i.e. half of MQC value.\n{2} - In validation, the assay was able to detect yyy ng/mL of surrogate ADA in the presence of zzz µg/mL of [drug]. BLQ = Below Limit of\nQuantitation, LTR = Lower than Reportable, MQC = Minimum Quantifiable Concentration, ADA = Anti-Drug Antibodies (is also referred to as ATA,\nor Anti-Therapeutic Antibodies). RXXXXXXX is also known as [drug]\n—————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————\n\n\n\n\n\nCode# In progress\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n[1] tern_0.7.10.9056 rtables_0.6.0.1  formatters_0.4.0 magrittr_2.0.3  \n[5] scda_0.1.5.9009  dplyr_1.1.0     \n\nloaded via a namespace (and not attached):\n [1] pillar_1.8.1      compiler_4.2.2    forcats_1.0.0     tools_4.2.2      \n [5] digest_0.6.31     lattice_0.20-45   jsonlite_1.8.4    evaluate_0.20    \n [9] lifecycle_1.0.3   tibble_3.1.8      checkmate_2.1.0   gtable_0.3.1     \n[13] pkgconfig_2.0.3   rlang_1.0.6       Matrix_1.5-3      cli_3.6.0        \n[17] yaml_2.3.7        xfun_0.37         fastmap_1.1.1     withr_2.5.0      \n[21] knitr_1.42        generics_0.1.3    vctrs_0.5.2       htmlwidgets_1.6.1\n[25] grid_4.2.2        tidyselect_1.2.0  glue_1.6.2        R6_2.5.1         \n[29] fansi_1.0.4       Rdpack_2.4        survival_3.5-3    rmarkdown_2.20   \n[33] tidyr_1.3.0       purrr_1.0.1       ggplot2_3.4.1     codetools_0.2-19 \n[37] splines_4.2.2     backports_1.4.1   scales_1.2.1      htmltools_0.5.4  \n[41] rbibutils_2.2.13  colorspace_2.1-0  utf8_1.2.3        munsell_0.5.0    \n[45] broom_1.0.3      \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R              [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/tables/pharmacokinetic/adat03.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "tables/pharmacokinetic/pkpt11.html",
    "href": "tables/pharmacokinetic/pkpt11.html",
    "title": "PKPT11",
    "section": "",
    "text": "Data Setup\nStandard Table – Plasma\nTeal\nSession Info\n\n\n\n\nCodelibrary(scda)\nlibrary(dplyr)\nlibrary(tern)\n\nadpp <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adpp\")\n\n# Comparator Dose - A: Drug X\ncomp_dose <- \"A: Drug X\"\nother_doses <- as.character(unique(adpp$TRT01A)[unique(adpp$TRT01A) != comp_dose])\n\nadpp <- adpp %>%\n  filter(AVISIT == \"CYCLE 1 DAY 1\") %>%\n  mutate(\n    COMP = paste0(TRT01A, \"/\", comp_dose),\n    COMP_AVAL = ifelse(TRT01A == comp_dose, paste0(AVAL, comp_dose), AVAL)\n  )\n\nfor (dose in other_doses) {\n  temp_df <- adpp[adpp$TRT01A == comp_dose, ]\n  temp_df$COMP <- paste0(dose, \"/\", comp_dose)\n  adpp <- rbind(adpp, temp_df)\n}\n\nformats <- c(\n  n = \"xx.\",\n  geom_mean_ratio = sprintf_format(\"%.3e\"),\n  gmr_ci_lwr = sprintf_format(\"%.3e\"),\n  gmr_ci_upr = sprintf_format(\"%.3e\")\n)\n\n\n\n\n\nCode# summary function\n# compare_dose - comparator, defaults to comp_dose defined above (string)\n# denom - use comparator as denominator, defaults to TRUE (logical)\ns_gmr <- function(x,\n                  labelstr = \"\",\n                  compare_dose = comp_dose,\n                  denom = TRUE) {\n  row_label <- labelstr\n\n  x_num <- as.numeric(x[!grepl(compare_dose, x)])\n  x_num <- x_num[!is.na(x_num)]\n  x_num_no_negative_vals <- x_num\n  x_num_no_negative_vals[x_num_no_negative_vals <= 0] <- NA\n\n  x_denom <- as.numeric(gsub(compare_dose, \"\", x[grepl(compare_dose, x)]))\n  x_denom <- x_denom[!is.na(x_denom)]\n  x_denom_no_negative_vals <- x_denom\n  x_denom_no_negative_vals[x_denom_no_negative_vals <= 0] <- NA\n\n  x_num_log <- log(x_num_no_negative_vals)\n  x_denom_log <- log(x_denom_no_negative_vals)\n\n  if (denom) {\n    geom_mean_ratio <- exp(mean(x_num_log, na.rm = FALSE)) / exp(mean(x_denom_log, na.rm = FALSE))\n    geom_mean_ci <- t.test(x_num_log, x_denom_log, conf.level = 0.90)$conf.int\n  } else {\n    row_label <- paste0(unlist(strsplit(labelstr, \"/\"))[c(2, 1)], collapse = \"/\")\n    geom_mean_ratio <- exp(mean(x_denom_log, na.rm = FALSE)) / exp(mean(x_num_log, na.rm = FALSE))\n    geom_mean_ci <- t.test(x_denom_log, x_num_log, conf.level = 0.90)$conf.int\n  }\n\n  results <- list(\n    n = length(x),\n    geom_mean_ratio = geom_mean_ratio,\n    gmr_ci_lwr = exp(geom_mean_ci[1]),\n    gmr_ci_upr = exp(geom_mean_ci[2])\n  )\n\n  lapply(results, formatters::with_label, row_label)\n}\n\n# tabulation function\nafun_list <- Map(\n  function(stat) {\n    make_afun(\n      s_gmr,\n      .stats = stat,\n      .formats = formats[names(formats) %in% stat]\n    )\n  },\n  stat = c(\"n\", \"geom_mean_ratio\", \"gmr_ci_lwr\", \"gmr_ci_upr\")\n)\n\n# create layout\nlyt <- basic_table() %>%\n  split_rows_by(\n    var = \"PKPARAM\",\n    label_pos = \"topleft\",\n    split_fun = keep_split_levels(c(\"AUCinf obs (day*ug/mL)\", \"Cmax (ug/mL)\")),\n    split_label = \"PK Parameter\"\n  ) %>%\n  split_rows_by(\n    var = \"COMP\",\n    label_pos = \"topleft\",\n    split_label = \"Comparison\",\n    split_fun = remove_split_levels(paste0(comp_dose, \"/\", comp_dose))\n  ) %>%\n  split_cols_by_multivar(\n    vars = rep(\"AVAL\", 4),\n    varlabels = c(\n      \"n\",\n      \"Geometric Mean Ratio\",\n      \"90% CI Lower Bound\",\n      \"90% CI Upper Bound\"\n    )\n  ) %>%\n  summarize_row_groups(\n    var = \"COMP_AVAL\",\n    cfun = afun_list,\n    extra_args = list(\n      compare_dose = comp_dose,\n      denom = TRUE\n    )\n  )\n\n# Plasma Drug X\nadpp0 <- adpp %>%\n  filter(PPCAT == \"Plasma Drug X\") %>%\n  h_pkparam_sort() %>%\n  mutate(PKPARAM = factor(paste0(TLG_DISPLAY, \" (\", AVALU, \")\")))\nresult <- build_table(lyt, df = adpp0)\nmain_title(result) <- paste0(\n  \"Estimated Ratios of Geometric Means and 90% Confidence Intervals for AUC and CMAX Following \",\n  unique(adpp0$REGIMEN), \"\\nof \", comp_dose, \" in Comparison with \",\n  paste(other_doses, collapse = \" & \"), \", PK Population\"\n)\nsubtitles(result) <- paste(\"Analyte:\", unique(adpp0$PPCAT))\n\ncat(rtables::toString(result, indent_size = 24))\n\nEstimated Ratios of Geometric Means and 90% Confidence Intervals for AUC and CMAX Following BID\nof A: Drug X in Comparison with C: Combination, PK Population\nAnalyte: Plasma Drug X\n\n———————————————————————————————————————————————————————————————————————————————————————————————————————————————————————\nPK Parameter                                                                                                           \n  Comparison                                        n    Geometric Mean Ratio   90% CI Lower Bound   90% CI Upper Bound\n———————————————————————————————————————————————————————————————————————————————————————————————————————————————————————\nAUCinf obs (day*ug/mL)                                                                                                 \n                        C: Combination/A: Drug X   266        9.615e-01             9.247e-01            9.998e-01     \nCmax (ug/mL)                                                                                                           \n                        C: Combination/A: Drug X   266        9.974e-01             9.583e-01            1.038e+00     \n\n\n\n\n\nCode# In progress\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n[1] tern_0.7.10.9056 rtables_0.6.0.1  formatters_0.4.0 magrittr_2.0.3  \n[5] dplyr_1.1.0      scda_0.1.5.9009 \n\nloaded via a namespace (and not attached):\n [1] pillar_1.8.1      compiler_4.2.2    tools_4.2.2       digest_0.6.31    \n [5] lattice_0.20-45   jsonlite_1.8.4    evaluate_0.20     lifecycle_1.0.3  \n [9] tibble_3.1.8      checkmate_2.1.0   gtable_0.3.1      pkgconfig_2.0.3  \n[13] rlang_1.0.6       Matrix_1.5-3      cli_3.6.0         yaml_2.3.7       \n[17] xfun_0.37         fastmap_1.1.1     withr_2.5.0       knitr_1.42       \n[21] generics_0.1.3    vctrs_0.5.2       htmlwidgets_1.6.1 grid_4.2.2       \n[25] tidyselect_1.2.0  glue_1.6.2        R6_2.5.1          fansi_1.0.4      \n[29] Rdpack_2.4        survival_3.5-3    rmarkdown_2.20    tidyr_1.3.0      \n[33] purrr_1.0.1       ggplot2_3.4.1     codetools_0.2-19  splines_4.2.2    \n[37] backports_1.4.1   scales_1.2.1      htmltools_0.5.4   rbibutils_2.2.13 \n[41] colorspace_2.1-0  utf8_1.2.3        munsell_0.5.0     broom_1.0.3      \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R              [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/tables/pharmacokinetic/pkpt11.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "tables/pharmacokinetic/pkct01.html",
    "href": "tables/pharmacokinetic/pkct01.html",
    "title": "PKCT01",
    "section": "",
    "text": "Data Setup\nStandard Table (Stats in Columns)\nTeal\nSession Info\n\n\n\n\nCodelibrary(scda)\nlibrary(dplyr)\nlibrary(tern)\n\nadpc <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adpc\")\n\n# Helper function\nthreesigfmt <- function(x, ...) {\n  as.character(signif(x, 3))\n}\n\n\n\n\n\nCode# Setting up the data\nadpc_1 <- adpc %>%\n  mutate(\n    NRELTM1 = as.factor(NRELTM1),\n    AVALC = as.factor(AVALC)\n  ) %>%\n  filter(ACTARM %in% c(\"A: Drug X\")) %>%\n  mutate(ACTARM = factor(ACTARM, levels = c(\"A: Drug X\"))) %>%\n  select(NRELTM1, ACTARM, VISIT, AVAL, PARAM, AVALC)\n\n# Row structure\nl_rows <- basic_table() %>%\n  split_rows_by(\n    var = \"ACTARM\",\n    split_label = \"Cohort/Treatment\",\n    label_pos = \"topleft\"\n  ) %>%\n  split_rows_by(\n    var = \"VISIT\",\n    split_label = \"Visit\",\n    label_pos = \"topleft\"\n  ) %>%\n  split_rows_by(\n    var = \"NRELTM1\",\n    split_label = \"Norminal Time from First Dose\",\n    label_pos = \"topleft\"\n  )\n\n# Column results for numeric values\nlyt <- l_rows %>%\n  analyze_vars_in_cols(\n    vars = c(\"AVAL\", \"AVALC\", rep(\"AVAL\", 8)),\n    .stats = c(\n      \"n\", \"n_blq\", \"mean\", \"sd\", \"cv\",\n      \"geom_mean\", \"geom_cv\", # \"geom_mean_ci\",\n      \"median\", \"min\", \"max\"\n    ),\n    .formats = c(\n      n = \"xx.\",\n      n_blq = \"xx.\",\n      mean = threesigfmt,\n      sd = threesigfmt,\n      cv = \"xx.x\",\n      median = threesigfmt,\n      geom_mean = threesigfmt,\n      geom_cv = \"xx.x\",\n      min = threesigfmt,\n      max = threesigfmt\n    ),\n    .labels = c(\n      n = \"n\",\n      n_blq = \"Number\\nof\\n<LTR/BLQ>s\",\n      mean = \"Mean\",\n      sd = \"SD\",\n      cv = \"CV (%) Mean\",\n      geom_mean = \"Geometric Mean\",\n      geom_cv = \"CV % Geometric Mean\",\n      median = \"Median\",\n      min = \"Minimum\",\n      max = \"Maximum\"\n    ),\n    na_level = \"NE\"\n  )\nresult <- build_table(lyt, df = adpc_1) %>% prune_table()\n\n# Decorating\nmain_title(result) <- \"Summary of PK Concentrations by Nominal Time and Treatment: PK Evaluable\\n Protocol: xxxxx\"\nsubtitles(result) <- paste(\"Analyte: \", unique(unique(adpc$PARAM)), \"Treatment:\", unique(unique(adpc$ACTARM)))\nmain_footer(result) <- \"NE: Not Estimable\"\nresult\n\nSummary of PK Concentrations by Nominal Time and Treatment: PK Evaluable\n Protocol: xxxxx\nAnalyte:  Plasma Drug X Treatment: A: Drug X\nAnalyte:  Urine Drug X Treatment: C: Combination\nAnalyte:  Urine Drug Y Treatment: A: Drug X\nAnalyte:  Plasma Drug Y Treatment: C: Combination\n\n————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————\nCohort/Treatment                                                                                                                                        \n  Visit                                                                                                                                                 \n    Norminal Time from First Dose           Number                                                                                                      \n                                              of                                                                                                        \n                                     n    <LTR/BLQ>s    Mean      SD     CV (%) Mean   Geometric Mean   CV % Geometric Mean   Median   Minimum   Maximum\n————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————\nA: Drug X                                                                                                                                               \n  Day 1                                                                                                                                                 \n    0                                                                                                                                                   \n                                    402      402         0        0          NE              NE                 NE              0         0         0   \n    0.5                                                                                                                                                 \n                                    134       0         12.6     1.51       12.0            12.5               12.2            12.6     9.72      15.6  \n    1                                                                                                                                                   \n                                    134       0         16.2     1.63       10.0            16.1               10.1            16.2     12.6      19.9  \n    1.5                                                                                                                                                 \n                                    134       0         15.6     1.46        9.3            15.6                9.3            15.5     12.3       19   \n    2                                                                                                                                                   \n                                    134       0         13.4     1.35       10.1            13.4               10.0            13.3     10.8      16.5  \n    3                                                                                                                                                   \n                                    134       0         8.47     1.25       14.7            8.38               15.0            8.4      5.88      10.9  \n    4                                                                                                                                                   \n                                    402       0         4.79     1.01       21.2            4.69               21.9            4.79      2.7      7.09  \n    8                                                                                                                                                   \n                                    402       0        0.348    0.179       51.6           0.303               58.2           0.318     0.076     0.866 \n    12                                                                                                                                                  \n                                    402       0        0.0224   0.0189      84.4           0.0156              111.2          0.017     0.002     0.083 \n  Day 2                                                                                                                                                 \n    24                                                                                                                                                  \n                                    402      402         0        0          NE              NE                 NE              0         0         0   \n————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————\n\nNE: Not Estimable\n\n\n\n\n\nCode# In progress\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n[1] tern_0.7.10.9056 rtables_0.6.0.1  formatters_0.4.0 magrittr_2.0.3  \n[5] dplyr_1.1.0      scda_0.1.5.9009 \n\nloaded via a namespace (and not attached):\n [1] pillar_1.8.1      compiler_4.2.2    tools_4.2.2       digest_0.6.31    \n [5] lattice_0.20-45   jsonlite_1.8.4    evaluate_0.20     lifecycle_1.0.3  \n [9] tibble_3.1.8      checkmate_2.1.0   gtable_0.3.1      pkgconfig_2.0.3  \n[13] rlang_1.0.6       Matrix_1.5-3      cli_3.6.0         yaml_2.3.7       \n[17] xfun_0.37         fastmap_1.1.1     withr_2.5.0       knitr_1.42       \n[21] generics_0.1.3    vctrs_0.5.2       htmlwidgets_1.6.1 grid_4.2.2       \n[25] tidyselect_1.2.0  glue_1.6.2        R6_2.5.1          fansi_1.0.4      \n[29] Rdpack_2.4        survival_3.5-3    rmarkdown_2.20    tidyr_1.3.0      \n[33] purrr_1.0.1       ggplot2_3.4.1     codetools_0.2-19  splines_4.2.2    \n[37] backports_1.4.1   scales_1.2.1      htmltools_0.5.4   rbibutils_2.2.13 \n[41] colorspace_2.1-0  utf8_1.2.3        munsell_0.5.0     broom_1.0.3      \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R              [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/tables/pharmacokinetic/pkct01.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "tables/pharmacokinetic/pkpt08.html",
    "href": "tables/pharmacokinetic/pkpt08.html",
    "title": "PKPT08",
    "section": "",
    "text": "Data Setup\nStandard Table – Plasma\nTeal\nSession Info\n\n\n\n\nCodelibrary(dplyr)\nlibrary(scda)\nlibrary(tern)\n\nadpp <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adpp\")\n\nadpp <- adpp %>%\n  filter(PPSTINT != \"NA\" & PPENINT != \"NA\") %>%\n  mutate(PPINT = factor(paste0(gsub(\"[PH]\", \"\", PPSTINT), \"-\", gsub(\"[PH]\", \"\", PPENINT))))\n\n\n\n\n\nCode# create layout\nlyt <- basic_table() %>%\n  add_overall_col(\"Accumulation Interval (hours)\") %>%\n  split_cols_by(var = \"PPINT\") %>%\n  split_cols_by(var = \"PKPARAM\") %>%\n  split_rows_by(\n    var = \"ARMCD\",\n    split_fun = trim_levels_in_group(\"ACTARM\"),\n    label_pos = \"topleft\",\n    split_label = \"Treatment Arm\"\n  ) %>%\n  summarize_vars(\n    vars = \"AVAL\",\n    .stats = c(\n      \"n\", \"mean\", \"sd\", \"cv\",\n      \"median\", \"min\", \"max\"\n    ),\n    .labels = c(\n      n = \"n\",\n      mean = \"Mean\",\n      sd = \"SD\",\n      cv = \"CV (%)\",\n      median = \"Median\",\n      min = \"Minimum\",\n      max = \"Maximum\"\n    ),\n    .formats = c(\n      n = \"xx.\",\n      mean = sprintf_format(\"%.3e\"),\n      sd = sprintf_format(\"%.3e\"),\n      cv = \"xx.x\",\n      median = sprintf_format(\"%.3e\"),\n      min = sprintf_format(\"%.3e\"),\n      max = sprintf_format(\"%.3e\")\n    )\n  )\n\nadpp0 <- adpp %>%\n  filter(\n    AVISIT == \"CYCLE 1 DAY 1\",\n    PPCAT == \"Plasma Drug X\"\n  ) %>%\n  h_pkparam_sort() %>%\n  mutate(\n    PKPARAM = factor(paste0(TLG_DISPLAY, \" (\", AVALU, \")\"))\n  )\n\nresult <- build_table(lyt, df = adpp0)\nmain_title(result) <- paste(\n  \"Summary of Cumulative Amount and Percentage of\", unique(adpp0$PPSPEC), \"Recovered from\\n\",\n  unique(adpp0$PPCAT), \"following\", unique(adpp0$REGIMEN), \"Administration for\",\n  unique(adpp0$PPINT)[length(unique(adpp0$PPINT))], \"hours, PK Population\"\n)\nsubtitles(result) <- paste(\"Analyte:\", unique(adpp0$PPCAT), \"\\nVisit:\", unique(adpp0$AVISIT))\n\ncat(rtables::toString(result, indent_size = 10))\n\nSummary of Cumulative Amount and Percentage of Urine Recovered from\n Plasma Drug X following BID Administration for 0-24 hours, PK Population\nAnalyte: Plasma Drug X \nVisit: CYCLE 1 DAY 1\n\n—————————————————————————————————————————————————————————————————\nTreatment Arm               Accumulation Interval (hours)        \n                            0-12                    0-24         \n                     Ae (mg)     Fe (%)      Ae (mg)     Fe (%)  \n—————————————————————————————————————————————————————————————————\nARM A                                                            \n          n            134         134         134         134   \n          Mean      1.551e+00   1.571e+01   1.551e+00   1.571e+01\n          SD        3.391e-01   3.354e+00   3.391e-01   3.354e+00\n          CV (%)      21.9        21.4        21.9        21.4   \n          Median    1.547e+00   1.577e+01   1.547e+00   1.577e+01\n          Minimum   7.021e-01   8.147e+00   7.021e-01   8.147e+00\n          Maximum   2.464e+00   2.452e+01   2.464e+00   2.452e+01\nARM C                                                            \n          n            132         132         132         132   \n          Mean      1.535e+00   1.609e+01   1.535e+00   1.609e+01\n          SD        2.983e-01   3.109e+00   2.983e-01   3.109e+00\n          CV (%)      19.4        19.3        19.4        19.3   \n          Median    1.547e+00   1.604e+01   1.547e+00   1.604e+01\n          Minimum   8.502e-01   8.503e+00   8.502e-01   8.503e+00\n          Maximum   2.208e+00   2.443e+01   2.208e+00   2.443e+01\n\n\n\n\n\nCode# In progress\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n[1] tern_0.7.10.9056 rtables_0.6.0.1  formatters_0.4.0 magrittr_2.0.3  \n[5] scda_0.1.5.9009  dplyr_1.1.0     \n\nloaded via a namespace (and not attached):\n [1] pillar_1.8.1      compiler_4.2.2    tools_4.2.2       digest_0.6.31    \n [5] lattice_0.20-45   jsonlite_1.8.4    evaluate_0.20     lifecycle_1.0.3  \n [9] tibble_3.1.8      checkmate_2.1.0   gtable_0.3.1      pkgconfig_2.0.3  \n[13] rlang_1.0.6       Matrix_1.5-3      cli_3.6.0         yaml_2.3.7       \n[17] xfun_0.37         fastmap_1.1.1     withr_2.5.0       knitr_1.42       \n[21] generics_0.1.3    vctrs_0.5.2       htmlwidgets_1.6.1 grid_4.2.2       \n[25] tidyselect_1.2.0  glue_1.6.2        R6_2.5.1          fansi_1.0.4      \n[29] Rdpack_2.4        survival_3.5-3    rmarkdown_2.20    tidyr_1.3.0      \n[33] purrr_1.0.1       ggplot2_3.4.1     codetools_0.2-19  splines_4.2.2    \n[37] backports_1.4.1   scales_1.2.1      htmltools_0.5.4   rbibutils_2.2.13 \n[41] colorspace_2.1-0  utf8_1.2.3        munsell_0.5.0     broom_1.0.3      \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R              [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/tables/pharmacokinetic/pkpt08.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "tables/pharmacokinetic/adat04b.html",
    "href": "tables/pharmacokinetic/adat04b.html",
    "title": "ADAT04B",
    "section": "",
    "text": "Data Setup\nStandard Table\nTeal\nSession Info\n\n\n\n\nCodelibrary(tern)\nlibrary(dplyr)\nlibrary(scda)\nlibrary(tibble)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadab <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adab\")\n\ncombodf <- tribble(\n  ~valname, ~label, ~levelcombo, ~exargs,\n  \"all_X\", \"All Drug X\", c(\"A: Drug X\", \"C: Combination\"), list(),\n  \"all_pt\", \"All Patients\", c(\"A: Drug X\", \"B: Placebo\", \"C: Combination\"), list()\n)\n\n# Ensure character variables are converted to factors and empty strings and NAs are explicit missing levels.\nadsl <- df_explicit_na(adsl)\n\n# Baseline Pts\nadab_b <- df_explicit_na(adab) %>%\n  filter(\n    ABLFL == \"Y\",\n    ADABLFL == \"Y\",\n    PARAM %in% c(\n      \"ADA interpreted per sample result\",\n      \"NAB interpreted per sample result\"\n    )\n  ) %>%\n  select(-PARAMCD, -AVALC, -AVALU) %>%\n  tidyr::pivot_wider(\n    names_from = PARAM,\n    values_from = AVAL\n  ) %>%\n  mutate_at(\n    c(\"ADA interpreted per sample result\", \"NAB interpreted per sample result\"),\n    as.logical\n  ) %>%\n  mutate(\n    ADABLFL = ADABLFL == \"Y\",\n    PADABLFL = `ADA interpreted per sample result` == \"TRUE\",\n    PNABBLFL = `NAB interpreted per sample result` == \"TRUE\",\n    NNABBLFL = `NAB interpreted per sample result` == \"FALSE\"\n  ) %>%\n  var_relabel(\n    ADABLFL = \"Baseline evaluable patients for ADA\",\n    PADABLFL = \"Patients with a positive ADA sample at baseline\",\n    PNABBLFL = \"Patients with a positive NAb sample at baseline\",\n    NNABBLFL = \"Patients with no positive NAb sample at baseline\"\n  )\n\n# Post-Baseline Evaluable Pts\nadab_pb_ada <- df_explicit_na(adab) %>%\n  filter(ADAPBLFL == \"Y\") %>%\n  select(STUDYID, USUBJID, ARM, ACTARM, ADAPBLFL) %>%\n  mutate(ADAPBLFL = ADAPBLFL == \"Y\") %>%\n  distinct()\n\n# Post-Baseline ADA Positive Pts\nadab_pb_adap <- df_explicit_na(adab) %>%\n  filter(\n    ABLFL != \"Y\",\n    PARAM == \"ADA interpreted per sample result\",\n    AVALC == \"POSITIVE\"\n  ) %>%\n  mutate(ADAPFL = AVALC == \"POSITIVE\") %>%\n  select(STUDYID, USUBJID, ARM, ACTARM, ADAPFL) %>%\n  distinct()\n\n# Post-Baseline NAb Positive Pts\nadab_pb_nabp <- df_explicit_na(adab) %>%\n  filter(\n    ABLFL != \"Y\",\n    PARAM == \"NAb interpreted per sample result\",\n    AVALC == \"POSITIVE\"\n  ) %>%\n  mutate(NABPFL = AVALC == \"POSITIVE\") %>%\n  select(STUDYID, USUBJID, ARM, ACTARM, NABPFL) %>%\n  distinct()\n\n# Post-Baseline NAb Negative Pts\nadab_pb_nabn <- df_explicit_na(adab) %>%\n  filter(\n    ABLFL != \"Y\",\n    PARAM == \"NAb interpreted per sample result\",\n    AVALC == \"NEGATIVE\"\n  ) %>%\n  rename(NABNFL = AVALC) %>%\n  select(STUDYID, USUBJID, ARM, ACTARM, NABNFL) %>%\n  distinct()\n\nmergecol <- c(\"STUDYID\", \"USUBJID\", \"ARM\", \"ACTARM\")\n\nadab_pb <- left_join(adab_pb_ada, adab_pb_adap, by = mergecol) %>%\n  left_join(adab_pb_nabp, by = mergecol) %>%\n  mutate(\n    NABNFL = ifelse(is.na(NABPFL), \"TRUE\", \"FALSE\"),\n    NABNFL = NABNFL == \"TRUE\"\n  ) %>%\n  var_relabel(\n    ADAPBLFL = \"Post-baseline evaluable patients for ADA\",\n    ADAPFL = \"Patients positive for ADA\",\n    NABPFL = \"Patients positive for NAb\",\n    NABNFL = \"Patients negative for NAb\"\n  )\n\n\n\n\n\nCode# Layout for Baseline Prevalence of NAbs\nlyt_bl <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\n    \"ACTARM\",\n    split_fun = add_combo_levels(combodf)\n  ) %>%\n  count_patients_with_flags(\n    \"USUBJID\",\n    flag_variables = formatters::var_labels(adab_b[, c(\"ADABLFL\", \"PADABLFL\")]),\n    .stats = \"count\",\n    var_labels = \"Baseline Prevalence of NAbs\",\n    show_labels = \"visible\",\n    table_names = \"t1\"\n  ) %>%\n  count_patients_with_flags(\n    \"USUBJID\",\n    flag_variables = var_labels(adab_b[, \"PNABBLFL\"]),\n    table_names = \"t2\",\n    .indent_mods = 1L,\n    show_labels = \"hidden\"\n  ) %>%\n  count_patients_with_flags(\n    \"USUBJID\",\n    flag_variables = var_labels(adab_b[, \"NNABBLFL\"]),\n    .stats = \"count\",\n    table_names = \"t3\",\n    .indent_mods = 1L,\n    show_labels = \"hidden\"\n  )\n\n# Layout for incidence of NAbs\nlyt_pb <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\n    \"ACTARM\",\n    split_fun = add_combo_levels(combodf)\n  ) %>%\n  count_patients_with_flags(\n    \"USUBJID\",\n    flag_variables = formatters::var_labels(adab_pb[, c(\"ADAPBLFL\", \"ADAPFL\")]),\n    .stats = \"count\",\n    var_labels = \"Incidence of NAbs\",\n    show_labels = \"visible\",\n    table_names = \"tb1\"\n  ) %>%\n  count_patients_with_flags(\n    \"USUBJID\",\n    flag_variables = formatters::var_labels(data.frame(NABPFL = adab_pb[, \"NABPFL\"])),\n    table_names = \"tb2\",\n    .indent_mods = 1L,\n    show_labels = \"hidden\"\n  ) %>%\n  count_patients_with_flags(\n    \"USUBJID\",\n    flag_variables = var_labels(data.frame(NABNFL = adab_pb[, \"NABNFL\"])),\n    .stats = \"count\",\n    table_names = \"tb3\",\n    .indent_mods = 1L,\n    show_labels = \"hidden\"\n  )\n\nresult_1 <- build_table(lyt_bl, df = adab_b, alt_counts_df = adsl)\nresult_2 <- build_table(lyt_pb, df = adab_pb, alt_counts_df = adsl)\n\n# Combine tables.\nresult <- rbind(result_1, result_2)\n\n# Change the column order.\nresult <- cbind_rtables(result[, 1], result[, 3]) %>%\n  cbind_rtables(result[, 4]) %>%\n  cbind_rtables(result[, 2]) %>%\n  cbind_rtables(result[, 5])\n\nmain_title(result) <- paste(\n  \"Baseline Prevalence and Incidence of Neutralizing Antibodies (NAbs)\"\n)\nsubtitles(result) <- paste(\"Protocol:\", unique(adab$PARCAT1)[1])\nmain_footer(result) <- paste(\n  \"NAb = Neutralizing Antibodies ADA = Anti-Drug Antibodies (is also referred to as ATA, or Anti-Therapeutic Antibodies) Baseline evaluable patient for ADA = a patient with an ADA assay result from a baseline sample(s) Baseline evaluable patient for NAb = a patient with a NAb assay result from a baseline sample(s) Post-baseline evaluable patient for ADA = a patient with an ADA assay result from at least one post-baseline sample Post-baseline evaluable patient for NAb = a patient with a NAb assay result from at least one post-baseline sample Number of patients positive for ADA = the number of post-baseline evaluable patients for ADA determined to have Treatment Emergent ADA during the study period.\nNumber of patients positive for NAb = the number (and percentage) of post-baseline evaluable patients for ADA determined to have at least one positive post-baseline NAb result during the study period. Number of patients negative for NAb = number of post-baseline evaluable patients with all negative post-baseline NAb results.\"\n)\nresult\n\nBaseline Prevalence and Incidence of Neutralizing Antibodies (NAbs)\nProtocol: A: Drug X Antibody\n\n—————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————\n                                                    A: Drug X    C: Combination   All Drug X    B: Placebo   All Patients\n                                                     (N=134)        (N=132)         (N=266)      (N=134)       (N=400)   \n—————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————\nBaseline Prevalence of NAbs                                                                                              \n  Baseline evaluable patients for ADA                  134            132             266           0            266     \n  Patients with a positive ADA sample at baseline       63             64             127           0            127     \nPatients with a positive NAb sample at baseline     63 (47.0%)     64 (48.5%)     127 (47.7%)       NA       127 (47.7%) \nPatients with no positive NAb sample at baseline        71             68             139           0            139     \nIncidence of NAbs                                                                                                        \n  Post-baseline evaluable patients for ADA             134            132             266           0            266     \n  Patients positive for ADA                            101             90             191           0            191     \nPatients positive for NAb                               0              0               0            NA            0      \nPatients negative for NAb                              134            132             266           0            266     \n—————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————\n\nNAb = Neutralizing Antibodies ADA = Anti-Drug Antibodies (is also referred to as ATA, or Anti-Therapeutic Antibodies) Baseline evaluable patient for ADA = a patient with an ADA assay result from a baseline sample(s) Baseline evaluable patient for NAb = a patient with a NAb assay result from a baseline sample(s) Post-baseline evaluable patient for ADA = a patient with an ADA assay result from at least one post-baseline sample Post-baseline evaluable patient for NAb = a patient with a NAb assay result from at least one post-baseline sample Number of patients positive for ADA = the number of post-baseline evaluable patients for ADA determined to have Treatment Emergent ADA during the study period.\nNumber of patients positive for NAb = the number (and percentage) of post-baseline evaluable patients for ADA determined to have at least one positive post-baseline NAb result during the study period. Number of patients negative for NAb = number of post-baseline evaluable patients with all negative post-baseline NAb results.\n\n\n\n\n\nCode# In progress\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n[1] tibble_3.1.8     scda_0.1.5.9009  dplyr_1.1.0      tern_0.7.10.9056\n[5] rtables_0.6.0.1  formatters_0.4.0 magrittr_2.0.3  \n\nloaded via a namespace (and not attached):\n [1] compiler_4.2.2    pillar_1.8.1      forcats_1.0.0     tools_4.2.2      \n [5] digest_0.6.31     lattice_0.20-45   jsonlite_1.8.4    evaluate_0.20    \n [9] lifecycle_1.0.3   gtable_0.3.1      checkmate_2.1.0   pkgconfig_2.0.3  \n[13] rlang_1.0.6       Matrix_1.5-3      cli_3.6.0         yaml_2.3.7       \n[17] xfun_0.37         fastmap_1.1.1     withr_2.5.0       knitr_1.42       \n[21] generics_0.1.3    vctrs_0.5.2       htmlwidgets_1.6.1 grid_4.2.2       \n[25] tidyselect_1.2.0  glue_1.6.2        R6_2.5.1          fansi_1.0.4      \n[29] Rdpack_2.4        survival_3.5-3    rmarkdown_2.20    ggplot2_3.4.1    \n[33] purrr_1.0.1       tidyr_1.3.0       codetools_0.2-19  splines_4.2.2    \n[37] backports_1.4.1   scales_1.2.1      htmltools_0.5.4   rbibutils_2.2.13 \n[41] colorspace_2.1-0  utf8_1.2.3        munsell_0.5.0     broom_1.0.3      \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R              [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/tables/pharmacokinetic/adat04b.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "tables/efficacy/aovt01.html",
    "href": "tables/efficacy/aovt01.html",
    "title": "AOVT01",
    "section": "",
    "text": "Data Setup\nStandard Table\nTeal\nSession Info\n\n\n\n\nCodelibrary(scda)\nlibrary(tern)\nlibrary(dplyr)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadqs <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adqs\")\n\n# Ensure character variables are converted to factors and empty strings and NAs are explicit missing levels.\nadsl <- df_explicit_na(adsl)\nadqs <- df_explicit_na(adqs)\n\nadqs_multi <- filter(adqs, AVISIT == \"WEEK 1 DAY 8\")\n\n\n\n\n\nCode# Define the split function\nsplit_fun <- drop_split_levels\n\nl <- basic_table() %>%\n  split_cols_by(\"ARMCD\", ref_group = \"ARM A\") %>%\n  split_rows_by(\"PARAMCD\",\n    split_fun = split_fun,\n    label_pos = \"topleft\",\n    split_label = obj_label(adqs_multi$PARAMCD)\n  ) %>%\n  summarize_ancova(\n    vars = \"CHG\",\n    variables = list(\n      arm = \"ARMCD\",\n      covariates = c(\"BASE\", \"STRATA1\")\n    ),\n    conf_level = 0.95,\n    var_labels = \"Adjusted mean\"\n  )\n\nresult <- build_table(\n  lyt = l,\n  df = adqs_multi,\n  alt_counts_df = adsl\n)\n\nresult\n\nParameter Code                     ARM A       ARM B           ARM C    \n————————————————————————————————————————————————————————————————————————\nBFIALL                                                                  \n  Adjusted mean                                                         \n    n                               134         134             132     \n    Adjusted Mean                  4.47        6.33            4.02     \n    Difference in Adjusted Means               1.85            -0.46    \n      95% CI                               (-0.14, 3.85)   (-2.45, 1.54)\n      p-value                                 0.0679          0.6539    \nFATIGI                                                                  \n  Adjusted mean                                                         \n    n                               134         134             132     \n    Adjusted Mean                  5.42        4.83            4.56     \n    Difference in Adjusted Means               -0.59           -0.86    \n      95% CI                               (-2.58, 1.41)   (-2.87, 1.15)\n      p-value                                 0.5644          0.4026    \nFKSI-FWB                                                                \n  Adjusted mean                                                         \n    n                               134         134             132     \n    Adjusted Mean                  4.29        3.51            3.06     \n    Difference in Adjusted Means               -0.79           -1.24    \n      95% CI                               (-2.71, 1.14)   (-3.17, 0.69)\n      p-value                                 0.4221          0.2088    \nFKSI-TSE                                                                \n  Adjusted mean                                                         \n    n                               134         134             132     \n    Adjusted Mean                  4.70        3.84            4.45     \n    Difference in Adjusted Means               -0.86           -0.25    \n      95% CI                               (-2.80, 1.09)   (-2.20, 1.70)\n      p-value                                 0.3858          0.8007    \nFKSIALL                                                                 \n  Adjusted mean                                                         \n    n                               134         134             132     \n    Adjusted Mean                  5.03        5.82            6.44     \n    Difference in Adjusted Means               0.79            1.42     \n      95% CI                               (-1.17, 2.76)   (-0.56, 3.39)\n      p-value                                 0.4288          0.1591    \n\n\n\n\n\nCodelibrary(teal.modules.clinical)\nlibrary(scda)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadqs <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adqs\")\n\n# Ensure character variables are converted to factors and empty strings and NAs are explicit missing levels.\nadsl <- df_explicit_na(adsl)\nadqs <- df_explicit_na(adqs)\n\narm_ref_comp <- list(\n  ARM = list(\n    ref = \"B: Placebo\",\n    comp = c(\"A: Drug X\", \"C: Combination\")\n  ),\n  ACTARMCD = list(\n    ref = \"ARM B\",\n    comp = c(\"ARM A\", \"ARM C\")\n  )\n)\n\napp <- init(\n  data = cdisc_data(\n    cdisc_dataset(\"ADSL\", adsl),\n    cdisc_dataset(\"ADQS\", adqs),\n    code =\n      'ADSL <- df_explicit_na(synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\"))\n       ADQS <- df_explicit_na(synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adqs\"))',\n    check = TRUE\n  ),\n  modules = modules(\n    tm_t_ancova(\n      label = \"ANCOVA table\",\n      dataname = \"ADQS\",\n      avisit = choices_selected(\n        choices = value_choices(adqs, \"AVISIT\"),\n        selected = \"WEEK 1 DAY 8\"\n      ),\n      arm_var = choices_selected(\n        choices = variable_choices(adsl, c(\"ARM\", \"ACTARMCD\")),\n        selected = \"ARM\"\n      ),\n      arm_ref_comp = arm_ref_comp,\n      aval_var = choices_selected(\n        choices = variable_choices(adqs, c(\"CHG\", \"AVAL\")),\n        selected = \"CHG\"\n      ),\n      cov_var = choices_selected(\n        choices = variable_choices(adqs, c(\"BASE\", \"STRATA1\", \"SEX\")),\n        selected = \"STRATA1\"\n      ),\n      paramcd = choices_selected(\n        choices = value_choices(adqs, \"PARAMCD\", \"PARAM\"),\n        selected = c(\"FKSI-FWB\", \"BFIALL\")\n      )\n    )\n  )\n)\n\n[INFO] 2023-03-10 05:48:51.8122 pid:7922 token:[] teal.modules.clinical Initializing tm_t_ancova\n\nCodeshinyApp(app$ui, app$server)\n\n\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n [1] teal.modules.clinical_0.8.14.9026 teal_0.12.0.9023                 \n [3] teal.transform_0.2.0.9011         teal.data_0.1.2.9013             \n [5] shiny_1.7.4                       dplyr_1.1.0                      \n [7] tern_0.7.10.9056                  rtables_0.6.0.1                  \n [9] formatters_0.4.0                  magrittr_2.0.3                   \n[11] scda_0.1.5.9009                  \n\nloaded via a namespace (and not attached):\n [1] sass_0.4.5               tidyr_1.3.0              jsonlite_1.8.4          \n [4] splines_4.2.2            R.utils_2.12.2           bslib_0.4.2             \n [7] teal.slice_0.2.0.9026    Rdpack_2.4               assertthat_0.2.1        \n[10] teal.code_0.3.0.9001     tern.gee_0.1.0.9002      yaml_2.3.7              \n[13] pillar_1.8.1             backports_1.4.1          lattice_0.20-45         \n[16] glue_1.6.2               teal.widgets_0.2.0.9024  digest_0.6.31           \n[19] promises_1.2.0.1         rbibutils_2.2.13         checkmate_2.1.0         \n[22] colorspace_2.1-0         R.oo_1.25.0              htmltools_0.5.4         \n[25] httpuv_1.6.9             Matrix_1.5-3             pkgconfig_2.0.3         \n[28] broom_1.0.3              logger_0.2.2             purrr_1.0.1             \n[31] xtable_1.8-4             mvtnorm_1.1-3            webshot_0.5.4           \n[34] scales_1.2.1             processx_3.8.0           fontawesome_0.5.0       \n[37] later_1.3.0              emmeans_1.8.4-1          tibble_3.1.8            \n[40] styler_1.9.1             generics_0.1.3           ggplot2_3.4.1           \n[43] ellipsis_0.3.2           shinyvalidate_0.1.2      cachem_1.0.7            \n[46] withr_2.5.0              shinyjs_2.1.0            geepack_1.3.9           \n[49] cli_3.6.0                survival_3.5-3           mime_0.12               \n[52] memoise_2.0.1            ps_1.7.2                 estimability_1.4.1      \n[55] evaluate_0.20            R.methodsS3_1.8.2        fansi_1.0.4             \n[58] R.cache_0.16.0           nlme_3.1-162             MASS_7.3-58.3           \n[61] forcats_1.0.0            teal.reporter_0.1.1.9013 tools_4.2.2             \n[64] lifecycle_1.0.3          munsell_0.5.0            callr_3.7.3             \n[67] compiler_4.2.2           jquerylib_0.1.4          rlang_1.0.6             \n[70] grid_4.2.2               htmlwidgets_1.6.1        rmarkdown_2.20          \n[73] shinyWidgets_0.7.6       gtable_0.3.1             codetools_0.2-19        \n[76] teal.logger_0.1.1.9004   R6_2.5.1                 knitr_1.42              \n[79] fastmap_1.1.1            utf8_1.2.3               Rcpp_1.0.10             \n[82] vctrs_0.5.2              tidyselect_1.2.0         xfun_0.37               \n[85] coda_0.19-4             \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R                       [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/tables/efficacy/aovt01.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "tables/efficacy/lgrt02.html",
    "href": "tables/efficacy/lgrt02.html",
    "title": "LGRT02",
    "section": "",
    "text": "Data Setup\nMulti-Variable Logistic Regression\nMulti-Variable Logistic Regression  with Interaction Term\nMulti-Variable Logistic Regression  Specifying Covariates\nMulti-Variable Logistic Regression Setting  an Event, Alpha Level, and Level for Interaction\nTeal\nSession Info\n\n\n\n\nCodelibrary(scda)\nlibrary(dplyr)\nlibrary(tern)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadrs <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adrs\")\n\n# Ensure character variables are converted to factors and empty strings and NAs are explicit missing levels.\nadsl <- df_explicit_na(adsl)\nadrs <- df_explicit_na(adrs)\n\nadsl <- adsl %>%\n  dplyr::filter(SEX %in% c(\"F\", \"M\"))\n\nadrs <- adrs %>%\n  dplyr::filter(PARAMCD == \"BESRSPI\") %>%\n  dplyr::mutate(\n    Response = case_when(AVALC %in% c(\"PR\", \"CR\") ~ 1, TRUE ~ 0),\n    SEX = factor(SEX, c(\"M\", \"F\")),\n    RACE = factor(\n      RACE,\n      levels = c(\n        \"AMERICAN INDIAN OR ALASKA NATIVE\", \"ASIAN\", \"BLACK OR AFRICAN AMERICAN\",\n        \"WHITE\", \"MULTIPLE\", \"NATIVE HAWAIIAN OR OTHER PACIFIC ISLANDER\"\n      )\n    )\n  ) %>%\n  var_relabel(Response = \"Response\", SEX = \"Sex\", RACE = \"Race\")\n\n\n\n\n\nCodemodel <- fit_logistic(\n  adrs,\n  variables = list(response = \"Response\", arm = \"ARMCD\", covariates = c(\"SEX\", \"AGE\"))\n)\nconf_level <- 0.95\ndf <- broom::tidy(model, conf_level = conf_level)\n\n# empty string flag\ndf <- df_explicit_na(df, na_level = \"_NA_\")\n\nresult <- basic_table() %>%\n  summarize_logistic(\n    conf_level = conf_level,\n    drop_and_remove_str = \"_NA_\"\n  ) %>%\n  append_topleft(\"Logistic regression\") %>%\n  build_table(df = df)\nresult\n\nLogistic regression          Degrees of Freedom   Parameter Estimate   Standard Error   Odds Ratio    Wald 95% CI    p-value\n————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————\nPlanned Arm Code                     2                                                                               0.0408 \n  Reference ARM A, n = 134                                                                                                  \n  ARM B, n = 134                     1                  -2.094             1.080           0.12      (0.01, 1.02)    0.0524 \n  ARM C, n = 132                     1                  -0.074             1.423           0.93      (0.06, 15.09)   0.9584 \nSex                                                                                                                         \n  Reference M, n = 169                                                                                                      \n  F, n = 231                         1                  0.331              0.695           1.39      (0.36, 5.44)    0.6339 \nAge                                                                                                                         \n  Age                                1                  0.070              0.054           1.07      (0.97, 1.19)    0.1945 \n\n\n\n\n\nCodemodel <- fit_logistic(\n  adrs,\n  variables = list(\n    response = \"Response\",\n    arm = \"ARMCD\",\n    covariates = c(\"SEX\", \"AGE\"),\n    interaction = \"SEX\"\n  )\n)\nconf_level <- 0.95\ndf <- broom::tidy(model, conf_level = conf_level)\n\n# empty string flag\ndf <- df_explicit_na(df, na_level = \"_NA_\")\n\nresult <- basic_table() %>%\n  summarize_logistic(\n    conf_level = conf_level,\n    drop_and_remove_str = \"_NA_\"\n  ) %>%\n  append_topleft(\"Logistic regression with interaction\") %>%\n  build_table(df = df)\nresult\n\nLogistic regression with interaction    Degrees of Freedom   Parameter Estimate   Standard Error   Odds Ratio     Wald 95% CI     p-value\n—————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————\nAge                                                                                                                                      \n  Age                                           1                  0.067              0.054           1.07       (0.96, 1.19)     0.2084 \nPlanned Arm Code                                2                                                                                 0.4882 \n  Reference ARM A, n = 134                                                                                                               \n  ARM B, n = 134                                1                 -17.850            2362.767                                     0.9940 \n    Sex                                                                                                                                  \n      F                                                                                               0.23       (0.02, 2.11)            \n      M                                                                                               0.00      (0.00, >999.99)          \n  ARM C, n = 132                                1                 -16.442            2362.767                                     0.9944 \n    Sex                                                                                                                                  \n      F                                                                                             >999.99     (0.00, >999.99)          \n      M                                                                                               0.00      (0.00, >999.99)          \nSex                                                                                                                                      \n  Reference M, n = 169                                                                                                                   \n  F, n = 231                                    1                 -16.044            2362.767                                     0.9946 \n    Planned Arm Code                                                                                                                     \n      ARM A                                                                                           0.00      (0.00, >999.99)          \n      ARM B                                                                                           1.39       (0.29, 6.59)            \n      ARM C                                                                                         >999.99     (0.00, >999.99)          \nInteraction of Planned Arm Code * Sex           2                                                                                 0.9999 \n  Reference ARM A or M, n = 248                                                                                                          \n  ARM B * F, n = 82                             1                  16.373            2362.767                                     0.9945 \n  ARM C * F, n = 70                             1                  32.492            3156.732                                     0.9918 \n\n\n\n\n\nCodemodel <- fit_logistic(\n  adrs,\n  variables = list(\n    response = \"Response\",\n    arm = \"ARMCD\",\n    covariates = c(\"SEX\", \"AGE\", \"RACE\")\n  )\n)\nconf_level <- 0.95\ndf <- broom::tidy(model, conf_level = conf_level)\n\n# empty string flag\ndf <- df_explicit_na(df, na_level = \"_NA_\")\n\nresult <- basic_table() %>%\n  summarize_logistic(\n    conf_level = conf_level,\n    drop_and_remove_str = \"_NA_\"\n  ) %>%\n  append_topleft(\"y ~ ARM + SEX + AGE + RACE\") %>%\n  build_table(df = df)\nresult\n\ny ~ ARM + SEX + AGE + RACE                             Degrees of Freedom   Parameter Estimate   Standard Error   Odds Ratio     Wald 95% CI     p-value\n————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————\nPlanned Arm Code                                               2                                                                                 0.0346 \n  Reference ARM A, n = 134                                                                                                                              \n  ARM B, n = 134                                               1                  -2.162             1.084           0.12       (0.01, 0.96)     0.0461 \n  ARM C, n = 132                                               1                  -0.090             1.426           0.91       (0.06, 14.97)    0.9499 \nSex                                                                                                                                                     \n  Reference M, n = 169                                                                                                                                  \n  F, n = 231                                                   1                  0.364              0.701           1.44       (0.36, 5.69)     0.6032 \nAge                                                                                                                                                     \n  Age                                                          1                  0.071              0.053           1.07       (0.97, 1.19)     0.1866 \nRace                                                           5                                                                                 0.9685 \n  Reference AMERICAN INDIAN OR ALASKA NATIVE, n = 25                                                                                                    \n  ASIAN, n = 208                                               1                 -16.246            2017.122         0.00      (0.00, >999.99)   0.9936 \n  BLACK OR AFRICAN AMERICAN, n = 91                            1                 -15.205            2017.122         0.00      (0.00, >999.99)   0.9940 \n  WHITE, n = 74                                                1                 -15.955            2017.122         0.00      (0.00, >999.99)   0.9937 \n  MULTIPLE, n = 1                                              1                  -0.363           10941.553         0.70      (0.00, >999.99)   1.0000 \n  NATIVE HAWAIIAN OR OTHER PACIFIC ISLANDER, n = 1             1                  1.036            10941.553         2.82      (0.00, >999.99)   0.9999 \n\n\n\n\n\nCodemodel <- fit_logistic(\n  adrs,\n  variables = list(\n    response = \"Response\",\n    arm = \"ARMCD\",\n    covariates = c(\"SEX\", \"AGE\"),\n    interaction = \"AGE\"\n  ),\n  response_definition = \"1 - response\"\n)\nconf_level <- 0.9\ndf <- broom::tidy(model, conf_level = conf_level, at = c(30, 50))\n\n# empty string flag\ndf <- df_explicit_na(df, na_level = \"_NA_\")\n\nresult <- basic_table() %>%\n  summarize_logistic(\n    conf_level = conf_level,\n    drop_and_remove_str = \"_NA_\"\n  ) %>%\n  append_topleft(\"Estimations at age 30 and 50\") %>%\n  build_table(df = df)\nresult\n\nEstimations at age 30 and 50            Degrees of Freedom   Parameter Estimate   Standard Error   Odds Ratio     Wald 90% CI      p-value\n——————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————\nSex                                                                                                                                       \n  Reference M, n = 169                                                                                                                    \n  F, n = 231                                    1                  -0.381             0.710           0.68        (0.21, 2.20)     0.5915 \nPlanned Arm Code                                2                                                                                  0.2768 \n  Reference ARM A, n = 134                                                                                                                \n  ARM B, n = 134                                1                 -20.020             13.714                                       0.1443 \n    Age                                                                                                                                   \n      30                                                                                             234.91     (0.30, >999.99)           \n      50                                                                                            >999.99     (0.04, >999.99)           \n  ARM C, n = 132                                1                 -15.622             14.810                                       0.2915 \n    Age                                                                                                                                   \n      30                                                                                             31.95      (0.03, >999.99)           \n      50                                                                                            >999.99     (<0.01, >999.99)          \nAge                                                                                                                                       \n  Age                                           1                  -0.877             0.581                                        0.1309 \n    Planned Arm Code                                                                                                                      \n      ARM A                                                                                           0.42        (0.16, 1.08)            \n      ARM B                                                                                           0.97        (0.89, 1.06)            \n      ARM C                                                                                           0.79        (0.55, 1.11)            \nInteraction of Planned Arm Code * Age           2                                                                                  0.2213 \n  Reference ARM A, n = 134                                                                                                                \n  ARM B, n = 134                                1                  0.849              0.583                                        0.1449 \n  ARM C, n = 132                                1                  0.636              0.618                                        0.3034 \n\n\n\n\n\nCodelibrary(teal.modules.clinical)\nlibrary(scda)\nlibrary(dplyr)\n\nADSL <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nADRS <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adrs\") %>%\n  filter(PARAMCD %in% c(\"BESRSPI\", \"INVET\"))\n\narm_ref_comp <- list(\n  ACTARMCD = list(\n    ref = \"ARM B\",\n    comp = c(\"ARM A\", \"ARM C\")\n  ),\n  ARM = list(\n    ref = \"B: Placebo\",\n    comp = c(\"A: Drug X\", \"C: Combination\")\n  )\n)\n\napp <- init(\n  data = cdisc_data(\n    cdisc_dataset(\"ADSL\", ADSL, code = 'ADSL <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")'),\n    cdisc_dataset(\n      \"ADRS\", ADRS,\n      code = 'ADRS <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adrs\") %>% filter(PARAMCD %in% c(\"BESRSPI\", \"INVET\"))'\n    ),\n    check = TRUE\n  ),\n  modules = modules(\n    tm_t_logistic(\n      label = \"Logistic Regression\",\n      dataname = \"ADRS\",\n      arm_var = choices_selected(\n        choices = variable_choices(ADRS, c(\"ARM\", \"ARMCD\")),\n        selected = \"ARM\"\n      ),\n      arm_ref_comp = arm_ref_comp,\n      paramcd = choices_selected(\n        choices = value_choices(ADRS, \"PARAMCD\", \"PARAM\"),\n        selected = \"BESRSPI\"\n      ),\n      cov_var = choices_selected(\n        choices = c(\"SEX\", \"AGE\", \"BMRKR1\", \"BMRKR2\"),\n        selected = \"SEX\"\n      )\n    )\n  )\n)\n\n[INFO] 2023-03-10 05:49:25.8828 pid:8000 token:[] teal.modules.clinical Initializing tm_t_logistic\n\nCodeshinyApp(app$ui, app$server)\n\n\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n [1] teal.modules.clinical_0.8.14.9026 teal_0.12.0.9023                 \n [3] teal.transform_0.2.0.9011         teal.data_0.1.2.9013             \n [5] shiny_1.7.4                       tern_0.7.10.9056                 \n [7] rtables_0.6.0.1                   formatters_0.4.0                 \n [9] magrittr_2.0.3                    dplyr_1.1.0                      \n[11] scda_0.1.5.9009                  \n\nloaded via a namespace (and not attached):\n [1] sass_0.4.5               tidyr_1.3.0              jsonlite_1.8.4          \n [4] splines_4.2.2            R.utils_2.12.2           carData_3.0-5           \n [7] bslib_0.4.2              teal.slice_0.2.0.9026    Rdpack_2.4              \n[10] assertthat_0.2.1         teal.code_0.3.0.9001     tern.gee_0.1.0.9002     \n[13] yaml_2.3.7               pillar_1.8.1             backports_1.4.1         \n[16] lattice_0.20-45          glue_1.6.2               teal.widgets_0.2.0.9024 \n[19] digest_0.6.31            promises_1.2.0.1         rbibutils_2.2.13        \n[22] checkmate_2.1.0          colorspace_2.1-0         R.oo_1.25.0             \n[25] htmltools_0.5.4          httpuv_1.6.9             Matrix_1.5-3            \n[28] pkgconfig_2.0.3          broom_1.0.3              logger_0.2.2            \n[31] purrr_1.0.1              xtable_1.8-4             mvtnorm_1.1-3           \n[34] webshot_0.5.4            scales_1.2.1             processx_3.8.0          \n[37] fontawesome_0.5.0        later_1.3.0              emmeans_1.8.4-1         \n[40] tibble_3.1.8             styler_1.9.1             generics_0.1.3          \n[43] car_3.1-1                ggplot2_3.4.1            ellipsis_0.3.2          \n[46] shinyvalidate_0.1.2      cachem_1.0.7             withr_2.5.0             \n[49] shinyjs_2.1.0            geepack_1.3.9            cli_3.6.0               \n[52] survival_3.5-3           mime_0.12                memoise_2.0.1           \n[55] ps_1.7.2                 estimability_1.4.1       evaluate_0.20           \n[58] R.methodsS3_1.8.2        fansi_1.0.4              R.cache_0.16.0          \n[61] nlme_3.1-162             MASS_7.3-58.3            forcats_1.0.0           \n[64] teal.reporter_0.1.1.9013 tools_4.2.2              lifecycle_1.0.3         \n[67] munsell_0.5.0            callr_3.7.3              jquerylib_0.1.4         \n[70] compiler_4.2.2           rlang_1.0.6              grid_4.2.2              \n[73] htmlwidgets_1.6.1        rmarkdown_2.20           shinyWidgets_0.7.6      \n[76] gtable_0.3.1             codetools_0.2-19         teal.logger_0.1.1.9004  \n[79] abind_1.4-5              R6_2.5.1                 knitr_1.42              \n[82] fastmap_1.1.1            utf8_1.2.3               Rcpp_1.0.10             \n[85] vctrs_0.5.2              tidyselect_1.2.0         xfun_0.37               \n[88] coda_0.19-4             \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R                       [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/tables/efficacy/lgrt02.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "tables/efficacy/coxt01.html",
    "href": "tables/efficacy/coxt01.html",
    "title": "COXT01",
    "section": "",
    "text": "Cox models are the most commonly used methods to estimate the magnitude of the effect in survival analyses. It assumes proportional hazards; that is, it assumes that the ratio of the hazards of the two groups (e.g. two arms) is constant over time. This ratio is referred to as the “hazard ratio” and is one of the most commonly reported metrics to describe the effect size in survival analysis.\n\n\nData Setup\nCox Regression\nCox Regression  with Interaction Term\nCox Regression  Specifying Covariates\nCox Regression Setting  Strata, Ties, Alpha Level\nTeal\nSession Info\n\n\n\n\nCodelibrary(scda)\nlibrary(dplyr)\nlibrary(tern)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadtte <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adtte\")\n\n# Ensure character variables are converted to factors and empty strings and NAs are explicit missing levels.\nadsl <- df_explicit_na(adsl)\nadtte <- df_explicit_na(adtte)\n\nadsl_filtered <- dplyr::filter(\n  adsl,\n  RACE %in% c(\n    \"ASIAN\", \"BLACK OR AFRICAN AMERICAN\",\n    \"WHITE\"\n  )\n)\nadtte_filtered_alone <- adtte\nadtte_filtered <- dplyr::inner_join(\n  x = adsl_filtered[, c(\"STUDYID\", \"USUBJID\")],\n  y = adtte_filtered_alone,\n  by = c(\"STUDYID\", \"USUBJID\")\n)\n\nWarning in dplyr::inner_join(x = adsl_filtered[, c(\"STUDYID\", \"USUBJID\")], : Each row in `x` is expected to match at most 1 row in `y`.\nℹ Row 1 of `x` matches multiple rows.\nℹ If multiple matches are expected, set `multiple = \"all\"` to silence this\n  warning.\n\nCodeanl <- adtte_filtered %>%\n  filter(PARAMCD == \"OS\") %>%\n  mutate(event = 1 - CNSR) %>%\n  filter(ARM %in% c(\"B: Placebo\", \"A: Drug X\")) %>%\n  mutate(ARM = droplevels(relevel(ARM, \"B: Placebo\"))) %>%\n  mutate(RACE = droplevels(RACE))\n\n\n\n\nThe model is fitted using the function fit_coxreg_univar specifying the time, event, arm, and candidate covariates in a variables list, as well as the data where these variables live.\n\nCodemodel <- fit_coxreg_univar(\n  variables = list(\n    time = \"AVAL\",\n    event = \"event\",\n    arm = \"ARM\",\n    covariates = c(\"AGE\", \"SEX\", \"RACE\")\n  ),\n  data = anl\n)\n\n\nAfter fitting, the models are tidied and arranged in a table layout using the rtables framework.\n\nCodedf <- broom::tidy(model)\ndf <- df %>% mutate(col_label = \"Treatment Effect Adjusted for Covariate\")\n\n# Define the split function\nsplit_fun <- drop_split_levels\n\nlyt <- basic_table() %>%\n  split_cols_by(\"col_label\") %>%\n  split_rows_by(\"effect\", split_fun = split_fun) %>%\n  split_rows_by(\"term\", child_labels = \"hidden\", split_fun = split_fun) %>%\n  append_topleft(\"Effect/Covariate Included in the Model\") %>%\n  summarize_coxreg(conf_level = 0.95, vars = c(\"n\", \"hr\", \"ci\", \"pval\"))\n\nresult <- build_table(lyt = lyt, df = df)\nresult\n\nEffect/Covariate Included in the Model       Treatment Effect Adjusted for Covariate     \n                                           n     Hazard Ratio       95% CI       p-value \n—————————————————————————————————————————————————————————————————————————————————————————\nTreatment:                                                                               \n  A: Drug X vs control (B: Placebo)       247        0.70        (0.51, 0.96)     0.0293 \nCovariate:                                                                               \n  Age                                     247        0.70        (0.51, 0.97)     0.0321 \n  Sex                                     247        0.71        (0.52, 0.98)     0.0370 \n  RACE                                    247        0.70        (0.51, 0.97)     0.0318 \n\n\n\n\nThe argument control can be used to modify standard outputs; control_coxreg() helps in adopting the right settings (see ?control_coxreg). For instance, control is used to include the interaction terms. Note that the bulk of the layout from the previous table (in the Cox Regression tab) is unchanged and can be reused here.\n\nCodemodel <- fit_coxreg_univar(\n  variables = list(\n    time = \"AVAL\",\n    event = \"event\",\n    arm = \"ARM\",\n    covariates = c(\"AGE\", \"RACE\")\n  ),\n  data = anl,\n  control = control_coxreg(interaction = TRUE)\n)\n\ndf <- broom::tidy(model)\ndf <- df %>% mutate(col_label = \"Treatment Effect Adjusted for Covariate\")\n\nlyt <- basic_table() %>%\n  split_cols_by(\"col_label\") %>%\n  split_rows_by(\"effect\", split_fun = split_fun) %>%\n  split_rows_by(\"term\", child_labels = \"hidden\", split_fun = split_fun) %>%\n  append_topleft(\"Effect/Covariate Included in the Model\") %>%\n  summarize_coxreg(conf_level = 0.95, vars = c(\"n\", \"hr\", \"ci\", \"pval\", \"pval_inter\"))\n\nresult <- build_table(lyt = lyt, df = df)\nresult\n\nEffect/Covariate Included in the Model                Treatment Effect Adjusted for Covariate             \n                                          n    Hazard Ratio      95% CI      p-value   Interaction p-value\n——————————————————————————————————————————————————————————————————————————————————————————————————————————\nTreatment:                                                                                                \n  A: Drug X vs control (B: Placebo)      247       0.70       (0.51, 0.96)   0.0293                       \nCovariate:                                                                                                \n  Age                                    247                                                 0.8626       \n  34                                               0.70       (0.51, 0.97)                                \n  RACE                                   247                                                 0.9197       \n  ASIAN                                            0.75       (0.48, 1.16)                                \n  BLACK OR AFRICAN AMERICAN                        0.66       (0.34, 1.28)                                \n  WHITE                                            0.65       (0.33, 1.27)                                \n\n\n\n\nThe optional argument at allows the user to provide the expected level of estimation for the interaction when the predictor is a quantitative variable. For instance, it might be relevant to choose the age at which the hazard ratio should be estimated. If no input is provided to at, the median value is used in the row name (as in the previous tab).\n\nCodemodel <- fit_coxreg_univar(\n  variables = list(\n    time = \"AVAL\",\n    event = \"event\",\n    arm = \"ARM\",\n    covariates = c(\"AGE\", \"SEX\")\n  ),\n  data = anl,\n  control = control_coxreg(interaction = TRUE),\n  at = list(AGE = c(30, 40, 50))\n)\n\ndf <- broom::tidy(model)\ndf <- df %>% mutate(col_label = \"Treatment Effect Adjusted for Covariate\")\n\nresult <- build_table(lyt = lyt, df = df)\nresult\n\nEffect/Covariate Included in the Model                Treatment Effect Adjusted for Covariate             \n                                          n    Hazard Ratio      95% CI      p-value   Interaction p-value\n——————————————————————————————————————————————————————————————————————————————————————————————————————————\nTreatment:                                                                                                \n  A: Drug X vs control (B: Placebo)      247       0.70       (0.51, 0.96)   0.0293                       \nCovariate:                                                                                                \n  Age                                    247                                                 0.8626       \n  30                                               0.69       (0.48, 1.00)                                \n  40                                               0.72       (0.48, 1.08)                                \n  50                                               0.75       (0.35, 1.61)                                \n  Sex                                    247                                                 0.4635       \n  F                                                0.64       (0.42, 0.98)                                \n  M                                                0.82       (0.50, 1.35)                                \n\n\n\n\nAdditional controls can be customized using control_coxreg (see ?control_coxreg) such as the ties calculation method and the confidence level. Stratification variables can be added via the strata element of the variables list. Note that confidence level needs to be specified directly using the conf_level argument to the summarize_coxreg function.\n\nCodemodel <- fit_coxreg_univar(\n  variables = list(\n    time = \"AVAL\",\n    event = \"event\",\n    arm = \"ARM\",\n    covariates = c(\"AGE\", \"RACE\"),\n    strata = \"SEX\"\n  ),\n  data = anl,\n  control = control_coxreg(\n    ties = \"breslow\",\n    interaction = TRUE,\n    conf_level = 0.90\n  ),\n  at = list(AGE = c(30, 40, 50))\n)\ndf <- broom::tidy(model)\ndf <- df %>% mutate(col_label = \"Treatment Effect Adjusted for Covariate\")\nlyt <- basic_table() %>%\n  split_cols_by(\"col_label\") %>%\n  split_rows_by(\"effect\", split_fun = split_fun) %>%\n  split_rows_by(\"term\", child_labels = \"hidden\", split_fun = split_fun) %>%\n  append_topleft(\"Effect/Covariate Included in the Model\") %>%\n  summarize_coxreg(\n    conf_level = 0.90,\n    vars = c(\"n\", \"hr\", \"ci\", \"pval\", \"pval_inter\")\n  )\nresult <- build_table(lyt = lyt, df = df)\nresult\n\nEffect/Covariate Included in the Model                Treatment Effect Adjusted for Covariate             \n                                          n    Hazard Ratio      90% CI      p-value   Interaction p-value\n——————————————————————————————————————————————————————————————————————————————————————————————————————————\nTreatment:                                                                                                \n  A: Drug X vs control (B: Placebo)      247       0.74       (0.56, 0.96)   0.0621                       \nCovariate:                                                                                                \n  Age                                    247                                                 0.9753       \n  30                                               0.73       (0.53, 1.00)                                \n  40                                               0.74       (0.52, 1.04)                                \n  50                                               0.74       (0.39, 1.42)                                \n  RACE                                   247                                                 0.9539       \n  ASIAN                                            0.77       (0.49, 1.19)                                \n  BLACK OR AFRICAN AMERICAN                        0.68       (0.34, 1.33)                                \n  WHITE                                            0.75       (0.37, 1.49)                                \n\n\n\n\n\nCodelibrary(teal.modules.clinical)\nlibrary(scda)\n\nADSL <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nADTTE <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adtte\")\n\n# Ensure character variables are converted to factors and empty strings and NAs are explicit missing levels.\nADSL <- df_explicit_na(ADSL)\nADTTE <- df_explicit_na(ADTTE)\n\narm_ref_comp <- list(\n  ACTARMCD = list(\n    ref = \"ARM B\",\n    comp = c(\"ARM A\", \"ARM C\")\n  ),\n  ARM = list(\n    ref = \"B: Placebo\",\n    comp = c(\"A: Drug X\", \"C: Combination\")\n  )\n)\n\napp <- init(\n  data = cdisc_data(\n    cdisc_dataset(\"ADSL\", ADSL, code = 'ADSL <- df_explicit_na(synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\"))'),\n    cdisc_dataset(\"ADTTE\", ADTTE, code = 'ADTTE <- df_explicit_na(synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adtte\"))'),\n    check = TRUE\n  ),\n  modules = modules(\n    tm_t_coxreg(\n      label = \"Cox Reg.\",\n      dataname = \"ADTTE\",\n      arm_var = choices_selected(c(\"ARM\", \"ARMCD\", \"ACTARMCD\"), \"ARM\"),\n      arm_ref_comp = arm_ref_comp,\n      paramcd = choices_selected(\n        value_choices(ADTTE, \"PARAMCD\", \"PARAM\"), \"OS\"\n      ),\n      strata_var = choices_selected(\n        c(\"SEX\", \"STRATA1\", \"STRATA2\"), NULL\n      ),\n      cov_var = choices_selected(\n        c(\"AGE\", \"SEX\", \"RACE\"), \"AGE\"\n      ),\n      multivariate = FALSE\n    )\n  )\n)\n\n[INFO] 2023-03-10 05:49:54.4952 pid:8078 token:[] teal.modules.clinical Initializing tm_t_coxreg\n\nCodeshinyApp(app$ui, app$server)\n\n\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n [1] teal.modules.clinical_0.8.14.9026 teal_0.12.0.9023                 \n [3] teal.transform_0.2.0.9011         teal.data_0.1.2.9013             \n [5] shiny_1.7.4                       tern_0.7.10.9056                 \n [7] rtables_0.6.0.1                   formatters_0.4.0                 \n [9] magrittr_2.0.3                    dplyr_1.1.0                      \n[11] scda_0.1.5.9009                  \n\nloaded via a namespace (and not attached):\n [1] nlme_3.1-162             teal.logger_0.1.1.9004   fontawesome_0.5.0       \n [4] webshot_0.5.4            R.cache_0.16.0           tools_4.2.2             \n [7] backports_1.4.1          bslib_0.4.2              utf8_1.2.3              \n[10] R6_2.5.1                 colorspace_2.1-0         withr_2.5.0             \n[13] tidyselect_1.2.0         shinyvalidate_0.1.2      processx_3.8.0          \n[16] emmeans_1.8.4-1          compiler_4.2.2           cli_3.6.0               \n[19] shinyjs_2.1.0            sass_0.4.5               scales_1.2.1            \n[22] checkmate_2.1.0          mvtnorm_1.1-3            callr_3.7.3             \n[25] stringr_1.5.0            digest_0.6.31            rmarkdown_2.20          \n[28] teal.slice_0.2.0.9026    R.utils_2.12.2           pkgconfig_2.0.3         \n[31] htmltools_0.5.4          teal.widgets_0.2.0.9024  styler_1.9.1            \n[34] fastmap_1.1.1            htmlwidgets_1.6.1        rlang_1.0.6             \n[37] jquerylib_0.1.4          generics_0.1.3           jsonlite_1.8.4          \n[40] car_3.1-1                R.oo_1.25.0              Matrix_1.5-3            \n[43] Rcpp_1.0.10              munsell_0.5.0            fansi_1.0.4             \n[46] abind_1.4-5              geepack_1.3.9            logger_0.2.2            \n[49] lifecycle_1.0.3          R.methodsS3_1.8.2        stringi_1.7.12          \n[52] yaml_2.3.7               carData_3.0-5            MASS_7.3-58.3           \n[55] grid_4.2.2               tern.gee_0.1.0.9002      teal.code_0.3.0.9001    \n[58] promises_1.2.0.1         forcats_1.0.0            lattice_0.20-45         \n[61] splines_4.2.2            knitr_1.42               ps_1.7.2                \n[64] pillar_1.8.1             estimability_1.4.1       codetools_0.2-19        \n[67] glue_1.6.2               evaluate_0.20            vctrs_0.5.2             \n[70] httpuv_1.6.9             Rdpack_2.4               gtable_0.3.1            \n[73] purrr_1.0.1              tidyr_1.3.0              assertthat_0.2.1        \n[76] cachem_1.0.7             ggplot2_3.4.1            xfun_0.37               \n[79] mime_0.12                rbibutils_2.2.13         xtable_1.8-4            \n[82] broom_1.0.3              coda_0.19-4              teal.reporter_0.1.1.9013\n[85] later_1.3.0              survival_3.5-3           tibble_3.1.8            \n[88] memoise_2.0.1            shinyWidgets_0.7.6       ellipsis_0.3.2          \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R                       [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/tables/efficacy/coxt01.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "tables/efficacy/mmrmt01.html",
    "href": "tables/efficacy/mmrmt01.html",
    "title": "MMRMT01",
    "section": "",
    "text": "Data Setup\nLeast Squares Means\nFixed Effects\nCovariance Matrix\nModel Diagnostics\nTeal\nSession Info\n\n\n\n\nCodelibrary(dplyr)\nlibrary(tern.mmrm)\nlibrary(scda)\nlibrary(broom)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadqs <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adqs\")\n\n# Ensure character variables are converted to factors and empty strings and NAs are explicit missing levels.\nadsl <- df_explicit_na(adsl)\nadqs <- df_explicit_na(adqs)\n\nadqs_f <- adqs %>%\n  dplyr::filter(PARAMCD == \"FKSI-FWB\" & !AVISIT %in% c(\"BASELINE\")) %>%\n  droplevels() %>%\n  dplyr::mutate(ARMCD = factor(ARMCD, levels = c(\"ARM B\", \"ARM A\", \"ARM C\"))) %>%\n  dplyr::mutate(\n    AVISITN = rank(AVISITN) %>%\n      as.factor() %>%\n      as.numeric() %>%\n      as.factor()\n  )\nadsl_sub <- adqs_f %>%\n  dplyr::filter(!is.na(CHG)) %>%\n  distinct(USUBJID) %>%\n  left_join(adsl, by = \"USUBJID\")\nvar_labels(adqs_f) <- var_labels(adqs)\n\n\n\n\nConsidering the treatment variable in the model\n\nCodemmrm_results <- fit_mmrm(\n  vars = list(\n    response = \"CHG\",\n    covariates = c(\"BASE\", \"STRATA1\", \"BMRKR2\"),\n    id = \"USUBJID\",\n    arm = \"ARMCD\",\n    visit = \"AVISIT\"\n  ),\n  data = adqs_f,\n  weights_emmeans = \"equal\"\n)\n\nIn AVISIT there are dropped visits: SCREENING\n\nCodedf <- tidy(mmrm_results)\nattr(df$AVISIT, \"label\") <- \"Visit\"\n\n# Define the split function\nsplit_fun <- drop_split_levels\n\nresult <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ARMCD\", ref_group = mmrm_results$ref_level) %>%\n  split_rows_by(\"AVISIT\", split_fun = split_fun, label_pos = \"topleft\", split_label = obj_label(df$AVISIT)) %>%\n  summarize_lsmeans(show_relative = \"increase\") %>%\n  append_topleft(\"  Statistics\") %>%\n  build_table(df, alt_counts_df = adsl_sub)\n\nresult\n\nVisit                                      ARM B              ARM A              ARM C      \n  Statistics                              (N=134)            (N=134)            (N=132)     \n————————————————————————————————————————————————————————————————————————————————————————————\nWEEK 1 DAY 8                                                                                \n  n                                         134                134                132       \n  Adjusted Mean (SE)                   3.488 (0.687)      4.246 (0.687)      3.163 (0.692)  \n    95% CI                             (2.136, 4.839)     (2.895, 5.598)     (1.803, 4.523) \n  Difference in Adjusted Means (SE)                       0.759 (0.973)      -0.325 (0.976) \n    95% CI                                               (-1.155, 2.672)    (-2.243, 1.593) \n    Relative Increase (%)                                     21.8%              -9.3%      \n    p-value (MMRM)                                            0.4362             0.7393     \nWEEK 2 DAY 15                                                                               \n  n                                         134                134                132       \n  Adjusted Mean (SE)                   9.135 (0.768)      9.018 (0.767)      8.509 (0.773)  \n    95% CI                            (7.626, 10.644)    (7.510, 10.527)    (6.991, 10.028) \n  Difference in Adjusted Means (SE)                       -0.117 (1.087)     -0.626 (1.090) \n    95% CI                                               (-2.253, 2.020)    (-2.768, 1.517) \n    Relative Increase (%)                                     -1.3%              -6.8%      \n    p-value (MMRM)                                            0.9147             0.5662     \nWEEK 3 DAY 22                                                                               \n  n                                         134                134                132       \n  Adjusted Mean (SE)                   13.547 (0.871)     16.014 (0.871)     15.789 (0.877) \n    95% CI                            (11.835, 15.259)   (14.303, 17.726)   (14.066, 17.513)\n  Difference in Adjusted Means (SE)                       2.467 (1.232)      2.242 (1.236)  \n    95% CI                                                (0.044, 4.890)    (-0.187, 4.672) \n    Relative Increase (%)                                     18.2%              16.6%      \n    p-value (MMRM)                                            0.0460             0.0704     \nWEEK 4 DAY 29                                                                               \n  n                                         134                134                132       \n  Adjusted Mean (SE)                   18.102 (0.995)     19.479 (0.995)     19.511 (1.002) \n    95% CI                            (16.146, 20.059)   (17.523, 21.435)   (17.541, 21.481)\n  Difference in Adjusted Means (SE)                       1.377 (1.408)      1.409 (1.413)  \n    95% CI                                               (-1.392, 4.145)    (-1.368, 4.186) \n    Relative Increase (%)                                      7.6%               7.8%      \n    p-value (MMRM)                                            0.3288             0.3192     \nWEEK 5 DAY 36                                                                               \n  n                                         134                134                132       \n  Adjusted Mean (SE)                   23.503 (1.058)     24.931 (1.058)     23.704 (1.065) \n    95% CI                            (21.423, 25.583)   (22.851, 27.011)   (21.610, 25.798)\n  Difference in Adjusted Means (SE)                       1.428 (1.497)      0.201 (1.502)  \n    95% CI                                               (-1.515, 4.371)    (-2.752, 3.153) \n    Relative Increase (%)                                      6.1%               0.9%      \n    p-value (MMRM)                                            0.3408             0.8937     \n\n\nNot considering the treatment variable in the model\n\nCodemmrm_results_no_arm <- fit_mmrm(\n  vars = list(\n    response = \"CHG\",\n    covariates = c(\"BMRKR2\", \"STRATA1\"),\n    id = \"USUBJID\",\n    visit = \"AVISIT\"\n  ),\n  data = adqs_f,\n  weights_emmeans = \"equal\",\n  parallel = TRUE\n)\n\nIn AVISIT there are dropped visits: SCREENING\n\nCodedf_no_arm <- tidy(mmrm_results_no_arm)\nattr(df_no_arm$AVISIT, \"label\") <- \"Visit\"\n\n# Define the split function\nsplit_fun <- drop_split_levels\n\nresult <- basic_table(show_colcounts = TRUE) %>%\n  add_overall_col(\"All Patients\") %>%\n  split_rows_by(\"AVISIT\", split_fun = split_fun, label_pos = \"topleft\", split_label = obj_label(df_no_arm$AVISIT)) %>%\n  summarize_lsmeans(arms = FALSE) %>%\n  append_topleft(\"  Statistics\") %>%\n  build_table(df_no_arm, alt_counts_df = adsl_sub)\n\nresult\n\nVisit                    All Patients  \n  Statistics               (N=400)     \n———————————————————————————————————————\nWEEK 1 DAY 8                           \n  n                          400       \n  Adjusted Mean (SE)    3.615 (0.620)  \n    95% CI              (2.396, 4.834) \nWEEK 2 DAY 15                          \n  n                          400       \n  Adjusted Mean (SE)    8.870 (0.602)  \n    95% CI             (7.687, 10.053) \nWEEK 3 DAY 22                          \n  n                          400       \n  Adjusted Mean (SE)    15.094 (0.683) \n    95% CI             (13.751, 16.437)\nWEEK 4 DAY 29                          \n  n                          400       \n  Adjusted Mean (SE)    19.009 (0.717) \n    95% CI             (17.599, 20.418)\nWEEK 5 DAY 36                          \n  n                          400       \n  Adjusted Mean (SE)    24.028 (0.747) \n    95% CI             (22.560, 25.496)\n\n\nAdding baseline rows\nIt may be of interest to summarize some different statistics at the baseline visit or summarize a different variable in the data set not used in the MMRM. For example, the model may use the variable CHG but the baseline visit row may summarize the AVAL variable, thus we would need to create two tables and then combine them to accomplish this.\n\nCode# First have the least-square means table.\na <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ARMCD\", ref_group = mmrm_results$ref_level) %>%\n  split_rows_by(\"AVISIT\", split_fun = split_fun, label_pos = \"topleft\", split_label = obj_label(df$AVISIT)) %>%\n  summarize_lsmeans(show_relative = \"increase\") %>%\n  append_topleft(\"  Statistics\") %>%\n  build_table(df, alt_counts_df = adsl_sub)\n\n# Second prepare the baseline values summary table.\nbaseline_dat <- adqs %>%\n  filter(AVISIT == \"BASELINE\") %>%\n  droplevels()\n\nb <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ARMCD\") %>%\n  split_rows_by(\"AVISIT\") %>%\n  summarize_vars(\"AVAL\") %>%\n  append_topleft(\"  Statistics\") %>%\n  build_table(baseline_dat, alt_counts_df = adsl_sub)\n\n# Now we can combine them as follows.\ncol_info(b) <- EmptyColInfo\nrbind(b, a)\n\nVisit                                      ARM B              ARM A              ARM C      \n  Statistics                              (N=134)            (N=134)            (N=132)     \n————————————————————————————————————————————————————————————————————————————————————————————\nBASELINE                                                                                    \n  n                                         670                670                660       \n  Mean (SD)                              49.8 (8.1)         50.4 (8.3)         50.2 (8.4)   \n  Median                                    49.6               50.2               50.4      \n  Min - Max                             24.3 - 72.9        21.7 - 74.5        26.0 - 71.4   \nWEEK 1 DAY 8                                                                                \n  n                                         134                134                132       \n  Adjusted Mean (SE)                   3.488 (0.687)      4.246 (0.687)      3.163 (0.692)  \n    95% CI                             (2.136, 4.839)     (2.895, 5.598)     (1.803, 4.523) \n  Difference in Adjusted Means (SE)                       0.759 (0.973)      -0.325 (0.976) \n    95% CI                                               (-1.155, 2.672)    (-2.243, 1.593) \n    Relative Increase (%)                                     21.8%              -9.3%      \n    p-value (MMRM)                                            0.4362             0.7393     \nWEEK 2 DAY 15                                                                               \n  n                                         134                134                132       \n  Adjusted Mean (SE)                   9.135 (0.768)      9.018 (0.767)      8.509 (0.773)  \n    95% CI                            (7.626, 10.644)    (7.510, 10.527)    (6.991, 10.028) \n  Difference in Adjusted Means (SE)                       -0.117 (1.087)     -0.626 (1.090) \n    95% CI                                               (-2.253, 2.020)    (-2.768, 1.517) \n    Relative Increase (%)                                     -1.3%              -6.8%      \n    p-value (MMRM)                                            0.9147             0.5662     \nWEEK 3 DAY 22                                                                               \n  n                                         134                134                132       \n  Adjusted Mean (SE)                   13.547 (0.871)     16.014 (0.871)     15.789 (0.877) \n    95% CI                            (11.835, 15.259)   (14.303, 17.726)   (14.066, 17.513)\n  Difference in Adjusted Means (SE)                       2.467 (1.232)      2.242 (1.236)  \n    95% CI                                                (0.044, 4.890)    (-0.187, 4.672) \n    Relative Increase (%)                                     18.2%              16.6%      \n    p-value (MMRM)                                            0.0460             0.0704     \nWEEK 4 DAY 29                                                                               \n  n                                         134                134                132       \n  Adjusted Mean (SE)                   18.102 (0.995)     19.479 (0.995)     19.511 (1.002) \n    95% CI                            (16.146, 20.059)   (17.523, 21.435)   (17.541, 21.481)\n  Difference in Adjusted Means (SE)                       1.377 (1.408)      1.409 (1.413)  \n    95% CI                                               (-1.392, 4.145)    (-1.368, 4.186) \n    Relative Increase (%)                                      7.6%               7.8%      \n    p-value (MMRM)                                            0.3288             0.3192     \nWEEK 5 DAY 36                                                                               \n  n                                         134                134                132       \n  Adjusted Mean (SE)                   23.503 (1.058)     24.931 (1.058)     23.704 (1.065) \n    95% CI                            (21.423, 25.583)   (22.851, 27.011)   (21.610, 25.798)\n  Difference in Adjusted Means (SE)                       1.428 (1.497)      0.201 (1.502)  \n    95% CI                                               (-1.515, 4.371)    (-2.752, 3.153) \n    Relative Increase (%)                                      6.1%               0.9%      \n    p-value (MMRM)                                            0.3408             0.8937     \n\n\nConsidering visit averages\nIt may also be of interest to summarize several different statistics for an averaged combination of various visits in the MMRM. For example, you may want to see the statistics for the average of the first 2 visits, or the average statistics of all visits combined. This can be accomplished by specifying the averages_emmeans argument when fitting the MMRM model.\n\nCodemmrm_results_avg_visits <- fit_mmrm(\n  vars = list(\n    response = \"CHG\",\n    covariates = c(\"BASE\", \"STRATA1\", \"BMRKR2\"),\n    id = \"USUBJID\",\n    arm = \"ARMCD\",\n    visit = \"AVISIT\"\n  ),\n  data = adqs_f,\n  weights_emmeans = \"equal\",\n  averages_emmeans = list(\n    \"WEEKS 1-2\" = c(\"WEEK 1 DAY 8\", \"WEEK 2 DAY 15\"),\n    \"WEEKS 3-5\" = c(\"WEEK 3 DAY 22\", \"WEEK 4 DAY 29\", \"WEEK 5 DAY 36\"),\n    \"ALL VISITS\" = c(\"WEEK 1 DAY 8\", \"WEEK 2 DAY 15\", \"WEEK 3 DAY 22\", \"WEEK 4 DAY 29\", \"WEEK 5 DAY 36\")\n  )\n)\n\nIn AVISIT there are dropped visits: SCREENING\n\nCodedf_avgs <- tidy(mmrm_results_avg_visits)\nattr(df_avgs$AVISIT, \"label\") <- \"Visit\"\n\n# Define the split function\nsplit_fun <- drop_split_levels\n\nresult <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ARMCD\", ref_group = mmrm_results_avg_visits$ref_level) %>%\n  split_rows_by(\"AVISIT\", split_fun = split_fun, label_pos = \"topleft\", split_label = obj_label(df_avgs$AVISIT)) %>%\n  summarize_lsmeans(show_relative = \"increase\") %>%\n  append_topleft(\"  Statistics\") %>%\n  build_table(df_avgs, alt_counts_df = adsl_sub)\n\nresult\n\nVisit                                      ARM B              ARM A              ARM C      \n  Statistics                              (N=134)            (N=134)            (N=132)     \n————————————————————————————————————————————————————————————————————————————————————————————\nWEEK 1 DAY 8                                                                                \n  n                                         134                134                132       \n  Adjusted Mean (SE)                   3.488 (0.687)      4.246 (0.687)      3.163 (0.692)  \n    95% CI                             (2.136, 4.839)     (2.895, 5.598)     (1.803, 4.523) \n  Difference in Adjusted Means (SE)                       0.759 (0.973)      -0.325 (0.976) \n    95% CI                                               (-1.155, 2.672)    (-2.243, 1.593) \n    Relative Increase (%)                                     21.8%              -9.3%      \n    p-value (MMRM)                                            0.4362             0.7393     \nWEEK 2 DAY 15                                                                               \n  n                                         134                134                132       \n  Adjusted Mean (SE)                   9.135 (0.768)      9.018 (0.767)      8.509 (0.773)  \n    95% CI                            (7.626, 10.644)    (7.510, 10.527)    (6.991, 10.028) \n  Difference in Adjusted Means (SE)                       -0.117 (1.087)     -0.626 (1.090) \n    95% CI                                               (-2.253, 2.020)    (-2.768, 1.517) \n    Relative Increase (%)                                     -1.3%              -6.8%      \n    p-value (MMRM)                                            0.9147             0.5662     \nWEEK 3 DAY 22                                                                               \n  n                                         134                134                132       \n  Adjusted Mean (SE)                   13.547 (0.871)     16.014 (0.871)     15.789 (0.877) \n    95% CI                            (11.835, 15.259)   (14.303, 17.726)   (14.066, 17.513)\n  Difference in Adjusted Means (SE)                       2.467 (1.232)      2.242 (1.236)  \n    95% CI                                                (0.044, 4.890)    (-0.187, 4.672) \n    Relative Increase (%)                                     18.2%              16.6%      \n    p-value (MMRM)                                            0.0460             0.0704     \nWEEK 4 DAY 29                                                                               \n  n                                         134                134                132       \n  Adjusted Mean (SE)                   18.102 (0.995)     19.479 (0.995)     19.511 (1.002) \n    95% CI                            (16.146, 20.059)   (17.523, 21.435)   (17.541, 21.481)\n  Difference in Adjusted Means (SE)                       1.377 (1.408)      1.409 (1.413)  \n    95% CI                                               (-1.392, 4.145)    (-1.368, 4.186) \n    Relative Increase (%)                                      7.6%               7.8%      \n    p-value (MMRM)                                            0.3288             0.3192     \nWEEK 5 DAY 36                                                                               \n  n                                         134                134                132       \n  Adjusted Mean (SE)                   23.503 (1.058)     24.931 (1.058)     23.704 (1.065) \n    95% CI                            (21.423, 25.583)   (22.851, 27.011)   (21.610, 25.798)\n  Difference in Adjusted Means (SE)                       1.428 (1.497)      0.201 (1.502)  \n    95% CI                                               (-1.515, 4.371)    (-2.752, 3.153) \n    Relative Increase (%)                                      6.1%               0.9%      \n    p-value (MMRM)                                            0.3408             0.8937     \nWEEKS 1-2                                                                                   \n  n                                         134                134                132       \n  Adjusted Mean (SE)                   6.311 (0.514)      6.632 (0.514)      5.836 (0.516)  \n    95% CI                             (5.301, 7.322)     (5.623, 7.642)     (4.821, 6.852) \n  Difference in Adjusted Means (SE)                       0.321 (0.728)      -0.475 (0.729) \n    95% CI                                               (-1.111, 1.753)    (-1.909, 0.959) \n    Relative Increase (%)                                      5.1%              -7.5%      \n    p-value (MMRM)                                            0.6596             0.5151     \nWEEKS 3-5                                                                                   \n  n                                         134                134                132       \n  Adjusted Mean (SE)                   18.384 (0.560)     20.141 (0.560)     19.668 (0.563) \n    95% CI                            (17.284, 19.485)   (19.041, 21.241)   (18.562, 20.775)\n  Difference in Adjusted Means (SE)                       1.757 (0.793)      1.284 (0.794)  \n    95% CI                                                (0.198, 3.316)    (-0.278, 2.846) \n    Relative Increase (%)                                      9.6%               7.0%      \n    p-value (MMRM)                                            0.0273             0.1068     \nALL VISITS                                                                                  \n  n                                         134                134                132       \n  Adjusted Mean (SE)                   13.555 (0.388)     14.738 (0.388)     14.135 (0.389) \n    95% CI                            (12.792, 14.318)   (13.976, 15.500)   (13.370, 14.900)\n  Difference in Adjusted Means (SE)                       1.183 (0.551)      0.580 (0.551)  \n    95% CI                                                (0.100, 2.266)    (-0.502, 1.663) \n    Relative Increase (%)                                      8.7%               4.3%      \n    p-value (MMRM)                                            0.0324             0.2924     \n\n\n\n\n\nConsidering the treatment variable in the model\n\nCodeas.rtable(mmrm_results, type = \"fixed\")\n\n                                 Estimate   Std. Error   t value    df    Pr(>|t|)\n——————————————————————————————————————————————————————————————————————————————————\n(Intercept)                      55.7483      1.5244     36.5713    510   <0.0001 \nBASE                             -1.0196      0.0246     -41.4362   392   <0.0001 \nSTRATA1B                         -0.0369      0.5345     -0.0691    392    0.9450 \nSTRATA1C                          0.0205      0.5238      0.0392    392    0.9688 \nBMRKR2MEDIUM                     -0.3840      0.5198     -0.7386    392    0.4606 \nBMRKR2HIGH                       -1.0056      0.5259     -1.9123    392    0.0566 \nARMCDARM A                        0.7587      0.9733      0.7795    396    0.4362 \nARMCDARM C                       -0.3248      0.9756     -0.3329    394    0.7393 \nAVISITWEEK 2 DAY 15               5.6472      1.0331      5.4665    397   <0.0001 \nAVISITWEEK 3 DAY 22              10.0591      1.0897      9.2311    397   <0.0001 \nAVISITWEEK 4 DAY 29              14.6145      1.2176     12.0027    397   <0.0001 \nAVISITWEEK 5 DAY 36              20.0154      1.2584     15.9057    397   <0.0001 \nARMCDARM A:AVISITWEEK 2 DAY 15   -0.8752      1.4610     -0.5990    397    0.5495 \nARMCDARM C:AVISITWEEK 2 DAY 15   -0.3007      1.4665     -0.2050    397    0.8376 \nARMCDARM A:AVISITWEEK 3 DAY 22    1.7085      1.5411      1.1087    397    0.2682 \nARMCDARM C:AVISITWEEK 3 DAY 22    2.5673      1.5469      1.6597    397    0.0978 \nARMCDARM A:AVISITWEEK 4 DAY 29    0.6181      1.7220      0.3589    397    0.7198 \nARMCDARM C:AVISITWEEK 4 DAY 29    1.7337      1.7285      1.0030    397    0.3165 \nARMCDARM A:AVISITWEEK 5 DAY 36    0.6690      1.7796      0.3759    397    0.7072 \nARMCDARM C:AVISITWEEK 5 DAY 36    0.5257      1.7863      0.2943    397    0.7687 \n\n\nNot considering the treatment variable in the model\n\nCodeas.rtable(mmrm_results_no_arm, type = \"fixed\")\n\n                      Estimate   Std. Error   t value   df    Pr(>|t|)\n——————————————————————————————————————————————————————————————————————\n(Intercept)            1.5624      1.1751     1.3296    466    0.1843 \nBMRKR2MEDIUM           1.0924      1.1878     0.9196    395    0.3583 \nBMRKR2HIGH             1.4619      1.1971     1.2212    395    0.2227 \nSTRATA1B               2.6321      1.2180     2.1610    395    0.0313 \nSTRATA1C               0.9717      1.2008     0.8092    395    0.4189 \nAVISITWEEK 2 DAY 15    5.2548      0.5967     8.8061    399   <0.0001 \nAVISITWEEK 3 DAY 22   11.4787      0.6314     18.1802   399   <0.0001 \nAVISITWEEK 4 DAY 29   15.3937      0.7039     21.8696   399   <0.0001 \nAVISITWEEK 5 DAY 36   20.4130      0.7266     28.0921   399   <0.0001 \n\n\n\n\n\n\nCodeas.rtable(mmrm_results, type = \"cov\")\n\n                WEEK 1 DAY 8   WEEK 2 DAY 15   WEEK 3 DAY 22   WEEK 4 DAY 29   WEEK 5 DAY 36\n————————————————————————————————————————————————————————————————————————————————————————————\nWEEK 1 DAY 8      63.0140         -0.6664         2.5965          -1.6231         0.2589    \nWEEK 2 DAY 15     -0.6664         78.6592         1.7004         -11.8677         -0.4261   \nWEEK 3 DAY 22      2.5965         1.7004         101.2949         -5.8424         7.1145    \nWEEK 4 DAY 29     -1.6231        -11.8677         -5.8424        132.4034         -5.3739   \nWEEK 5 DAY 36      0.2589         -0.4261         7.1145          -5.3739        149.6937   \n\n\n\n\nModel diagnostics are currently available to evaluate choice of covariates for the fixed and random effects. Statistics to evaluate choice of covariance structure are being investigated and will be included in a future release.\n\nCodeas.rtable(mmrm_results, type = \"diagnostic\")\n\n                 Diagnostic statistic value\n———————————————————————————————————————————\nREML criterion           14835.9968        \nAIC                      14865.9968        \nAICc                     14866.2412        \nBIC                      14925.8688        \n\n\n\n\n\nCodelibrary(teal.modules.clinical)\nlibrary(scda)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadqs <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adqs\") %>%\n  dplyr::filter(ABLFL != \"Y\" & ABLFL2 != \"Y\") %>%\n  dplyr::filter(AVISIT %in% c(\"WEEK 1 DAY 8\", \"WEEK 2 DAY 15\", \"WEEK 3 DAY 22\")) %>%\n  dplyr::mutate(\n    AVISIT = as.factor(AVISIT),\n    AVISITN = rank(AVISITN) %>%\n      as.factor() %>%\n      as.numeric() %>%\n      as.factor() # making consecutive numeric factor\n  )\n\narm_ref_comp <- list(\n  ARMCD = list(\n    ref = \"ARM A\",\n    comp = c(\"ARM B\", \"ARM C\")\n  )\n)\n\napp <- init(\n  data = cdisc_data(\n    cdisc_dataset(\"ADSL\", adsl, code = 'ADSL <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")'),\n    cdisc_dataset(\"ADQS\", adqs,\n      code = 'ADQS <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adqs\") %>%\n              dplyr::filter(ABLFL != \"Y\" & ABLFL2 != \"Y\") %>%\n              dplyr::filter(AVISIT %in% c(\"WEEK 1 DAY 8\", \"WEEK 2 DAY 15\", \"WEEK 3 DAY 22\")) %>%\n              dplyr::mutate(\n                AVISIT = as.factor(AVISIT),\n                AVISITN = rank(AVISITN) %>%\n                  as.factor() %>%\n                  as.numeric() %>%\n                  as.factor() # making consecutive numeric factor\n              )'\n    ),\n    check = TRUE\n  ),\n  modules = modules(\n    tm_a_mmrm(\n      label = \"MMRM\",\n      dataname = \"ADQS\",\n      aval_var = choices_selected(c(\"AVAL\", \"CHG\"), \"CHG\"),\n      id_var = choices_selected(c(\"USUBJID\", \"SUBJID\"), \"USUBJID\"),\n      arm_var = choices_selected(c(\"ARM\", \"ARMCD\"), \"ARMCD\"),\n      visit_var = choices_selected(c(\"AVISIT\", \"AVISITN\"), \"AVISIT\"),\n      arm_ref_comp = arm_ref_comp,\n      paramcd = choices_selected(\n        choices = value_choices(adqs, \"PARAMCD\", \"PARAM\"),\n        selected = \"FKSI-FWB\"\n      ),\n      cov_var = choices_selected(c(\"BASE\", \"AGE\", \"SEX\", \"BASE:AVISIT\"), NULL),\n      conf_level = choices_selected(c(0.95, 0.9, 0.8), 0.95)\n    )\n  )\n)\n\n[INFO] 2023-03-10 05:50:36.9739 pid:8154 token:[] teal.modules.clinical Initializing tm_a_mmrm\n\nCodeshinyApp(app$ui, app$server)\n\n\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n [1] teal.modules.clinical_0.8.14.9026 teal_0.12.0.9023                 \n [3] teal.transform_0.2.0.9011         teal.data_0.1.2.9013             \n [5] shiny_1.7.4                       broom_1.0.3                      \n [7] scda_0.1.5.9009                   tern.mmrm_0.2.2.9002             \n [9] tern_0.7.10.9056                  rtables_0.6.0.1                  \n[11] formatters_0.4.0                  magrittr_2.0.3                   \n[13] dplyr_1.1.0                      \n\nloaded via a namespace (and not attached):\n [1] sass_0.4.5               tidyr_1.3.0              jsonlite_1.8.4          \n [4] splines_4.2.2            bslib_0.4.2              teal.slice_0.2.0.9026   \n [7] Rdpack_2.4               assertthat_0.2.1         tern.gee_0.1.0.9002     \n[10] yaml_2.3.7               numDeriv_2016.8-1.1      pillar_1.8.1            \n[13] backports_1.4.1          lattice_0.20-45          glue_1.6.2              \n[16] teal.widgets_0.2.0.9024  digest_0.6.31            promises_1.2.0.1        \n[19] rbibutils_2.2.13         checkmate_2.1.0          colorspace_2.1-0        \n[22] cowplot_1.1.1            htmltools_0.5.4          httpuv_1.6.9            \n[25] Matrix_1.5-3             mmrm_0.2.2               pkgconfig_2.0.3         \n[28] logger_0.2.2             purrr_1.0.1              xtable_1.8-4            \n[31] mvtnorm_1.1-3            webshot_0.5.4            scales_1.2.1            \n[34] processx_3.8.0           fontawesome_0.5.0        later_1.3.0             \n[37] emmeans_1.8.4-1          tibble_3.1.8             generics_0.1.3          \n[40] ggplot2_3.4.1            ellipsis_0.3.2           shinyvalidate_0.1.2     \n[43] cachem_1.0.7             withr_2.5.0              shinyjs_2.1.0           \n[46] geepack_1.3.9            TMB_1.9.2                cli_3.6.0               \n[49] survival_3.5-3           mime_0.12                memoise_2.0.1           \n[52] ps_1.7.2                 estimability_1.4.1       evaluate_0.20           \n[55] fansi_1.0.4              parallelly_1.34.0        nlme_3.1-162            \n[58] MASS_7.3-58.3            forcats_1.0.0            teal.reporter_0.1.1.9013\n[61] tools_4.2.2              lifecycle_1.0.3          stringr_1.5.0           \n[64] munsell_0.5.0            callr_3.7.3              jquerylib_0.1.4         \n[67] compiler_4.2.2           rlang_1.0.6              grid_4.2.2              \n[70] htmlwidgets_1.6.1        shinyWidgets_0.7.6       rmarkdown_2.20          \n[73] gtable_0.3.1             codetools_0.2-19         teal.logger_0.1.1.9004  \n[76] R6_2.5.1                 knitr_1.42               fastmap_1.1.1           \n[79] utf8_1.2.3               stringi_1.7.12           parallel_4.2.2          \n[82] Rcpp_1.0.10              vctrs_0.5.2              tidyselect_1.2.0        \n[85] xfun_0.37                coda_0.19-4             \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R                       [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/tables/efficacy/mmrmt01.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "tables/efficacy/coxt02.html",
    "href": "tables/efficacy/coxt02.html",
    "title": "COXT02",
    "section": "",
    "text": "Analysis based on multivariate Cox models is usually not performed for the Clinical Study Report (CSR) or regulatory documents, serving exploratory purposes only (e.g. for publication). In practice, the model usually includes only the main effects (without interaction terms). It produces the estimates for each of the covariates included in the model. The analysis follows the same principles (i.e. stratified vs. unstratified analysis and tie handling) as the general Cox model analysis also used in COXT01. Since there is usually no pre-specified hypothesis testing for such analysis, the p-values must be interpreted with caution.\n\n\nData Setup\nMulti-Variable Cox Regression\nMulti-Variable Cox Regression  with Interaction Term\nMulti-Variable Cox Regression  Specifying Covariates\nMulti-Variable Cox Regression  Specifying Covariates from ADSUB\nMulti-Variable Cox Regression  Setting Strata, Ties, Alpha Level, Statistics\nMulti-Variable Cox Regression  with Selection Process for Covariates\nTeal\nSession Info\n\n\n\n\nCodelibrary(scda)\nlibrary(dplyr)\nlibrary(tern)\nlibrary(broom)\n\nadtte <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adtte\")\n\n# Ensure character variables are converted to factors and empty strings and NAs are explicit missing levels.\nadtte <- df_explicit_na(adtte)\n\nadtte_f <- adtte %>%\n  filter(\n    PARAMCD == \"OS\",\n    SEX %in% c(\"F\", \"M\"),\n    RACE %in% c(\"ASIAN\", \"BLACK OR AFRICAN AMERICAN\", \"WHITE\")\n  ) %>%\n  mutate(\n    ARM = droplevels(relevel(ARM, \"B: Placebo\")),\n    SEX = droplevels(SEX),\n    RACE = droplevels(RACE)\n  ) %>%\n  mutate(event = 1 - CNSR) %>%\n  var_relabel(\n    ARM = \"Planned Arm\",\n    SEX = \"Sex\",\n    RACE = \"Race\",\n    AGE = \"Age\"\n  )\n\n\n\n\nThe model is fitted using the function fit_coxreg_multivar specifying the time, event, arm, and candidate covariates in a variables list, as well as the data where these variables live.\n\nCodemultivar_model <- fit_coxreg_multivar(\n  variables = list(\n    time = \"AVAL\", event = \"event\", arm = \"ARMCD\",\n    covariates = c(\"SEX\", \"AGE\")\n  ),\n  data = adtte_f\n)\n\n\nAfter fitting, the models are tidied and arranged in a table layout using the rtables framework.\n\nCodedf <- tidy(multivar_model)\n\nattr(df$term, which = \"label\") <- \"Effect/Covariate Included in the Model\"\n\nsplit_fun <- drop_split_levels\n\nresult <- basic_table() %>%\n  split_rows_by(\"term\",\n    child_labels = \"hidden\",\n    split_fun = split_fun,\n    label_pos = \"topleft\",\n    split_label = obj_label(df$term)\n  ) %>%\n  summarize_coxreg(multivar = TRUE, conf_level = .95) %>%\n  build_table(df)\nresult\n\nEffect/Covariate Included in the Model   Hazard Ratio      95% CI      p-value\n——————————————————————————————————————————————————————————————————————————————\nPlanned Arm Code (reference = ARM A)                                   <0.0001\nARM B                                        1.40       (1.01, 1.93)   0.0417 \nARM C                                        2.70       (1.99, 3.67)   <0.0001\nSex (reference = F)                                                           \nM                                            1.17       (0.91, 1.51)   0.2142 \nAge                                          1.01       (0.99, 1.02)   0.4785 \n\n\n\n\nInteraction terms are not included in the GDSR. For this reason and because we must take precautions when fitting such models, this functionality has not been translated in fit_coxreg_multivar. Please remove interaction terms or, if required by the study, refer to survival::coxph. The estimation of interaction terms is not supported. Besides, in tern, the developer needs to do the pre-processing to add necessary variables based on ADVS or ADSUB to the analysis dataset. An example can be found in DMT01.\n\n\nSee the Multi-Variable Cox Regression with Interaction Term tab.\n\n\nSee the Multi-Variable Cox Regression with Interaction Term tab.\n\n\nAdditional controls can be customized using control_coxreg (see ?control_coxreg) such as the ties calculation method and the confidence level. Stratification variables can be added via the strata element of the variables list. Note that confidence level needs to be specified directly using the conf_level argument to the summarize_coxreg function.\n\nCodemultivar_model <- fit_coxreg_multivar(\n  variables = list(\n    time = \"AVAL\", event = \"event\", arm = \"ARMCD\",\n    covariates = c(\"SEX\", \"AGE\"), strata = \"RACE\"\n  ),\n  control = control_coxreg(\n    conf_level = 0.9,\n    ties = \"efron\"\n  ),\n  data = adtte_f\n)\n\ndf <- tidy(multivar_model)\n\nattr(df$term, which = \"label\") <- \"Effect/Covariate Included in the Model\"\n\nsplit_fun <- drop_split_levels\n\nresult <- basic_table() %>%\n  split_rows_by(\"term\",\n    child_labels = \"hidden\",\n    split_fun = split_fun,\n    label_pos = \"topleft\",\n    split_label = obj_label(df$term)\n  ) %>%\n  summarize_coxreg(multivar = TRUE, conf_level = 0.9, vars = c(\"hr\", \"ci\")) %>%\n  build_table(df)\nresult\n\nEffect/Covariate Included in the Model   Hazard Ratio      90% CI   \n————————————————————————————————————————————————————————————————————\nPlanned Arm Code (reference = ARM A)                                \nARM B                                        1.39       (1.06, 1.82)\nARM C                                        2.72       (2.09, 3.53)\nSex (reference = F)                                                 \nM                                            1.21       (0.98, 1.49)\nAge                                          1.01       (0.99, 1.02)\n\n\n\n\nSee the Multi-Variable Cox Regression with Interaction Term tab.\n\n\n\nCodelibrary(teal.modules.clinical)\nlibrary(scda)\n\nADSL <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nADTTE <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adtte\")\narm_ref_comp <- list(\n  ACTARMCD = list(\n    ref = \"ARM B\",\n    comp = c(\"ARM A\", \"ARM C\")\n  ),\n  ARM = list(\n    ref = \"B: Placebo\",\n    comp = c(\"A: Drug X\", \"C: Combination\")\n  )\n)\n\napp <- init(\n  data = cdisc_data(\n    cdisc_dataset(\"ADSL\", ADSL, code = 'ADSL <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")'),\n    cdisc_dataset(\"ADTTE\", ADTTE, code = 'ADTTE <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adtte\")'),\n    check = TRUE\n  ),\n  modules = modules(\n    tm_t_coxreg(\n      label = \"Cox Reg.\",\n      dataname = \"ADTTE\",\n      arm_var = choices_selected(c(\"ARM\", \"ARMCD\", \"ACTARMCD\"), \"ARM\"),\n      arm_ref_comp = arm_ref_comp,\n      paramcd = choices_selected(\n        value_choices(ADTTE, \"PARAMCD\", \"PARAM\"), \"OS\"\n      ),\n      strata_var = choices_selected(\n        c(\"SEX\", \"STRATA1\", \"STRATA2\"), NULL\n      ),\n      cov_var = choices_selected(\n        c(\"AGE\", \"SEX\", \"RACE\"), c(\"AGE\", \"SEX\")\n      ),\n      multivariate = TRUE\n    )\n  )\n)\n\n[INFO] 2023-03-10 05:51:12.0570 pid:8239 token:[] teal.modules.clinical Initializing tm_t_coxreg\n\nCodeshinyApp(app$ui, app$server)\n\n\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n [1] teal.modules.clinical_0.8.14.9026 teal_0.12.0.9023                 \n [3] teal.transform_0.2.0.9011         teal.data_0.1.2.9013             \n [5] shiny_1.7.4                       broom_1.0.3                      \n [7] tern_0.7.10.9056                  rtables_0.6.0.1                  \n [9] formatters_0.4.0                  magrittr_2.0.3                   \n[11] dplyr_1.1.0                       scda_0.1.5.9009                  \n\nloaded via a namespace (and not attached):\n [1] nlme_3.1-162             teal.logger_0.1.1.9004   fontawesome_0.5.0       \n [4] webshot_0.5.4            R.cache_0.16.0           tools_4.2.2             \n [7] backports_1.4.1          bslib_0.4.2              utf8_1.2.3              \n[10] R6_2.5.1                 colorspace_2.1-0         withr_2.5.0             \n[13] tidyselect_1.2.0         shinyvalidate_0.1.2      processx_3.8.0          \n[16] emmeans_1.8.4-1          compiler_4.2.2           cli_3.6.0               \n[19] shinyjs_2.1.0            sass_0.4.5               scales_1.2.1            \n[22] checkmate_2.1.0          mvtnorm_1.1-3            callr_3.7.3             \n[25] stringr_1.5.0            digest_0.6.31            rmarkdown_2.20          \n[28] teal.slice_0.2.0.9026    R.utils_2.12.2           pkgconfig_2.0.3         \n[31] htmltools_0.5.4          teal.widgets_0.2.0.9024  styler_1.9.1            \n[34] fastmap_1.1.1            htmlwidgets_1.6.1        rlang_1.0.6             \n[37] jquerylib_0.1.4          generics_0.1.3           jsonlite_1.8.4          \n[40] car_3.1-1                R.oo_1.25.0              Matrix_1.5-3            \n[43] Rcpp_1.0.10              munsell_0.5.0            fansi_1.0.4             \n[46] abind_1.4-5              geepack_1.3.9            logger_0.2.2            \n[49] lifecycle_1.0.3          R.methodsS3_1.8.2        stringi_1.7.12          \n[52] yaml_2.3.7               carData_3.0-5            MASS_7.3-58.3           \n[55] grid_4.2.2               tern.gee_0.1.0.9002      teal.code_0.3.0.9001    \n[58] promises_1.2.0.1         forcats_1.0.0            lattice_0.20-45         \n[61] splines_4.2.2            knitr_1.42               ps_1.7.2                \n[64] pillar_1.8.1             estimability_1.4.1       codetools_0.2-19        \n[67] glue_1.6.2               evaluate_0.20            vctrs_0.5.2             \n[70] httpuv_1.6.9             Rdpack_2.4               gtable_0.3.1            \n[73] purrr_1.0.1              tidyr_1.3.0              assertthat_0.2.1        \n[76] cachem_1.0.7             ggplot2_3.4.1            xfun_0.37               \n[79] mime_0.12                rbibutils_2.2.13         xtable_1.8-4            \n[82] coda_0.19-4              teal.reporter_0.1.1.9013 later_1.3.0             \n[85] survival_3.5-3           tibble_3.1.8             memoise_2.0.1           \n[88] shinyWidgets_0.7.6       ellipsis_0.3.2          \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R                       [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/tables/efficacy/coxt02.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "tables/efficacy/onct05.html",
    "href": "tables/efficacy/onct05.html",
    "title": "ONCT05",
    "section": "",
    "text": "Data Setup\nStandard Table\nTable Specifying  Class Variables\nTable Selecting Columns  and Changing the Alpha Level\nTable Setting Values  Indicating Response\nTeal\nSession Info\n\n\n\n\nCodelibrary(tern)\nlibrary(dplyr)\nlibrary(scda)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadrs <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adrs\")\n\n# Ensure character variables are converted to factors and empty strings and NAs are explicit missing levels.\nadsl <- df_explicit_na(adsl)\nadrs <- df_explicit_na(adrs)\n\nadsl <- adsl %>%\n  select(STUDYID, USUBJID, ARM, SEX, RACE, STRATA1, STRATA2)\n\nadrs <- adrs %>%\n  filter(PARAMCD == \"INVET\") %>%\n  select(STUDYID, USUBJID, PARAMCD, AVALC)\n\nanl <- inner_join(adsl, adrs, by = c(\"STUDYID\", \"USUBJID\"))\nanl_labels <- var_labels(anl)\n\nanl <- anl %>%\n  filter(ARM %in% c(\"A: Drug X\", \"B: Placebo\")) %>%\n  mutate(\n    # Reorder levels of factor to make the placebo group the reference arm.\n    ARM = relevel(ARM, ref = \"B: Placebo\") %>%\n      droplevels()\n  ) %>%\n  droplevels() %>%\n  mutate(rsp = AVALC %in% c(\"CR\", \"PR\"))\n\nvar_labels(anl) <- c(anl_labels, rsp = \"Is Response\")\n\n\n\n\n\nCodedf <- extract_rsp_subgroups(\n  variables = list(\n    rsp = \"rsp\",\n    arm = \"ARM\",\n    subgroups = c(\"SEX\", \"STRATA2\")\n  ),\n  data = anl\n)\n\nresult <- basic_table() %>%\n  tabulate_rsp_subgroups(df, vars = c(\"n_tot\", \"n\", \"n_rsp\", \"prop\", \"or\", \"ci\"))\n\nresult\n\nBaseline Risk Factors                         B: Placebo                         A: Drug X                                       \n                          Total n    n    Responders   Response (%)    n    Responders   Response (%)   Odds Ratio      95% CI   \n—————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————\nAll Patients                268     134       84          62.7%       134      100          74.6%          1.75      (1.04, 2.95)\nSex                                                                                                                              \n  F                         161     82        48          58.5%       79        61          77.2%          2.40      (1.21, 4.76)\n  M                         107     52        36          69.2%       55        39          70.9%          1.08      (0.47, 2.48)\nStratification Factor 2                                                                                                          \n  S1                        140     67        38          56.7%       73        56          76.7%          2.51      (1.22, 5.20)\n  S2                        128     67        46          68.7%       61        44          72.1%          1.18      (0.55, 2.53)\n\n\n\n\nHere, the levels of subgroup variables SEX and STRATA1 are reordered. STRATA1 is reordered by frequency.\n\nCodeanl_reorder <- anl %>%\n  mutate(\n    SEX = forcats::fct_relevel(SEX, \"M\", \"F\"),\n    STRATA1 = forcats::fct_infreq(STRATA1)\n  )\n\ndf <- extract_rsp_subgroups(\n  variables = list(rsp = \"rsp\", arm = \"ARM\", subgroups = c(\"SEX\", \"STRATA1\")),\n  data = anl_reorder\n)\n\nresult <- basic_table() %>%\n  tabulate_rsp_subgroups(df, vars = c(\"n_tot\", \"n\", \"n_rsp\", \"prop\", \"or\", \"ci\"))\n\nresult\n\nBaseline Risk Factors                         B: Placebo                         A: Drug X                                       \n                          Total n    n    Responders   Response (%)    n    Responders   Response (%)   Odds Ratio      95% CI   \n—————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————\nAll Patients                268     134       84          62.7%       134      100          74.6%          1.75      (1.04, 2.95)\nSex                                                                                                                              \n  M                         107     52        36          69.2%       55        39          70.9%          1.08      (0.47, 2.48)\n  F                         161     82        48          58.5%       79        61          77.2%          2.40      (1.21, 4.76)\nStratification Factor 1                                                                                                          \n  C                         94      45        33          73.3%       49        37          75.5%          1.12      (0.44, 2.83)\n  B                         92      45        26          57.8%       47        32          68.1%          1.56      (0.66, 3.66)\n  A                         82      44        25          56.8%       38        31          81.6%          3.37      (1.22, 9.28)\n\n\n\n\n\nCodedf <- extract_rsp_subgroups(\n  variables = list(\n    rsp = \"rsp\",\n    arm = \"ARM\",\n    subgroups = c(\"SEX\", \"STRATA2\")\n  ),\n  data = anl,\n  conf_level = 0.9,\n  method = \"chisq\"\n)\n\nresult <- basic_table() %>%\n  tabulate_rsp_subgroups(df, vars = c(\"n_tot\", \"n\", \"n_rsp\", \"prop\", \"or\", \"ci\", \"pval\"))\n\nresult\n\nBaseline Risk Factors                         B: Placebo                         A: Drug X                                                                    \n                          Total n    n    Responders   Response (%)    n    Responders   Response (%)   Odds Ratio      90% CI      p-value (Chi-Squared Test)\n——————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————\nAll Patients                268     134       84          62.7%       134      100          74.6%          1.75      (1.13, 2.72)             0.0351          \nSex                                                                                                                                                           \n  F                         161     82        48          58.5%       79        61          77.2%          2.40      (1.35, 4.27)             0.0113          \n  M                         107     52        36          69.2%       55        39          70.9%          1.08      (0.54, 2.17)             0.8497          \nStratification Factor 2                                                                                                                                       \n  S1                        140     67        38          56.7%       73        56          76.7%          2.51      (1.37, 4.63)             0.0119          \n  S2                        128     67        46          68.7%       61        44          72.1%          1.18      (0.62, 2.24)             0.6674          \n\n\n\n\nCreate a new variable new_rsp in anl data that uses new criteria for responder.\n\nCodeanl_new <- anl %>%\n  mutate(new_rsp = AVALC == \"CR\")\n\ndf <- extract_rsp_subgroups(\n  variables = list(\n    rsp = \"new_rsp\",\n    arm = \"ARM\",\n    subgroups = c(\"SEX\", \"STRATA2\")\n  ),\n  data = anl_new\n)\n\nresult <- basic_table() %>%\n  tabulate_rsp_subgroups(df, vars = c(\"n_tot\", \"n\", \"n_rsp\", \"prop\", \"or\", \"ci\"))\n\nresult\n\nBaseline Risk Factors                         B: Placebo                         A: Drug X                                       \n                          Total n    n    Responders   Response (%)    n    Responders   Response (%)   Odds Ratio      95% CI   \n—————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————\nAll Patients                268     134       47          35.1%       134       60          44.8%          1.50      (0.92, 2.45)\nSex                                                                                                                              \n  F                         161     82        25          30.5%       79        39          49.4%          2.22      (1.17, 4.24)\n  M                         107     52        22          42.3%       55        21          38.2%          0.84      (0.39, 1.83)\nStratification Factor 2                                                                                                          \n  S1                        140     67        21          31.3%       73        31          42.5%          1.62      (0.81, 3.24)\n  S2                        128     67        26          38.8%       61        29          47.5%          1.43      (0.71, 2.89)\n\n\n\n\n\nCode# Use table, embedded in response forest plot module.\nlibrary(teal.modules.clinical)\nlibrary(dplyr)\nlibrary(forcats)\nlibrary(scda)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadrs <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adrs\")\n\n# Ensure character variables are converted to factors and empty strings and NAs are explicit missing levels.\nadsl <- df_explicit_na(adsl)\nadrs <- df_explicit_na(adrs)\n\narm_ref_comp <- list(\n  ARM = list(\n    ref = \"B: Placebo\",\n    comp = c(\"A: Drug X\", \"C: Combination\")\n  ),\n  ARMCD = list(\n    ref = \"ARM B\",\n    comp = c(\"ARM A\", \"ARM C\")\n  )\n)\n\napp <- init(\n  data = cdisc_data(\n    cdisc_dataset(\"ADSL\", adsl, code = 'ADSL <- df_explicit_na(synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\"))'),\n    cdisc_dataset(\"ADRS\", adrs, code = 'ADRS <- df_explicit_na(synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adrs\"))'),\n    check = TRUE\n  ),\n  modules = modules(\n    tm_g_forest_rsp(\n      label = \"Forest Response\",\n      dataname = \"ADRS\",\n      arm_var = choices_selected(\n        variable_choices(adsl, c(\"ARM\", \"ARMCD\")),\n        \"ARMCD\"\n      ),\n      arm_ref_comp = arm_ref_comp,\n      paramcd = choices_selected(\n        value_choices(adrs, \"PARAMCD\", \"PARAM\"),\n        \"BESRSPI\"\n      ),\n      subgroup_var = choices_selected(\n        variable_choices(adsl, names(adsl)),\n        c(\"SEX\")\n      ),\n      strata_var = choices_selected(\n        variable_choices(adsl, c(\"STRATA1\", \"STRATA2\")),\n        \"STRATA2\"\n      ),\n      plot_height = c(600L, 200L, 2000L)\n    )\n  )\n)\n\n[INFO] 2023-03-10 05:51:57.7601 pid:8316 token:[] teal.modules.clinical Initializing tm_g_forest_rsp\n\nCodeshinyApp(app$ui, app$server)\n\n\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n [1] forcats_1.0.0                     teal.modules.clinical_0.8.14.9026\n [3] teal_0.12.0.9023                  teal.transform_0.2.0.9011        \n [5] teal.data_0.1.2.9013              shiny_1.7.4                      \n [7] scda_0.1.5.9009                   dplyr_1.1.0                      \n [9] tern_0.7.10.9056                  rtables_0.6.0.1                  \n[11] formatters_0.4.0                  magrittr_2.0.3                   \n\nloaded via a namespace (and not attached):\n [1] sass_0.4.5               tidyr_1.3.0              jsonlite_1.8.4          \n [4] splines_4.2.2            R.utils_2.12.2           bslib_0.4.2             \n [7] teal.slice_0.2.0.9026    Rdpack_2.4               assertthat_0.2.1        \n[10] teal.code_0.3.0.9001     tern.gee_0.1.0.9002      yaml_2.3.7              \n[13] pillar_1.8.1             backports_1.4.1          lattice_0.20-45         \n[16] glue_1.6.2               teal.widgets_0.2.0.9024  digest_0.6.31           \n[19] promises_1.2.0.1         rbibutils_2.2.13         checkmate_2.1.0         \n[22] colorspace_2.1-0         R.oo_1.25.0              htmltools_0.5.4         \n[25] httpuv_1.6.9             Matrix_1.5-3             pkgconfig_2.0.3         \n[28] broom_1.0.3              logger_0.2.2             purrr_1.0.1             \n[31] xtable_1.8-4             mvtnorm_1.1-3            scales_1.2.1            \n[34] webshot_0.5.4            processx_3.8.0           fontawesome_0.5.0       \n[37] later_1.3.0              emmeans_1.8.4-1          tibble_3.1.8            \n[40] styler_1.9.1             generics_0.1.3           ggplot2_3.4.1           \n[43] ellipsis_0.3.2           shinyvalidate_0.1.2      cachem_1.0.7            \n[46] withr_2.5.0              shinyjs_2.1.0            geepack_1.3.9           \n[49] cli_3.6.0                survival_3.5-3           mime_0.12               \n[52] memoise_2.0.1            ps_1.7.2                 estimability_1.4.1      \n[55] evaluate_0.20            R.methodsS3_1.8.2        fansi_1.0.4             \n[58] R.cache_0.16.0           nlme_3.1-162             MASS_7.3-58.3           \n[61] textshaping_0.3.6        teal.reporter_0.1.1.9013 tools_4.2.2             \n[64] lifecycle_1.0.3          munsell_0.5.0            callr_3.7.3             \n[67] compiler_4.2.2           jquerylib_0.1.4          systemfonts_1.0.4       \n[70] rlang_1.0.6              grid_4.2.2               htmlwidgets_1.6.1       \n[73] rmarkdown_2.20           shinyWidgets_0.7.6       gtable_0.3.1            \n[76] codetools_0.2-19         teal.logger_0.1.1.9004   R6_2.5.1                \n[79] knitr_1.42               fastmap_1.1.1            utf8_1.2.3              \n[82] ragg_1.2.5               Rcpp_1.0.10              vctrs_0.5.2             \n[85] tidyselect_1.2.0         xfun_0.37                coda_0.19-4             \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R                       [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/tables/efficacy/onct05.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "tables/efficacy/rspt01.html",
    "href": "tables/efficacy/rspt01.html",
    "title": "RSPT01",
    "section": "",
    "text": "Data Setup\nStandard Table\nTable Selecting  Sections to Display\nTable Modifying Analysis Details like Type of  Confidence Interval, Alpha Level, Test Statistic\nTable with  Stratified Analysis\nTable Modifying the Definition  of Overall Response\nTable Defining New  Sections to Display\nTeal\nSession Info\n\n\n\n\nCodelibrary(dplyr)\nlibrary(tern)\nlibrary(scda)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadrs <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adrs\")\n\n# Ensure character variables are converted to factors and empty strings and NAs are explicit missing levels.\nadsl <- df_explicit_na(adsl)\nadrs <- df_explicit_na(adrs)\n\nanl_adrs <- adrs %>%\n  filter(PARAMCD == \"INVET\") %>%\n  select(STUDYID, USUBJID, PARAMCD, AVISIT, AVALC)\nanl_adsl <- adsl %>%\n  select(STUDYID, USUBJID, ARM, STRATA1)\n\n\nData pre-processing is done to label the analysis value (AVALC) so as to improve the readability of the output table. In addition, the response is binary defined (is_rsp, responder yes/no) depending on the analysis value. Finally, for comparison purposes, the reference arm is specified.\n\nCode# Pre-Processing\n\nanl <- anl_adsl %>%\n  left_join(anl_adrs, by = c(\"STUDYID\", \"USUBJID\")) %>%\n  mutate(rsp_lab = d_onco_rsp_label(AVALC)) %>%\n  mutate(is_rsp = AVALC %in% c(\"CR\", \"PR\")) %>%\n  mutate(ARM = relevel(ARM, ref = \"A: Drug X\")) %>%\n  var_relabel(ARM = \"Description of Planned Arm\")\n\n\n\n\nThe tabulation layout is built in layers for the analysis of overall response and applied to the pre-processed dataset.\n\nCodelyt_01 <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(var = \"ARM\", ref_group = \"A: Drug X\") %>%\n  estimate_proportion(\n    vars = \"is_rsp\",\n    table_names = \"est_prop\"\n  ) %>%\n  estimate_proportion_diff(\n    vars = \"is_rsp\",\n    show_labels = \"visible\",\n    var_labels = \"Unstratified Analysis\",\n    table_names = \"est_prop_diff\"\n  ) %>%\n  test_proportion_diff(\n    vars = \"is_rsp\",\n    table_names = \"test_prop_diff\"\n  ) %>%\n  estimate_odds_ratio(\n    vars = \"is_rsp\",\n    table_names = \"est_or\"\n  ) %>%\n  estimate_multinomial_response(var = \"rsp_lab\")\n\nresult <- build_table(lyt = lyt_01, df = anl)\nresult\n\n                                       A: Drug X          B: Placebo         C: Combination  \n                                        (N=134)            (N=134)              (N=132)      \n—————————————————————————————————————————————————————————————————————————————————————————————\nResponders                            100 (74.6%)         84 (62.7%)           81 (61.4%)    \n95% CI (Wald, with correction)        (66.9, 82.4)       (54.1, 71.2)         (52.7, 70.0)   \nUnstratified Analysis                                                                        \n  Difference in Response rate (%)                           -11.9                -13.3       \n    95% CI (Wald, with correction)                      (-23.7, -0.2)        (-25.1, -1.4)   \n  p-value (Chi-Squared Test)                                0.0351               0.0204      \nOdds Ratio (95% CI)                                   0.57 (0.34 - 0.96)   0.54 (0.32 - 0.91)\nComplete Response (CR)                 60 (44.8%)         47 (35.1%)           57 (43.2%)    \n  95% CI (Wald, with correction)     (35.98, 53.57)     (26.62, 43.53)       (34.35, 52.01)  \nNot Evaluable (NE)                      1 (0.7%)          12 (9.0%)             5 (3.8%)     \n  95% CI (Wald, with correction)      (0.00, 2.58)      (3.75, 14.16)         (0.15, 7.42)   \nPartial Response (PR)                  40 (29.9%)         37 (27.6%)           24 (18.2%)    \n  95% CI (Wald, with correction)     (21.73, 37.97)     (19.67, 35.55)       (11.22, 25.14)  \nProgressive Disease (PD)               24 (17.9%)         16 (11.9%)           33 (25.0%)    \n  95% CI (Wald, with correction)     (11.05, 24.78)     (6.08, 17.80)        (17.23, 32.77)  \nStable Disease (SD)                     9 (6.7%)          22 (16.4%)           13 (9.8%)     \n  95% CI (Wald, with correction)     (2.11, 11.33)      (9.77, 23.06)        (4.39, 15.31)   \n\n\n\n\nRemove (or add) rows of results by removing/adding the corresponding layers from the layout. For instance, the odds-ratio row is removed by simply removing the estimate_odds_ratio call:\n\nCodelyt_02 <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(var = \"ARM\", ref_group = \"A: Drug X\") %>%\n  estimate_proportion(\n    vars = \"is_rsp\",\n    table_names = \"est_prop\"\n  ) %>%\n  estimate_proportion_diff(\n    vars = \"is_rsp\",\n    show_labels = \"visible\",\n    var_labels = \"Unstratified Analysis\",\n    table_names = \"est_prop_diff\"\n  ) %>%\n  test_proportion_diff(\n    vars = \"is_rsp\",\n    table_names = \"test_prop\"\n  ) %>%\n  estimate_multinomial_response(var = \"rsp_lab\")\n\nresult <- build_table(lyt = lyt_02, df = anl)\nresult\n\n                                       A: Drug X        B: Placebo     C: Combination\n                                        (N=134)          (N=134)          (N=132)    \n—————————————————————————————————————————————————————————————————————————————————————\nResponders                            100 (74.6%)       84 (62.7%)       81 (61.4%)  \n95% CI (Wald, with correction)        (66.9, 82.4)     (54.1, 71.2)     (52.7, 70.0) \nUnstratified Analysis                                                                \n  Difference in Response rate (%)                         -11.9            -13.3     \n    95% CI (Wald, with correction)                    (-23.7, -0.2)    (-25.1, -1.4) \n  p-value (Chi-Squared Test)                              0.0351           0.0204    \nComplete Response (CR)                 60 (44.8%)       47 (35.1%)       57 (43.2%)  \n  95% CI (Wald, with correction)     (35.98, 53.57)   (26.62, 43.53)   (34.35, 52.01)\nNot Evaluable (NE)                      1 (0.7%)        12 (9.0%)         5 (3.8%)   \n  95% CI (Wald, with correction)      (0.00, 2.58)    (3.75, 14.16)     (0.15, 7.42) \nPartial Response (PR)                  40 (29.9%)       37 (27.6%)       24 (18.2%)  \n  95% CI (Wald, with correction)     (21.73, 37.97)   (19.67, 35.55)   (11.22, 25.14)\nProgressive Disease (PD)               24 (17.9%)       16 (11.9%)       33 (25.0%)  \n  95% CI (Wald, with correction)     (11.05, 24.78)   (6.08, 17.80)    (17.23, 32.77)\nStable Disease (SD)                     9 (6.7%)        22 (16.4%)       13 (9.8%)   \n  95% CI (Wald, with correction)     (2.11, 11.33)    (9.77, 23.06)    (4.39, 15.31) \n\n\n\n\nThe confidence level is controlled by the conf_level parameter to the estimation functions. Similarly, the methods for tests and confidence interval can be modified (see ?estimate_proportion_diff).\n\nCodeconf_level <- 0.90\nlyt_03 <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(var = \"ARM\", ref_group = \"A: Drug X\") %>%\n  estimate_proportion(\n    vars = \"is_rsp\",\n    conf_level = conf_level,\n    method = \"clopper-pearson\",\n    table_names = \"est_prop\"\n  ) %>%\n  estimate_proportion_diff(\n    vars = \"is_rsp\",\n    show_labels = \"visible\",\n    var_labels = \"Unstratified Analysis\",\n    conf_level = conf_level,\n    method = \"ha\",\n    table_names = \"est_prop_diff\"\n  ) %>%\n  test_proportion_diff(\n    vars = \"is_rsp\",\n    method = \"fisher\",\n    table_names = \"test_prop\"\n  ) %>%\n  estimate_odds_ratio(\n    vars = \"is_rsp\",\n    conf_level = conf_level,\n    table_names = \"est_or\"\n  ) %>%\n  estimate_multinomial_response(\n    var = \"rsp_lab\",\n    conf_level = conf_level,\n    method = \"clopper-pearson\"\n  )\n\nresult <- build_table(lyt = lyt_03, df = anl)\nresult\n\n                                      A: Drug X          B: Placebo         C: Combination  \n                                       (N=134)            (N=134)              (N=132)      \n————————————————————————————————————————————————————————————————————————————————————————————\nResponders                           100 (74.6%)         84 (62.7%)           81 (61.4%)    \n90% CI (Clopper-Pearson)             (67.7, 80.7)       (55.3, 69.7)         (53.9, 68.5)   \nUnstratified Analysis                                                                       \n  Difference in Response rate (%)                          -11.9                -13.3       \n    90% CI (Anderson-Hauck)                            (-21.6, -2.3)        (-23.0, -3.5)   \n  p-value (Fisher's Exact Test)                            0.0479               0.0253      \nOdds Ratio (90% CI)                                  0.57 (0.37 - 0.89)   0.54 (0.35 - 0.84)\nComplete Response (CR)                60 (44.8%)         47 (35.1%)           57 (43.2%)    \n  90% CI (Clopper-Pearson)          (37.48, 52.25)     (28.22, 42.43)       (35.88, 50.71)  \nNot Evaluable (NE)                     1 (0.7%)          12 (9.0%)             5 (3.8%)     \n  90% CI (Clopper-Pearson)           (0.04, 3.49)      (5.25, 14.11)         (1.50, 7.80)   \nPartial Response (PR)                 40 (29.9%)         37 (27.6%)           24 (18.2%)    \n  90% CI (Clopper-Pearson)          (23.36, 37.02)     (21.31, 34.67)       (12.87, 24.61)  \nProgressive Disease (PD)              24 (17.9%)         16 (11.9%)           33 (25.0%)    \n  90% CI (Clopper-Pearson)          (12.67, 24.25)     (7.63, 17.57)        (18.90, 31.97)  \nStable Disease (SD)                    9 (6.7%)          22 (16.4%)           13 (9.8%)     \n  90% CI (Clopper-Pearson)          (3.55, 11.43)      (11.38, 22.61)       (5.92, 15.20)   \n\n\n\n\nThe stratified analysis section can be added by defining the analyses needed with control_binary_comparison for the argument strat_analysis and identifying the stratification variables to use.\n\nCodestrata <- \"STRATA1\"\nlyt_04 <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(var = \"ARM\", ref_group = \"A: Drug X\") %>%\n  estimate_proportion(\n    vars = \"is_rsp\",\n    table_names = \"est_prop\"\n  ) %>%\n  estimate_proportion_diff(\n    vars = \"is_rsp\",\n    show_labels = \"visible\",\n    var_labels = \"Unstratified Analysis\",\n    table_names = \"est_prop_diff\"\n  ) %>%\n  test_proportion_diff(\n    vars = \"is_rsp\",\n    table_names = \"test_prop\"\n  ) %>%\n  estimate_odds_ratio(\n    vars = \"is_rsp\",\n    table_names = \"est_or\"\n  ) %>%\n  estimate_proportion_diff(\n    vars = \"is_rsp\",\n    show_labels = \"visible\",\n    var_labels = \"Stratified Analysis\",\n    method = \"cmh\",\n    variables = list(strata = strata),\n    table_names = \"est_prop_diff_strat\"\n  ) %>%\n  test_proportion_diff(\n    vars = \"is_rsp\",\n    method = \"cmh\",\n    variables = list(strata = strata),\n    table_names = \"test_prop_strat\"\n  ) %>%\n  estimate_odds_ratio(\n    vars = \"is_rsp\",\n    variables = list(strata = strata, arm = \"ARM\"),\n    table_names = \"est_or_strat\"\n  ) %>%\n  estimate_multinomial_response(var = \"rsp_lab\")\n\nresult <- build_table(lyt = lyt_04, df = anl)\nresult\n\n                                             A: Drug X          B: Placebo         C: Combination  \n                                              (N=134)            (N=134)              (N=132)      \n———————————————————————————————————————————————————————————————————————————————————————————————————\nResponders                                  100 (74.6%)         84 (62.7%)           81 (61.4%)    \n95% CI (Wald, with correction)              (66.9, 82.4)       (54.1, 71.2)         (52.7, 70.0)   \nUnstratified Analysis                                                                              \n  Difference in Response rate (%)                                 -11.9                -13.3       \n    95% CI (Wald, with correction)                            (-23.7, -0.2)        (-25.1, -1.4)   \n  p-value (Chi-Squared Test)                                      0.0351               0.0204      \nOdds Ratio (95% CI)                                         0.57 (0.34 - 0.96)   0.54 (0.32 - 0.91)\nStratified Analysis                                                                                \n  Difference in Response rate (%)                                 -11.9                -13.5       \n    95% CI (CMH, without correction)                          (-22.7, -1.0)        (-24.5, -2.5)   \n  p-value (Cochran-Mantel-Haenszel Test)                          0.0366               0.0180      \nOdds Ratio (95% CI)                                         0.57 (0.34 - 0.96)   0.54 (0.32 - 0.90)\nComplete Response (CR)                       60 (44.8%)         47 (35.1%)           57 (43.2%)    \n  95% CI (Wald, with correction)           (35.98, 53.57)     (26.62, 43.53)       (34.35, 52.01)  \nNot Evaluable (NE)                            1 (0.7%)          12 (9.0%)             5 (3.8%)     \n  95% CI (Wald, with correction)            (0.00, 2.58)      (3.75, 14.16)         (0.15, 7.42)   \nPartial Response (PR)                        40 (29.9%)         37 (27.6%)           24 (18.2%)    \n  95% CI (Wald, with correction)           (21.73, 37.97)     (19.67, 35.55)       (11.22, 25.14)  \nProgressive Disease (PD)                     24 (17.9%)         16 (11.9%)           33 (25.0%)    \n  95% CI (Wald, with correction)           (11.05, 24.78)     (6.08, 17.80)        (17.23, 32.77)  \nStable Disease (SD)                           9 (6.7%)          22 (16.4%)           13 (9.8%)     \n  95% CI (Wald, with correction)           (2.11, 11.33)      (9.77, 23.06)        (4.39, 15.31)   \n\n\n\n\nThe definition of responders is realized during the pre-processing step. The layout does not need to be modified and can be reused.\n\nCodeanl <- anl_adsl %>%\n  left_join(anl_adrs, by = c(\"STUDYID\", \"USUBJID\")) %>%\n  mutate(rsp_lab = d_onco_rsp_label(AVALC)) %>%\n  mutate(is_rsp = AVALC == \"CR\") %>%\n  mutate(ARM = relevel(ARM, ref = \"A: Drug X\")) %>%\n  var_relabel(ARM = \"Description of Planned Arm\")\n\nresult <- build_table(lyt = lyt_01, df = anl)\nresult\n\n                                       A: Drug X          B: Placebo         C: Combination  \n                                        (N=134)            (N=134)              (N=132)      \n—————————————————————————————————————————————————————————————————————————————————————————————\nResponders                             60 (44.8%)         47 (35.1%)           57 (43.2%)    \n95% CI (Wald, with correction)        (36.0, 53.6)       (26.6, 43.5)         (34.4, 52.0)   \nUnstratified Analysis                                                                        \n  Difference in Response rate (%)                            -9.7                 -1.6       \n    95% CI (Wald, with correction)                       (-22.1, 2.7)        (-14.3, 11.1)   \n  p-value (Chi-Squared Test)                                0.1049               0.7934      \nOdds Ratio (95% CI)                                   0.67 (0.41 - 1.09)   0.94 (0.58 - 1.52)\nComplete Response (CR)                 60 (44.8%)         47 (35.1%)           57 (43.2%)    \n  95% CI (Wald, with correction)     (35.98, 53.57)     (26.62, 43.53)       (34.35, 52.01)  \nNot Evaluable (NE)                      1 (0.7%)          12 (9.0%)             5 (3.8%)     \n  95% CI (Wald, with correction)      (0.00, 2.58)      (3.75, 14.16)         (0.15, 7.42)   \nPartial Response (PR)                  40 (29.9%)         37 (27.6%)           24 (18.2%)    \n  95% CI (Wald, with correction)     (21.73, 37.97)     (19.67, 35.55)       (11.22, 25.14)  \nProgressive Disease (PD)               24 (17.9%)         16 (11.9%)           33 (25.0%)    \n  95% CI (Wald, with correction)     (11.05, 24.78)     (6.08, 17.80)        (17.23, 32.77)  \nStable Disease (SD)                     9 (6.7%)          22 (16.4%)           13 (9.8%)     \n  95% CI (Wald, with correction)     (2.11, 11.33)      (9.77, 23.06)        (4.39, 15.31)   \n\n\n\n\nSimilarly to in the previous tab, redefinition or relabeling of the result is a pre-processing step and the original table layout can be reused.\n\nCodeanl <- anl_adsl %>%\n  left_join(anl_adrs, by = c(\"STUDYID\", \"USUBJID\")) %>%\n  mutate(rsp_lab = as.character(d_onco_rsp_label(AVALC))) %>%\n  mutate(\n    rsp_lab = case_when(\n      rsp_lab == \"Complete Response (CR)\" ~ \"No Progression\",\n      rsp_lab == \"Partial Response (PR)\" ~ \"No Progression\",\n      rsp_lab == \"Stable Disease (SD)\" ~ \"No Progression\",\n      TRUE ~ rsp_lab\n    )\n  ) %>%\n  mutate(is_rsp = rsp_lab %in% \"No Progression\") %>%\n  mutate(ARM = relevel(ARM, ref = \"A: Drug X\")) %>%\n  var_relabel(ARM = \"Description of Planned Arm\")\n\nresult <- build_table(lyt = lyt_01, df = anl)\nresult\n\n                                       A: Drug X          B: Placebo         C: Combination  \n                                        (N=134)            (N=134)              (N=132)      \n—————————————————————————————————————————————————————————————————————————————————————————————\nResponders                            109 (81.3%)        106 (79.1%)           94 (71.2%)    \n95% CI (Wald, with correction)        (74.4, 88.3)       (71.8, 86.4)         (63.1, 79.3)   \nUnstratified Analysis                                                                        \n  Difference in Response rate (%)                            -2.2                -10.1       \n    95% CI (Wald, with correction)                       (-12.5, 8.0)         (-21.0, 0.8)   \n  p-value (Chi-Squared Test)                                0.6455               0.0520      \nOdds Ratio (95% CI)                                   0.87 (0.48 - 1.59)   0.57 (0.32 - 1.01)\nProgressive Disease (PD)               24 (17.9%)         16 (11.9%)           33 (25.0%)    \n  95% CI (Wald, with correction)     (11.05, 24.78)     (6.08, 17.80)        (17.23, 32.77)  \nNo Progression                        109 (81.3%)        106 (79.1%)           94 (71.2%)    \n  95% CI (Wald, with correction)     (74.37, 88.31)     (71.85, 86.36)       (63.11, 79.31)  \nNot Evaluable (NE)                      1 (0.7%)          12 (9.0%)             5 (3.8%)     \n  95% CI (Wald, with correction)      (0.00, 2.58)      (3.75, 14.16)         (0.15, 7.42)   \n\n\n\n\n\nCodelibrary(teal.modules.clinical)\nlibrary(scda)\nlibrary(dplyr)\n\nADSL <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nADRS <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adrs\")\n\n# Ensure character variables are converted to factors and empty strings and NAs are explicit missing levels.\nADSL <- df_explicit_na(ADSL)\nADRS <- df_explicit_na(ADRS)\n\nADSL <- ADSL %>%\n  mutate(Dum_ARM = factor(rep(\"Single ARM\", nrow(.))))\nADRS <- ADRS %>%\n  mutate(Dum_ARM = factor(rep(\"Single ARM\", nrow(.))))\n\narm_ref_comp <- list(\n  ACTARMCD = list(\n    ref = \"ARM B\",\n    comp = c(\"ARM A\", \"ARM C\")\n  ),\n  ARM = list(\n    ref = \"B: Placebo\",\n    comp = c(\"A: Drug X\", \"C: Combination\")\n  )\n)\n\napp <- init(\n  data = cdisc_data(\n    cdisc_dataset(\n      dataname = \"ADSL\",\n      x = ADSL,\n      code =\n        'ADSL <- df_explicit_na(synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")) %>%\n           mutate(Dum_ARM = factor(rep(\"Single ARM\", nrow(.))))'\n    ),\n    cdisc_dataset(\n      dataname = \"ADRS\",\n      x = ADRS,\n      code =\n        'ADRS <- df_explicit_na(synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adrs\")) %>%\n          mutate(Dum_ARM = factor(rep(\"Single ARM\", nrow(.))))'\n    ),\n    check = TRUE\n  ),\n  modules = modules(\n    tm_t_binary_outcome(\n      label = \"Responders\",\n      dataname = \"ADRS\",\n      paramcd = choices_selected(\n        choices = value_choices(ADRS, \"PARAMCD\", \"PARAM\"),\n        selected = \"BESRSPI\"\n      ),\n      arm_var = choices_selected(\n        choices = variable_choices(ADRS, c(\"ARM\", \"ARMCD\", \"ACTARMCD\", \"Dum_ARM\")),\n        selected = \"ARM\"\n      ),\n      arm_ref_comp = arm_ref_comp,\n      strata_var = choices_selected(\n        choices = variable_choices(ADRS, c(\"SEX\", \"BMRKR2\")),\n        select = NULL\n      ),\n      rsp_table = TRUE\n    )\n  )\n)\n\n[INFO] 2023-03-10 05:52:36.0798 pid:8394 token:[] teal.modules.clinical Initializing tm_t_binary_outcome\n\nCodeshinyApp(app$ui, app$server)\n\n\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n [1] teal.modules.clinical_0.8.14.9026 teal_0.12.0.9023                 \n [3] teal.transform_0.2.0.9011         teal.data_0.1.2.9013             \n [5] shiny_1.7.4                       scda_0.1.5.9009                  \n [7] tern_0.7.10.9056                  rtables_0.6.0.1                  \n [9] formatters_0.4.0                  magrittr_2.0.3                   \n[11] dplyr_1.1.0                      \n\nloaded via a namespace (and not attached):\n [1] sass_0.4.5               tidyr_1.3.0              jsonlite_1.8.4          \n [4] splines_4.2.2            R.utils_2.12.2           bslib_0.4.2             \n [7] teal.slice_0.2.0.9026    Rdpack_2.4               assertthat_0.2.1        \n[10] teal.code_0.3.0.9001     tern.gee_0.1.0.9002      yaml_2.3.7              \n[13] pillar_1.8.1             backports_1.4.1          lattice_0.20-45         \n[16] glue_1.6.2               teal.widgets_0.2.0.9024  digest_0.6.31           \n[19] promises_1.2.0.1         rbibutils_2.2.13         checkmate_2.1.0         \n[22] colorspace_2.1-0         R.oo_1.25.0              htmltools_0.5.4         \n[25] httpuv_1.6.9             Matrix_1.5-3             pkgconfig_2.0.3         \n[28] broom_1.0.3              logger_0.2.2             purrr_1.0.1             \n[31] xtable_1.8-4             mvtnorm_1.1-3            webshot_0.5.4           \n[34] scales_1.2.1             processx_3.8.0           fontawesome_0.5.0       \n[37] later_1.3.0              emmeans_1.8.4-1          tibble_3.1.8            \n[40] styler_1.9.1             generics_0.1.3           ggplot2_3.4.1           \n[43] ellipsis_0.3.2           shinyvalidate_0.1.2      cachem_1.0.7            \n[46] withr_2.5.0              shinyjs_2.1.0            geepack_1.3.9           \n[49] cli_3.6.0                survival_3.5-3           mime_0.12               \n[52] memoise_2.0.1            ps_1.7.2                 estimability_1.4.1      \n[55] evaluate_0.20            R.methodsS3_1.8.2        fansi_1.0.4             \n[58] R.cache_0.16.0           nlme_3.1-162             MASS_7.3-58.3           \n[61] forcats_1.0.0            teal.reporter_0.1.1.9013 tools_4.2.2             \n[64] lifecycle_1.0.3          munsell_0.5.0            callr_3.7.3             \n[67] compiler_4.2.2           jquerylib_0.1.4          rlang_1.0.6             \n[70] grid_4.2.2               htmlwidgets_1.6.1        rmarkdown_2.20          \n[73] shinyWidgets_0.7.6       gtable_0.3.1             codetools_0.2-19        \n[76] teal.logger_0.1.1.9004   R6_2.5.1                 knitr_1.42              \n[79] fastmap_1.1.1            utf8_1.2.3               Rcpp_1.0.10             \n[82] vctrs_0.5.2              tidyselect_1.2.0         xfun_0.37               \n[85] coda_0.19-4             \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R                       [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/tables/efficacy/rspt01.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "tables/efficacy/ttet01.html",
    "href": "tables/efficacy/ttet01.html",
    "title": "TTET01",
    "section": "",
    "text": "Data Setup\nStandard Table\nTable Selecting  Sections to Display\nTable Modifying Analysis Details  like Conf. Type, Ties, Alpha Level\nTable with  Stratified Analysis\nTable Modifying Time Point for  the “XX Months” Analysis\nTable Requesting  > 1 p-value\nTeal\nSession Info\n\n\n\n\nCodelibrary(tern)\nlibrary(scda)\nlibrary(dplyr)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadtte <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adtte\")\n\n# Ensure that character variables are converted to factors and empty strings and NAs are explicit missing levels.\nadsl <- df_explicit_na(adsl)\nadtte <- df_explicit_na(adtte)\n\nadtte_f <- adtte %>%\n  dplyr::filter(PARAMCD == \"OS\") %>%\n  dplyr::mutate(\n    AVAL = day2month(AVAL),\n    is_event = CNSR == 0,\n    is_not_event = CNSR == 1,\n    EVNT1 = factor(\n      case_when(\n        is_event == TRUE ~ \"Patients with event (%)\",\n        is_event == FALSE ~ \"Patients without event (%)\"\n      ),\n      levels = c(\"Patients with event (%)\", \"Patients without event (%)\")\n    ),\n    EVNTDESC = factor(EVNTDESC)\n  )\n\n\n\n\n\nCodelyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\n    var = \"ARM\", ref_group = \"A: Drug X\"\n  ) %>%\n  summarize_vars(\n    vars = \"is_event\",\n    .stats = \"count_fraction\",\n    .labels = c(count_fraction = \"Patients with event (%)\")\n  ) %>%\n  split_rows_by(\n    \"EVNT1\",\n    split_label = \"Earliest contributing event\",\n    split_fun = keep_split_levels(\"Patients with event (%)\"),\n    label_pos = \"visible\",\n    child_labels = \"hidden\",\n    indent_mod = 1L,\n  ) %>%\n  split_rows_by(\"EVNTDESC\", split_fun = drop_split_levels) %>%\n  summarize_row_groups(format = \"xx\") %>%\n  summarize_vars(\n    vars = \"is_not_event\",\n    .stats = \"count_fraction\",\n    .labels = c(count_fraction = \"Patients without event (%)\"),\n    nested = FALSE,\n    show_labels = \"hidden\"\n  ) %>%\n  surv_time(\n    vars = \"AVAL\",\n    var_labels = \"Time to Event (Months)\",\n    is_event = \"is_event\",\n    table_names = \"time_to_event\"\n  ) %>%\n  coxph_pairwise(\n    vars = \"AVAL\",\n    is_event = \"is_event\",\n    var_labels = c(\"Unstratified Analysis\"),\n    control = control_coxph(pval_method = \"log-rank\"),\n    table_names = \"coxph_unstratified\"\n  ) %>%\n  surv_timepoint(\n    vars = \"AVAL\",\n    var_labels = \"Months\",\n    time_point = c(6, 12),\n    is_event = \"is_event\",\n    method = \"both\",\n    control = control_surv_timepoint()\n  )\n\nresult <- build_table(lyt, df = adtte_f, alt_counts_df = adsl)\nresult\n\n                                  A: Drug X        B: Placebo      C: Combination \n                                   (N=134)          (N=134)           (N=132)     \n——————————————————————————————————————————————————————————————————————————————————\nPatients with event (%)            79 (59%)        87 (64.9%)       116 (87.9%)   \n  Earliest contributing event                                                     \n    Death                             79               87               116       \nPatients without event (%)         55 (41%)        47 (35.1%)        16 (12.1%)   \nTime to Event (Months)                                                            \n  Median                             41.4             27.5              11.1      \n  95% CI                         (27.7, 54.7)     (17.3, 30.2)      (9.6, 15.9)   \n  25% and 75%-ile                 15.4, 75.2       9.5, 54.9         5.3, 25.2    \n  Range (censored)               0.4 to 154.7     0.9 to 91.0       0.3 to 49.4   \n  Range (event)                  0.3 to 116.4     0.0 to 122.4      0.1 to 101.6  \nUnstratified Analysis                                                             \n  p-value (log-rank)                                 0.0334           <0.0001     \n  Hazard Ratio                                        1.39              2.75      \n  95% CI                                          (1.03, 1.90)      (2.05, 3.70)  \n6 Months                                                                          \n  Patients remaining at risk         106              112                92       \n  Event Free Rate (%)               83.83            89.16             73.40      \n  95% CI                        (77.49, 90.17)   (83.80, 94.53)    (65.72, 81.07) \nDifference in Event Free Rate                         5.33             -10.43     \n95% CI                                           (-2.97, 13.64)   (-20.38, -0.48) \np-value (Z-test)                                     0.2080            0.0399     \n12 Months                                                                         \n  Patients remaining at risk          92               83                56       \n  Event Free Rate (%)               78.03            70.32             46.39      \n  95% CI                        (70.82, 85.24)   (62.27, 78.37)    (37.59, 55.18) \nDifference in Event Free Rate                        -7.71             -31.64     \n95% CI                                           (-18.51, 3.10)   (-43.01, -20.26)\np-value (Z-test)                                     0.1622           <0.0001     \n\n\n\n\n\nCodelyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ARM\", ref_group = \"A: Drug X\") %>%\n  summarize_vars(\n    vars = \"is_event\",\n    .stats = \"count_fraction\",\n    .labels = c(count_fraction = \"Patients with event (%)\")\n  ) %>%\n  summarize_vars(\n    \"is_not_event\",\n    .stats = \"count_fraction\",\n    .labels = c(count_fraction = \"Patients without event (%)\"),\n    nested = FALSE,\n    show_labels = \"hidden\"\n  ) %>%\n  surv_time(\n    vars = \"AVAL\",\n    var_labels = \"Time to Event (Months)\",\n    is_event = \"is_event\",\n    table_names = \"time_to_event\"\n  ) %>%\n  coxph_pairwise(\n    vars = \"AVAL\",\n    is_event = \"is_event\",\n    var_labels = c(\"Unstratified Analysis\"),\n    control = control_coxph(pval_method = \"log-rank\"),\n    table_names = \"coxph_unstratified\"\n  ) %>%\n  surv_timepoint(\n    vars = \"AVAL\",\n    var_labels = \"Months\",\n    is_event = \"is_event\",\n    method = \"surv\",\n    time_point = c(6, 12)\n  )\n\nresult <- build_table(lyt, df = adtte_f, alt_counts_df = adsl)\nresult\n\n                                 A: Drug X        B: Placebo     C: Combination\n                                  (N=134)          (N=134)          (N=132)    \n———————————————————————————————————————————————————————————————————————————————\nPatients with event (%)           79 (59%)        87 (64.9%)      116 (87.9%)  \nPatients without event (%)        55 (41%)        47 (35.1%)       16 (12.1%)  \nTime to Event (Months)                                                         \n  Median                            41.4             27.5             11.1     \n  95% CI                        (27.7, 54.7)     (17.3, 30.2)     (9.6, 15.9)  \n  25% and 75%-ile                15.4, 75.2       9.5, 54.9        5.3, 25.2   \n  Range (censored)              0.4 to 154.7     0.9 to 91.0      0.3 to 49.4  \n  Range (event)                 0.3 to 116.4     0.0 to 122.4     0.1 to 101.6 \nUnstratified Analysis                                                          \n  p-value (log-rank)                                0.0334          <0.0001    \n  Hazard Ratio                                       1.39             2.75     \n  95% CI                                         (1.03, 1.90)     (2.05, 3.70) \n6 Months                                                                       \n  Patients remaining at risk        106              112               92      \n  Event Free Rate (%)              83.83            89.16            73.40     \n  95% CI                       (77.49, 90.17)   (83.80, 94.53)   (65.72, 81.07)\n12 Months                                                                      \n  Patients remaining at risk         92               83               56      \n  Event Free Rate (%)              78.03            70.32            46.39     \n  95% CI                       (70.82, 85.24)   (62.27, 78.37)   (37.59, 55.18)\n\n\n\n\n\nCodelyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ARM\", ref_group = \"A: Drug X\") %>%\n  summarize_vars(\n    vars = \"is_event\",\n    .stats = \"count_fraction\",\n    .labels = c(count_fraction = \"Patients with event (%)\")\n  ) %>%\n  split_rows_by(\n    \"EVNT1\",\n    split_label = \"Earliest contributing event\",\n    split_fun = keep_split_levels(\"Patients with event (%)\"),\n    label_pos = \"visible\",\n    child_labels = \"hidden\",\n    indent_mod = 1L,\n  ) %>%\n  split_rows_by(\"EVNTDESC\", split_fun = drop_split_levels) %>%\n  summarize_row_groups(format = \"xx\") %>%\n  summarize_vars(\n    vars = \"is_not_event\",\n    .stats = \"count_fraction\",\n    .labels = c(count_fraction = \"Patients without event (%)\"),\n    nested = FALSE,\n    show_labels = \"hidden\"\n  ) %>%\n  surv_time(\n    vars = \"AVAL\",\n    var_labels = \"Time to Event (Months)\",\n    is_event = \"is_event\",\n    control = control_surv_time(conf_level = 0.9, conf_type = \"log-log\"),\n    table_names = \"time_to_event\"\n  ) %>%\n  coxph_pairwise(\n    vars = \"AVAL\",\n    is_event = \"is_event\",\n    var_labels = c(\"Unstratified Analysis\"),\n    control = control_coxph(\n      pval_method = \"log-rank\",\n      conf_level = 0.95,\n      ties = \"efron\"\n    ),\n    table_names = \"coxph_unstratified\"\n  ) %>%\n  surv_timepoint(\n    vars = \"AVAL\",\n    var_labels = \"Months\",\n    is_event = \"is_event\",\n    time_point = 12,\n    control = control_surv_timepoint(conf_level = 0.9, conf_type = \"log-log\"),\n    table_names_suffix = \"_log_log\"\n  ) %>%\n  surv_timepoint(\n    vars = \"AVAL\",\n    show_labels = \"hidden\",\n    is_event = \"is_event\",\n    time_point = 12,\n    method = \"surv_diff\",\n    control = control_surv_timepoint(conf_level = 0.975),\n    table_names_suffix = \"_975_pct\"\n  )\n\nresult <- build_table(lyt, df = adtte_f, alt_counts_df = adsl)\nresult\n\n                                  A: Drug X        B: Placebo      C: Combination \n                                   (N=134)          (N=134)           (N=132)     \n——————————————————————————————————————————————————————————————————————————————————\nPatients with event (%)            79 (59%)        87 (64.9%)       116 (87.9%)   \n  Earliest contributing event                                                     \n    Death                             79               87               116       \nPatients without event (%)         55 (41%)        47 (35.1%)        16 (12.1%)   \nTime to Event (Months)                                                            \n  Median                             41.4             27.5              11.1      \n  90% CI                         (27.9, 54.1)     (18.8, 29.9)      (9.7, 15.1)   \n  25% and 75%-ile                 15.4, 75.2       9.5, 54.9         5.3, 25.2    \n  Range (censored)               0.4 to 154.7     0.9 to 91.0       0.3 to 49.4   \n  Range (event)                  0.3 to 116.4     0.0 to 122.4      0.1 to 101.6  \nUnstratified Analysis                                                             \n  p-value (log-rank)                                 0.0334           <0.0001     \n  Hazard Ratio                                        1.39              2.75      \n  95% CI                                          (1.03, 1.90)      (2.05, 3.70)  \n12 Months                                                                         \n  Patients remaining at risk          92               83                56       \n  Event Free Rate (%)               78.03            70.32             46.39      \n  90% CI                        (71.24, 83.40)   (62.97, 76.49)    (38.87, 53.56) \nDifference in Event Free Rate                        -7.71             -31.64     \n97.5% CI                                         (-20.07, 4.65)   (-44.64, -18.63)\np-value (Z-test)                                     0.1622           <0.0001     \n\n\n\n\n\nCodelyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ARM\", ref_group = \"A: Drug X\") %>%\n  summarize_vars(\n    vars = \"is_event\",\n    .stats = \"count_fraction\",\n    .labels = c(count_fraction = \"Patients with event (%)\")\n  ) %>%\n  split_rows_by(\n    \"EVNT1\",\n    split_label = \"Earliest contributing event\",\n    split_fun = keep_split_levels(\"Patients with event (%)\"),\n    label_pos = \"visible\",\n    child_labels = \"hidden\",\n    indent_mod = 1L,\n  ) %>%\n  split_rows_by(\"EVNTDESC\", split_fun = drop_split_levels) %>%\n  summarize_row_groups(format = \"xx\") %>%\n  summarize_vars(\n    vars = \"is_not_event\",\n    .stats = \"count_fraction\",\n    .labels = c(count_fraction = \"Patients without event (%)\"),\n    nested = FALSE,\n    show_labels = \"hidden\"\n  ) %>%\n  surv_time(\n    vars = \"AVAL\",\n    var_labels = \"Time to Event (Months)\",\n    is_event = \"is_event\",\n    table_names = \"time_to_event\"\n  ) %>%\n  coxph_pairwise(\n    vars = \"AVAL\",\n    is_event = \"is_event\",\n    var_labels = \"Unstratified Analysis\",\n    table_names = \"coxph_unstratified\"\n  ) %>%\n  coxph_pairwise(\n    vars = \"AVAL\",\n    is_event = \"is_event\",\n    var_labels = \"Stratified Analysis\",\n    strat = \"SEX\",\n    table_names = \"coxph_stratified\"\n  ) %>%\n  surv_timepoint(\n    vars = \"AVAL\",\n    var_labels = \"Months\",\n    is_event = \"is_event\",\n    method = \"both\",\n    time_point = 12\n  )\n\nresult <- build_table(lyt, df = adtte_f, alt_counts_df = adsl)\nresult\n\n                                  A: Drug X        B: Placebo      C: Combination \n                                   (N=134)          (N=134)           (N=132)     \n——————————————————————————————————————————————————————————————————————————————————\nPatients with event (%)            79 (59%)        87 (64.9%)       116 (87.9%)   \n  Earliest contributing event                                                     \n    Death                             79               87               116       \nPatients without event (%)         55 (41%)        47 (35.1%)        16 (12.1%)   \nTime to Event (Months)                                                            \n  Median                             41.4             27.5              11.1      \n  95% CI                         (27.7, 54.7)     (17.3, 30.2)      (9.6, 15.9)   \n  25% and 75%-ile                 15.4, 75.2       9.5, 54.9         5.3, 25.2    \n  Range (censored)               0.4 to 154.7     0.9 to 91.0       0.3 to 49.4   \n  Range (event)                  0.3 to 116.4     0.0 to 122.4      0.1 to 101.6  \nUnstratified Analysis                                                             \n  p-value (log-rank)                                 0.0334           <0.0001     \n  Hazard Ratio                                        1.39              2.75      \n  95% CI                                          (1.03, 1.90)      (2.05, 3.70)  \nStratified Analysis                                                               \n  p-value (log-rank)                                 0.0478           <0.0001     \n  Hazard Ratio                                        1.36              2.73      \n  95% CI                                          (1.00, 1.86)      (2.02, 3.69)  \n12 Months                                                                         \n  Patients remaining at risk          92               83                56       \n  Event Free Rate (%)               78.03            70.32             46.39      \n  95% CI                        (70.82, 85.24)   (62.27, 78.37)    (37.59, 55.18) \nDifference in Event Free Rate                        -7.71             -31.64     \n95% CI                                           (-18.51, 3.10)   (-43.01, -20.26)\np-value (Z-test)                                     0.1622           <0.0001     \n\n\n\n\n\nCodelyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ARM\", ref_group = \"A: Drug X\") %>%\n  summarize_vars(\n    vars = \"is_event\",\n    .stats = \"count_fraction\",\n    .labels = c(count_fraction = \"Patients with event (%)\")\n  ) %>%\n  split_rows_by(\n    \"EVNT1\",\n    split_label = \"Earliest contributing event\",\n    split_fun = keep_split_levels(\"Patients with event (%)\"),\n    label_pos = \"visible\",\n    child_labels = \"hidden\",\n    indent_mod = 1L,\n  ) %>%\n  split_rows_by(\"EVNTDESC\", split_fun = drop_split_levels) %>%\n  summarize_row_groups(format = \"xx\") %>%\n  summarize_vars(\n    vars = \"is_not_event\",\n    .stats = \"count_fraction\",\n    .labels = c(count_fraction = \"Patients without event (%)\"),\n    nested = FALSE,\n    show_labels = \"hidden\"\n  ) %>%\n  surv_time(\n    vars = \"AVAL\",\n    var_labels = \"Time to Event (Months)\",\n    is_event = \"is_event\",\n    table_names = \"time_to_event\"\n  ) %>%\n  coxph_pairwise(\n    vars = \"AVAL\",\n    is_event = \"is_event\",\n    var_labels = c(\"Unstratified Analysis\"),\n    control = control_coxph(pval_method = \"log-rank\"),\n    table_names = \"coxph_unstratified\"\n  ) %>%\n  surv_timepoint(\n    vars = \"AVAL\",\n    var_labels = \"Months\",\n    is_event = \"is_event\",\n    time_point = 6,\n    method = \"both\"\n  )\n\nresult <- build_table(lyt, df = adtte_f, alt_counts_df = adsl)\nresult\n\n                                  A: Drug X        B: Placebo     C: Combination \n                                   (N=134)          (N=134)           (N=132)    \n—————————————————————————————————————————————————————————————————————————————————\nPatients with event (%)            79 (59%)        87 (64.9%)       116 (87.9%)  \n  Earliest contributing event                                                    \n    Death                             79               87               116      \nPatients without event (%)         55 (41%)        47 (35.1%)       16 (12.1%)   \nTime to Event (Months)                                                           \n  Median                             41.4             27.5             11.1      \n  95% CI                         (27.7, 54.7)     (17.3, 30.2)      (9.6, 15.9)  \n  25% and 75%-ile                 15.4, 75.2       9.5, 54.9         5.3, 25.2   \n  Range (censored)               0.4 to 154.7     0.9 to 91.0       0.3 to 49.4  \n  Range (event)                  0.3 to 116.4     0.0 to 122.4     0.1 to 101.6  \nUnstratified Analysis                                                            \n  p-value (log-rank)                                 0.0334           <0.0001    \n  Hazard Ratio                                        1.39             2.75      \n  95% CI                                          (1.03, 1.90)     (2.05, 3.70)  \n6 Months                                                                         \n  Patients remaining at risk         106              112               92       \n  Event Free Rate (%)               83.83            89.16             73.40     \n  95% CI                        (77.49, 90.17)   (83.80, 94.53)   (65.72, 81.07) \nDifference in Event Free Rate                         5.33            -10.43     \n95% CI                                           (-2.97, 13.64)   (-20.38, -0.48)\np-value (Z-test)                                     0.2080           0.0399     \n\n\n\n\n\nCodelyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(\"ARM\", ref_group = \"A: Drug X\") %>%\n  summarize_vars(\n    vars = \"is_event\",\n    .stats = \"count_fraction\",\n    .labels = c(count_fraction = \"Patients with event (%)\")\n  ) %>%\n  split_rows_by(\n    \"EVNT1\",\n    split_label = \"Earliest contributing event\",\n    split_fun = keep_split_levels(\"Patients with event (%)\"),\n    label_pos = \"visible\",\n    child_labels = \"hidden\",\n    indent_mod = 1L,\n  ) %>%\n  split_rows_by(\"EVNTDESC\", split_fun = drop_split_levels) %>%\n  summarize_row_groups(format = \"xx\") %>%\n  summarize_vars(\n    vars = \"is_not_event\",\n    .stats = \"count_fraction\",\n    .labels = c(count_fraction = \"Patients without event (%)\"),\n    nested = FALSE,\n    show_labels = \"hidden\"\n  ) %>%\n  surv_time(\n    vars = \"AVAL\",\n    var_labels = \"Time to Event (Months)\",\n    is_event = \"is_event\",\n    table_names = \"time_to_event\"\n  ) %>%\n  coxph_pairwise(\n    vars = \"AVAL\",\n    is_event = \"is_event\",\n    var_labels = c(\"Unstratified Analysis\"),\n    control = control_coxph(pval_method = \"log-rank\"),\n    .stats = \"pvalue\",\n    table_names = \"coxph_unstratified\"\n  ) %>%\n  coxph_pairwise(\n    vars = \"AVAL\",\n    is_event = \"is_event\",\n    show_labels = \"hidden\",\n    control = control_coxph(pval_method = \"wald\"),\n    .stats = \"pvalue\",\n    .indent_mods = c(pvalue = 1L),\n    table_names = \"coxph_wald_pvalue\"\n  ) %>%\n  coxph_pairwise(\n    vars = \"AVAL\",\n    is_event = \"is_event\",\n    show_labels = \"hidden\",\n    control = control_coxph(pval_method = \"likelihood\"),\n    .indent_mods = c(pvalue = 1L, hr = 1L, hr_ci = 2L),\n    table_names = \"coxph_likelihood_pvalue\"\n  ) %>%\n  surv_timepoint(\n    vars = \"AVAL\",\n    var_labels = \"Months\",\n    is_event = \"is_event\",\n    time_point = 12,\n    method = \"both\"\n  )\n\nresult <- build_table(lyt, df = adtte_f, alt_counts_df = adsl)\nresult\n\n                                  A: Drug X        B: Placebo      C: Combination \n                                   (N=134)          (N=134)           (N=132)     \n——————————————————————————————————————————————————————————————————————————————————\nPatients with event (%)            79 (59%)        87 (64.9%)       116 (87.9%)   \n  Earliest contributing event                                                     \n    Death                             79               87               116       \nPatients without event (%)         55 (41%)        47 (35.1%)        16 (12.1%)   \nTime to Event (Months)                                                            \n  Median                             41.4             27.5              11.1      \n  95% CI                         (27.7, 54.7)     (17.3, 30.2)      (9.6, 15.9)   \n  25% and 75%-ile                 15.4, 75.2       9.5, 54.9         5.3, 25.2    \n  Range (censored)               0.4 to 154.7     0.9 to 91.0       0.3 to 49.4   \n  Range (event)                  0.3 to 116.4     0.0 to 122.4      0.1 to 101.6  \nUnstratified Analysis                                                             \n  p-value (log-rank)                                 0.0334           <0.0001     \n  p-value (wald)                                     0.0342           <0.0001     \n  p-value (likelihood)                               0.0341           <0.0001     \n  Hazard Ratio                                        1.39              2.75      \n    95% CI                                        (1.03, 1.90)      (2.05, 3.70)  \n12 Months                                                                         \n  Patients remaining at risk          92               83                56       \n  Event Free Rate (%)               78.03            70.32             46.39      \n  95% CI                        (70.82, 85.24)   (62.27, 78.37)    (37.59, 55.18) \nDifference in Event Free Rate                        -7.71             -31.64     \n95% CI                                           (-18.51, 3.10)   (-43.01, -20.26)\np-value (Z-test)                                     0.1622           <0.0001     \n\n\n\n\n\nCodelibrary(teal.modules.clinical)\nlibrary(scda)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadtte <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adtte\")\n\n# Ensure character variables are converted to factors and empty strings and NAs are explicit missing levels.\nadsl <- df_explicit_na(adsl)\nadtte <- df_explicit_na(adtte)\n\narm_ref_comp <- list(\n  ACTARMCD = list(\n    ref = \"ARM B\",\n    comp = c(\"ARM A\", \"ARM C\")\n  ),\n  ARM = list(\n    ref = \"B: Placebo\",\n    comp = c(\"A: Drug X\", \"C: Combination\")\n  )\n)\n\napp <- init(\n  data = cdisc_data(\n    cdisc_dataset(\"ADSL\", adsl, code = 'ADSL <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\") %>% df_explicit_na()'),\n    cdisc_dataset(\"ADTTE\", adtte, code = 'ADTTE <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adtte\") %>% df_explicit_na()'),\n    check = TRUE\n  ),\n  modules = modules(\n    tm_t_tte(\n      label = \"Time To Event Table\",\n      dataname = \"ADTTE\",\n      arm_var = choices_selected(\n        variable_choices(adsl, c(\"ARM\", \"ARMCD\", \"ACTARMCD\")),\n        \"ARM\"\n      ),\n      arm_ref_comp = arm_ref_comp,\n      paramcd = choices_selected(\n        value_choices(adtte, \"PARAMCD\", \"PARAM\"),\n        \"OS\"\n      ),\n      strata_var = choices_selected(\n        variable_choices(adsl, c(\"SEX\", \"BMRKR2\")),\n        \"SEX\"\n      ),\n      time_points = choices_selected(c(6, 8), 6),\n      event_desc_var = choices_selected(\n        variable_choices(adtte, \"EVNTDESC\"),\n        \"EVNTDESC\",\n        fixed = TRUE\n      )\n    )\n  )\n)\n\n[INFO] 2023-03-10 05:53:16.7440 pid:8474 token:[] teal.modules.clinical Initializing tm_t_tte\n\nCodeshinyApp(app$ui, app$server)\n\n\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n [1] teal.modules.clinical_0.8.14.9026 teal_0.12.0.9023                 \n [3] teal.transform_0.2.0.9011         teal.data_0.1.2.9013             \n [5] shiny_1.7.4                       dplyr_1.1.0                      \n [7] scda_0.1.5.9009                   tern_0.7.10.9056                 \n [9] rtables_0.6.0.1                   formatters_0.4.0                 \n[11] magrittr_2.0.3                   \n\nloaded via a namespace (and not attached):\n [1] sass_0.4.5               tidyr_1.3.0              jsonlite_1.8.4          \n [4] splines_4.2.2            R.utils_2.12.2           bslib_0.4.2             \n [7] teal.slice_0.2.0.9026    Rdpack_2.4               assertthat_0.2.1        \n[10] teal.code_0.3.0.9001     tern.gee_0.1.0.9002      yaml_2.3.7              \n[13] pillar_1.8.1             backports_1.4.1          lattice_0.20-45         \n[16] glue_1.6.2               teal.widgets_0.2.0.9024  digest_0.6.31           \n[19] promises_1.2.0.1         rbibutils_2.2.13         checkmate_2.1.0         \n[22] colorspace_2.1-0         R.oo_1.25.0              htmltools_0.5.4         \n[25] httpuv_1.6.9             Matrix_1.5-3             pkgconfig_2.0.3         \n[28] broom_1.0.3              logger_0.2.2             purrr_1.0.1             \n[31] xtable_1.8-4             mvtnorm_1.1-3            scales_1.2.1            \n[34] webshot_0.5.4            processx_3.8.0           fontawesome_0.5.0       \n[37] later_1.3.0              emmeans_1.8.4-1          tibble_3.1.8            \n[40] styler_1.9.1             generics_0.1.3           ggplot2_3.4.1           \n[43] ellipsis_0.3.2           shinyvalidate_0.1.2      cachem_1.0.7            \n[46] withr_2.5.0              shinyjs_2.1.0            geepack_1.3.9           \n[49] cli_3.6.0                survival_3.5-3           mime_0.12               \n[52] memoise_2.0.1            ps_1.7.2                 estimability_1.4.1      \n[55] evaluate_0.20            R.methodsS3_1.8.2        fansi_1.0.4             \n[58] R.cache_0.16.0           nlme_3.1-162             MASS_7.3-58.3           \n[61] forcats_1.0.0            teal.reporter_0.1.1.9013 tools_4.2.2             \n[64] lifecycle_1.0.3          munsell_0.5.0            callr_3.7.3             \n[67] compiler_4.2.2           jquerylib_0.1.4          rlang_1.0.6             \n[70] grid_4.2.2               htmlwidgets_1.6.1        rmarkdown_2.20          \n[73] shinyWidgets_0.7.6       gtable_0.3.1             codetools_0.2-19        \n[76] teal.logger_0.1.1.9004   R6_2.5.1                 knitr_1.42              \n[79] fastmap_1.1.1            utf8_1.2.3               Rcpp_1.0.10             \n[82] vctrs_0.5.2              tidyselect_1.2.0         xfun_0.37               \n[85] coda_0.19-4             \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R                       [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/tables/efficacy/ttet01.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "tables/efficacy/dort01.html",
    "href": "tables/efficacy/dort01.html",
    "title": "DORT01",
    "section": "",
    "text": "Data Setup\nStandard Table\nTable Selecting  Sections to Display\nTable Modifying Analysis Details  like Conf. Type and Alpha Level\nTable Modifying Time Point for  the “XX Months duration” Analysis\nTeal\nSession Info\n\n\n\n\nCodelibrary(scda)\nlibrary(tern)\nlibrary(dplyr)\n\nadsl <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nadtte <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adtte\")\n\n# Ensure character variables are converted to factors and empty strings and NAs are explicit missing levels.\nadsl <- df_explicit_na(adsl)\nadtte <- df_explicit_na(adtte)\n\nadtte_f <- adtte %>%\n  filter(PARAMCD == \"CRSD\" & BMEASIFL == \"Y\") %>%\n  dplyr::mutate(\n    AVAL = day2month(AVAL),\n    is_event = CNSR == 0,\n    is_not_event = CNSR == 1,\n    EVNT1 = factor(\n      case_when(\n        is_event == TRUE ~ \"Responders with subsequent event (%)\",\n        is_event == FALSE ~ \"Responders without subsequent event (%)\"\n      ),\n      levels = c(\"Responders with subsequent event (%)\", \"Responders without subsequent event (%)\")\n    ),\n    EVNTDESC = factor(EVNTDESC)\n  )\n\n\n\n\n\nCodelyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(var = \"ARM\", ref_group = \"A: Drug X\") %>%\n  count_values(\n    vars = \"USUBJID\",\n    values = unique(adtte$USUBJID),\n    .labels = \"Responders\",\n    .stats = \"count\"\n  ) %>%\n  summarize_vars(\n    vars = \"is_event\",\n    .stats = \"count_fraction\",\n    .labels = c(count_fraction = \"Responders with subsequent event (%)\"),\n    .indent_mods = c(count_fraction = 1L),\n    show_labels = \"hidden\",\n  ) %>%\n  split_rows_by(\n    \"EVNT1\",\n    split_label = \"Earliest contributing event\",\n    split_fun = keep_split_levels(\"Responders with subsequent event (%)\"),\n    label_pos = \"visible\",\n    child_labels = \"hidden\",\n    indent_mod = 2L,\n  ) %>%\n  split_rows_by(\"EVNTDESC\", split_fun = drop_split_levels) %>%\n  summarize_row_groups(format = \"xx\") %>%\n  summarize_vars(\n    vars = \"is_not_event\",\n    .stats = \"count_fraction\",\n    .labels = c(count_fraction = \"Responders without subsequent event (%)\"),\n    .indent_mods = c(count_fraction = 1L),\n    nested = FALSE,\n    show_labels = \"hidden\"\n  ) %>%\n  surv_time(\n    vars = \"AVAL\",\n    var_labels = \"Duration of response (Months)\",\n    is_event = \"is_event\"\n  ) %>%\n  surv_timepoint(\n    vars = \"AVAL\",\n    var_labels = \"Months duration\",\n    is_event = \"is_event\",\n    time_point = 12\n  )\n\nresult <- build_table(lyt, df = adtte_f, alt_counts_df = adsl)\n\nresult\n\n                                              A: Drug X        B: Placebo     C: Combination\n                                               (N=134)          (N=134)          (N=132)    \n————————————————————————————————————————————————————————————————————————————————————————————\nResponders                                        68               73               62      \n  Responders with subsequent event (%)        33 (48.5%)       51 (69.9%)       53 (85.5%)  \n    Earliest contributing event                                                             \n      Death                                       14               20               25      \n      Disease Progression                         19               31               28      \n  Responders without subsequent event (%)     35 (51.5%)       22 (30.1%)       9 (14.5%)   \nDuration of response (Months)                                                               \n  Median                                         23.8             11.1             6.6      \n  95% CI                                     (17.9, 39.6)     (8.3, 14.6)       (4.4, 9.2)  \n  25% and 75%-ile                             9.3, 44.3        6.2, 20.5        3.0, 15.7   \n  Range (censored)                           1.6 to 64.5      0.1 to 43.8      0.2 to 39.6  \n  Range (event)                              0.3 to 44.3      0.6 to 61.9      0.2 to 53.8  \n12 Months duration                                                                          \n  Patients remaining at risk                      28               25               18      \n  Event Free Rate (%)                           63.41            43.82            33.72     \n  95% CI                                    (50.48, 76.34)   (31.28, 56.36)   (21.28, 46.15)\n\n\n\n\n\nCodelyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(var = \"ARM\", ref_group = \"A: Drug X\") %>%\n  count_values(\n    vars = \"USUBJID\",\n    values = unique(adtte$USUBJID),\n    .labels = \"Responders\",\n    .stats = \"count\"\n  ) %>%\n  summarize_vars(\n    vars = \"is_event\",\n    .stats = \"count_fraction\",\n    .labels = c(count_fraction = \"Responders with subsequent event (%)\"),\n    .indent_mods = c(count_fraction = 1L),\n    show_labels = \"hidden\",\n  ) %>%\n  split_rows_by(\n    \"EVNT1\",\n    split_label = \"Earliest contributing event\",\n    split_fun = keep_split_levels(\"Responders with subsequent event (%)\"),\n    label_pos = \"visible\",\n    child_labels = \"hidden\",\n    indent_mod = 2L,\n  ) %>%\n  split_rows_by(\"EVNTDESC\", split_fun = drop_split_levels) %>%\n  summarize_row_groups(format = \"xx\") %>%\n  summarize_vars(\n    vars = \"is_not_event\",\n    .stats = \"count_fraction\",\n    .labels = c(count_fraction = \"Responders without subsequent event (%)\"),\n    .indent_mods = c(count_fraction = 1L),\n    nested = FALSE,\n    show_labels = \"hidden\"\n  ) %>%\n  surv_time(\n    vars = \"AVAL\",\n    var_labels = \"Duration of response (Months)\",\n    is_event = \"is_event\",\n    table_names = \"surv_time\"\n  ) %>%\n  coxph_pairwise(\n    vars = \"AVAL\",\n    is_event = \"is_event\",\n    var_labels = c(\"Unstratified Analysis\"),\n    control = control_coxph(pval_method = \"log-rank\"),\n    table_names = \"cox_pair\"\n  )\n\nresult <- build_table(lyt, df = adtte_f, alt_counts_df = adsl)\n\nresult\n\n                                             A: Drug X      B: Placebo    C: Combination\n                                              (N=134)        (N=134)         (N=132)    \n————————————————————————————————————————————————————————————————————————————————————————\nResponders                                       68             73              62      \n  Responders with subsequent event (%)       33 (48.5%)     51 (69.9%)      53 (85.5%)  \n    Earliest contributing event                                                         \n      Death                                      14             20              25      \n      Disease Progression                        19             31              28      \n  Responders without subsequent event (%)    35 (51.5%)     22 (30.1%)      9 (14.5%)   \nDuration of response (Months)                                                           \n  Median                                        23.8           11.1            6.6      \n  95% CI                                    (17.9, 39.6)   (8.3, 14.6)      (4.4, 9.2)  \n  25% and 75%-ile                            9.3, 44.3      6.2, 20.5       3.0, 15.7   \n  Range (censored)                          1.6 to 64.5    0.1 to 43.8     0.2 to 39.6  \n  Range (event)                             0.3 to 44.3    0.6 to 61.9     0.2 to 53.8  \nUnstratified Analysis                                                                   \n  p-value (log-rank)                                          0.0029         <0.0001    \n  Hazard Ratio                                                 1.94            2.99     \n  95% CI                                                   (1.24, 3.02)    (1.92, 4.67) \n\n\n\n\n\nCodelyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(var = \"ARM\", ref_group = \"A: Drug X\") %>%\n  count_values(\n    vars = \"USUBJID\",\n    values = unique(adtte$USUBJID),\n    .labels = \"Responders\",\n    .stats = \"count\"\n  ) %>%\n  summarize_vars(\n    vars = \"is_event\",\n    .stats = \"count_fraction\",\n    .labels = c(count_fraction = \"Responders with subsequent event (%)\"),\n    .indent_mods = c(count_fraction = 1L),\n    show_labels = \"hidden\",\n  ) %>%\n  split_rows_by(\n    \"EVNT1\",\n    split_label = \"Earliest contributing event\",\n    split_fun = keep_split_levels(\"Responders with subsequent event (%)\"),\n    label_pos = \"visible\",\n    child_labels = \"hidden\",\n    indent_mod = 2L,\n  ) %>%\n  split_rows_by(\"EVNTDESC\", split_fun = drop_split_levels) %>%\n  summarize_row_groups(format = \"xx\") %>%\n  summarize_vars(\n    vars = \"is_not_event\",\n    .stats = \"count_fraction\",\n    .labels = c(count_fraction = \"Responders without subsequent event (%)\"),\n    .indent_mods = c(count_fraction = 1L),\n    nested = FALSE,\n    show_labels = \"hidden\"\n  ) %>%\n  surv_time(\n    vars = \"AVAL\",\n    var_labels = \"Duration of response (Months)\",\n    is_event = \"is_event\",\n    control = control_surv_time(conf_level = 0.90, conf_type = \"log-log\")\n  ) %>%\n  surv_timepoint(\n    vars = \"AVAL\",\n    var_labels = \"Months duration\",\n    is_event = \"is_event\",\n    time_point = 12,\n    control = control_surv_timepoint(conf_level = 0.975)\n  )\n\nresult <- build_table(lyt, df = adtte_f, alt_counts_df = adsl)\n\nresult\n\n                                              A: Drug X        B: Placebo     C: Combination\n                                               (N=134)          (N=134)          (N=132)    \n————————————————————————————————————————————————————————————————————————————————————————————\nResponders                                        68               73               62      \n  Responders with subsequent event (%)        33 (48.5%)       51 (69.9%)       53 (85.5%)  \n    Earliest contributing event                                                             \n      Death                                       14               20               25      \n      Disease Progression                         19               31               28      \n  Responders without subsequent event (%)     35 (51.5%)       22 (30.1%)       9 (14.5%)   \nDuration of response (Months)                                                               \n  Median                                         23.8             11.1             6.6      \n  90% CI                                     (17.9, 30.2)     (9.1, 14.0)       (4.4, 8.0)  \n  25% and 75%-ile                             9.3, 44.3        6.2, 20.5        3.0, 15.7   \n  Range (censored)                           1.6 to 64.5      0.1 to 43.8      0.2 to 39.6  \n  Range (event)                              0.3 to 44.3      0.6 to 61.9      0.2 to 53.8  \n12 Months duration                                                                          \n  Patients remaining at risk                      28               25               18      \n  Event Free Rate (%)                           63.41            43.82            33.72     \n  97.5% CI                                  (48.63, 78.19)   (29.48, 58.16)   (19.49, 47.94)\n\n\n\n\n\nCodelyt <- basic_table(show_colcounts = TRUE) %>%\n  split_cols_by(var = \"ARM\", ref_group = \"A: Drug X\") %>%\n  count_values(\n    vars = \"USUBJID\",\n    values = unique(adtte$USUBJID),\n    .labels = \"Responders\",\n    .stats = \"count\"\n  ) %>%\n  summarize_vars(\n    vars = \"is_event\",\n    .stats = \"count_fraction\",\n    .labels = c(count_fraction = \"Responders with subsequent event (%)\"),\n    .indent_mods = c(count_fraction = 1L),\n    show_labels = \"hidden\",\n  ) %>%\n  split_rows_by(\n    \"EVNT1\",\n    split_label = \"Earliest contributing event\",\n    split_fun = keep_split_levels(\"Responders with subsequent event (%)\"),\n    label_pos = \"visible\",\n    child_labels = \"hidden\",\n    indent_mod = 2L,\n  ) %>%\n  split_rows_by(\"EVNTDESC\", split_fun = drop_split_levels) %>%\n  summarize_row_groups(format = \"xx\") %>%\n  summarize_vars(\n    vars = \"is_not_event\",\n    .stats = \"count_fraction\",\n    .labels = c(count_fraction = \"Responders without subsequent event (%)\"),\n    .indent_mods = c(count_fraction = 1L),\n    nested = FALSE,\n    show_labels = \"hidden\"\n  ) %>%\n  surv_time(\n    vars = \"AVAL\",\n    var_labels = \"Duration of response (Months)\",\n    is_event = \"is_event\"\n  ) %>%\n  surv_timepoint(\n    vars = \"AVAL\",\n    var_labels = \"Months duration\",\n    is_event = \"is_event\",\n    time_point = 6\n  )\n\nresult <- build_table(lyt, df = adtte_f, alt_counts_df = adsl)\n\nresult\n\n                                              A: Drug X        B: Placebo     C: Combination\n                                               (N=134)          (N=134)          (N=132)    \n————————————————————————————————————————————————————————————————————————————————————————————\nResponders                                        68               73               62      \n  Responders with subsequent event (%)        33 (48.5%)       51 (69.9%)       53 (85.5%)  \n    Earliest contributing event                                                             \n      Death                                       14               20               25      \n      Disease Progression                         19               31               28      \n  Responders without subsequent event (%)     35 (51.5%)       22 (30.1%)       9 (14.5%)   \nDuration of response (Months)                                                               \n  Median                                         23.8             11.1             6.6      \n  95% CI                                     (17.9, 39.6)     (8.3, 14.6)       (4.4, 9.2)  \n  25% and 75%-ile                             9.3, 44.3        6.2, 20.5        3.0, 15.7   \n  Range (censored)                           1.6 to 64.5      0.1 to 43.8      0.2 to 39.6  \n  Range (event)                              0.3 to 44.3      0.6 to 61.9      0.2 to 53.8  \n6 Months duration                                                                           \n  Patients remaining at risk                      51               48               28      \n  Event Free Rate (%)                           83.63            76.14            50.57     \n  95% CI                                    (74.78, 92.48)   (65.92, 86.35)   (37.68, 63.46)\n\n\n\n\n\nCodelibrary(scda)\nlibrary(teal.modules.clinical)\nlibrary(tern)\n\nADSL <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\")\nADTTE <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adtte\")\n\n# Ensure character variables are converted to factors and empty strings and NAs are explicit missing levels.\nADSL <- df_explicit_na(ADSL)\nADTTE <- df_explicit_na(ADTTE)\n\narm_ref_comp <- list(\n  ACTARMCD = list(\n    ref = \"ARM B\",\n    comp = c(\"ARM A\", \"ARM C\")\n  ),\n  ARM = list(\n    ref = \"B: Placebo\",\n    comp = c(\"A: Drug X\", \"C: Combination\")\n  )\n)\n\napp <- init(\n  data = cdisc_data(\n    cdisc_dataset(\"ADSL\", ADSL, code = 'ADSL <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adsl\") %>% df_explicit_na()'),\n    cdisc_dataset(\"ADTTE\", ADTTE, code = 'ADTTE <- synthetic_cdisc_dataset(\"rcd_2022_10_13\", \"adtte\") %>% df_explicit_na()'),\n    check = TRUE\n  ),\n  modules = modules(\n    tm_t_tte(\n      label = \"Time To Event Table\",\n      dataname = \"ADTTE\",\n      arm_var = choices_selected(\n        variable_choices(ADSL, c(\"ARM\", \"ARMCD\", \"ACTARMCD\")),\n        \"ARM\"\n      ),\n      arm_ref_comp = arm_ref_comp,\n      paramcd = choices_selected(\n        value_choices(ADTTE, \"PARAMCD\", \"PARAM\"),\n        \"CRSD\"\n      ),\n      strata_var = choices_selected(\n        variable_choices(ADSL, c(\"SEX\", \"BMRKR2\")),\n        \"SEX\"\n      ),\n      time_points = choices_selected(c(6, 8), 6),\n      event_desc_var = choices_selected(\n        variable_choices(ADTTE, \"EVNTDESC\"),\n        \"EVNTDESC\",\n        fixed = TRUE\n      )\n    )\n  )\n)\n\n[INFO] 2023-03-10 05:53:52.4222 pid:8554 token:[] teal.modules.clinical Initializing tm_t_tte\n\nCodeshinyApp(app$ui, app$server)\n\n\n\n\n\n\nSession Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n [1] teal.modules.clinical_0.8.14.9026 teal_0.12.0.9023                 \n [3] teal.transform_0.2.0.9011         teal.data_0.1.2.9013             \n [5] shiny_1.7.4                       dplyr_1.1.0                      \n [7] tern_0.7.10.9056                  rtables_0.6.0.1                  \n [9] formatters_0.4.0                  magrittr_2.0.3                   \n[11] scda_0.1.5.9009                  \n\nloaded via a namespace (and not attached):\n [1] sass_0.4.5               tidyr_1.3.0              jsonlite_1.8.4          \n [4] splines_4.2.2            R.utils_2.12.2           bslib_0.4.2             \n [7] teal.slice_0.2.0.9026    Rdpack_2.4               assertthat_0.2.1        \n[10] teal.code_0.3.0.9001     tern.gee_0.1.0.9002      yaml_2.3.7              \n[13] pillar_1.8.1             backports_1.4.1          lattice_0.20-45         \n[16] glue_1.6.2               teal.widgets_0.2.0.9024  digest_0.6.31           \n[19] promises_1.2.0.1         rbibutils_2.2.13         checkmate_2.1.0         \n[22] colorspace_2.1-0         R.oo_1.25.0              htmltools_0.5.4         \n[25] httpuv_1.6.9             Matrix_1.5-3             pkgconfig_2.0.3         \n[28] broom_1.0.3              logger_0.2.2             purrr_1.0.1             \n[31] xtable_1.8-4             mvtnorm_1.1-3            webshot_0.5.4           \n[34] scales_1.2.1             processx_3.8.0           fontawesome_0.5.0       \n[37] later_1.3.0              emmeans_1.8.4-1          tibble_3.1.8            \n[40] styler_1.9.1             generics_0.1.3           ggplot2_3.4.1           \n[43] ellipsis_0.3.2           shinyvalidate_0.1.2      cachem_1.0.7            \n[46] withr_2.5.0              shinyjs_2.1.0            geepack_1.3.9           \n[49] cli_3.6.0                survival_3.5-3           mime_0.12               \n[52] memoise_2.0.1            ps_1.7.2                 estimability_1.4.1      \n[55] evaluate_0.20            R.methodsS3_1.8.2        fansi_1.0.4             \n[58] R.cache_0.16.0           nlme_3.1-162             MASS_7.3-58.3           \n[61] forcats_1.0.0            teal.reporter_0.1.1.9013 tools_4.2.2             \n[64] lifecycle_1.0.3          munsell_0.5.0            callr_3.7.3             \n[67] compiler_4.2.2           jquerylib_0.1.4          rlang_1.0.6             \n[70] grid_4.2.2               htmlwidgets_1.6.1        rmarkdown_2.20          \n[73] shinyWidgets_0.7.6       gtable_0.3.1             codetools_0.2-19        \n[76] teal.logger_0.1.1.9004   R6_2.5.1                 knitr_1.42              \n[79] fastmap_1.1.1            utf8_1.2.3               Rcpp_1.0.10             \n[82] vctrs_0.5.2              tidyselect_1.2.0         xfun_0.37               \n[85] coda_0.19-4             \n\n\n\nrenv.lock file\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R                       [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/tables/efficacy/dort01.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "si.html",
    "href": "si.html",
    "title": "TLG Catalog",
    "section": "",
    "text": "CodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nloaded via a namespace (and not attached):\n [1] htmlwidgets_1.6.1 compiler_4.2.2    fastmap_1.1.1     cli_3.6.0        \n [5] tools_4.2.2       htmltools_0.5.4   yaml_2.3.7        rmarkdown_2.20   \n [9] knitr_1.42        xfun_0.37         digest_0.6.31     jsonlite_1.8.4   \n[13] rlang_1.0.6       evaluate_0.20    \n\n\n\n\nCodeparent_file_path <- knitr::current_input(dir = TRUE)\nlock_path <- file.path(\"../../assets/www/lock\", paste0(gsub(file.path(Sys.getenv(\"QUARTO_PROJECT_DIR\"), \"\"), \"\", knitr::current_input(dir = TRUE)), \".lock\"))\n\nrenv::snapshot(parent_file_path, lockfile = lock_path, prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R           [* -> 4.2.2]\n\n* Lockfile written to '../../assets/www/lock/si.rmarkdown.lock'.\n\n\nDownload"
  },
  {
    "objectID": "index.html#introduction",
    "href": "index.html#introduction",
    "title": "TLG Catalog",
    "section": "Introduction",
    "text": "Introduction\nA catalog of Tables, Listings, and Graphs output produced by NEST tools.\nSee the full index of available TLG templates on the Index page."
  },
  {
    "objectID": "index.html#license",
    "href": "index.html#license",
    "title": "TLG Catalog",
    "section": "License",
    "text": "License\nThis catalog as well as code examples are licensed under the Apache License, Version 2.0."
  },
  {
    "objectID": "NEWS.html",
    "href": "NEWS.html",
    "title": "TLG Catalog",
    "section": "",
    "text": "tlg-catalog 0.1.0.9009\n\nThe TLG Catalog is here!"
  },
  {
    "objectID": "appendix/session.html#session-info",
    "href": "appendix/session.html#session-info",
    "title": "Session Info",
    "section": "Session Info",
    "text": "Session Info\n\nCodesessionInfo()\n\nR version 4.2.2 (2022-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nloaded via a namespace (and not attached):\n [1] htmlwidgets_1.6.1 compiler_4.2.2    fastmap_1.1.1     cli_3.6.0        \n [5] tools_4.2.2       htmltools_0.5.4   yaml_2.3.7        rmarkdown_2.20   \n [9] knitr_1.42        xfun_0.37         digest_0.6.31     jsonlite_1.8.4   \n[13] rlang_1.0.6       evaluate_0.20"
  },
  {
    "objectID": "appendix/session.html#renv.lock-file",
    "href": "appendix/session.html#renv.lock-file",
    "title": "Session Info",
    "section": "\nrenv.lock file",
    "text": "renv.lock file\n\nCoderenv::snapshot(\"..\", lockfile = \"../assets/www/renv.lock\", prompt = FALSE, force = TRUE)\n\nThe version of R recorded in the lockfile will be updated:\n- R                       [* -> 4.2.2]\n\n* Lockfile written to '../assets/www/renv.lock'.\n\n\nDownload"
  }
]